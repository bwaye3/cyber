 /**
  * $Desc
  *
  * @author     Gavias <gaviasthemes@gmail.com>
  * @copyright  Copyright (C) 2015. All Rights Reserved.
  * @license    GNU/GPL v2 or later http://www.gnu.org/licenses/gpl-2.0.html
  * @addition this license does not allow theme provider using in themes to sell on marketplaces.
  * 
  */
!function(e){function t(t,i){this.element=t,this.options=e.extend({},n,i),this._defaults=n,this._name=r}var r="serializeObject",n={requiredFormat:{}};t.prototype.toJsonObject=function(){var t=this,r=t.replaceEmptyBracketWithNumericBracket(e(t.element).serializeArray()),n=t.options.requiredFormat;return e.each(r,function(r,i){var a=i.name.replace(/]/g,"").split("["),o=t.stringArrayKeyToVariable(a,i.value);n=e.extend(!0,{},n,o)}),n},t.prototype.replaceEmptyBracketWithNumericBracket=function(t){var r={},n=t;return e.each(n,function(e,t){var i=t.name,a=i.indexOf("[]");a>-1&&(r[i]="undefined"==typeof r[i]?0:++r[i],n[e].name=t.name.replace("[]","["+r[i]+"]"))}),n},t.prototype.stringArrayKeyToVariable=function(e,t){var r,n=this;if(e.length>0){var i=e.shift().trim();r=isNaN(i)&&""!=i?{}:[],r[i]=e.length>0?n.stringArrayKeyToVariable(e,t):t}return r},e.fn[r]=function(e){return new t(this,e).toJsonObject()}}(jQuery,window,document);

!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n.w={},n(n.s=16)}([function(e,t,n){var r;!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,i){"use strict";var o=[],a=n.document,s=Object.getPrototypeOf,u=o.slice,l=o.concat,c=o.push,f=o.indexOf,d={},h=d.toString,p=d.hasOwnProperty,m=p.toString,g=m.call(Object),v={},b=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},y=function(e){return null!=e&&e===e.window},w={type:!0,src:!0,noModule:!0};function x(e,t,n){var r,i=(t=t||a).createElement("script");if(i.text=e,n)for(r in w)n[r]&&(i[r]=n[r]);t.head.appendChild(i).parentNode.removeChild(i)}function C(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[h.call(e)]||"object":typeof e}var _=function(e,t){return new _.fn.init(e,t)},S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function T(e){var t=!!e&&"length"in e&&e.length,n=C(e);return!b(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}_.fn=_.prototype={jquery:"3.3.1",constructor:_,length:0,toArray:function(){return u.call(this)},get:function(e){return null==e?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=_.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return _.each(this,e)},map:function(e){return this.pushStack(_.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},_.extend=_.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||b(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(_.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&_.isPlainObject(n)?n:{},a[t]=_.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},_.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e)||(t=s(e))&&("function"!=typeof(n=p.call(t,"constructor")&&t.constructor)||m.call(n)!==g))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){x(e)},each:function(e,t){var n,r=0;if(T(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(T(Object(e))?_.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:f.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(T(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return l.apply([],a)},guid:1,support:v}),"function"==typeof Symbol&&(_.fn[Symbol.iterator]=o[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){d["[object "+t+"]"]=t.toLowerCase()});var k=function(e){var t,n,r,i,o,a,s,u,l,c,f,d,h,p,m,g,v,b,y,w="sizzle"+1*new Date,x=e.document,C=0,_=0,S=ae(),T=ae(),k=ae(),E=function(e,t){return e===t&&(f=!0),0},N={}.hasOwnProperty,A=[],R=A.pop,O=A.push,D=A.push,P=A.slice,I=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+M+"*("+L+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+M+"*\\]",H=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",z=new RegExp(M+"+","g"),j=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),W=new RegExp("^"+M+"*,"+M+"*"),U=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),$=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),q=new RegExp(H),V=new RegExp("^"+L+"$"),X={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){d()},ie=be(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{D.apply(A=P.call(x.childNodes),x.childNodes),A[x.childNodes.length].nodeType}catch(e){D={apply:A.length?function(e,t){O.apply(e,P.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,f,p,v,b=t&&t.ownerDocument,C=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==C&&9!==C&&11!==C)return r;if(!i&&((t?t.ownerDocument||t:x)!==h&&d(t),t=t||h,m)){if(11!==C&&(f=G.exec(e)))if(o=f[1]){if(9===C){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(b&&(l=b.getElementById(o))&&y(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return D.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return D.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!k[e+" "]&&(!g||!g.test(e))){if(1!==C)b=t,v=e;else if("object"!==t.nodeName.toLowerCase()){for((c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=w),s=(p=a(e)).length;s--;)p[s]="#"+c+" "+ve(p[s]);v=p.join(","),b=Q.test(e)&&me(t.parentNode)||t}if(v)try{return D.apply(r,b.querySelectorAll(v)),r}catch(e){}finally{c===w&&t.removeAttribute("id")}}}return u(e.replace(j,"$1"),t,r,i)}function ae(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function se(e){return e[w]=!0,e}function ue(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pe(e){return se(function(t){return t=+t,se(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},d=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:x;return a!==h&&9===a.nodeType&&a.documentElement?(p=(h=a).documentElement,m=!o(h),x!==h&&(i=h.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=J.test(h.getElementsByClassName),n.getById=ue(function(e){return p.appendChild(e).id=w,!h.getElementsByName||!h.getElementsByName(w).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(n.qsa=J.test(h.querySelectorAll))&&(ue(function(e){p.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+M+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||g.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=J.test(b=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=b.call(e,"*"),b.call(e,"[s!='']:x"),v.push("!=",H)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=J.test(p.compareDocumentPosition),y=t||J.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},E=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===h||e.ownerDocument===x&&y(x,e)?-1:t===h||t.ownerDocument===x&&y(x,t)?1:c?I(c,e)-I(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===h?-1:t===h?1:i?-1:o?1:c?I(c,e)-I(c,t):0;if(i===o)return ce(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?ce(a[r],s[r]):a[r]===x?-1:s[r]===x?1:0},h):h},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&d(e),t=t.replace($,"='$1']"),n.matchesSelector&&m&&!k[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var r=b.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,h,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==h&&d(e),y(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==h&&d(e);var i=r.attrHandle[t.toLowerCase()],o=i&&N.call(r.attrHandle,t.toLowerCase())?i(e,t,!m):void 0;return void 0!==o?o:n.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(E),f){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(z," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,d,h,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!u&&!s,y=!1;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&b){for(y=(h=(l=(c=(f=(d=g)[w]||(d[w]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]||[])[0]===C&&l[1])&&l[2],d=h&&g.childNodes[h];d=++h&&d&&d[m]||(y=h=0)||p.pop();)if(1===d.nodeType&&++y&&d===t){c[e]=[C,h,y];break}}else if(b&&(y=h=(l=(c=(f=(d=t)[w]||(d[w]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]||[])[0]===C&&l[1]),!1===y)for(;(d=++h&&d&&d[m]||(y=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++y||(b&&((c=(f=d[w]||(d[w]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]=[C,y]),d!==t)););return(y-=i)===r||y%r==0&&y/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=I(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(j,"$1"));return r[w]?se(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return V.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(!1),disabled:he(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[n<0?n+t:n]}),even:pe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:pe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:pe(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:pe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=de(t);function ge(){}function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=_++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,d=[C,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(c=(f=t[w]||(t[w]={}))[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===C&&l[1]===s)return d[2]=l[2];if(c[o]=d,d[2]=e(t,n,u))return!0}return!1}}function ye(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function we(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function xe(e,t,n,r,i,o){return r&&!r[w]&&(r=xe(r)),i&&!i[w]&&(i=xe(i,o)),se(function(o,a,s,u){var l,c,f,d=[],h=[],p=a.length,m=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?m:we(m,d,e,s,u),v=n?i||(o?e:p||r)?[]:a:g;if(n&&n(g,v,s,u),r)for(l=we(v,h),r(l,[],s,u),c=l.length;c--;)(f=l[c])&&(v[h[c]]=!(g[h[c]]=f));if(o){if(i||e){if(i){for(l=[],c=v.length;c--;)(f=v[c])&&l.push(g[c]=f);i(null,v=[],l,u)}for(c=v.length;c--;)(f=v[c])&&(l=i?I(o,f):d[c])>-1&&(o[l]=!(a[l]=f))}}else v=we(v===a?v.splice(p,v.length):v),i?i(null,a,v,u):D.apply(a,v)})}function Ce(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=be(function(e){return e===t},s,!0),f=be(function(e){return I(t,e)>-1},s,!0),d=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])d=[be(ye(d),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[w]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return xe(u>1&&ye(d),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(j,"$1"),n,u<i&&Ce(e.slice(u,i)),i<o&&Ce(e=e.slice(i)),i<o&&ve(e))}d.push(n)}return ye(d)}return ge.prototype=r.filters=r.pseudos,r.setFilters=new ge,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,l,c=T[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=r.preFilter;s;){for(a in n&&!(i=W.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=U.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(j," ")}),s=s.slice(n.length)),r.filter)!(i=X[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):T(e,u).slice(0)},s=oe.compile=function(e,t){var n,i=[],o=[],s=k[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Ce(t[n]))[w]?i.push(s):o.push(s);(s=k(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,p,g,v=0,b="0",y=o&&[],w=[],x=l,_=o||i&&r.find.TAG("*",c),S=C+=null==x?1:Math.random()||.1,T=_.length;for(c&&(l=a===h||a||c);b!==T&&null!=(f=_[b]);b++){if(i&&f){for(p=0,a||f.ownerDocument===h||(d(f),s=!m);g=e[p++];)if(g(f,a||h,s)){u.push(f);break}c&&(C=S)}n&&((f=!g&&f)&&v--,o&&y.push(f))}if(v+=b,n&&b!==v){for(p=0;g=t[p++];)g(y,w,a,s);if(o){if(v>0)for(;b--;)y[b]||w[b]||(w[b]=R.call(u));w=we(w)}D.apply(u,w),c&&!o&&w.length>0&&v+t.length>1&&oe.uniqueSort(u)}return c&&(C=S,l=x),y};return n?se(o):o}(o,i))).selector=e}return s},u=oe.select=function(e,t,n,i){var o,u,l,c,f,d="function"==typeof e&&e,h=!i&&a(e=d.selector||e);if(n=n||[],1===h.length){if((u=h[0]=h[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&m&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(Z,ee),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(o=X.needsContext.test(e)?0:u.length;o--&&(l=u[o],!r.relative[c=l.type]);)if((f=r.find[c])&&(i=f(l.matches[0].replace(Z,ee),Q.test(u[0].type)&&me(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&ve(u)))return D.apply(n,i),n;break}}return(d||s(e,h))(i,t,!m,n,!t||Q.test(e)&&me(t.parentNode)||t),n},n.sortStable=w.split("").sort(E).join("")===w,n.detectDuplicates=!!f,d(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||le(B,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(n);_.find=k,_.expr=k.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=k.uniqueSort,_.text=k.getText,_.isXMLDoc=k.isXML,_.contains=k.contains,_.escapeSelector=k.escape;var E=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&_(e).is(n))break;r.push(e)}return r},N=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},A=_.expr.match.needsContext;function R(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,t,n){return b(t)?_.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?_.grep(e,function(e){return e===t!==n}):"string"!=typeof t?_.grep(e,function(e){return f.call(t,e)>-1!==n}):_.filter(t,e,n)}_.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?_.find.matchesSelector(r,e)?[r]:[]:_.find.matches(e,_.grep(t,function(e){return 1===e.nodeType}))},_.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(_(e).filter(function(){for(t=0;t<r;t++)if(_.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)_.find(e,i[t],n);return r>1?_.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&A.test(e)?_(e):e||[],!1).length}});var P,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(_.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||P,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:I.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof _?t[0]:t,_.merge(this,_.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:a,!0)),O.test(r[1])&&_.isPlainObject(t))for(r in t)b(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=a.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):b(e)?void 0!==n.ready?n.ready(e):e(_):_.makeArray(e,this)}).prototype=_.fn,P=_(a);var B=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function L(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}_.fn.extend({has:function(e){var t=_(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(_.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&_(e);if(!A.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&_.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?_.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?f.call(_(e),this[0]):f.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),_.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return E(e,"parentNode")},parentsUntil:function(e,t,n){return E(e,"parentNode",n)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return E(e,"nextSibling")},prevAll:function(e){return E(e,"previousSibling")},nextUntil:function(e,t,n){return E(e,"nextSibling",n)},prevUntil:function(e,t,n){return E(e,"previousSibling",n)},siblings:function(e){return N((e.parentNode||{}).firstChild,e)},children:function(e){return N(e.firstChild)},contents:function(e){return R(e,"iframe")?e.contentDocument:(R(e,"template")&&(e=e.content||e),_.merge([],e.childNodes))}},function(e,t){_.fn[e]=function(n,r){var i=_.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=_.filter(r,i)),this.length>1&&(M[e]||_.uniqueSort(i),B.test(e)&&i.reverse()),this.pushStack(i)}});var F=/[^\x20\t\r\n\f]+/g;function H(e){return e}function z(e){throw e}function j(e,t,n,r){var i;try{e&&b(i=e.promise)?i.call(e).done(t).fail(n):e&&b(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}_.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return _.each(e.match(F)||[],function(e,n){t[n]=!0}),t}(e):_.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){_.each(n,function(n,r){b(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==C(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return _.each(arguments,function(e,t){for(var n;(n=_.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?_.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},_.extend({Deferred:function(e){var t=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return _.Deferred(function(n){_.each(t,function(t,r){var i=b(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&b(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,r,i){var o=0;function a(e,t,r,i){return function(){var s=this,u=arguments,l=function(){var n,l;if(!(e<o)){if((n=r.apply(s,u))===t.promise())throw new TypeError("Thenable self-resolution");l=n&&("object"==typeof n||"function"==typeof n)&&n.then,b(l)?i?l.call(n,a(o,t,H,i),a(o,t,z,i)):(o++,l.call(n,a(o,t,H,i),a(o,t,z,i),a(o,t,H,t.notifyWith))):(r!==H&&(s=void 0,u=[n]),(i||t.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(n){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(n,c.stackTrace),e+1>=o&&(r!==z&&(s=void 0,u=[n]),t.rejectWith(s,u))}};e?c():(_.Deferred.getStackHook&&(c.stackTrace=_.Deferred.getStackHook()),n.setTimeout(c))}}return _.Deferred(function(n){t[0][3].add(a(0,n,b(i)?i:H,n.notifyWith)),t[1][3].add(a(0,n,b(e)?e:H)),t[2][3].add(a(0,n,b(r)?r:z))}).promise()},promise:function(e){return null!=e?_.extend(e,i):i}},o={};return _.each(t,function(e,n){var a=n[2],s=n[5];i[n[1]]=a.add,s&&a.add(function(){r=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=u.call(arguments),o=_.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?u.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(j(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||b(i[n]&&i[n].then)))return o.then();for(;n--;)j(i[n],a(n),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&W.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},_.readyException=function(e){n.setTimeout(function(){throw e})};var U=_.Deferred();function $(){a.removeEventListener("DOMContentLoaded",$),n.removeEventListener("load",$),_.ready()}_.fn.ready=function(e){return U.then(e).catch(function(e){_.readyException(e)}),this},_.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--_.readyWait:_.isReady)||(_.isReady=!0,!0!==e&&--_.readyWait>0||U.resolveWith(a,[_]))}}),_.ready.then=U.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?n.setTimeout(_.ready):(a.addEventListener("DOMContentLoaded",$),n.addEventListener("load",$));var q=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===C(n))for(s in i=!0,n)q(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,b(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(_(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},V=/^-ms-/,X=/-([a-z])/g;function Y(e,t){return t.toUpperCase()}function K(e){return e.replace(V,"ms-").replace(X,Y)}var J=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=_.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},J(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[K(t)]=n;else for(r in t)i[K(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][K(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(K):(t=K(t))in r?[t]:t.match(F)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||_.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!_.isEmptyObject(t)}};var Q=new G,Z=new G,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}Z.set(e,t,n)}else n=void 0;return n}_.extend({hasData:function(e){return Z.hasData(e)||Q.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),_.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Z.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=K(r.slice(5)),ne(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Z.set(this,e)}):q(this,function(t){var n;if(o&&void 0===t)return void 0!==(n=Z.get(o,e))?n:void 0!==(n=ne(o,e))?n:void 0;this.each(function(){Z.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Z.remove(this,e)})}}),_.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,_.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=_.queue(e,t),r=n.length,i=n.shift(),o=_._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){_.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:_.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),_.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?_.queue(this[0],e):void 0===t?this:this.each(function(){var n=_.queue(this,e,t);_._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&_.dequeue(this,e)})},dequeue:function(e){return this.each(function(){_.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=_.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&_.contains(e.ownerDocument,e)&&"none"===_.css(e,"display")},se=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return _.css(e,t,"")},u=s(),l=n&&n[3]||(_.cssNumber[t]?"":"px"),c=(_.cssNumber[t]||"px"!==l&&+u)&&ie.exec(_.css(e,t));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;a--;)_.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,_.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=_.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=Q.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ce(r))):"none"!==n&&(i[o]="none",Q.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}_.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?_(this).show():_(this).hide()})}});var de=/^(?:checkbox|radio)$/i,he=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,pe=/^$|^module$|\/(?:java|ecma)script/i,me={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ge(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&R(e,t)?_.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}me.optgroup=me.option,me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td;var be,ye,we=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),d=[],h=0,p=e.length;h<p;h++)if((o=e[h])||0===o)if("object"===C(o))_.merge(d,o.nodeType?[o]:o);else if(we.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(he.exec(o)||["",""])[1].toLowerCase(),u=me[s]||me._default,a.innerHTML=u[1]+_.htmlPrefilter(o)+u[2],c=u[0];c--;)a=a.lastChild;_.merge(d,a.childNodes),(a=f.firstChild).textContent=""}else d.push(t.createTextNode(o));for(f.textContent="",h=0;o=d[h++];)if(r&&_.inArray(o,r)>-1)i&&i.push(o);else if(l=_.contains(o.ownerDocument,o),a=ge(f.appendChild(o),"script"),l&&ve(a),n)for(c=0;o=a[c++];)pe.test(o.type||"")&&n.push(o);return f}be=a.createDocumentFragment().appendChild(a.createElement("div")),(ye=a.createElement("input")).setAttribute("type","radio"),ye.setAttribute("checked","checked"),ye.setAttribute("name","t"),be.appendChild(ye),v.checkClone=be.cloneNode(!0).cloneNode(!0).lastChild.checked,be.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!be.cloneNode(!0).lastChild.defaultValue;var Ce=a.documentElement,_e=/^key/,Se=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Ee(){return!1}function Ne(){try{return a.activeElement}catch(e){}}function Ae(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return _().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=_.guid++)),e.each(function(){_.event.add(this,t,i,r,n)})}_.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,d,h,p,m,g=Q.get(e);if(g)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&_.find.matchesSelector(Ce,i),n.guid||(n.guid=_.guid++),(u=g.events)||(u=g.events={}),(a=g.handle)||(a=g.handle=function(t){return void 0!==_&&_.event.triggered!==t.type?_.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(F)||[""]).length;l--;)h=m=(s=Te.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),h&&(f=_.event.special[h]||{},h=(i?f.delegateType:f.bindType)||h,f=_.event.special[h]||{},c=_.extend({type:h,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&_.expr.match.needsContext.test(i),namespace:p.join(".")},o),(d=u[h])||((d=u[h]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,p,a)||e.addEventListener&&e.addEventListener(h,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),_.event.global[h]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,d,h,p,m,g=Q.hasData(e)&&Q.get(e);if(g&&(u=g.events)){for(l=(t=(t||"").match(F)||[""]).length;l--;)if(h=m=(s=Te.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),h){for(f=_.event.special[h]||{},d=u[h=(r?f.delegateType:f.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,f.remove&&f.remove.call(e,c));a&&!d.length&&(f.teardown&&!1!==f.teardown.call(e,p,g.handle)||_.removeEvent(e,h,g.handle),delete u[h])}else for(h in u)_.event.remove(e,h+t[l],n,r,!0);_.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=_.event.fix(e),u=new Array(arguments.length),l=(Q.get(this,"events")||{})[s.type]||[],c=_.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=_.event.handlers.call(this,s,l),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((_.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?_(i,this).index(l)>-1:_.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(_.Event.prototype,e,{enumerable:!0,configurable:!0,get:b(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[_.expando]?e:new _.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ne()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ne()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&R(this,"input"))return this.click(),!1},_default:function(e){return R(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},_.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},_.Event=function(e,t){if(!(this instanceof _.Event))return new _.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&_.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Se.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},_.event.addProp),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){_.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||_.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),_.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,_(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){_.event.remove(this,e,n,t)})}});var Re=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Oe=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ie(e,t){return R(e,"table")&&R(11!==t.nodeType?t:t.firstChild,"tr")&&_(e).children("tbody")[0]||e}function Be(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Me(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),a=Q.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)_.event.add(t,i,l[i][n]);Z.hasData(e)&&(s=Z.access(e),u=_.extend({},s),Z.set(t,u))}}function Fe(e,t,n,r){t=l.apply([],t);var i,o,a,s,u,c,f=0,d=e.length,h=d-1,p=t[0],m=b(p);if(m||d>1&&"string"==typeof p&&!v.checkClone&&De.test(p))return e.each(function(i){var o=e.eq(i);m&&(t[0]=p.call(this,i,o.html())),Fe(o,t,n,r)});if(d&&(o=(i=xe(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=_.map(ge(i,"script"),Be)).length;f<d;f++)u=i,f!==h&&(u=_.clone(u,!0,!0),s&&_.merge(a,ge(u,"script"))),n.call(e[f],u,f);if(s)for(c=a[a.length-1].ownerDocument,_.map(a,Me),f=0;f<s;f++)u=a[f],pe.test(u.type||"")&&!Q.access(u,"globalEval")&&_.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?_._evalUrl&&_._evalUrl(u.src):x(u.textContent.replace(Pe,""),c,u))}return e}function He(e,t,n){for(var r,i=t?_.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||_.cleanData(ge(r)),r.parentNode&&(n&&_.contains(r.ownerDocument,r)&&ve(ge(r,"script")),r.parentNode.removeChild(r));return e}_.extend({htmlPrefilter:function(e){return e.replace(Re,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=_.contains(e.ownerDocument,e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||_.isXMLDoc(e)))for(a=ge(c),r=0,i=(o=ge(e)).length;r<i;r++)s=o[r],"input"===(l=(u=a[r]).nodeName.toLowerCase())&&de.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ge(e),a=a||ge(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return(a=ge(c,"script")).length>0&&ve(a,!f&&ge(e,"script")),c},cleanData:function(e){for(var t,n,r,i=_.event.special,o=0;void 0!==(n=e[o]);o++)if(J(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?_.event.remove(n,r):_.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),_.fn.extend({detach:function(e){return He(this,e,!0)},remove:function(e){return He(this,e)},text:function(e){return q(this,function(e){return void 0===e?_.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Fe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ie(this,e).appendChild(e)})},prepend:function(){return Fe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ie(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Fe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Fe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(_.cleanData(ge(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return _.clone(this,e,t)})},html:function(e){return q(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!me[(he.exec(e)||["",""])[1].toLowerCase()]){e=_.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(_.cleanData(ge(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Fe(this,arguments,function(t){var n=this.parentNode;_.inArray(this,e)<0&&(_.cleanData(ge(this)),n&&n.replaceChild(t,this))},e)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){_.fn[e]=function(e){for(var n,r=[],i=_(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),_(i[a])[t](n),c.apply(r,n.get());return this.pushStack(r)}});var ze=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),je=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},We=new RegExp(oe.join("|"),"i");function Ue(e,t,n){var r,i,o,a,s=e.style;return(n=n||je(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||_.contains(e.ownerDocument,e)||(a=_.style(e,t)),!v.pixelBoxStyles()&&ze.test(a)&&We.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ce.appendChild(l).appendChild(c);var e=n.getComputedStyle(c);r="1%"!==e.top,u=12===t(e.marginLeft),c.style.right="60%",s=36===t(e.right),i=36===t(e.width),c.style.position="absolute",o=36===c.offsetWidth||"absolute",Ce.removeChild(l),c=null}}function t(e){return Math.round(parseFloat(e))}var r,i,o,s,u,l=a.createElement("div"),c=a.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,_.extend(v,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),o}}))}();var qe=/^(none|table(?!-c[ea]).+)/,Ve=/^--/,Xe={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Ke=["Webkit","Moz","ms"],Je=a.createElement("div").style;function Ge(e){var t=_.cssProps[e];return t||(t=_.cssProps[e]=function(e){if(e in Je)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ke.length;n--;)if((e=Ke[n]+t)in Je)return e}(e)||e),t}function Qe(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=_.css(e,n+oe[a],!0,i)),r?("content"===n&&(u-=_.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(u-=_.css(e,"border"+oe[a]+"Width",!0,i))):(u+=_.css(e,"padding"+oe[a],!0,i),"padding"!==n?u+=_.css(e,"border"+oe[a]+"Width",!0,i):s+=_.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))),u}function et(e,t,n){var r=je(e),i=Ue(e,t,r),o="border-box"===_.css(e,"boxSizing",!1,r),a=o;if(ze.test(i)){if(!n)return i;i="auto"}return a=a&&(v.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===_.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ze(e,t,n||(o?"border":"content"),a,r,i)+"px"}function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}_.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ue(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=K(t),u=Ve.test(t),l=e.style;if(u||(t=Ge(s)),a=_.cssHooks[t]||_.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"==(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(_.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=K(t);return Ve.test(t)||(t=Ge(s)),(a=_.cssHooks[t]||_.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ue(e,t,r)),"normal"===i&&t in Ye&&(i=Ye[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),_.each(["height","width"],function(e,t){_.cssHooks[t]={get:function(e,n,r){if(n)return!qe.test(_.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):se(e,Xe,function(){return et(e,t,r)})},set:function(e,n,r){var i,o=je(e),a="border-box"===_.css(e,"boxSizing",!1,o),s=r&&Ze(e,t,r,a,o);return a&&v.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,"border",!1,o)-.5)),s&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=_.css(e,t)),Qe(0,n,s)}}}),_.cssHooks.marginLeft=$e(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ue(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(e,t){_.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(_.cssHooks[e+t].set=Qe)}),_.fn.extend({css:function(e,t){return q(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=je(e),i=t.length;a<i;a++)o[t[a]]=_.css(e,t[a],!1,r);return o}return void 0!==n?_.style(e,t,n):_.css(e,t)},e,t,arguments.length>1)}}),_.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||_.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(_.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=_.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=_.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){_.fx.step[e.prop]?_.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[_.cssProps[e.prop]]&&!_.cssHooks[e.prop]?e.elem[e.prop]=e.now:_.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},_.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},_.fx=tt.prototype.init,_.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===a.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(at):n.setTimeout(at,_.fx.interval),_.fx.tick())}function st(){return n.setTimeout(function(){nt=void 0}),nt=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(ct.tweeners[t]||[]).concat(ct.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ct(e,t,n){var r,i,o=0,a=ct.prefilters.length,s=_.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=nt||st(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:_.extend({},t),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=_.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=K(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=_.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);o<a;o++)if(r=ct.prefilters[o].call(l,e,c,l.opts))return b(r.stop)&&(_._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return _.map(c,lt,l),b(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),_.fx.timer(_.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}_.Animation=_.extend(ct,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){b(e)?(t=e,e=["*"]):e=e.match(F);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ct.tweeners[n]=ct.tweeners[n]||[],ct.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,d=this,h={},p=e.style,m=e.nodeType&&ae(e),g=Q.get(e,"fxshow");for(r in n.queue||(null==(a=_._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,_.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],it.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}h[r]=g&&g[r]||_.style(e,r)}if((u=!_.isEmptyObject(t))||!_.isEmptyObject(h))for(r in f&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=g&&g.display)&&(l=Q.get(e,"display")),"none"===(c=_.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=_.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===_.css(e,"float")&&(u||(d.done(function(){p.display=l}),null==l&&(c=p.display,l="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1,h)u||(g?"hidden"in g&&(m=g.hidden):g=Q.access(e,"fxshow",{display:l}),o&&(g.hidden=!m),m&&fe([e],!0),d.done(function(){for(r in m||fe([e]),Q.remove(e,"fxshow"),h)_.style(e,r,h[r])})),u=lt(m?g[r]:0,r,d),r in g||(g[r]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ct.prefilters.unshift(e):ct.prefilters.push(e)}}),_.speed=function(e,t,n){var r=e&&"object"==typeof e?_.extend({},e):{complete:n||!n&&t||b(e)&&e,duration:e,easing:n&&t||t&&!b(t)&&t};return _.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in _.fx.speeds?r.duration=_.fx.speeds[r.duration]:r.duration=_.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){b(r.old)&&r.old.call(this),r.queue&&_.dequeue(this,r.queue)},r},_.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=_.isEmptyObject(e),o=_.speed(t,n,r),a=function(){var t=ct(this,_.extend({},e),o);(i||Q.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=_.timers,a=Q.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||_.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Q.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=_.timers,a=r?r.length:0;for(n.finish=!0,_.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),_.each(["toggle","show","hide"],function(e,t){var n=_.fn[t];_.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}}),_.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){_.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),_.timers=[],_.fx.tick=function(){var e,t=0,n=_.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||_.fx.stop(),nt=void 0},_.fx.timer=function(e){_.timers.push(e),_.fx.start()},_.fx.interval=13,_.fx.start=function(){rt||(rt=!0,at())},_.fx.stop=function(){rt=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(e,t){return e=_.fx&&_.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}})},function(){var e=a.createElement("input"),t=a.createElement("select").appendChild(a.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=a.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var ft,dt=_.expr.attrHandle;_.fn.extend({attr:function(e,t){return q(this,_.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){_.removeAttr(this,e)})}}),_.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?_.prop(e,t,n):(1===o&&_.isXMLDoc(e)||(i=_.attrHooks[t.toLowerCase()]||(_.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void _.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=_.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&R(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(F);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?_.removeAttr(e,n):e.setAttribute(n,n),n}},_.each(_.expr.match.bool.source.match(/\w+/g),function(e,t){var n=dt[t]||_.find.attr;dt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=dt[a],dt[a]=i,i=null!=n(e,t,r)?a:null,dt[a]=o),i}});var ht=/^(?:input|select|textarea|button)$/i,pt=/^(?:a|area)$/i;function mt(e){return(e.match(F)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(F)||[]}_.fn.extend({prop:function(e,t){return q(this,_.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[_.propFix[e]||e]})}}),_.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&_.isXMLDoc(e)||(t=_.propFix[t]||t,i=_.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=_.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(_.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this}),_.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(b(e))return this.each(function(t){_(this).addClass(e.call(this,t,gt(this)))});if((t=vt(e)).length)for(;n=this[u++];)if(i=gt(n),r=1===n.nodeType&&" "+mt(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(b(e))return this.each(function(t){_(this).removeClass(e.call(this,t,gt(this)))});if(!arguments.length)return this.attr("class","");if((t=vt(e)).length)for(;n=this[u++];)if(i=gt(n),r=1===n.nodeType&&" "+mt(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):b(e)?this.each(function(n){_(this).toggleClass(e.call(this,n,gt(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=_(this),a=vt(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=gt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+mt(gt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;_.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=b(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,_(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=_.map(i,function(e){return null==e?"":e+""})),(t=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=_.valHooks[i.type]||_.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n:void 0}}),_.extend({valHooks:{option:{get:function(e){var t=_.find.attr(e,"value");return null!=t?t:mt(_.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!R(n.parentNode,"optgroup"))){if(t=_(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=_.makeArray(t),a=i.length;a--;)((r=i[a]).selected=_.inArray(_.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=_.inArray(_(e).val(),t)>-1}},v.checkOn||(_.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in n;var yt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};_.extend(_.event,{trigger:function(e,t,r,i){var o,s,u,l,c,f,d,h,m=[r||a],g=p.call(e,"type")?e.type:e,v=p.call(e,"namespace")?e.namespace.split("."):[];if(s=h=u=r=r||a,3!==r.nodeType&&8!==r.nodeType&&!yt.test(g+_.event.triggered)&&(g.indexOf(".")>-1&&(g=(v=g.split(".")).shift(),v.sort()),c=g.indexOf(":")<0&&"on"+g,(e=e[_.expando]?e:new _.Event(g,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:_.makeArray(t,[e]),d=_.event.special[g]||{},i||!d.trigger||!1!==d.trigger.apply(r,t))){if(!i&&!d.noBubble&&!y(r)){for(l=d.delegateType||g,yt.test(l+g)||(s=s.parentNode);s;s=s.parentNode)m.push(s),u=s;u===(r.ownerDocument||a)&&m.push(u.defaultView||u.parentWindow||n)}for(o=0;(s=m[o++])&&!e.isPropagationStopped();)h=s,e.type=o>1?l:d.bindType||g,(f=(Q.get(s,"events")||{})[e.type]&&Q.get(s,"handle"))&&f.apply(s,t),(f=c&&s[c])&&f.apply&&J(s)&&(e.result=f.apply(s,t),!1===e.result&&e.preventDefault());return e.type=g,i||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(m.pop(),t)||!J(r)||c&&b(r[g])&&!y(r)&&((u=r[c])&&(r[c]=null),_.event.triggered=g,e.isPropagationStopped()&&h.addEventListener(g,wt),r[g](),e.isPropagationStopped()&&h.removeEventListener(g,wt),_.event.triggered=void 0,u&&(r[c]=u)),e.result}},simulate:function(e,t,n){var r=_.extend(new _.Event,n,{type:e,isSimulated:!0});_.event.trigger(r,null,t)}}),_.fn.extend({trigger:function(e,t){return this.each(function(){_.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return _.event.trigger(e,t,n,!0)}}),v.focusin||_.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){_.event.simulate(t,e.target,_.event.fix(e))};_.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Q.access(r,t);i||r.addEventListener(e,n,!0),Q.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Q.access(r,t)-1;i?Q.access(r,t,i):(r.removeEventListener(e,n,!0),Q.remove(r,t))}}});var xt=n.location,Ct=Date.now(),_t=/\?/;_.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||_.error("Invalid XML: "+e),t};var St=/\[\]$/,Tt=/\r?\n/g,kt=/^(?:submit|button|image|reset|file)$/i,Et=/^(?:input|select|textarea|keygen)/i;function Nt(e,t,n,r){var i;if(Array.isArray(t))_.each(t,function(t,i){n||St.test(e)?r(e,i):Nt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==C(t))r(e,t);else for(i in t)Nt(e+"["+i+"]",t[i],n,r)}_.param=function(e,t){var n,r=[],i=function(e,t){var n=b(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!_.isPlainObject(e))_.each(e,function(){i(this.name,this.value)});else for(n in e)Nt(n,e[n],t,i);return r.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=_.prop(this,"elements");return e?_.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!_(this).is(":disabled")&&Et.test(this.nodeName)&&!kt.test(e)&&(this.checked||!de.test(e))}).map(function(e,t){var n=_(this).val();return null==n?null:Array.isArray(n)?_.map(n,function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}}):{name:t.name,value:n.replace(Tt,"\r\n")}}).get()}});var At=/%20/g,Rt=/#.*$/,Ot=/([?&])_=[^&]*/,Dt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,It=/^\/\//,Bt={},Mt={},Lt="*/".concat("*"),Ft=a.createElement("a");function Ht(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(F)||[];if(b(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function zt(e,t,n,r){var i={},o=e===Mt;function a(s){var u;return i[s]=!0,_.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function jt(e,t){var n,r,i=_.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&_.extend(!0,e,r),e}Ft.href=xt.href,_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Lt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?jt(jt(e,_.ajaxSettings),t):jt(_.ajaxSettings,e)},ajaxPrefilter:Ht(Bt),ajaxTransport:Ht(Mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,s,u,l,c,f,d,h,p=_.ajaxSetup({},t),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?_(m):_.event,v=_.Deferred(),b=_.Callbacks("once memory"),y=p.statusCode||{},w={},x={},C="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Dt.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||C;return r&&r.abort(t),T(0,t),this}};if(v.promise(S),p.url=((e||p.url||xt.href)+"").replace(It,xt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(F)||[""],null==p.crossDomain){l=a.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Ft.protocol+"//"+Ft.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=_.param(p.data,p.traditional)),zt(Bt,p,t,S),c)return S;for(d in(f=_.event&&p.global)&&0==_.active++&&_.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Pt.test(p.type),i=p.url.replace(Rt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(At,"+")):(h=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(_t.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Ot,"$1"),h=(_t.test(i)?"&":"?")+"_="+Ct+++h),p.url=i+h),p.ifModified&&(_.lastModified[i]&&S.setRequestHeader("If-Modified-Since",_.lastModified[i]),_.etag[i]&&S.setRequestHeader("If-None-Match",_.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Lt+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(m,S,p)||c))return S.abort();if(C="abort",b.add(p.complete),S.done(p.success),S.fail(p.error),r=zt(Mt,p,t,S)){if(S.readyState=1,f&&g.trigger("ajaxSend",[S,p]),c)return S;p.async&&p.timeout>0&&(u=n.setTimeout(function(){S.abort("timeout")},p.timeout));try{c=!1,r.send(w,T)}catch(e){if(c)throw e;T(-1,e)}}else T(-1,"No Transport");function T(e,t,a,s){var l,d,h,w,x,C=t;c||(c=!0,u&&n.clearTimeout(u),r=void 0,o=s||"",S.readyState=e>0?4:0,l=e>=200&&e<300||304===e,a&&(w=function(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(p,S,a)),w=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(p,w,S,l),l?(p.ifModified&&((x=S.getResponseHeader("Last-Modified"))&&(_.lastModified[i]=x),(x=S.getResponseHeader("etag"))&&(_.etag[i]=x)),204===e||"HEAD"===p.type?C="nocontent":304===e?C="notmodified":(C=w.state,d=w.data,l=!(h=w.error))):(h=C,!e&&C||(C="error",e<0&&(e=0))),S.status=e,S.statusText=(t||C)+"",l?v.resolveWith(m,[d,C,S]):v.rejectWith(m,[S,C,h]),S.statusCode(y),y=void 0,f&&g.trigger(l?"ajaxSuccess":"ajaxError",[S,p,l?d:h]),b.fireWith(m,[S,C]),f&&(g.trigger("ajaxComplete",[S,p]),--_.active||_.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return _.get(e,t,n,"json")},getScript:function(e,t){return _.get(e,void 0,t,"script")}}),_.each(["get","post"],function(e,t){_[t]=function(e,n,r,i){return b(n)&&(i=i||r,r=n,n=void 0),_.ajax(_.extend({url:e,type:t,dataType:i,data:n,success:r},_.isPlainObject(e)&&e))}}),_._evalUrl=function(e){return _.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},_.fn.extend({wrapAll:function(e){var t;return this[0]&&(b(e)&&(e=e.call(this[0])),t=_(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return b(e)?this.each(function(t){_(this).wrapInner(e.call(this,t))}):this.each(function(){var t=_(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b(e);return this.each(function(n){_(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(e){return!_.expr.pseudos.visible(e)},_.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},Ut=_.ajaxSettings.xhr();v.cors=!!Ut&&"withCredentials"in Ut,v.ajax=Ut=!!Ut,_.ajaxTransport(function(e){var t,r;if(v.cors||Ut&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Wt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){t&&r()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),_.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return _.globalEval(e),e}}}),_.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),_.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(r,i){t=_("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),a.head.appendChild(t[0])},abort:function(){n&&n()}}});var $t,qt=[],Vt=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=qt.pop()||_.expando+"_"+Ct++;return this[e]=!0,e}}),_.ajaxPrefilter("json jsonp",function(e,t,r){var i,o,a,s=!1!==e.jsonp&&(Vt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=b(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Vt,"$1"+i):!1!==e.jsonp&&(e.url+=(_t.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||_.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){void 0===o?_(n).removeProp(i):n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,qt.push(i)),a&&b(o)&&o(a[0]),a=o=void 0}),"script"}),v.createHTMLDocument=(($t=a.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===$t.childNodes.length),_.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,t.head.appendChild(r)):t=a),i=O.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&_(o).remove(),_.merge([],i.childNodes)));var r,i,o},_.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=mt(e.slice(s)),e=e.slice(0,s)),b(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&_.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?_("<div>").append(_.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){_.fn[t]=function(e){return this.on(t,e)}}),_.expr.pseudos.animated=function(e){return _.grep(_.timers,function(t){return e===t.elem}).length},_.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=_.css(e,"position"),c=_(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=_.css(e,"top"),u=_.css(e,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),b(t)&&(t=t.call(e,n,_.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},_.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){_.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===_.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===_.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=_(e).offset()).top+=_.css(e,"borderTopWidth",!0),i.left+=_.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-_.css(r,"marginTop",!0),left:t.left-i.left-_.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===_.css(e,"position");)e=e.offsetParent;return e||Ce})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;_.fn[e]=function(r){return q(this,function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),_.each(["top","left"],function(e,t){_.cssHooks[t]=$e(v.pixelPosition,function(e,n){if(n)return n=Ue(e,t),ze.test(n)?_(e).position()[t]+"px":n})}),_.each({Height:"height",Width:"width"},function(e,t){_.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){_.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return q(this,function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?_.css(t,n,s):_.style(t,n,i,s)},t,a?i:void 0,a)}})}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){_.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),_.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),_.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),_.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),b(e))return r=u.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(u.call(arguments)))}).guid=e.guid=e.guid||_.guid++,i},_.holdReady=function(e){e?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=R,_.isFunction=b,_.isWindow=y,_.camelCase=K,_.type=C,_.now=Date.now,_.isNumeric=function(e){var t=_.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(r=function(){return _}.apply(t,[]))||(e.exports=r);var Xt=n.jQuery,Yt=n.$;return _.noConflict=function(e){return n.$===_&&(n.$=Yt),e&&n.jQuery===_&&(n.jQuery=Xt),_},i||(n.jQuery=n.$=_),_})},function(e,t,n){var r;(function(){var n=this,i=n._,o=Array.prototype,a=Object.prototype,s=Function.prototype,u=o.push,l=o.slice,c=a.toString,f=a.hasOwnProperty,d=Array.isArray,h=Object.keys,p=s.bind,m=Object.create,g=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};void 0!==e&&e.exports&&(t=e.exports=v),t._=v,v.VERSION="1.8.3";var b=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},y=function(e,t,n){return null==e?v.identity:v.isFunction(e)?b(e,t,n):v.isObject(e)?v.matcher(e):v.property(e)};v.iteratee=function(e,t){return y(e,t,1/0)};var w=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,u=0;u<s;u++){var l=a[u];t&&void 0!==n[l]||(n[l]=o[l])}return n}},x=function(e){if(!v.isObject(e))return{};if(m)return m(e);g.prototype=e;var t=new g;return g.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},_=Math.pow(2,53)-1,S=C("length"),T=function(e){var t=S(e);return"number"==typeof t&&t>=0&&t<=_};function k(e){return function(t,n,r,i){n=b(n,i,4);var o=!T(t)&&v.keys(t),a=(o||t).length,s=e>0?0:a-1;return arguments.length<3&&(r=t[o?o[s]:s],s+=e),function(t,n,r,i,o,a){for(;o>=0&&o<a;o+=e){var s=i?i[o]:o;r=n(r,t[s],s,t)}return r}(t,n,r,o,s,a)}}v.each=v.forEach=function(e,t,n){var r,i;if(t=b(t,n),T(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=v.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},v.map=v.collect=function(e,t,n){t=y(t,n);for(var r=!T(e)&&v.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o},v.reduce=v.foldl=v.inject=k(1),v.reduceRight=v.foldr=k(-1),v.find=v.detect=function(e,t,n){var r;if(void 0!==(r=T(e)?v.findIndex(e,t,n):v.findKey(e,t,n))&&-1!==r)return e[r]},v.filter=v.select=function(e,t,n){var r=[];return t=y(t,n),v.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},v.reject=function(e,t,n){return v.filter(e,v.negate(y(t)),n)},v.every=v.all=function(e,t,n){t=y(t,n);for(var r=!T(e)&&v.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},v.some=v.any=function(e,t,n){t=y(t,n);for(var r=!T(e)&&v.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,n,r){return T(e)||(e=v.values(e)),("number"!=typeof n||r)&&(n=0),v.indexOf(e,t,n)>=0},v.invoke=function(e,t){var n=l.call(arguments,2),r=v.isFunction(t);return v.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,n){var r,i,o=-1/0,a=-1/0;if(null==t&&null!=e)for(var s=0,u=(e=T(e)?e:v.values(e)).length;s<u;s++)(r=e[s])>o&&(o=r);else t=y(t,n),v.each(e,function(e,n,r){((i=t(e,n,r))>a||i===-1/0&&o===-1/0)&&(o=e,a=i)});return o},v.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t&&null!=e)for(var s=0,u=(e=T(e)?e:v.values(e)).length;s<u;s++)(r=e[s])<o&&(o=r);else t=y(t,n),v.each(e,function(e,n,r){((i=t(e,n,r))<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},v.shuffle=function(e){for(var t,n=T(e)?e:v.values(e),r=n.length,i=Array(r),o=0;o<r;o++)(t=v.random(0,o))!==o&&(i[o]=i[t]),i[t]=n[o];return i},v.sample=function(e,t,n){return null==t||n?(T(e)||(e=v.values(e)),e[v.random(e.length-1)]):v.shuffle(e).slice(0,Math.max(0,t))},v.sortBy=function(e,t,n){return t=y(t,n),v.pluck(v.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var E=function(e){return function(t,n,r){var i={};return n=y(n,r),v.each(t,function(r,o){var a=n(r,o,t);e(i,r,a)}),i}};v.groupBy=E(function(e,t,n){v.has(e,n)?e[n].push(t):e[n]=[t]}),v.indexBy=E(function(e,t,n){e[n]=t}),v.countBy=E(function(e,t,n){v.has(e,n)?e[n]++:e[n]=1}),v.toArray=function(e){return e?v.isArray(e)?l.call(e):T(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:T(e)?e.length:v.keys(e).length},v.partition=function(e,t,n){t=y(t,n);var r=[],i=[];return v.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},v.first=v.head=v.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:v.initial(e,e.length-t)},v.initial=function(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},v.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:v.rest(e,Math.max(0,e.length-t))},v.rest=v.tail=v.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},v.compact=function(e){return v.filter(e,v.identity)};var N=function(e,t,n,r){for(var i=[],o=0,a=r||0,s=S(e);a<s;a++){var u=e[a];if(T(u)&&(v.isArray(u)||v.isArguments(u))){t||(u=N(u,t,n));var l=0,c=u.length;for(i.length+=c;l<c;)i[o++]=u[l++]}else n||(i[o++]=u)}return i};function A(e){return function(t,n,r){n=y(n,r);for(var i=S(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}function R(e,t,n){return function(r,i,o){var a=0,s=S(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=t(l.call(r,a,s),v.isNaN))>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(r[o]===i)return o;return-1}}v.flatten=function(e,t){return N(e,t,!1)},v.without=function(e){return v.difference(e,l.call(arguments,1))},v.uniq=v.unique=function(e,t,n,r){v.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=y(n,r));for(var i=[],o=[],a=0,s=S(e);a<s;a++){var u=e[a],l=n?n(u,a,e):u;t?(a&&o===l||i.push(u),o=l):n?v.contains(o,l)||(o.push(l),i.push(u)):v.contains(i,u)||i.push(u)}return i},v.union=function(){return v.uniq(N(arguments,!0,!0))},v.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=S(e);r<i;r++){var o=e[r];if(!v.contains(t,o)){for(var a=1;a<n&&v.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},v.difference=function(e){var t=N(arguments,!0,!0,1);return v.filter(e,function(e){return!v.contains(t,e)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(e){for(var t=e&&v.max(e,S).length||0,n=Array(t),r=0;r<t;r++)n[r]=v.pluck(e,r);return n},v.object=function(e,t){for(var n={},r=0,i=S(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},v.findIndex=A(1),v.findLastIndex=A(-1),v.sortedIndex=function(e,t,n,r){for(var i=(n=y(n,r,1))(t),o=0,a=S(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o},v.indexOf=R(1,v.findIndex,v.sortedIndex),v.lastIndexOf=R(-1,v.findLastIndex),v.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i};var O=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=x(e.prototype),a=e.apply(o,i);return v.isObject(a)?a:o};v.bind=function(e,t){if(p&&e.bind===p)return p.apply(e,l.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var n=l.call(arguments,2),r=function(){return O(e,r,t,this,n.concat(l.call(arguments)))};return r},v.partial=function(e){var t=l.call(arguments,1),n=function(){for(var r=0,i=t.length,o=Array(i),a=0;a<i;a++)o[a]=t[a]===v?arguments[r++]:t[a];for(;r<arguments.length;)o.push(arguments[r++]);return O(e,n,this,this,o)};return n},v.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)e[n=arguments[t]]=v.bind(e[n],e);return e},v.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return v.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},v.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:v.now(),a=null,o=e.apply(r,i),a||(r=i=null)};return function(){var l=v.now();s||!1!==n.leading||(s=l);var c=t-(l-s);return r=this,i=arguments,c<=0||c>t?(a&&(clearTimeout(a),a=null),s=l,o=e.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(u,c)),o}},v.debounce=function(e,t,n){var r,i,o,a,s,u=function(){var l=v.now()-a;l<t&&l>=0?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=v.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(o,i),o=i=null),s}},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},v.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},v.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},v.once=v.partial(v.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function I(e,t){var n=P.length,r=e.constructor,i=v.isFunction(r)&&r.prototype||a,o="constructor";for(v.has(e,o)&&!v.contains(t,o)&&t.push(o);n--;)(o=P[n])in e&&e[o]!==i[o]&&!v.contains(t,o)&&t.push(o)}v.keys=function(e){if(!v.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)v.has(e,n)&&t.push(n);return D&&I(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var n in e)t.push(n);return D&&I(e,t),t},v.values=function(e){for(var t=v.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},v.mapObject=function(e,t,n){t=y(t,n);for(var r,i=v.keys(e),o=i.length,a={},s=0;s<o;s++)a[r=i[s]]=t(e[r],r,e);return a},v.pairs=function(e){for(var t=v.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},v.invert=function(e){for(var t={},n=v.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},v.functions=v.methods=function(e){var t=[];for(var n in e)v.isFunction(e[n])&&t.push(n);return t.sort()},v.extend=w(v.allKeys),v.extendOwn=v.assign=w(v.keys),v.findKey=function(e,t,n){t=y(t,n);for(var r,i=v.keys(e),o=0,a=i.length;o<a;o++)if(t(e[r=i[o]],r,e))return r},v.pick=function(e,t,n){var r,i,o={},a=e;if(null==a)return o;v.isFunction(t)?(i=v.allKeys(a),r=b(t,n)):(i=N(arguments,!1,!1,1),r=function(e,t,n){return t in n},a=Object(a));for(var s=0,u=i.length;s<u;s++){var l=i[s],c=a[l];r(c,l,a)&&(o[l]=c)}return o},v.omit=function(e,t,n){if(v.isFunction(t))t=v.negate(t);else{var r=v.map(N(arguments,!1,!1,1),String);t=function(e,t){return!v.contains(r,t)}}return v.pick(e,t,n)},v.defaults=w(v.allKeys,!0),v.create=function(e,t){var n=x(e);return t&&v.extendOwn(n,t),n},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var n=v.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var B=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var i=c.call(e);if(i!==c.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(v.isFunction(a)&&a instanceof a&&v.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),o){if((u=e.length)!==t.length)return!1;for(;u--;)if(!B(e[u],t[u],n,r))return!1}else{var l,f=v.keys(e);if(u=f.length,v.keys(t).length!==u)return!1;for(;u--;)if(l=f[u],!v.has(t,l)||!B(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0};v.isEqual=function(e,t){return B(e,t)},v.isEmpty=function(e){return null==e||(T(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length)},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=d||function(e){return"[object Array]"===c.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){v["is"+e]=function(t){return c.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return v.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&e!==+e},v.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===c.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){return null!=e&&f.call(e,t)},v.noConflict=function(){return n._=i,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=C,v.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,n){var r=Array(Math.max(0,e));t=b(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=v.invert(M),F=function(e){var t=function(t){return e[t]},n="(?:"+v.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};v.escape=F(M),v.unescape=F(L),v.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),v.isFunction(r)?r.call(e):r};var H=0;v.uniqueId=function(e){var t=++H+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\u2028|\u2029/g,U=function(e){return"\\"+j[e]};v.template=function(e,t,n){!t&&n&&(t=n),t=v.defaults({},t,v.templateSettings);var r=RegExp([(t.escape||z).source,(t.interpolate||z).source,(t.evaluate||z).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,a,s){return o+=e.slice(i,s).replace(W,U),i=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var s=function(e){return a.call(this,e,v)},u=t.variable||"obj";return s.source="function("+u+"){\n"+o+"}",s},v.chain=function(e){var t=v(e);return t._chain=!0,t};var $=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){v.each(v.functions(e),function(t){var n=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),$(this,n.apply(v,e))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];v.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],$(this,n)}}),v.each(["concat","join","slice"],function(e){var t=o[e];v.prototype[e]=function(){return $(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},void 0===(r=function(){return v}.apply(t,[]))||(e.exports=r)}).call(this)},function(e,t,n){var r,i,o;o="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,r=[n(1),n(0),t],void 0===(i=function(e,t,n){o.Backbone=function(e,t,n,r){var i=e.Backbone,o=Array.prototype.slice;t.VERSION="1.3.3",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=function(e,t,r){n.each(t,function(t,i){n[i]&&(e.prototype[i]=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],s(e,this),i)};case 4:return function(e,i,o){return n[t](this[r],s(e,this),i,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}}(t,i,r))})},s=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?u(e):n.isString(e)?function(t){return t.get(e)}:e},u=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},l=t.Events={},c=/\s+/,f=function(e,t,r,i,o){var a,s=0;if(r&&"object"==typeof r){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(a=n.keys(r);s<a.length;s++)t=f(e,t,a[s],r[a[s]],o)}else if(r&&c.test(r))for(a=r.split(c);s<a.length;s++)t=e(t,a[s],i,o);else t=e(t,r,i,o);return t};l.on=function(e,t,n){return d(this,e,t,n)};var d=function(e,t,n,r,i){(e._events=f(h,e._events||{},t,n,{context:r,ctx:e,listening:i}),i)&&((e._listeners||(e._listeners={}))[i.id]=i);return e};l.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[i];if(!a){var s=this._listenId||(this._listenId=n.uniqueId("l"));a=o[i]={obj:e,objId:i,id:s,listeningTo:o,count:0}}return d(e,t,r,this,a),this};var h=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),o=r.context,a=r.ctx,s=r.listening;s&&s.count++,i.push({callback:n,context:o,ctx:o||a,listening:s})}return e};l.off=function(e,t,n){return this._events?(this._events=f(p,this._events,e,t,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;for(var o=e?[e._listenId]:n.keys(i),a=0;a<o.length;a++){var s=i[o[a]];if(!s)break;s.obj.off(t,r,this)}return this};var p=function(e,t,r,i){if(e){var o,a=0,s=i.context,u=i.listeners;if(t||r||s){for(var l=t?[t]:n.keys(e);a<l.length;a++){var c=e[t=l[a]];if(!c)break;for(var f=[],d=0;d<c.length;d++){var h=c[d];r&&r!==h.callback&&r!==h.callback._callback||s&&s!==h.context?f.push(h):(o=h.listening)&&0==--o.count&&(delete u[o.id],delete o.listeningTo[o.objId])}f.length?e[t]=f:delete e[t]}return e}for(var p=n.keys(u);a<p.length;a++)delete u[(o=u[p[a]]).id],delete o.listeningTo[o.objId]}};l.once=function(e,t,r){var i=f(m,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==r&&(t=void 0),this.on(i,t,r)},l.listenToOnce=function(e,t,r){var i=f(m,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var m=function(e,t,r,i){if(r){var o=e[t]=n.once(function(){i(t,o),r.apply(this,arguments)});o._callback=r}return e};l.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),r=0;r<t;r++)n[r]=arguments[r+1];return f(g,this._events,e,void 0,n),this};var g=function(e,t,n,r){if(e){var i=e[t],o=e.all;i&&o&&(o=o.slice()),i&&v(i,r),o&&v(o,[t].concat(r))}return e},v=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}};l.bind=l.on,l.unbind=l.off,n.extend(t,l);var b=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{});var i=n.result(this,"defaults");r=n.defaults(n.extend({},i,r),i),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(b.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(null==e)return this;var i;if("object"==typeof e?(i=e,r=t):(i={})[e]=t,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,a=r.silent,s=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,c=this.changed,f=this._previousAttributes;for(var d in i)t=i[d],n.isEqual(l[d],t)||s.push(d),n.isEqual(f[d],t)?delete c[d]:c[d]=t,o?delete l[d]:l[d]=t;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!a){s.length&&(this._pending=r);for(var h=0;h<s.length;h++)this.trigger("change:"+s[h],this,l[s[h]],r)}if(u)return this;if(!a)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var o=e[i];n.isEqual(t[i],o)||(r[i]=o)}return!!n.size(r)&&r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){var t=this,r=(e=n.extend({parse:!0},e)).success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;if(!t.set(i,e))return!1;r&&r.call(e.context,t,n,e),t.trigger("sync",t,n,e)},L(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t;var o=(r=n.extend({validate:!0,parse:!0},r)).wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var a=this,s=r.success,u=this.attributes;r.success=function(e){a.attributes=u;var t=r.parse?a.parse(e,r):e;if(o&&(t=n.extend({},i,t)),t&&!a.set(t,r))return!1;s&&s.call(r.context,a,e,r),a.trigger("sync",a,e,r)},L(this,r),i&&o&&(this.attributes=n.extend({},u,i));var l=this.isNew()?"create":r.patch?"patch":"update";"patch"!==l||r.attrs||(r.attrs=i);var c=this.sync(l,this,r);return this.attributes=u,c},destroy:function(e){var t=this,r=(e=e?n.clone(e):{}).success,i=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&o(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var a=!1;return this.isNew()?n.defer(e.success):(L(this,e),a=this.sync("delete",this,e)),i||o(),a},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||M();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1)}}),a(b,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var y=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},C=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var r,i=Array(e.length-n),o=t.length;for(r=0;r<i.length;r++)i[r]=e[r+n];for(r=0;r<o;r++)e[r+n]=t[r];for(r=0;r<i.length;r++)e[r+o+n]=i[r]};n.extend(y.prototype,l,{model:b,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,x))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:e.slice();var i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),r?i[0]:i},set:function(e,t){if(null!=e){(t=n.extend({},w,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var r=!n.isArray(e);e=r?[e]:e.slice();var i=t.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,a,s=[],u=[],l=[],c=[],f={},d=t.add,h=t.merge,p=t.remove,m=!1,g=this.comparator&&null==i&&!1!==t.sort,v=n.isString(this.comparator)?this.comparator:null;for(a=0;a<e.length;a++){o=e[a];var b=this.get(o);if(b){if(h&&o!==b){var y=this._isModel(o)?o.attributes:o;t.parse&&(y=b.parse(y,t)),b.set(y,t),l.push(b),g&&!m&&(m=b.hasChanged(v))}f[b.cid]||(f[b.cid]=!0,s.push(b)),e[a]=b}else d&&(o=e[a]=this._prepareModel(o,t))&&(u.push(o),this._addReference(o,t),f[o.cid]=!0,s.push(o))}if(p){for(a=0;a<this.length;a++)f[(o=this.models[a]).cid]||c.push(o);c.length&&this._removeModels(c,t)}var x=!1,_=!g&&d&&p;if(s.length&&_?(x=this.length!==s.length||n.some(this.models,function(e,t){return e!==s[t]}),this.models.length=0,C(this.models,s,0),this.length=this.models.length):u.length&&(g&&(m=!0),C(this.models,u,null==i?this.length:i),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(a=0;a<u.length;a++)null!=i&&(t.index=i+a),(o=u[a]).trigger("add",o,this,t);(m||x)&&this.trigger("sort",this,t),(u.length||c.length||l.length)&&(t.changes={added:u,removed:c,merged:l},this.trigger("update",this,t))}return r?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var r=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===r||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){var t=(e=n.extend({parse:!0},e)).success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},L(this,e),this.sync("read",this,e)},create:function(e,t){var r=(t=t?n.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;r||this.add(e,t);var i=this,o=t.success;return t.success=function(e,t,n){r&&i.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?n.clone(t):{}).collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=this.get(e[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var a=this.modelId(i.attributes);null!=a&&delete this._byId[a],t.silent||(t.index=o,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}}return n},_isModel:function(e){return e instanceof b},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,r),"change"===e){var i=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}}),a(y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var _=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,T)),this._ensureElement(),this.initialize.apply(this,arguments)},S=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];n.extend(_.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var r=e[t];if(n.isFunction(r)||(r=this[r]),r){var i=t.match(S);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var o=k[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(i.url||(a.url=n.result(r,"url")||M()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",i.emulateJSON&&(a.data._method=o);var s=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1);var u=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,u&&u.call(i.context,e,t,n)};var l=i.xhr=t.ajax(n.extend(a,i));return r.trigger("request",r,l,i),l};var k={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var E=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},N=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,R=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,l,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return t.history.route(e,function(n){var a=o._extractParameters(e,n);!1!==o.execute(i,a,r)&&(o.trigger.apply(o,["route:"+r].concat(a)),o.trigger("route",r,a),t.history.trigger("route",o,r,a))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(N,"(?:$1)?").replace(A,function(e,t){return t?e:"([^/?]+)"}).replace(R,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var D=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,B=/#.*$/;D.started=!1,n.extend(D.prototype,l,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(P,"")},start:function(e){if(D.started)throw new Error("Backbone.history has already been started");if(D.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(I,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!D.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var r=n+e;if(e=this.decodeFragment(e.replace(B,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new D,b.extend=y.extend=E.extend=_.extend=D.extend=function(e,t){var r,i=this;return r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t),r.prototype=n.create(i.prototype,e),r.prototype.constructor=r,r.__super__=i.prototype,r};var M=function(){throw new Error('A "url" property or function must be specified')},L=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t}(o,n,e,t)}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i,o;i=[n(0)],void 0===(o="function"==typeof(r=function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=(a(n(0)),a(n(1))),o=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}a(n(8)),t.default={toJSON:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0==n.length&&(n=["specifix_id"]),t instanceof o.default.Collection){var a=[];return t=t.models,i.default.map(t,function(t,i){a[i]=r({},e(t,n))}),a}var s={};return t instanceof o.default.Model&&(void 0!==t.cid&&t.cid,t=r({},t.toJSON())),i.default.map(t,function(t,r){-1==n.indexOf(r)&&(t instanceof Object||t instanceof Array?s[r]=e(t,n):""!==t&&(s[r]=t))}),s}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(2)),a=(s(n(1)),s(n(12)));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}s(n(5));var f=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,o.default.Model),i(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{styles:{}},elements:[]},t=r({},this.toJSON().settings);this.set("settings",t),this.set("elements",new a.default.ElementsCollection(e.elements))}},{key:"defaults",value:function(){return{settings:{element:"gva_column"},col_lg:12,elements:new a.default.ElementsCollection,editing:!1,adding:!1,reRender:!1,element_name:"gva_column"}}}]),t}(),d=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,o.default.Model),i(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{},columns:[],editing:!1},t=r({},e.settings);this.set("settings",t);var n=new a.default.ColumnsCollection(e.columns);this.set("columns",n)}},{key:"defaults",value:function(){return{settings:{element:"gva_row"},columns:new a.default.ColumnsCollection,editing:!1,element_name:"gva_row"}}}]),t}(),h=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,o.default.Model),i(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{},row:{},columns:{}};e.row&&(this.set("row",new d(e.row)),e.columns&&this.get("row").add(e.columns));var t=r({},e.settings);this.set("settings",t)}},{key:"defaults",value:function(){return{settings:{},editing:!1}}}]),t}();t.default={ColumnModel:f,ElementModel:h,RowModel:d}},function(e,t,n){var r,i,o;i=[n(0),n(3)],void 0===(o="function"==typeof(r=function(e){var t,n=0,r=Array.prototype.slice;return e.cleanData=(t=e.cleanData,function(n){var r,i,o;for(o=0;null!=(i=n[o]);o++)try{(r=e._data(i,"events"))&&r.remove&&e(i).triggerHandler("remove")}catch(e){}t(n)}),e.widget=function(t,n,r){var i,o,a,s={},u=t.split(".")[0],l=u+"-"+(t=t.split(".")[1]);return r||(r=n,n=e.Widget),e.isArray(r)&&(r=e.extend.apply(null,[{}].concat(r))),e.expr[":"][l.toLowerCase()]=function(t){return!!e.data(t,l)},e[u]=e[u]||{},i=e[u][t],o=e[u][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,i,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),(a=new n).options=e.widget.extend({},a.options),e.each(r,function(t,r){e.isFunction(r)?s[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function i(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=i,t=r.apply(this,arguments),this._super=n,this._superApply=o,t}}():s[t]=r}),o.prototype=e.widget.extend(a,{widgetEventPrefix:i&&a.widgetEventPrefix||t},s,{constructor:o,namespace:u,widgetName:t,widgetFullName:l}),i?(e.each(i._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete i._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,i,o=r.call(arguments,1),a=0,s=o.length;a<s;a++)for(n in o[a])i=o[a][n],o[a].hasOwnProperty(n)&&void 0!==i&&(e.isPlainObject(i)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],i):e.widget.extend({},i):t[n]=i);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,s=r.call(arguments,1),u=this;return a?this.length||"instance"!==o?this.each(function(){var n,r=e.data(this,i);return"instance"===o?(u=r,!1):r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,s))!==r&&void 0!==n?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):u=void 0:(s.length&&(o=e.widget.extend.apply(null,[o].concat(s))),this.each(function(){var t=e.data(this,i);t?(t.option(o||{}),t._init&&t._init()):e.data(this,i,new n(o,this))})),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,i,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},t=(r=t.split(".")).shift(),r.length){for(i=a[t]=e.widget.extend({},this.options[t]),o=0;o<r.length-1;o++)i[r[o]]=i[r[o]]||{},i=i[r[o]];if(t=r.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,r,i;for(n in t)i=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&i&&i.length&&(r=e(i.get()),this._removeClass(i,n),r.addClass(this._classes({element:r,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var n=[],r=this;function i(i,o){var a,s;for(s=0;s<i.length;s++)a=r.classesElementLookup[i[s]]||e(),a=t.add?e(e.unique(a.get().concat(t.element.get()))):e(a.not(t.element).get()),r.classesElementLookup[i[s]]=a,n.push(i[s]),o&&t.classes[i[s]]&&n.push(t.classes[i[s]])}return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&i(t.keys.match(/\S+/g)||[],!0),t.extra&&i(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(r,i){-1!==e.inArray(t.target,i)&&(n.classesElementLookup[r]=e(i.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,r){r="boolean"==typeof r?r:n;var i="string"==typeof e||null===e,o={extra:i?t:n,keys:i?e:t,element:i?this.element:e,add:r};return o.element.toggleClass(this._classes(o),r),this},_on:function(t,n,r){var i,o=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,a){function s(){if(t||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var u=r.match(/^([\w:-]*)\s*(.*)$/),l=u[1]+o.eventNamespace,c=u[2];c?i.on(l,c,s):n.on(l,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,r){var i,o,a=this.options[t];if(r=r||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(i in o)i in n||(n[i]=o[i]);return this.element.trigger(n,r),!(e.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(r))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,o){var a;"string"==typeof i&&(i={effect:i});var s=i?!0===i||"number"==typeof i?n:i.effect||n:t;"number"==typeof(i=i||{})&&(i={duration:i}),a=!e.isEmptyObject(i),i.complete=o,i.delay&&r.delay(i.delay),a&&e.effects&&e.effects.effect[s]?r[t](i):s!==t&&r[s]?r[s](i.duration,i.easing,o):r.queue(function(n){e(this)[t](),o&&o.call(r[0]),n()})}}),e.widget})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(2)),a=f(n(1)),s=(f(n(4)),f(n(5))),u=(f(n(14)),f(n(23))),l=f(n(24)),c=f(n(8));function f(e){return e&&e.__esModule?e:{default:e}}n(25),n(26),n(27),n(28),n(29),n(30),n(31),n(32),n(33),n(34),n(35),n(36),n(37),n(38),n(39),n(40),n(41),n(42),n(43);var d=function(t){function n(){return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.default.View),i(n,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.data=e,this.title=t,this.fields=n;var r='<div class="edit-form-content-wrapper">';r+='<div class="modal gva-modal"><div class="modal-dialog gpb-modal">',r+='<div class="edit-form-content">',r+='<form method="POST" class="form-horizontal" id="gpb_form-edit-configs"></form>',r+="</div>",r+="</div></div>",r+='<div class="form-action"><div class="content-inner">',r+='<a type="button" class="button button-action button--warning button--small gpb_btn-close"><%= drupalSettings.gavias_content_builder.text_translate.cancel %></a>',r+='<a type="button" class="button button-action button--primary button--small gpb_btn-update" form="gpb_form-edit-configs"><%= drupalSettings.gavias_content_builder.text_translate.update %></a>',r+="</div></div>",r+="</div>",this.template=a.default.template(r,{variable:"data"}),this.listenTo(this.data,"change:editing",this._toggle_form),this.listenTo(this.data,"destroy",this.remove),this.listenTo(this.data,"change:editing",this.render)}},{key:"events",value:function(){return{"click .button.gpb_btn-close":"fn_close","click .button.gpb_btn-update":"fn_update","click .imce-url-button":"fn_open_imce","click .gavias-field-upload-remove":"fn_remove_image","change .change_value_admin select":"fn_change_select_title"}}},{key:"render",value:function(){var t=this;if(1==this.data.get("editing")){var n=this.data.toJSON();n.edit_title=this.title;var r=this.template(n);this.setElement(r),0===e("body").find(this.$el).length&&e("body").append(this.el),e(this.$el).find(".gva-modal").modal({backdrop:"static",keyboard:!0,show:!0}),e(this.$el).find(".gva-modal").on("show.bs.modal",function(t){e("body").addClass("modal-open")}),e(this.$el).find(".gva-modal").on("hidden.bs.modal",function(e){t.data.set("editing",!1)}),this.renderFields()}else this._close();return this}},{key:"renderFields",value:function(){var t=this,n=r({},this.data.get("settings"));void 0!==this.data.get("element_name")&&0==this.fields.length&&void 0!==drupalSettings.gavias_content_builder.element_fields[this.data.get("element_name")]&&(this.fields=drupalSettings.gavias_content_builder.element_fields[this.data.get("element_name")],this.$("#gpb_form-edit-configs").addClass(this.data.get("element_name")));var i=r({},n),o=this.fields;a.default.map(o.fields,function(e,n){var o=r({},e);o.value=void 0!==i[o.id]?i[o.id]:void 0!==o.default?o.default:"",o.value=o.value?o.value:"";var s="";"text"==o.type?s=u.default.template_field_text():"select"==o.type?s=u.default.template_field_select():"textarea"==o.type?s=u.default.template_field_textarea():"textarea_without_html"==o.type?s=u.default.template_field_textarea_without_html():"upload"==o.type?s=u.default.template_field_upload():"info"==o.type&&(s=u.default.template_field_info()),s&&t.$("#gpb_form-edit-configs").append(a.default.template(s,{variable:"data"})({field:o,settings:i,element_name:t.data.get("element_name"),_rid:c.default.process()}))}),l.default.init({selector:"#gpb_form-edit-configs textarea.code_html_tiny",height:200,relative_urls : false,skin:!1,plugins:["advlist autolink lists link image charmap anchor contextmenu pagebreak media searchreplace code fullscreen table","emoticons textcolor textpattern colorpicker"],toolbar1:"insertfile undo redo | styleselect | bullist numlist outdent indent | link image | forecolor backcolor emoticons"}),"undefined"!=typeof tinyMCE&&(null!=tinyMCE.activeEditor&&0==tinyMCE.activeEditor.isHidden()||(tinyMCE.editors=[])),e(".imce-url-input").not(".imce-url-processed").addClass("imce-url-processed").each(function(){var t=e(this);t.attr("id"),t.before('<a href="#" class="imce-url-button"><span>Open File Browser</span></a>')})}},{key:"_toggle_form",value:function(t){!1===t.get("editing")&&(e(this.$el).find(".gva-modal").modal("hide"),this.remove())}},{key:"fn_close",value:function(e){return e.preventDefault(),this._close(),!1}},{key:"_close",value:function(){l.default.remove(),e(this.$el).find(".gva-modal").modal("hide"),e("body").find(".sp-container").remove(),this.data.set("editing",!1)}},{key:"fn_update",value:function(e){var t=this;return e.preventDefault(),new Promise(function(e,n){l.default.remove();var i=t.$el.find("#gpb_form-edit-configs").serializeJSON(),o=r({},t.data.get("settings"),{});a.default.map(t.fields.fields,function(e){o[e.id]=void 0!==i[e.id]?i[e.id]:""}),t.data.set("settings",o),t.data instanceof s.default.ElementModel&&t.data.set("reRender",!0),t.data instanceof s.default.RowModel&&t.data.set("row_name",o.row_name),e()}).then(function(){t._close()}),!1}},{key:"fn_open_imce",value:function(t){t.preventDefault();var n=Drupal.url("imce"),r="gva-upload-"+e(t.target).parents(".gva-upload-input").attr("data-id");return n+=(-1===n.indexOf("?")?"?":"&")+"sendto=gvaImceInput.urlSendto&inputId="+r+"&type=link",e("#gva-upload-"+r).focus(),window.open(n,"","width="+Math.min(1e3,parseInt(.8*screen.availWidth,10))+",height="+Math.min(800,parseInt(.8*screen.availHeight,10))+",resizable=1"),!1}},{key:"fn_remove_image",value:function(t){t.preventDefault();var n=e(t.target).data("src");return e(t.target).parents(".gva-upload-input").find(".gavias-image-demo").attr("src",n),e(t.target).parents(".gva-upload-input").find("input.imce-url-input").val(""),!1}},{key:"fn_change_select_title",value:function(t){var n=e(t.target),r=(n.val(),n.find(":selected").text());e(n).parents("#gpb_form-edit-configs").find("input#title_admin").first().val(r)}}]),n}();t.default=d}).call(this,n(0))},function(e,t,n){(function(e){function t(){var e=Date.now(),n=t.last||e;return t.last=e>n?e:n+1}e.exports=function(e){return(e||"")+""+t().toString(36)},e.exports.process=function(e){return(e||"")+""+t().toString(36)},e.exports.time=function(e){return(e||"")+t().toString(36)}}).call(this,n(13)(e))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(2)),a=l(n(1)),s=l(n(19)),u=l(n(7));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}l(n(46)),l(n(4));var f=function(t){function n(){return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.default.View),i(n,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{},columns:{}};this.row=e,this.customModal=!1,this.listenTo(this.row.get("columns"),"add",this._add_column),this.listenTo(this.row,"destroy",this.remove),this.listenTo(this.row,"change:row_name",this.fn_change_row_name)}},{key:"events",value:function(){return{"click .gpb-action_delete_row":"fn_delete_row","click .gpb-add-column":"fn_add_column","click .gpb-action_edit_row":"fn_set_edit_row","click .gpb_drap-order, .pa-set-column":function(){return!1}}}},{key:"render",value:function(){var e=this;return new Promise(function(t,n){var r='<div class="gpb_row-content row-fade-in" data-element="<%= data.settings.element %>" data-cid="<%= data.cid %>">';r+='<div class="gpb_action-button row-action-button">',r+='<div class="left">',r+='<a href="#" class="gpb_drap-order gpb_drap-order-row" title="Move"><i class="fa fa-arrows" ></i></a>',r+='<div class="action-add-column">',r+='<a href="#" class="gpb_add-column" title="Add Column">Add Column</a>',r+='<div class="hover-content">',r+='<a class="gpb-add-column action" data-width="2">1/6</a>',r+='<a class="gpb-add-column action" data-width="3">1/4</a>',r+='<a class="gpb-add-column action" data-width="4">1/3</a>',r+='<a class="gpb-add-column action" data-width="5">5/12</a>',r+='<a class="gpb-add-column action" data-width="6">1/2</a>',r+='<a class="gpb-add-column action" data-width="7">7/12</a>',r+='<a class="gpb-add-column action" data-width="8">2/3</a>',r+='<a class="gpb-add-column action" data-width="9">3/4</a>',r+='<a class="gpb-add-column action" data-width="10">5/6</a>',r+='<a class="gpb-add-column action" data-width="11">11/12</a>',r+='<a class="gpb-add-column action" data-width="12">1/1</a>',r+="</div>",r+="</div>",r+='<a class="row-name"><%= data.settings["row_name"] %></a>',r+="</div>",r+='<div class="right">',r+='<a href="#" class="btn-border-none btn-action gpb-action_edit btn-action gpb-action_edit_row" title="Edit"><i class="fa fa-pencil" ></i></a>',r+='<a href="#" class="btn-border-none btn-action gpb-action_clone btn-action gpb-action_clone_row" title="Clone"><i class="fa fa-clone" ></i></a>',r+='<a href="#" class="btn-border-none btn-action gpb-action_clone btn-action gpb-action_copy_row" title="Copy to clipboard"><i class="fa fa-clipboard" ></i></a>',r+='<a href="#" class="btn-border-none btn-action gpb-action_delete btn-action gpb-action_delete_row" title="Delete"><i class="fa fa-times" ></i></a>',r+="</div>",r+="</div>",r+='<div class="gpb_element-inner"><div class="gpb_row-inner gpb_row-content-inner"></div></div>',r+="</div>";var i=e.row.toJSON();i.cid=e.row.cid,e.template=a.default.template(r,{variable:"data"})(i),e.setElement(e.template),e.row.get("columns")&&e.row.get("columns").length>0&&e.row.get("columns").map(function(t,n){e._add_column(t)}),t()}).then(function(){var t;e.$el.sortable((t={connectWith:".gpb_row-inner",items:".gpb_col",placeholder:"ui-state-highlight",handle:".gpb_drap-order.gpb_drap-order-col",cursor:"move"},c(t,"placeholder","ui-state-highlight"),c(t,"start",function(e,t){t.item.indexStart=t.item.index(),t.placeholder.width(t.item.find(".gpb_element-inner").first().width()-20),t.placeholder.height(t.item.height()-20)}),c(t,"stop",e.dropColumn.bind(e)),c(t,"opacity",.9),t)).disableSelection()}),this}},{key:"_add_column",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r({},e.get("settings"));e.set("settings",t);var n=new s.default(e).render().el;this.$("> .gpb_element-inner > .gpb_row-content-inner").append(n)}},{key:"fn_delete_row",value:function(e){return e.preventDefault(),confirm("You are sure delete this row ! Continue?")&&this.row.destroy(),!1}},{key:"fn_add_column",value:function(t){t.preventDefault();var n={col_lg:e(t.target).data("width")};return console.log(n),this.row.get("columns").add(n),!1}},{key:"fn_set_edit_row",value:function(e){return e.preventDefault(),new u.default(this.row,"Edit Row",drupalSettings.gavias_content_builder.element_fields.gva_row),this.row.set("editing",!0),!1}},{key:"_update",value:function(e,t){if(t.item.elements===this.column.get("columns")){var n=t.item.index();this.row.get("columns").moveItem(t.item.indexStart,n),t.item.trigger("drop",n)}}},{key:"dropColumn",value:function(e,t){this.row.get("columns").moveItem(t.item.indexStart,t.item.index())}},{key:"fn_change_row_name",value:function(e,t){this.row.get("row_name")&&this.$el.find("> .gpb_action-button > .left > .row-name").html(this.row.get("row_name"))}}]),n}();t.default=f}).call(this,n(0))},function(e,t,n){var r,i,o;i=[n(0),n(11),n(3),n(6)],void 0===(o="function"==typeof(r=function(e){var t=!1;return e(document).on("mouseup",function(){t=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var r=this,i=1===n.which,o=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&e(n.target).closest(this.options.cancel).length;return!(i&&!o&&this._mouseCapture(n)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,0)))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(0),n(3)],void 0===(o="function"==typeof(r=function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(2)),a=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}s(n(1));var f=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,o.default.Collection),i(t,[{key:"initialize",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.model=a.default.ColumnModel,this.on("update",this._update),this.on("add",this._addParam)}},{key:"moveItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.models.splice(t,0,this.models.splice(e,1)[0]),this.trigger("move")}},{key:"_update",value:function(e,t){void 0!==t.changes&&void 0!==t.changes.removed&&t.changes.removed.length}},{key:"_addParam",value:function(e){}}]),t}(),d=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,o.default.Collection),i(t,[{key:"initialize",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.model=a.default.ElementModel}},{key:"moveItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.models.splice(t,0,this.models.splice(e,1)[0]),this.trigger("move")}}]),t}(),h=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,o.default.Collection),i(t,[{key:"initialize",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.model=a.default.RowModel,this.on("add",this._addParam)}},{key:"moveItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.models.splice(t,0,this.models.splice(e,1)[0]),this.trigger("move")}},{key:"_addParam",value:function(e){var t=r({},e.get("settings"));t.element="gva_row",e.set("settings",t)}}]),t}();t.default={ColumnsCollection:f,ElementsCollection:d,RowsCollection:h}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r,i,o;i=[n(0)],void 0===(o="function"==typeof(r=function(e){"use strict";e.fn.serializeJSON=function(t){var n,r,i,o,a,s,u,l,c,f,d,h;return n=e.serializeJSON,r=this,i=n.setupOpts(t),o=r.serializeArray(),n.readCheckboxUncheckedValues(o,i,r),a={},e.each(o,function(e,t){s=t.name,u=t.value,c=n.extractTypeAndNameWithNoType(s),f=c.nameWithNoType,(d=c.type)||(d=n.attrFromInputWithName(r,s,"data-value-type")),n.validateType(s,d,i),"skip"!==d&&(h=n.splitInputNameIntoKeysArray(f),!(l=n.parseValue(u,s,d,i))&&n.shouldSkipFalsy(r,s,f,d,i)||n.deepSet(a,h,l,i))}),a},e.serializeJSON={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,skipFalsyValuesForTypes:[],skipFalsyValuesForFields:[],customTypes:{},defaultTypes:{string:function(e){return String(e)},number:function(e){return Number(e)},boolean:function(e){return-1===["false","null","undefined","","0"].indexOf(e)},null:function(e){return-1===["false","null","undefined","","0"].indexOf(e)?e:null},array:function(e){return JSON.parse(e)},object:function(e){return JSON.parse(e)},auto:function(t){return e.serializeJSON.parseValue(t,null,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})},skip:null},useIntKeysAsArrayIndex:!1},setupOpts:function(t){var n,r,i,o,a,s;for(n in s=e.serializeJSON,null==t&&(t={}),i=s.defaultOptions||{},r=["checkboxUncheckedValue","parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","skipFalsyValuesForTypes","skipFalsyValuesForFields","customTypes","defaultTypes","useIntKeysAsArrayIndex"],t)if(-1===r.indexOf(n))throw new Error("serializeJSON ERROR: invalid option '"+n+"'. Please use one of "+r.join(", "));return a=(o=function(e){return!1!==t[e]&&""!==t[e]&&(t[e]||i[e])})("parseAll"),{checkboxUncheckedValue:o("checkboxUncheckedValue"),parseNumbers:a||o("parseNumbers"),parseBooleans:a||o("parseBooleans"),parseNulls:a||o("parseNulls"),parseWithFunction:o("parseWithFunction"),skipFalsyValuesForTypes:o("skipFalsyValuesForTypes"),skipFalsyValuesForFields:o("skipFalsyValuesForFields"),typeFunctions:e.extend({},o("defaultTypes"),o("customTypes")),useIntKeysAsArrayIndex:o("useIntKeysAsArrayIndex")}},parseValue:function(t,n,r,i){var o,a;return o=e.serializeJSON,a=t,i.typeFunctions&&r&&i.typeFunctions[r]?a=i.typeFunctions[r](t):i.parseNumbers&&o.isNumeric(t)?a=Number(t):!i.parseBooleans||"true"!==t&&"false"!==t?i.parseNulls&&"null"==t&&(a=null):a="true"===t,i.parseWithFunction&&!r&&(a=i.parseWithFunction(a,n)),a},isObject:function(e){return e===Object(e)},isUndefined:function(e){return void 0===e},isValidArrayIndex:function(e){return/^[0-9]+$/.test(String(e))},isNumeric:function(e){return e-parseFloat(e)>=0},optionKeys:function(e){if(Object.keys)return Object.keys(e);var t,n=[];for(t in e)n.push(t);return n},readCheckboxUncheckedValues:function(t,n,r){var i,o,a;null==n&&(n={}),e.serializeJSON,i="input[type=checkbox][name]:not(:checked):not([disabled])",r.find(i).add(r.filter(i)).each(function(r,i){if(o=e(i),null==(a=o.attr("data-unchecked-value"))&&(a=n.checkboxUncheckedValue),null!=a){if(i.name&&-1!==i.name.indexOf("[]["))throw new Error("serializeJSON ERROR: checkbox unchecked values are not supported on nested arrays of objects like '"+i.name+"'. See https://github.com/marioizquierdo/jquery.serializeJSON/issues/67");t.push({name:i.name,value:a})}})},extractTypeAndNameWithNoType:function(e){var t;return(t=e.match(/(.*):([^:]+)$/))?{nameWithNoType:t[1],type:t[2]}:{nameWithNoType:e,type:null}},shouldSkipFalsy:function(t,n,r,i,o){var a=e.serializeJSON.attrFromInputWithName(t,n,"data-skip-falsy");if(null!=a)return"false"!==a;var s=o.skipFalsyValuesForFields;if(s&&(-1!==s.indexOf(r)||-1!==s.indexOf(n)))return!0;var u=o.skipFalsyValuesForTypes;return null==i&&(i="string"),!(!u||-1===u.indexOf(i))},attrFromInputWithName:function(e,t,n){var r;return r='[name="'+t.replace(/(:|\.|\[|\]|\s)/g,"\\$1")+'"]',e.find(r).add(e.filter(r)).attr(n)},validateType:function(t,n,r){var i,o;if(i=(o=e.serializeJSON).optionKeys(r?r.typeFunctions:o.defaultOptions.defaultTypes),n&&-1===i.indexOf(n))throw new Error("serializeJSON ERROR: Invalid type "+n+" found in input name '"+t+"', please use one of "+i.join(", "));return!0},splitInputNameIntoKeysArray:function(t){var n;return e.serializeJSON,n=t.split("["),""===(n=e.map(n,function(e){return e.replace(/\]/g,"")}))[0]&&n.shift(),n},deepSet:function(t,n,r,i){var o,a,s,u,l,c;if(null==i&&(i={}),(c=e.serializeJSON).isUndefined(t))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!n||0===n.length)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");o=n[0],1===n.length?""===o?t.push(r):t[o]=r:(a=n[1],""===o&&(l=t[u=t.length-1],o=c.isObject(l)&&(c.isUndefined(l[a])||n.length>2)?u:u+1),""===a?!c.isUndefined(t[o])&&e.isArray(t[o])||(t[o]=[]):i.useIntKeysAsArrayIndex&&c.isValidArrayIndex(a)?!c.isUndefined(t[o])&&e.isArray(t[o])||(t[o]=[]):!c.isUndefined(t[o])&&c.isObject(t[o])||(t[o]={}),s=n.slice(1),c.deepSet(t[o],s,r,i))}}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){(function(e){var r;!function(i){var o=("object"==typeof e&&e&&e.exports,"object"==typeof global&&global);o.global!==o&&o.window;var a=function(e){this.message=e};(a.prototype=new Error).name="InvalidCharacterError";var s=function(e){throw new a(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,c={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,i,o=e.length%3,a="",l=-1,c=e.length-o;++l<c;)t=e.charCodeAt(l)<<16,n=e.charCodeAt(++l)<<8,r=e.charCodeAt(++l),a+=u.charAt((i=t+n+r)>>18&63)+u.charAt(i>>12&63)+u.charAt(i>>6&63)+u.charAt(63&i);return 2==o?(t=e.charCodeAt(l)<<8,n=e.charCodeAt(++l),a+=u.charAt((i=t+n)>>10)+u.charAt(i>>4&63)+u.charAt(i<<2&63)+"="):1==o&&(i=e.charCodeAt(l),a+=u.charAt(i>>2)+u.charAt(i<<4&63)+"=="),a},decode:function(e){var t=(e=String(e).replace(l,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,o="",a=-1;++a<t;)r=u.indexOf(e.charAt(a)),n=i%4?64*n+r:r,i++%4&&(o+=String.fromCharCode(255&n>>(-2*i&6)));return o},version:"0.1.0"};void 0===(r=function(){return c}.call(t,n,t,e))||(e.exports=r)}()}).call(this,n(13)(e))},function(e,t,n){"use strict";(function(e){o(n(0));var t,r=o(n(17)),i=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}o(n(14)),n(49),n(62),(t=e)(document).ready(function(){var n=new r.default(e.parseJSON(drupalSettings.gavias_content_builder.params));console.log(e.parseJSON(drupalSettings.gavias_content_builder.params)),t(document).on("submit","#gpb_form-content-change",function(e){t.notify("Please waiting Gavias Builder process !","info"),t("#save").attr("disabled","true");var r=t("input[name=gavias_content_builder_id]").val(),o={data:JSON.stringify(i.default.toJSON(n.model.get("rows"),["adding","reRender"])),pid:r};return t.ajax({url:drupalSettings.gavias_content_builder.saveConfigURL,type:"POST",data:o,dataType:"json",success:function(e){t("#save").val("Save"),t.notify("Gavias Builder setting updated","success"),t("#save").removeAttr("disabled")},error:function(e,t,n){alert(t+":"+e.responseText),notify("Gavias Builder setting not updated","error")}}),!1})}),t(document).on("focusin",function(e){t(e.target).closest(".mce-window").length&&e.stopImmediatePropagation()})}).call(this,n(0))},function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=c(n(2)),s=(c(n(1)),c(n(18))),u=c(n(12)),l=c(n(15));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(t){function n(){return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default.View),o(n,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.$el=e("#gpb_form-content-change"),this.model=new a.default.Model({rows:new u.default.RowsCollection(t)}),this.delegateEvents(),this.render()}},{key:"events",value:function(){return{"click #gpb_add-element":"fn_add_row","click #gpb_add-element-import":"fn_add_row_import","click #gpb_add-element-import-submit":"fn_add_row_import_submit"}}},{key:"render",value:function(){return this.$("#gpb_content-bottom").before(new s.default(this.model.get("rows")).render().el),this}},{key:"fn_add_row",value:function(e){return e.preventDefault(),this.model.get("rows").add({settings:{},columns:null}),!1}},{key:"fn_add_row_import",value:function(t){t.preventDefault(),e(".row-import").removeClass("hidden")}},{key:"fn_add_row_import_submit",value:function(t){t.preventDefault();var n=e("textarea#row-import-data").val();n=l.default.decode(n),console.log(n);try{if(n.indexOf("gavias_content_builder_copy070301")>-1){var o=r.parseJSON(n);"object"===(void 0===o?"undefined":i(o))&&null!==o&&"on"==o.gavias_content_builder_copy070301?(this.model.get("rows").add(o),e(".row-import").addClass("hidden"),e("textarea#row-import-data").val(""),alert("Import row Successful!")):(e(".row-import").addClass("hidden"),e("textarea#row-import-data").val(""),alert("Can not import row  !"))}else e(".row-import").addClass("hidden"),e("textarea#row-import-data").val(""),alert("Can not import row!")}catch(t){e(".row-import").addClass("hidden"),e("textarea#row-import-data").val(""),alert("Can not import row !")}return!1}}]),n}();t.default=f}).call(this,n(0),n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(2)),o=(u(n(1)),u(n(9))),a=u(n(4)),s=u(n(15));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(t){function n(){return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default.View),r(n,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.rows=e,this.setElement('<div id="gpb_content-inner"></div>'),this.listenTo(this.rows,"add",this._add_row),this.delegateEvents()}},{key:"events",value:function(){return{"click > .gpb_row-content > .gpb_action-button > .right > a.gpb-action_clone_row":"fn_clone_row","click > .gpb_row-content > .gpb_action-button > .right > a.gpb-action_copy_row":"fn_copy_row"}}},{key:"render",value:function(){var e=this;return new Promise(function(t,n){e.rows.length>0&&e.rows.map(function(t,n){e._add_row(t)}),t()}).then(function(){e.$el.sortable({items:".gpb_row-content:not(.disable-sortable)",placeholder:"ui-state-highlight",handle:"> .row-action-button > .left > .gpb_drap-order-row",start:function(e,t){t.placeholder.width(t.item.find(".gpb_element-inner").first().width()-20),t.placeholder.height(t.item.height()-100),t.item.indexStart=t.item.index()},stop:e.dropRown.bind(e)}).disableSelection()}),this}},{key:"_add_row",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0===r.at)this.$el.append(new o.default(t).render().el);else{var i=this.$("> .gpb_row-content");i.map(function(a,s){var u=parseInt(r.at)-1;u==a&&e(i[u]).after(new o.default(n.get(t)).render().el)})}}},{key:"fn_clone_row",value:function(t){t.preventDefault();var n=e(t.target).parents(".gpb_row-content:first").data("cid"),r=this.rows.get({cid:n});console.log(this.rows);var i=this.rows.indexOf(r),o=a.default.toJSON(r.toJSON(),[],!0);return this.rows.add(o,{at:parseInt(i)+1}),!1}},{key:"fn_copy_row",value:function(t){t.preventDefault();var n=e(t.target).parents(".gpb_row-content:first").data("cid"),r=this.rows.get({cid:n}),i=(this.rows.indexOf(r),a.default.toJSON(r.toJSON(),[],!0)),o=document.createElement("textarea");return i.gavias_content_builder_copy070301="on",o.value=s.default.encode(JSON.stringify(i).replace(/([â])+/g,"")),document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),alert("Copy Row Successful !"),!1}},{key:"dropRown",value:function(e,t){this.rows.moveItem(t.item.indexStart,t.item.index())}}]),n}();t.default=l}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(2)),o=c(n(1)),a=(c(n(20)),c(n(5)),c(n(7))),s=c(n(44)),u=c(n(45)),l=c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(t){function n(){return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default.View),r(n,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{},elements:{}};this.column=e,this.listenTo(this.column,"destroy",this.remove),this.listenTo(this.column,"change:reRender",this.fn_re_render),this.listenTo(this.column.get("elements"),"remove",this.fn_on_remove_el),this.listenTo(this.column.get("elements"),"add",this.fn_add_el)}},{key:"events",value:function(){return{"click .gpb-action_delete":"fn_delete_column","click .gpb_add-element":"fn_render_elements_list","click .gpb-action_clone_element":"fn_clone","click .gpb-action_clone.gpb-action_clone_row":"fn_clone_element_row","click .gpb-action_edit":"fn_edit","click .gpb_minus-column":"fn_minus_column","click .gpb_plus-column":"fn_plus_column"}}},{key:"render",value:function(){var e=this;return new Promise(function(t,n){var r='<div class="gpb_col wb-<%= data.col_lg %>" data-element="<%= data.settings.element %>" data-cid="<%= data.cid %>">';r+='<div class="gpb_action-button">',r+='<div class="left">',r+='<a href="#" class="gpb_add-element" title="Add Element"><i class="fa fa-plus" ></i></a>',r+='<a href="#" class="gpb_minus-column">-</a>',r+='<a class="gpb-w-label"><%= data.col_lg %></a>',r+='<a href="#" class="gpb_plus-column">+</a>',r+="</div>",r+='<div class="right">',r+='<a href="#" class="btn-border-none btn-action gpb_drap-order gpb_drap-order-col" title="Move"><i class="fa fa-arrows-h" ></i></a>',r+='<a href="#" class="btn-border-none btn-action gpb-action_edit" title="Edit"><i class="fa fa-pencil" ></i></a>',r+='<a href="#" class="btn-border-none btn-action gpb-action_delete" title="Delete"><i class="fa fa-times" ></i></a>',r+="</div>",r+="</div>",r+='<div class="gpb_element-inner"><div class="gpb_column-content"></div></div>',r+="</div>";var i=e.column.toJSON();i.cid=e.column.cid,e.template=o.default.template(r,{variable:"data"})(i),e.setElement(e.template),e.column.get("elements")&&e.column.get("elements").length>0?e.column.get("elements").map(function(t,n,r){e.fn_add_el(t,r,{at:n})}):e.$el.addClass("empty-element"),t()}).then(function(){e.$("> .gpb_element-inner > .gpb_column-content").sortable({connectWith:".gpb_column-content",items:".gpb_el-content-inner",handle:".gpb_drap-order, .gpb_drap-order:not(.gpb_drap-order-row), .gpb_drap-order.gpb_drap-order-row",cursor:"move",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,receive:e._receive.bind(e),start:e._start.bind(e),tolerance:"pointer",update:e._update.bind(e)}).disableSelection()}),this}},{key:"fn_add_el",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});this.$("> .gpb_element-inner > .gpb_column-content > .gpb_el-content-inner").length>n.at&&n.at?e(this.$("> .gpb_element-inner > .gpb_column-content > .gpb_el-content-inner").get(parseInt(n.at)-1)).after(new u.default(t).render().el):0==n.at?this.$("> .gpb_element-inner > .gpb_column-content").prepend(new u.default(t).render().el):this.$("> .gpb_element-inner > .gpb_column-content").append(new u.default(t).render().el)}},{key:"fn_re_render",value:function(e,t){!0===this.column.get("reRender")&&(this.$el.replaceWith(this.render().el),this.column.set("reRender",!1))}},{key:"fn_delete_column",value:function(e){return e.preventDefault(),confirm("You are sure delete this column ! Continue?")&&this.column.destroy(),!1}},{key:"fn_render_elements_list",value:function(t){return t.preventDefault(),e(t.target),this.column.set("adding",!0),this.elementsList=new s.default(this.column),!1}},{key:"fn_clone",value:function(t){t.preventDefault();var n=e(t.target).parents(".gpb_el-content-inner:first").data("cid"),r=this.column.get("elements").get({cid:n}),i=this.column.get("elements").indexOf(r);return this.column.get("elements").add(l.default.toJSON(r.toJSON(),[],!0),{at:parseInt(i)+1}),!1}},{key:"fn_clone_element_row",value:function(t){t.preventDefault();var n=e(t.target).parents(".gpb_el-content-inner.gpb_row-el").data("cid"),r=this.column.get("elements").get({cid:n}),i=this.column.get("elements").indexOf(r),o=l.default.toJSON(r.toJSON(),[],!0);return this.column.get("elements").add(o,{at:parseInt(i)+1}),!1}},{key:"fn_on_remove_el",value:function(){0===this.column.get("elements").length&&this.$el.addClass("empty-element")}},{key:"fn_edit",value:function(e){return e.preventDefault(),new a.default(this.column,"Edit Column",drupalSettings.gavias_content_builder.element_fields.gva_column),this.column.set("editing",!0),!1}},{key:"fn_minus_column",value:function(e){e.preventDefault(),console.log(this.column.get("col_lg"));var t=this.column.get("col_lg");if(t>1){var n=t-1;this.column.set("col_lg",n),this.$el.removeClass("wb-"+t),this.$el.addClass("wb-"+(t-1)),this.$el.find(".gpb-w-label").first().text(t-1)}return!1}},{key:"fn_plus_column",value:function(e){e.preventDefault(),console.log(this.column.get("col_lg"));var t=this.column.get("col_lg");if(t<12){var n=t+1;this.column.set("col_lg",n),this.$el.removeClass("wb-"+t),this.$el.addClass("wb-"+(t+1)),this.$el.find(".gpb-w-label").first().text(t+1)}return console.log(this.column),!1}},{key:"_receive",value:function(e,t){var n=this;new Promise(function(e,r){var i=t.item.index(),o=l.default.toJSON(t.item.element.toJSON());n.column.get("elements").add(o,{at:i}),e()}).then(function(){t.item.element.destroy()})}},{key:"_start",value:function(e,t){t.placeholder.width(150),t.item.width(150),t.item.height(50),t.placeholder.height(t.item.height()-20),t.item.indexStart=t.item.index(),t.item.elements=this.column.get("elements"),t.item.element=this.column.get("elements").at(t.item.indexStart)}},{key:"_update",value:function(e,t){if(t.item.elements===this.column.get("elements")){var n=t.item.index();this.column.get("elements").moveItem(t.item.indexStart,n),t.item.trigger("drop",n)}}},{key:"_renderEditColumnForm",value:function(e){!0===e.get("editing")&&new a.default(e,"Edit columns",drupalSettings.gavias_content_builder.element_fields.gva_column)}}]),n}();t.default=f}).call(this,n(0))},function(e,t,n){var r,i,o;i=[n(0),n(10),n(21),n(11),n(22),n(3),n(6)],void 0===(o="function"==typeof(r=function(e){return e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&e<t+n},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var r=null,i=!1,o=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,o.widgetName+"-item")===o)return r=e(this),!1}),e.data(t.target,o.widgetName+"-item")===o&&(r=e(t.target)),!r||this.options.handle&&!n&&(e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)}),!i)||(this.currentItem=r,this._removeCurrentsFromItems(),0)))},_mouseStart:function(t,n,r){var i,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,o,a=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-this.document.scrollTop()<a.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<a.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),t.pageX-this.document.scrollLeft()<a.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),!1!==s&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=(r=this.items[n]).item[0],(o=this._intersectsWithPointer(r))&&r.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===i||e.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],i))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,i=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,u=s+e.height,l=this.offset.click.top,c=this.offset.click.left,f="x"===this.options.axis||r+l>s&&r+l<u,d="y"===this.options.axis||t+c>o&&t+c<a,h=f&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<u},_intersectsWithPointer:function(e){var t,n,r="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!!(r&&i)&&(t=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?"right"===i&&n||"left"===i&&!n:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,o,a=[],s=[],u=this._connectWith();if(u&&t)for(n=u.length-1;n>=0;n--)for(r=(i=e(u[n],this.document[0])).length-1;r>=0;r--)(o=e.data(i[r],this.widgetFullName))&&o!==this&&!o.options.disabled&&s.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);function l(){a.push(this)}for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;n>=0;n--)s[n][0].each(l);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,o,a,s,u,l,c=this.items,f=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(r=(i=e(d[n],this.document[0])).length-1;r>=0;r--)(o=e.data(i[r],this.widgetFullName))&&o!==this&&!o.options.disabled&&(f.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(n=f.length-1;n>=0;n--)for(a=f[n][1],r=0,l=(s=f[n][0]).length;r<l;r++)(u=e(s[r])).data(this.widgetName+"-item",a),c.push({item:u,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var n,r,i,o;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),n=this.items.length-1;n>=0;n--)(r=this.items[n]).instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),o=i.offset(),r.left=o.left,r.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){var n,r=(t=t||this).options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]);return t._addClass(i,"ui-sortable-placeholder",n||t.currentItem[0].className)._removeClass(i,"ui-sortable-helper"),"tbody"===r?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(i)):"tr"===r?t._createTrPlaceholder(t.currentItem,i):"img"===r&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){n&&!r.forcePlaceholderSize||(i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var r=this;t.children().each(function(){e("<td>&#160;</td>",r.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,r,i,o,a,s,u,l,c,f,d=null,h=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(d&&e.contains(this.containers[n].element[0],d.element[0]))continue;d=this.containers[n],h=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[h].containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1);else{for(i=1e4,o=null,a=(c=d.floating||this._isFloating(this.currentItem))?"left":"top",s=c?"width":"height",f=c?"pageX":"pageY",r=this.items.length-1;r>=0;r--)e.contains(this.containers[h].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(u=this.items[r].item.offset()[a],l=!1,t[f]-u>this.items[r][s]/2&&(l=!0),Math.abs(t[f]-u)<i&&(i=Math.abs(t[f]-u),o=this.items[r],this.direction=l?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[h])return void(this.currentContainer.containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[h],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),r[0].style.width&&!n.forceHelperSize||r.width(this.currentItem.width()),r[0].style.height&&!n.forceHelperSize||r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,o=t.pageX,a=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,u=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/i.grid[1])*i.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0],o=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():u?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():u?0:s.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function i(e,t,n){return function(r){n._trigger(e,r,t._uiHash(t))}}for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||r.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(0),n(3)],void 0===(o="function"==typeof(r=function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])}})})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(0),n(3)],void 0===(o="function"==typeof(r=function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),r="absolute"===n,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);return(!r||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:e(this[0].ownerDocument||document)}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),r(n(0)),r(n(1)),r(n(2)),r(n(8)),t.default={template_field_text:function(){var e="";return e='<div class="form-group <%= data.field.class %>"><div class="content-inner">',e+='<div class="form-label"><%= data.field.title %></div>',e+='<div class="form-input">',e+='<input type="text" name="<%= data.field.id %>" id="<%= data.field.id %>" value="<%= _.escape(data.field.value) %>" placeholder="<%= data.field.placeholder %>" />',e+="<% if ( data.field.desc ) { %>",e+='<p class="desc"><%= data.field.desc %></p>',e+="<% } %>",(e+="</div>")+"</div></div>"},template_field_select:function(){var e="";return e='<div class="form-group <%= data.field.class %>"><div class="content-inner">',e+='<div class="form-label"><%= data.field.title %></div>',e+='<div class="form-input">',e+='<select name="<%= data.field.id %>" id="<%= data.field.id %>" class="form-control"<%= data.field.multiple !== undefined && data.field.multiple ? \' multiple="multiple"\' : \'\' %>>',e+="<% _.each( data.field.options, function( title, value ) { %>",e+='<option value="<%= value %>"<%= ( value == data.field.value ) || ( typeof data.field.value === "object" && data.field.value.indexOf( value ) !== -1 ) ? " selected" : "" %>><%= title %></option>',e+="<% }); %>",e+="</select>",e+="<% if ( data.field.desc ) { %>",e+='<p class="desc"><%= data.field.desc %></p>',e+="<% } %>",(e+="</div>")+"</div></div>"},template_field_textarea:function(){var e="";return e='<div class="form-group <%= data.field.class %>"><div class="content-inner">',e+='<div class="form-label"><%= data.field.title %></div>',e+='<div class="form-input" style="padding: 10px;">',e+='<textarea class="code_html code_html_tiny" name="<%= data.field.id %>" id="<%= data.field.id %>" placeholder="<%= data.field.placeholder %>"><%= data.field.value %></textarea>',e+="<% if ( data.field.desc ) { %>",e+='<p class="desc"><%= data.field.desc %></p>',e+="<% } %>",(e+="</div>")+"</div></div>"},template_field_textarea_without_html:function(){var e="";return e='<div class="form-group <%= data.field.class %>"><div class="content-inner">',e+='<div class="form-label"><%= data.field.title %></div>',e+='<div class="form-input" style="padding: 10px;">',e+='<textarea rows="8" class="" name="<%= data.field.id %>" id="<%= data.field.id %>" placeholder="<%= data.field.placeholder %>"><%= data.field.value %></textarea>',e+="<% if ( data.field.desc ) { %>",e+='<p class="desc"><%= data.field.desc %></p>',e+="<% } %>",(e+="</div>")+"</div></div>"},template_field_upload:function(){var e="";return e='<div class="form-group <%= data.field.class %>"><div class="content-inner">',e+='<div class="form-label"><%= data.field.title %></div>',e+='<div class="gva-upload-input" data-id="<%= data._rid %>">',e+='<input data-id="<%= data._rid %>" id="gva-upload-<%= data._rid %>" type="text" name="<%= data.field.id %>" value="<%= data.field.value %>" class="imce-url-input" data-imce-type="link"/>',e+="<% if(data.field.value){ %>",e+='<img class="gavias-image-demo" id="gva-upload-<%= data._rid %>-demo" src="<%= drupalSettings.gavias_content_builder.base_path + data.field.value.substr(1) %>" />',e+="<% }else{ %>",e+='<img class="gavias-image-demo" id="gva-upload-<%= data._rid %>-demo" src="<%= drupalSettings.gavias_content_builder.path_modules + "/dist/images/default.png" %>" />',e+="<% } %>",e+='<a class="gavias-field-upload-remove btn-delete" data-src="<%= drupalSettings.gavias_content_builder.path_modules + "/dist/images/default.png" %>">Remove</a>',e+='<div class="clearfix"></div>',e+="<% if ( data.field.desc ) { %>",e+='<p class="desc"><%= data.field.desc %></p>',e+="<% } %>",e+="</div>",(e+="</div>")+"</div></div>"},template_field_info:function(){var e="";return e+='<div class="field-info <%= data.field.class %>">',e+='<div class="info-title"><%= data.field.title %></div>',(e+='<% if ( data.field.desc ) { %><p class="info-desc"><%= data.field.desc %></p> <% } %>')+"</div>"}}},function(e,t,n){!function(){"use strict";var t,n,r,i,o,a,s,u,l,c,f,d,h,p=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},m=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},g=function(e){return function(){return e}},v=function(e){return e},b=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},y=g(!1),w=g(!0),x=y,C=w,_=function(){return S},S=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r={fold:function(e,t){return e()},is:x,isSome:x,isNone:C,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:t,map:_,ap:_,each:function(){},bind:_,flatten:_,exists:x,forall:C,filter:_,equals:e,equals_:e,toArray:function(){return[]},toString:g("none()")};return Object.freeze&&Object.freeze(r),r}(),T=function(e){var t=function(){return e},n=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:C,isNone:x,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return T(t(e))},ap:function(t){return t.fold(_,function(t){return T(t(e))})},each:function(t){t(e)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(e)?i:S},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(x,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},k={some:T,none:_,from:function(e){return null===e||void 0===e?S:T(e)}},E=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},N=E("string"),A=E("object"),R=E("array"),O=E("null"),D=E("boolean"),P=E("function"),I=E("number"),B=void 0===(t=Array.prototype.indexOf)?function(e,t){return q(e,t)}:function(e,n){return t.call(e,n)},M=function(e,t){return B(e,t)>-1},L=function(e,t){return $(e,t).isSome()},F=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},H=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},z=function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var a=e[i];(t(a,i,e)?n:r).push(a)}return{pass:n,fail:r}},j=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},W=function(e,t,n){return H(e,function(e){n=t(n,e)}),n},U=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return k.some(i)}return k.none()},$=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return k.some(n);return k.none()},q=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},V=Array.prototype.push,X=function(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);V.apply(t,e[n])}return t}(F(e,t))},Y=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},K=Array.prototype.slice,J=function(e,t){return j(e,function(e){return!M(t,e)})},G=function(e){return 0===e.length?k.none():k.some(e[0])},Q=function(e){return 0===e.length?k.none():k.some(e[e.length-1])},Z=P(Array.from)?Array.from:function(e){return K.call(e)},ee="undefined"!=typeof window?window:Function("return this;")(),te={getOrDie:function(e,t){var n=function(e,t){return function(e,t){return function(e,t){for(var n=void 0!==t&&null!==t?t:ee,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n}(e.split("."),t)}(e,t)}(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n}},ne=function(){return te.getOrDie("URL")},re={createObjectURL:function(e){return ne().createObjectURL(e)},revokeObjectURL:function(e){ne().revokeObjectURL(e)}},ie=navigator,oe=ie.userAgent,ae=function(e){return"matchMedia"in window&&matchMedia(e).matches};l=/Android/.test(oe),r=(r=!(n=/WebKit/.test(oe))&&/MSIE/gi.test(oe)&&/Explorer/gi.test(ie.appName))&&/MSIE (\w+)\./.exec(oe)[1],i=-1!==oe.indexOf("Trident/")&&(-1!==oe.indexOf("rv:")||-1!==ie.appName.indexOf("Netscape"))&&11,o=-1!==oe.indexOf("Edge/")&&!r&&!i&&12,r=r||i||o,a=!n&&!i&&/Gecko/.test(oe),s=-1!==oe.indexOf("Mac"),u=/(iPad|iPhone)/.test(oe),c="FormData"in window&&"FileReader"in window&&"URL"in window&&!!re.createObjectURL,f=ae("only screen and (max-device-width: 480px)")&&(l||u),d=ae("only screen and (min-width: 800px)")&&(l||u),h=-1!==oe.indexOf("Windows Phone"),o&&(n=!1);var se,ue,le,ce,fe,de,he,pe,me,ge,ve,be,ye,we,xe,Ce,_e,Se,Te,ke={opera:!1,webkit:n,ie:r,gecko:a,mac:s,iOS:u,android:l,contentEditable:!u||c||parseInt(oe.match(/AppleWebKit\/(\d*)/)[1],10)>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==r,range:window.getSelection&&"Range"in window,documentMode:r&&!o?document.documentMode||7:10,fileApi:c,ceFalse:!1===r||r>8,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===r||r>11,desktop:!f&&!d,windowsPhone:h},Ee=window.Promise?window.Promise:function(){function e(e,t){return function(){e.apply(t,arguments)}}var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(t,e(o,this),e(a,this))},r=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};function i(e){var t=this;null!==this._state?r(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)}):this._deferreds.push(e)}function o(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void u(e(n,t),e(o,this),e(a,this))}this._state=!0,this._value=t,s.call(this)}catch(e){a.call(this,e)}}function a(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)i.call(this,this._deferreds[e]);this._deferreds=null}function u(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var r=this;return new n(function(n,o){i.call(r,new function(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}(e,t,n,o))})},n.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&t(arguments[0])?arguments[0]:arguments);return new n(function(t,n){if(0===e.length)return t([]);var r=e.length;function i(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(o,e)},n)}e[o]=a,0==--r&&t(e)}catch(e){n(e)}}for(var o=0;o<e.length;o++)i(o,e[o])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},n}(),Ne=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},Ae=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},Re=function(e,t){var n,r;return(r=function(){var r=arguments;clearTimeout(n),n=Ne(function(){e.apply(this,r)},t)}).stop=function(){clearTimeout(n)},r},Oe={requestAnimationFrame:function(e,t){se?se.then(e):se=new Ee(function(e){t||(t=document.body),function(e,t){var n,r=window.requestAnimationFrame,i=["ms","moz","webkit"];for(n=0;n<i.length&&!r;n++)r=window[i[n]+"RequestAnimationFrame"];r||(r=function(e){window.setTimeout(e,0)}),r(e,t)}(e,t)}).then(e)},setTimeout:Ne,setInterval:Ae,setEditorTimeout:function(e,t,n){return Ne(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r;return r=Ae(function(){e.removed?clearInterval(r):t()},n)},debounce:Re,throttle:Re,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},De=/^(?:mouse|contextmenu)|click/,Pe={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},Ie=function(){return!1},Be=function(){return!0},Me=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Le=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},Fe=function(e,t){var n,r=t||{};for(n in e)Pe[n]||(r[n]=e[n]);if(r.target||(r.target=r.srcElement||document),ke.experimentalShadowDom&&(r.target=function(e,t){if(e.composedPath){var n=e.composedPath();if(n&&n.length>0)return n[0]}return t}(e,r.target)),e&&De.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX){var i=r.target.ownerDocument||document,o=i.documentElement,a=i.body;r.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),r.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}return r.preventDefault=function(){r.isDefaultPrevented=Be,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=Be,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=Be,r.stopPropagation()},!1===function(e){return e.isDefaultPrevented===Be||e.isDefaultPrevented===Ie}(r)&&(r.isDefaultPrevented=Ie,r.isPropagationStopped=Ie,r.isImmediatePropagationStopped=Ie),void 0===r.metaKey&&(r.metaKey=!1),r},He=function(e,t,n){var r=e.document,i={type:"ready"};if(n.domLoaded)t(i);else{var o=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},a=function(){n.domLoaded||(n.domLoaded=!0,t(i))},s=function(){o()&&(Le(r,"readystatechange",s),a())},u=function(){try{r.documentElement.doScroll("left")}catch(e){return void Oe.setTimeout(u)}a()};!r.addEventListener||ke.ie&&ke.ie<11?(Me(r,"readystatechange",s),r.documentElement.doScroll&&e.self===e.top&&u()):o()?a():Me(e,"DOMContentLoaded",a),Me(e,"load",a)}},ze=function(){var e,t,n,r,i,o=this,a={};t="mce-data-"+(+new Date).toString(32),r="onmouseenter"in document.documentElement,n="onfocusin"in document.documentElement,i={mouseenter:"mouseover",mouseleave:"mouseout"},e=1,o.domLoaded=!1,o.events=a;var s=function(e,t){var n,r,i,o,s=a[t];if(n=s&&s[e.type])for(r=0,i=n.length;r<i;r++)if((o=n[r])&&!1===o.func.call(o.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};o.bind=function(u,l,c,f){var d,h,p,m,g,v,b,y=window,w=function(e){s(Fe(e||y.event),d)};if(u&&3!==u.nodeType&&8!==u.nodeType){for(u[t]?d=u[t]:(d=e++,u[t]=d,a[d]={}),f=f||u,p=(l=l.split(" ")).length;p--;)v=w,g=b=!1,"DOMContentLoaded"===(m=l[p])&&(m="ready"),o.domLoaded&&"ready"===m&&"complete"===u.readyState?c.call(f,Fe({type:m})):(r||(g=i[m])&&(v=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=Fe(e||y.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,s(e,d))}),n||"focusin"!==m&&"focusout"!==m||(b=!0,g="focusin"===m?"focus":"blur",v=function(e){(e=Fe(e||y.event)).type="focus"===e.type?"focusin":"focusout",s(e,d)}),(h=a[d][m])?"ready"===m&&o.domLoaded?c({type:m}):h.push({func:c,scope:f}):(a[d][m]=h=[{func:c,scope:f}],h.fakeName=g,h.capture=b,h.nativeHandler=v,"ready"===m?He(u,v,o):Me(u,g||m,v,b)));return u=h=0,c}},o.unbind=function(e,n,r){var i,s,u,l,c,f;if(!e||3===e.nodeType||8===e.nodeType)return o;if(i=e[t]){if(f=a[i],n){for(u=(n=n.split(" ")).length;u--;)if(s=f[c=n[u]]){if(r)for(l=s.length;l--;)if(s[l].func===r){var d=s.nativeHandler,h=s.fakeName,p=s.capture;(s=s.slice(0,l).concat(s.slice(l+1))).nativeHandler=d,s.fakeName=h,s.capture=p,f[c]=s}r&&0!==s.length||(delete f[c],Le(e,s.fakeName||c,s.nativeHandler,s.capture))}}else{for(c in f)s=f[c],Le(e,s.fakeName||c,s.nativeHandler,s.capture);f={}}for(c in f)return o;delete a[i];try{delete e[t]}catch(n){e[t]=null}}return o},o.fire=function(e,n,r){var i;if(!e||3===e.nodeType||8===e.nodeType)return o;(r=Fe(null,r)).type=n,r.target=e;do{(i=e[t])&&s(r,i),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return o},o.clean=function(e){var n,r,i=o.unbind;if(!e||3===e.nodeType||8===e.nodeType)return o;if(e[t]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),n=(r=e.getElementsByTagName("*")).length;n--;)(e=r[n])[t]&&i(e);return o},o.destroy=function(){a={}},o.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};ze.Event=new ze,ze.Event.bind(window,"ready",function(){});var je="sizzle"+-new Date,We=window.document,Ue=0,$e=0,qe=St(),Ve=St(),Xe=St(),Ye=function(e,t){return e===t&&(be=!0),0},Ke="undefined",Je=1<<31,Ge={}.hasOwnProperty,Qe=[],Ze=Qe.pop,et=Qe.push,tt=Qe.push,nt=Qe.slice,rt=Qe.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},it="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",at="\\["+it+"*("+ot+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+it+"*\\]",st=":("+ot+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+at+")*)|.*)\\)|)",ut=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),lt=new RegExp("^"+it+"*,"+it+"*"),ct=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ft=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),dt=new RegExp(st),ht=new RegExp("^"+ot+"$"),pt={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot+"|[*])"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,wt=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),Ct=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{tt.apply(Qe=nt.call(We.childNodes),We.childNodes),Qe[We.childNodes.length].nodeType}catch(e){tt={apply:Qe.length?function(e,t){et.apply(e,nt.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var _t=function(e,t,n,r){var i,o,a,s,u,l,c,f,d,h;if((t?t.ownerDocument||t:We)!==we&&ye(t),t=t||we,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(Ce&&!r){if(i=bt.exec(e))if(a=i[1]){if(9===s){if(!(o=t.getElementById(a))||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&Te(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return tt.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&le.getElementsByClassName)return tt.apply(n,t.getElementsByClassName(a)),n}if(le.qsa&&(!_e||!_e.test(e))){if(f=c=je,d=t,h=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=he(e),(c=t.getAttribute("id"))?f=c.replace(wt,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",u=l.length;u--;)l[u]=f+Dt(l[u]);d=yt.test(e)&&Rt(t.parentNode)||t,h=l.join(",")}if(h)try{return tt.apply(n,d.querySelectorAll(h)),n}catch(e){}finally{c||t.removeAttribute("id")}}}return me(e.replace(ut,"$1"),t,n,r)};function St(){var e=[];return function t(n,r){return e.push(n+" ")>ce.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function Tt(e){return e[je]=!0,e}function kt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Je)-(~e.sourceIndex||Je);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function Et(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function Nt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function At(e){return Tt(function(t){return t=+t,Tt(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function Rt(e){return e&&typeof e.getElementsByTagName!==Ke&&e}for(ue in le=_t.support={},de=_t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},ye=_t.setDocument=function(e){var t,n=e?e.ownerDocument||e:We,r=n.defaultView;return n!==we&&9===n.nodeType&&n.documentElement?(we=n,xe=n.documentElement,Ce=!de(n),r&&r!==function(e){try{return e.top}catch(e){}return null}(r)&&(r.addEventListener?r.addEventListener("unload",function(){ye()},!1):r.attachEvent&&r.attachEvent("onunload",function(){ye()})),le.attributes=!0,le.getElementsByTagName=!0,le.getElementsByClassName=vt.test(n.getElementsByClassName),le.getById=!0,ce.find.ID=function(e,t){if(typeof t.getElementById!==Ke&&Ce){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},ce.filter.ID=function(e){var t=e.replace(xt,Ct);return function(e){return e.getAttribute("id")===t}},ce.find.TAG=le.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==Ke)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},ce.find.CLASS=le.getElementsByClassName&&function(e,t){if(Ce)return t.getElementsByClassName(e)},Se=[],_e=[],le.disconnectedMatch=!0,_e=_e.length&&new RegExp(_e.join("|")),Se=Se.length&&new RegExp(Se.join("|")),t=vt.test(xe.compareDocumentPosition),Te=t||vt.test(xe.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Ye=t?function(e,t){if(e===t)return be=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!le.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===We&&Te(We,e)?-1:t===n||t.ownerDocument===We&&Te(We,t)?1:ve?rt.call(ve,e)-rt.call(ve,t):0:4&r?-1:1)}:function(e,t){if(e===t)return be=!0,0;var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],u=[t];if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:ve?rt.call(ve,e)-rt.call(ve,t):0;if(o===a)return kt(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)u.unshift(r);for(;s[i]===u[i];)i++;return i?kt(s[i],u[i]):s[i]===We?-1:u[i]===We?1:0},n):we},_t.matches=function(e,t){return _t(e,null,null,t)},_t.matchesSelector=function(e,t){if((e.ownerDocument||e)!==we&&ye(e),t=t.replace(ft,"='$1']"),le.matchesSelector&&Ce&&(!Se||!Se.test(t))&&(!_e||!_e.test(t)))try{var n=(void 0).call(e,t);if(n||le.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return _t(t,we,null,[e]).length>0},_t.contains=function(e,t){return(e.ownerDocument||e)!==we&&ye(e),Te(e,t)},_t.attr=function(e,t){(e.ownerDocument||e)!==we&&ye(e);var n=ce.attrHandle[t.toLowerCase()],r=n&&Ge.call(ce.attrHandle,t.toLowerCase())?n(e,t,!Ce):void 0;return void 0!==r?r:le.attributes||!Ce?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},_t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},_t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(be=!le.detectDuplicates,ve=!le.sortStable&&e.slice(0),e.sort(Ye),be){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return ve=null,e},fe=_t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=fe(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=fe(t);return n},(ce=_t.selectors={cacheLength:50,createPseudo:Tt,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xt,Ct),e[3]=(e[3]||e[4]||e[5]||"").replace(xt,Ct),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||_t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&_t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&dt.test(n)&&(t=he(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xt,Ct).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=qe[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&qe(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Ke&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=_t.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,d,h,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!u&&!s;if(g){if(o){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&b){for(h=(l=(c=g[je]||(g[je]={}))[e]||[])[0]===Ue&&l[1],d=l[0]===Ue&&l[2],f=h&&g.childNodes[h];f=++h&&f&&f[m]||(d=h=0)||p.pop();)if(1===f.nodeType&&++d&&f===t){c[e]=[Ue,h,d];break}}else if(b&&(l=(t[je]||(t[je]={}))[e])&&l[0]===Ue)d=l[1];else for(;(f=++h&&f&&f[m]||(d=h=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++d||(b&&((f[je]||(f[je]={}))[e]=[Ue,d]),f!==t)););return(d-=i)===r||d%r==0&&d/r>=0}}},PSEUDO:function(e,t){var n,r=ce.pseudos[e]||ce.setFilters[e.toLowerCase()]||_t.error("unsupported pseudo: "+e);return r[je]?r(t):r.length>1?(n=[e,e,"",t],ce.setFilters.hasOwnProperty(e.toLowerCase())?Tt(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=rt.call(e,o[a])]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:Tt(function(e){var t=[],n=[],r=pe(e.replace(ut,"$1"));return r[je]?Tt(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:Tt(function(e){return function(t){return _t(e,t).length>0}}),contains:Tt(function(e){return e=e.replace(xt,Ct),function(t){return(t.textContent||t.innerText||fe(t)).indexOf(e)>-1}}),lang:Tt(function(e){return ht.test(e||"")||_t.error("unsupported lang: "+e),e=e.replace(xt,Ct).toLowerCase(),function(t){var n;do{if(n=Ce?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===xe},focus:function(e){return e===we.activeElement&&(!we.hasFocus||we.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!ce.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:At(function(){return[0]}),last:At(function(e,t){return[t-1]}),eq:At(function(e,t,n){return[n<0?n+t:n]}),even:At(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:At(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:At(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:At(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=ce.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})ce.pseudos[ue]=Et(ue);for(ue in{submit:!0,reset:!0})ce.pseudos[ue]=Nt(ue);function Ot(){}function Dt(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function Pt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=$e++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,u,l=[Ue,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if((s=(u=t[je]||(t[je]={}))[r])&&s[0]===Ue&&s[1]===o)return l[2]=s[2];if(u[r]=l,l[2]=e(t,n,a))return!0}}}function It(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Bt(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Mt(e,t,n,r,i,o){return r&&!r[je]&&(r=Mt(r)),i&&!i[je]&&(i=Mt(i,o)),Tt(function(o,a,s,u){var l,c,f,d=[],h=[],p=a.length,m=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)_t(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?m:Bt(m,d,e,s,u),v=n?i||(o?e:p||r)?[]:a:g;if(n&&n(g,v,s,u),r)for(l=Bt(v,h),r(l,[],s,u),c=l.length;c--;)(f=l[c])&&(v[h[c]]=!(g[h[c]]=f));if(o){if(i||e){if(i){for(l=[],c=v.length;c--;)(f=v[c])&&l.push(g[c]=f);i(null,v=[],l,u)}for(c=v.length;c--;)(f=v[c])&&(l=i?rt.call(o,f):d[c])>-1&&(o[l]=!(a[l]=f))}}else v=Bt(v===a?v.splice(p,v.length):v),i?i(null,a,v,u):tt.apply(a,v)})}function Lt(e){for(var t,n,r,i=e.length,o=ce.relative[e[0].type],a=o||ce.relative[" "],s=o?1:0,u=Pt(function(e){return e===t},a,!0),l=Pt(function(e){return rt.call(t,e)>-1},a,!0),c=[function(e,n,r){return!o&&(r||n!==ge)||((t=n).nodeType?u(e,n,r):l(e,n,r))}];s<i;s++)if(n=ce.relative[e[s].type])c=[Pt(It(c),n)];else{if((n=ce.filter[e[s].type].apply(null,e[s].matches))[je]){for(r=++s;r<i&&!ce.relative[e[r].type];r++);return Mt(s>1&&It(c),s>1&&Dt(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ut,"$1"),n,s<r&&Lt(e.slice(s,r)),r<i&&Lt(e=e.slice(r)),r<i&&Dt(e))}c.push(n)}return It(c)}Ot.prototype=ce.filters=ce.pseudos,ce.setFilters=new Ot,he=_t.tokenize=function(e,t){var n,r,i,o,a,s,u,l=Ve[e+" "];if(l)return t?0:l.slice(0);for(a=e,s=[],u=ce.preFilter;a;){for(o in n&&!(r=lt.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=ct.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ut," ")}),a=a.slice(n.length)),ce.filter)!(r=pt[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?_t.error(e):Ve(e,s).slice(0)},pe=_t.compile=function(e,t){var n,r=[],i=[],o=Xe[e+" "];if(!o){for(t||(t=he(e)),n=t.length;n--;)(o=Lt(t[n]))[je]?r.push(o):i.push(o);(o=Xe(e,function(e,t){var n=t.length>0,r=e.length>0,i=function(i,o,a,s,u){var l,c,f,d=0,h="0",p=i&&[],m=[],g=ge,v=i||r&&ce.find.TAG("*",u),b=Ue+=null==g?1:Math.random()||.1,y=v.length;for(u&&(ge=o!==we&&o);h!==y&&null!=(l=v[h]);h++){if(r&&l){for(c=0;f=e[c++];)if(f(l,o,a)){s.push(l);break}u&&(Ue=b)}n&&((l=!f&&l)&&d--,i&&p.push(l))}if(d+=h,n&&h!==d){for(c=0;f=t[c++];)f(p,m,o,a);if(i){if(d>0)for(;h--;)p[h]||m[h]||(m[h]=Ze.call(s));m=Bt(m)}tt.apply(s,m),u&&!i&&m.length>0&&d+t.length>1&&_t.uniqueSort(s)}return u&&(Ue=b,ge=g),p};return n?Tt(i):i}(i,r))).selector=e}return o},me=_t.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&he(e=l.selector||e);if(n=n||[],1===c.length){if((o=c[0]=c[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&le.getById&&9===t.nodeType&&Ce&&ce.relative[o[1].type]){if(!(t=(ce.find.ID(a.matches[0].replace(xt,Ct),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=pt.needsContext.test(e)?0:o.length;i--&&(a=o[i],!ce.relative[s=a.type]);)if((u=ce.find[s])&&(r=u(a.matches[0].replace(xt,Ct),yt.test(o[0].type)&&Rt(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&Dt(o)))return tt.apply(n,r),n;break}}return(l||pe(e,c))(r,t,!Ce,n,yt.test(e)&&Rt(t.parentNode)||t),n},le.sortStable=je.split("").sort(Ye).join("")===je,le.detectDuplicates=!!be,ye(),le.sortDetached=!0;var Ft=Array.isArray,Ht=function(e,t,n){var r,i;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,i=e.length;r<i;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},zt=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return r;return-1},jt={isArray:Ft,toArray:function(e){var t,n,r=e;if(!Ft(e))for(r=[],t=0,n=e.length;t<n;t++)r[t]=e[t];return r},each:Ht,map:function(e,t){var n=[];return Ht(e,function(r,i){n.push(t(r,i,e))}),n},filter:function(e,t){var n=[];return Ht(e,function(r,i){t&&!t(r,i,e)||n.push(r)}),n},indexOf:function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,r){var i=0;for(arguments.length<3&&(n=e[0]);i<e.length;i++)n=t.call(r,n,e[i],i);return n},findIndex:zt,find:function(e,t,n){var r=zt(e,t,n);if(-1!==r)return e[r]},last:function(e){return e[e.length-1]}},Wt=/^\s*|\s*$/g,Ut=function(e){return null===e||void 0===e?"":(""+e).replace(Wt,"")},$t=function(e,t){return t?!("array"!==t||!jt.isArray(e))||typeof e===t:void 0!==e},qt=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),jt.each(e,function(e,i){if(!1===t.call(r,e,i,n))return!1;qt(e,t,n,r)}))},Vt={trim:Ut,isArray:jt.isArray,is:$t,toArray:jt.toArray,makeMap:function(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},each:jt.each,map:jt.map,grep:jt.filter,inArray:jt.indexOf,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e,t){for(var n,r,i,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s,u=arguments;for(n=1,r=u.length;n<r;n++)for(i in t=u[n])t.hasOwnProperty(i)&&void 0!==(s=t[i])&&(e[i]=s);return e},create:function(e,t,n){var r,i,o,a,s,u=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],!(i=this.createNS(e[3].replace(/\.\w+$/,""),n))[o]){if("static"===e[2])return i[o]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[o]));t[o]||(t[o]=function(){},u=1),i[o]=t[o],this.extend(i[o].prototype,t),e[5]&&(r=this.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=i[o],i[o]=u?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],s.apply(this,arguments)},i[o].prototype[o]=i[o],this.each(r,function(e,t){i[o].prototype[t]=r[t]}),this.each(t,function(e,t){r[t]?i[o].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==o&&(i[o].prototype[t]=e)})),this.each(t.static,function(e,t){i[o][t]=e})}},walk:qt,createNS:function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t},resolve:function(e,t){var n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},explode:function(e,t){return!e||$t(e,"array")?e:jt.map(e.split(t||","),Ut)},_addCacheSuffix:function(e){var t=ke.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Xt=document,Yt=Array.prototype.push,Kt=Array.prototype.slice,Jt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Gt=ze.Event,Qt=Vt.makeMap("children,contents,next,prev"),Zt=function(e){return void 0!==e},en=function(e){return"string"==typeof e},tn=function(e,t){var n,r,i;for(i=(t=t||Xt).createElement("div"),n=t.createDocumentFragment(),i.innerHTML=e;r=i.firstChild;)n.appendChild(r);return n},nn=function(e,t,n,r){var i;if(en(t))t=tn(t,vn(e[0]));else if(t.length&&!t.nodeType){if(t=dn.makeArray(t),r)for(i=t.length-1;i>=0;i--)nn(e,t[i],n,r);else for(i=0;i<t.length;i++)nn(e,t[i],n,r);return e}if(t.nodeType)for(i=e.length;i--;)n.call(e[i],t);return e},rn=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},on=function(e,t,n){var r,i;return t=dn(t)[0],e.each(function(){n&&r===this.parentNode?i.appendChild(this):(r=this.parentNode,i=t.cloneNode(!1),this.parentNode.insertBefore(i,this),i.appendChild(this))}),e},an=Vt.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),sn=Vt.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),un={for:"htmlFor",class:"className",readonly:"readOnly"},ln={float:"cssFloat"},cn={},fn={},dn=function(e,t){return new dn.fn.init(e,t)},hn=/^\s*|\s*$/g,pn=function(e){return null===e||void 0===e?"":(""+e).replace(hn,"")},mn=function(e,t){var n,r,i,o;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],!1===t.call(o,r,o)))break}else for(i=0;i<n&&(o=e[i],!1!==t.call(o,i,o));i++);return e},gn=function(e,t){var n=[];return mn(e,function(e,r){t(r,e)&&n.push(r)}),n},vn=function(e){return e?9===e.nodeType?e:e.ownerDocument:Xt};dn.fn=dn.prototype={constructor:dn,selector:"",context:null,length:0,init:function(e,t){var n,r;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(t&&t.nodeType)this.context=t;else{if(t)return dn(e).attr(t);this.context=t=document}if(en(e)){if(this.selector=e,!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:Jt.exec(e)))return dn(t).find(e);if(n[1])for(r=tn(e,vn(t)).firstChild;r;)Yt.call(this,r),r=r.nextSibling;else{if(!(r=vn(t).getElementById(n[2])))return this;if(r.id!==n[2])return this.find(e);this.length=1,this[0]=r}}else this.add(e,!1);return this},toArray:function(){return Vt.toArray(this)},add:function(e,t){var n,r;if(en(e))return this.add(dn(e));if(!1!==t)for(n=dn.unique(this.toArray().concat(dn.makeArray(e))),this.length=n.length,r=0;r<n.length;r++)this[r]=n[r];else Yt.apply(this,dn.makeArray(e));return this},attr:function(e,t){var n,r=this;if("object"==typeof e)mn(e,function(e,t){r.attr(e,t)});else{if(!Zt(t)){if(r[0]&&1===r[0].nodeType){if((n=cn[e])&&n.get)return n.get(r[0],e);if(sn[e])return r.prop(e)?e:void 0;null===(t=r[0].getAttribute(e,2))&&(t=void 0)}return t}this.each(function(){var n;if(1===this.nodeType){if((n=cn[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=un[e]||e))mn(e,function(e,t){n.prop(e,t)});else{if(!Zt(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(e,t){var n,r,i=this,o=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof e)mn(e,function(e,t){i.css(e,t)});else if(Zt(t))e=o(e),"number"!=typeof t||an[e]||(t=t.toString()+"px"),i.each(function(){var n=this.style;if((r=fn[e])&&r.set)r.set(this,t);else{try{this.style[ln[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(a(e)):n.removeAttribute(e))}});else{if(n=i[0],(r=fn[e])&&r.get)return r.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[o(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(e))}catch(e){return}}return i},remove:function(){for(var e,t=this.length;t--;)e=this[t],Gt.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t;if(Zt(e)){t=this.length;try{for(;t--;)this[t].innerHTML=e}catch(n){dn(this[t]).empty().append(e)}return this}return this[0]?this[0].innerHTML:""},text:function(e){var t;if(Zt(e)){for(t=this.length;t--;)"innerText"in this[t]?this[t].innerText=e:this[0].textContent=e;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return nn(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return nn(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?nn(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?nn(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return dn(e).append(this),this},prependTo:function(e){return dn(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return on(this,e)},wrapAll:function(e){return on(this,e,!0)},wrapInner:function(e){return this.each(function(){dn(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){dn(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),dn(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?mn(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var i,o;(o=rn(r,e))!==t&&(i=r.className,o?r.className=pn((" "+i+" ").replace(" "+e+" "," ")):r.className+=i?" "+e:e)}),n)},hasClass:function(e){return rn(this[0],e)},each:function(e){return mn(this,e)},on:function(e,t){return this.each(function(){Gt.bind(this,e,t)})},off:function(e,t){return this.each(function(){Gt.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?Gt.fire(this,e.type,e):Gt.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new dn(Kt.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)dn.find(e,this[t],r);return dn(r)},filter:function(e){return dn("function"==typeof e?gn(this.toArray(),function(t,n){return e(n,t)}):dn.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof dn&&(e=e[0]),this.each(function(n,r){for(;r;){if("string"==typeof e&&dn(r).is(e)){t.push(r);break}if(r===e){t.push(r);break}r=r.parentNode}}),dn(t)},offset:function(e){var t,n,r,i,o=0,a=0;return e?this.css(e):((t=this[0])&&(r=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(o=(i=t.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=i.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:o,top:a})},push:Yt,sort:[].sort,splice:[].splice},Vt.extend(dn,{extend:Vt.extend,makeArray:function(e){return(t=e)&&t===t.window||e.nodeType?[e]:Vt.toArray(e);var t},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:Vt.isArray,each:mn,trim:pn,grep:gn,find:_t,expr:_t.selectors,unique:_t.uniqueSort,text:_t.getText,contains:_t.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return 1===t.length?dn.find.matchesSelector(t[0],e)?[t[0]]:[]:dn.find.matches(e,t)}});var bn=function(e,t,n){var r=[],i=e[t];for("string"!=typeof n&&n instanceof dn&&(n=n[0]);i&&9!==i.nodeType;){if(void 0!==n){if(i===n)break;if("string"==typeof n&&dn(i).is(n))break}1===i.nodeType&&r.push(i),i=i[t]}return r},yn=function(e,t,n,r){var i=[];for(r instanceof dn&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&dn(e).is(r))break}i.push(e)}return i},wn=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};mn({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return bn(e,"parentNode")},next:function(e){return wn(e,"nextSibling",1)},prev:function(e){return wn(e,"previousSibling",1)},children:function(e){return yn(e.firstChild,"nextSibling",1)},contents:function(e){return Vt.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){dn.fn[e]=function(n){var r=[];return this.each(function(){var e=t.call(r,this,n,r);e&&(dn.isArray(e)?r.push.apply(r,e):r.push(e))}),this.length>1&&(Qt[e]||(r=dn.unique(r)),0===e.indexOf("parents")&&(r=r.reverse())),r=dn(r),n?r.filter(n):r}}),mn({parentsUntil:function(e,t){return bn(e,"parentNode",t)},nextUntil:function(e,t){return yn(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return yn(e,"previousSibling",1,t).slice(1)}},function(e,t){dn.fn[e]=function(n,r){var i=[];return this.each(function(){var e=t.call(i,this,n,i);e&&(dn.isArray(e)?i.push.apply(i,e):i.push(e))}),this.length>1&&(i=dn.unique(i),0!==e.indexOf("parents")&&"prevUntil"!==e||(i=i.reverse())),i=dn(i),r?i.filter(r):i}}),dn.fn.is=function(e){return!!e&&this.filter(e).length>0},dn.fn.init.prototype=dn.fn,dn.overrideDefaults=function(e){var t,n=function(r,i){return t=t||e(),0===arguments.length&&(r=t.element),i||(i=t.context),new n.fn.init(r,i)};return dn.extend(n,this),n};var xn=function(e,t,n){mn(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})};ke.ie&&ke.ie<8&&(xn(cn,"get",{maxlength:function(e){var t=e.maxLength;if(2147483647!==t)return t},size:function(e){var t=e.size;if(20!==t)return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(0!==t.length)return t}}),xn(cn,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),ke.ie&&ke.ie<9&&(ln.float="styleFloat",xn(fn,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),dn.attrHooks=cn,dn.cssHooks=fn;var Cn=function(e){var t,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n||(n=!0,t=e.apply(null,r)),t}},_n=function(){return Sn(0,0)},Sn=function(e,t){return{major:e,minor:t}},Tn=function(e,t){var n=String(t).toLowerCase();return 0===e.length?_n():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return Sn(r(1),r(2))}(e,n)},kn=_n,En=function(e,t){return function(){return t===e}},Nn=function(e){var t=e.current;return{current:t,version:e.version,isEdge:En("Edge",t),isChrome:En("Chrome",t),isIE:En("IE",t),isOpera:En("Opera",t),isFirefox:En("Firefox",t),isSafari:En("Safari",t)}},An=function(){return Nn({current:void 0,version:kn()})},Rn=Nn,On=(g("Edge"),g("Chrome"),g("IE"),g("Opera"),g("Firefox"),g("Safari"),function(e,t){return function(){return t===e}}),Dn=function(e){var t=e.current;return{current:t,version:e.version,isWindows:On("Windows",t),isiOS:On("iOS",t),isAndroid:On("Android",t),isOSX:On("OSX",t),isLinux:On("Linux",t),isSolaris:On("Solaris",t),isFreeBSD:On("FreeBSD",t)}},Pn=function(){return Dn({current:void 0,version:kn()})},In=Dn,Bn=(g("Windows"),g("iOS"),g("Android"),g("Linux"),g("OSX"),g("Solaris"),g("FreeBSD"),function(e,t){var n=String(t).toLowerCase();return U(e,function(e){return e.search(n)})}),Mn=function(e,t){return-1!==e.indexOf(t)},Ln=function(e){return e.replace(/^\s+|\s+$/g,"")},Fn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Hn=function(e){return function(t){return Mn(t,e)}},zn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Mn(e,"edge/")&&Mn(e,"chrome")&&Mn(e,"safari")&&Mn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fn],search:function(e){return Mn(e,"chrome")&&!Mn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Mn(e,"msie")||Mn(e,"trident")}},{name:"Opera",versionRegexes:[Fn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Hn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Hn("firefox")},{name:"Safari",versionRegexes:[Fn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Mn(e,"safari")||Mn(e,"mobile/"))&&Mn(e,"applewebkit")}}],jn=[{name:"Windows",search:Hn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Mn(e,"iphone")||Mn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Hn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Hn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Hn("linux"),versionRegexes:[]},{name:"Solaris",search:Hn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Hn("freebsd"),versionRegexes:[]}],Wn={browsers:g(zn),oses:g(jn)},Un=function(e){var t=Wn.browsers(),n=Wn.oses(),r=function(e,t){return Bn(e,t).map(function(e){var n=Tn(e.versionRegexes,t);return{current:e.name,version:n}})}(t,e).fold(An,Rn),i=function(e,t){return Bn(e,t).map(function(e){var n=Tn(e.versionRegexes,t);return{current:e.name,version:n}})}(n,e).fold(Pn,In);return{browser:r,os:i,deviceType:function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!r,o=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||o||a&&!0===/mobile/i.test(n),u=e.isiOS()||e.isAndroid(),l=u&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:g(r),isiPhone:g(i),isTablet:g(s),isPhone:g(l),isTouch:g(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:g(c)}}(i,r,e)}},$n={detect:Cn(function(){var e=navigator.userAgent;return Un(e)})},qn=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:g(e)}},Vn={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return qn(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return qn(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return qn(n)},fromDom:qn,fromPoint:function(e,t,n){var r=e.dom();return k.from(r.elementFromPoint(t,n)).map(qn)}},Xn={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},Yn=function(e){return e.dom().nodeName.toLowerCase()},Kn=function(e){return e.dom().nodeType},Jn=function(e){return function(t){return Kn(t)===e}},Gn=Jn(Xn.ELEMENT),Qn=Jn(Xn.TEXT),Zn=Jn(Xn.DOCUMENT),er={name:Yn,type:Kn,value:function(e){return e.dom().nodeValue},isElement:Gn,isText:Qn,isDocument:Zn,isComment:function(e){return Kn(e)===Xn.COMMENT||"#comment"===Yn(e)}},tr=Object.keys,nr=function(e,t){for(var n=tr(e),r=0,i=n.length;r<i;r++){var o=n[r];t(e[o],o,e)}},rr=function(e,t){return ir(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},ir=function(e,t){var n={};return nr(e,function(r,i){var o=t(r,i,e);n[o.k]=o.v}),n},or=function(e,t,n){if(!(N(n)||D(n)||I(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},ar=function(e,t,n){or(e.dom(),t,n)},sr=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},ur=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},lr=ar,cr=function(e,t){var n=e.dom();nr(t,function(e,t){or(n,t,e)})},fr=sr,dr=ur,hr=function(e,t){e.dom().removeAttribute(t)},pr=Cn(function(){return mr(Vn.fromDom(document))}),mr=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return Vn.fromDom(t)},gr={body:pr,getBody:mr,inBody:function(e){var t=er.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)}},vr=function(e){return void 0!==e.style},br=function(e,t){return vr(e)?e.style.getPropertyValue(t):""},yr=function(e,t){var n=e.dom();nr(t,function(e,t){!function(e,t,n){if(!N(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);vr(e)&&e.style.setProperty(t,n)}(n,t,e)})},wr=function(e,t){var n=e.dom(),r=window.getComputedStyle(n).getPropertyValue(t),i=""!==r||gr.inBody(e)?r:br(n,t);return null===i?void 0:i},xr=function(e,t){var n=e.dom(),r=br(n,t);return k.from(r).filter(function(e){return e.length>0})},Cr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return H(e,function(e,n){r[e]=g(t[n])}),r}},_r=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},i=t(e);do{i=i.bind(r)}while(i.isSome());return n},Sr=function(e,t){return function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(e,t,te.getOrDie("Node").DOCUMENT_POSITION_CONTAINED_BY)},Tr=Xn.ELEMENT,kr=Xn.DOCUMENT,Er=function(e){return e.nodeType!==Tr&&e.nodeType!==kr||0===e.childElementCount},Nr={all:function(e,t){var n=void 0===t?document:t.dom();return Er(n)?[]:F(n.querySelectorAll(e),Vn.fromDom)},is:function(e,t){var n=e.dom();if(n.nodeType!==Tr)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},one:function(e,t){var n=void 0===t?document:t.dom();return Er(n)?k.none():k.from(n.querySelector(e)).map(Vn.fromDom)}},Ar=function(e,t){return e.dom()===t.dom()},Rr=$n.detect().browser.isIE()?function(e,t){return Sr(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Or={eq:Ar,isEqualNode:function(e,t){return e.dom().isEqualNode(t.dom())},member:function(e,t){return L(t,b(Ar,e))},contains:Rr,is:Nr.is},Dr=function(e){var t=e.dom();return k.from(t.parentNode).map(Vn.fromDom)},Pr=function(e){var t=e.dom();return k.from(t.previousSibling).map(Vn.fromDom)},Ir=function(e){var t=e.dom();return k.from(t.nextSibling).map(Vn.fromDom)},Br=function(e){var t=e.dom();return F(t.childNodes,Vn.fromDom)},Mr=function(e,t){var n=e.dom().childNodes;return k.from(n[t]).map(Vn.fromDom)},Lr=(Cr("element","offset"),function(e){return Vn.fromDom(e.dom().ownerDocument)}),Fr=function(e){var t=e.dom().ownerDocument.defaultView;return Vn.fromDom(t)},Hr=function(e){return Vn.fromDom(e.dom().ownerDocument.documentElement)},zr=Dr,jr=function(e,t){for(var n=P(t)?t:g(!1),r=e.dom(),i=[];null!==r.parentNode&&void 0!==r.parentNode;){var o=r.parentNode,a=Vn.fromDom(o);if(i.push(a),!0===n(a))break;r=o}return i},Wr=Pr,Ur=function(e){return t=_r(e,Pr),(n=K.call(t,0)).reverse(),n;var t,n},$r=Ir,qr=function(e){return _r(e,Ir)},Vr=Br,Xr=Mr,Yr=function(e){return Mr(e,0)},Kr=function(e){return Mr(e,e.dom().childNodes.length-1)},Jr=function(e){return e.dom().childNodes.length},Gr=$n.detect().browser,Qr=function(e){return U(e,er.isElement)},Zr={getPos:function(e,t,n){var r,i,o=0,a=0,s=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===wr(Vn.fromDom(e),"position"))return{x:o=(i=t.getBoundingClientRect()).left+(s.documentElement.scrollLeft||e.scrollLeft)-s.documentElement.clientLeft,y:a=i.top+(s.documentElement.scrollTop||e.scrollTop)-s.documentElement.clientTop};for(r=t;r&&r!==n&&r.nodeType;)o+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType;)o-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=function(e){return Gr.isFirefox()&&"table"===er.name(e)?Qr(Vr(e)).filter(function(e){return"caption"===er.name(e)}).bind(function(e){return Qr(qr(e)).map(function(t){var n=t.dom().offsetTop,r=e.dom().offsetTop,i=e.dom().offsetHeight;return n<=r?-i:0})}).getOr(0):0}(Vn.fromDom(t))}return{x:o,y:a}}},ei=function(e){var t=k.none(),n=[],r=function(e){i()?o(e):n.push(e)},i=function(){return t.isSome()},o=function(e){t.each(function(t){setTimeout(function(){e(t)},0)})};return e(function(e){t=k.some(e),function(e){H(e,o)}(n),n=[]}),{get:r,map:function(e){return ei(function(t){r(function(n){t(e(n))})})},isReady:i}},ti={nu:ei,pure:function(e){return ei(function(t){t(e)})}},ni=function(e){var t=function(t){var n;e((n=t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this;setTimeout(function(){n.apply(r,e)},0)}))},n=function(){return ti.nu(t)};return{map:function(e){return ni(function(n){t(function(t){var r=e(t);n(r)})})},bind:function(e){return ni(function(n){t(function(t){e(t).get(n)})})},anonBind:function(e){return ni(function(n){t(function(t){e.get(n)})})},toLazy:n,toCached:function(){var e=null;return ni(function(t){null===e&&(e=n()),e.get(t)})},get:t}},ri={nu:ni,pure:function(e){return ni(function(t){t(e)})}},ii=function(e){return function(e,t){return t(function(t){var n=[],r=0;0===e.length?t([]):H(e,function(i,o){i.get(function(i){return function(o){n[i]=o,++r>=e.length&&t(n)}}(o))})})}(e,ri.nu)},oi=function(e){return{is:function(t){return e===t},isValue:w,isError:y,getOr:g(e),getOrThunk:g(e),getOrDie:g(e),or:function(t){return oi(e)},orThunk:function(t){return oi(e)},fold:function(t,n){return n(e)},map:function(t){return oi(t(e))},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return k.some(e)}}},ai=function(e){return{is:y,isValue:y,isError:w,getOr:v,getOrThunk:function(e){return e()},getOrDie:function(){return(t=String(e),function(){throw new Error(t)})();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return ai(e)},each:p,bind:function(t){return ai(e)},exists:y,forall:w,toOption:k.none}},si={value:oi,error:ai};function ui(e,t){var n=e,r=function(e,n,r,i){var o,a;if(e){if(!i&&e[n])return e[n];if(e!==t){if(o=e[r])return o;for(a=e.parentNode;a&&a!==t;a=a.parentNode)if(o=a[r])return o}}};this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=function(e,n,r,i){var o,a,s;if(e){if(o=e.previousSibling,t&&o===t)return;if(o){if(!i)for(s=o[n];s;s=s[n])if(!s[n])return s;return o}if((a=e.parentNode)&&a!==t)return a}}(n,"lastChild",0,e)}}var li,ci,fi,di=function(e){var t;return function(n){return(t=t||function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];n[String(o)]=t(o,r)}return n}(e,g(!0))).hasOwnProperty(er.name(n))}},hi=di(["h1","h2","h3","h4","h5","h6"]),pi=di(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),mi=function(e){return er.isElement(e)&&!pi(e)},gi=function(e){return er.isElement(e)&&"br"===er.name(e)},vi=di(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),bi=di(["ul","ol","dl"]),yi=di(["li","dd","dt"]),wi=di(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),xi=di(["thead","tbody","tfoot"]),Ci=di(["td","th"]),_i=di(["pre","script","textarea","style"]),Si=function(e){return function(t){return!!t&&t.nodeType===e}},Ti=Si(1),ki=function(e){var t=e.toLowerCase().split(" ");return function(e){var n,r;if(e&&e.nodeType)for(r=e.nodeName.toLowerCase(),n=0;n<t.length;n++)if(r===t[n])return!0;return!1}},Ei=function(e){return function(t){if(Ti(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Ni=Si(3),Ai=Si(8),Ri=Si(9),Oi=ki("br"),Di=Ei("true"),Pi=Ei("false"),Ii={isText:Ni,isElement:Ti,isComment:Ai,isDocument:Ri,isBr:Oi,isContentEditableTrue:Di,isContentEditableFalse:Pi,matchNodeNames:ki,hasPropValue:function(e,t){return function(n){return Ti(n)&&n[e]===t}},hasAttribute:function(e,t){return function(t){return Ti(t)&&t.hasAttribute(e)}},hasAttributeValue:function(e,t){return function(n){return Ti(n)&&n.getAttribute(e)===t}},matchStyleValues:function(e,t){var n=t.toLowerCase().split(" ");return function(t){var r;if(Ti(t))for(r=0;r<n.length;r++){var i=t.ownerDocument.defaultView.getComputedStyle(t,null);if((i?i.getPropertyValue(e):null)===n[r])return!0}return!1}},isBogus:function(e){return Ti(e)&&e.hasAttribute("data-mce-bogus")},isBogusAll:function(e){return Ti(e)&&"all"===e.getAttribute("data-mce-bogus")},isTable:function(e){return Ti(e)&&"TABLE"===e.tagName}},Bi=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Mi=function(e,t){var n,r=t.childNodes;if(!Ii.isElement(t)||!Bi(t)){for(n=r.length-1;n>=0;n--)Mi(e,r[n]);if(!1===Ii.isDocument(t)){if(Ii.isText(t)&&t.nodeValue.length>0){var i=Vt.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||i>0)return;if(0===i&&function(e){var t=e.previousSibling&&"SPAN"===e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"===e.nextSibling.nodeName;return t&&n}(t))return}else if(Ii.isElement(t)&&(1===(r=t.childNodes).length&&Bi(r[0])&&t.parentNode.insertBefore(r[0],t),r.length||wi(Vn.fromDom(t))))return;e.remove(t)}return t}},Li={trimNode:Mi},Fi=Vt.makeMap,Hi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zi=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ji=/[<>&\"\']/g,Wi=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ui={128:"â¬",130:"â",131:"Æ",132:"â",133:"â¦",134:"â ",135:"â¡",136:"Ë",137:"â°",138:"Å ",139:"â¹",140:"Å",142:"Å½",145:"â",146:"â",147:"â",148:"â",149:"â¢",150:"â",151:"â",152:"Ë",153:"â¢",154:"Å¡",155:"âº",156:"Å",158:"Å¾",159:"Å¸"};ci={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},fi={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var $i=function(e,t){var n,r,i,o={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),ci[r]||(i="&"+e[n+1]+";",o[r]=i,o[i]=r);return o}};li=$i("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var qi=function(e,t){return e.replace(t?Hi:zi,function(e){return ci[e]||e})},Vi=function(e,t){return e.replace(t?Hi:zi,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":ci[e]||"&#"+e.charCodeAt(0)+";"})},Xi=function(e,t,n){return n=n||li,e.replace(t?Hi:zi,function(e){return ci[e]||n[e]||e})},Yi={encodeRaw:qi,encodeAllRaw:function(e){return(""+e).replace(ji,function(e){return ci[e]||e})},encodeNumeric:Vi,encodeNamed:Xi,getEncodeFunc:function(e,t){var n=$i(t)||li,r=Fi(e.replace(/\+/g,","));return r.named&&r.numeric?function(e,t){return e.replace(t?Hi:zi,function(e){return void 0!==ci[e]?ci[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})}:r.named?t?function(e,t){return Xi(e,t,n)}:Xi:r.numeric?Vi:qi},decode:function(e){return e.replace(Wi,function(e,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Ui[t]||String.fromCharCode(t):fi[e]||li[e]||(n=e,(r=Vn.fromTag("div").dom()).innerHTML=n,r.textContent||r.innerText||n);var n,r})}},Ki={},Ji={},Gi=Vt.makeMap,Qi=Vt.each,Zi=Vt.extend,eo=Vt.explode,to=Vt.inArray,no=function(e,t){return(e=Vt.trim(e))?e.split(t||" "):[]},ro=function(e){var t,n,r,i,o,a,s={},u=function(e,n,r){var i,o,a,u=function(e,t){var n,r,i={};for(n=0,r=e.length;n<r;n++)i[e[n]]=t||{};return i};for(r=r||[],n=n||"","string"==typeof r&&(r=no(r)),i=(e=no(e)).length;i--;)a={attributes:u(o=no([t,n].join(" "))),attributesOrder:o,children:u(r,Ji)},s[e[i]]=a},l=function(e,t){var n,r,i,o;for(n=(e=no(e)).length,t=no(t);n--;)for(r=s[e[n]],i=0,o=t.length;i<o;i++)r.attributes[t[i]]={},r.attributesOrder.push(t[i])};return Ki[e]?Ki[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",r=[r,a="acronym applet basefont big font strike tt"].join(" "),Qi(no(a),function(e){u(e,"",r)}),n=[n,o="center dir isindex noframes"].join(" "),i=[n,r].join(" "),Qi(no(o),function(e){u(e,"",i)})),i=i||[n,r].join(" "),u("html","manifest","head body"),u("head","","base command link meta noscript script style title"),u("title hr noscript br"),u("base","href target"),u("link","href rel media hreflang type sizes hreflang"),u("meta","name http-equiv content charset"),u("style","media type scoped"),u("script","src async defer type charset"),u("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),u("address dt dd div caption","",i),u("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),u("blockquote","cite",i),u("ol","reversed start type","li"),u("ul","","li"),u("li","value",i),u("dl","","dt dd"),u("a","href target rel media hreflang type",r),u("q","cite",r),u("ins del","cite datetime",i),u("img","src sizes srcset alt usemap ismap width height"),u("iframe","src name width height",i),u("embed","src type width height"),u("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),u("param","name value"),u("map","name",[i,"area"].join(" ")),u("area","alt coords shape href target rel media hreflang type"),u("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),u("colgroup","span","col"),u("col","span"),u("tbody thead tfoot","","tr"),u("tr","","td th"),u("td","colspan rowspan headers",i),u("th","colspan rowspan headers scope abbr",i),u("form","accept-charset action autocomplete enctype method name novalidate target",i),u("fieldset","disabled form name",[i,"legend"].join(" ")),u("label","form for",r),u("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),u("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?i:r),u("select","disabled form multiple name required size","option optgroup"),u("optgroup","disabled label","option"),u("option","disabled label selected value"),u("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),u("menu","type label",[i,"li"].join(" ")),u("noscript","",i),"html4"!==e&&(u("wbr"),u("ruby","",[r,"rt rp"].join(" ")),u("figcaption","",i),u("mark rt rp summary bdi","",r),u("canvas","width height",i),u("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),u("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),u("picture","","img source"),u("source","src srcset type media sizes"),u("track","kind src srclang label default"),u("datalist","",[r,"option"].join(" ")),u("article section nav aside main header footer","",i),u("hgroup","","h1 h2 h3 h4 h5 h6"),u("figure","",[i,"figcaption"].join(" ")),u("time","datetime",r),u("dialog","open",i),u("command","type label icon disabled checked radiogroup command"),u("output","for form name",r),u("progress","value max",r),u("meter","value min max low high optimum",r),u("details","open",[i,"summary"].join(" ")),u("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(l("script","language xml:space"),l("style","xml:space"),l("object","declare classid code codebase codetype archive standby align border hspace vspace"),l("embed","align name hspace vspace"),l("param","valuetype type"),l("a","charset name rev shape coords"),l("br","clear"),l("applet","codebase archive code object alt name width height align hspace vspace"),l("img","name longdesc align border hspace vspace"),l("iframe","longdesc frameborder marginwidth marginheight scrolling align"),l("font basefont","size color face"),l("input","usemap align"),l("select","onchange"),l("textarea"),l("h1 h2 h3 h4 h5 h6 div p legend caption","align"),l("ul","type compact"),l("li","type"),l("ol dl menu dir","compact"),l("pre","width xml:space"),l("hr","align noshade size width"),l("isindex","prompt"),l("table","summary width frame rules cellspacing cellpadding align bgcolor"),l("col","width align char charoff valign"),l("colgroup","width align char charoff valign"),l("thead","align char charoff valign"),l("tr","align char charoff valign bgcolor"),l("th","axis align char charoff valign nowrap bgcolor width height"),l("form","accept"),l("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),l("tfoot","align char charoff valign"),l("tbody","align char charoff valign"),l("area","nohref"),l("body","background bgcolor text link vlink alink")),"html4"!==e&&(l("input button select textarea","autofocus"),l("input textarea","placeholder"),l("a","download"),l("link script img","crossorigin"),l("iframe","sandbox seamless allowfullscreen")),Qi(no("a form meter progress dfn"),function(e){s[e]&&delete s[e].children[e]}),delete s.caption.children.table,delete s.script,Ki[e]=s,s)},io=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),Qi(e,function(e,r){n[r]=n[r.toUpperCase()]="map"===t?Gi(e,/[, ]/):eo(e,/[, ]/)})),n};function oo(e){var t,n,r,i,o,a,s,u,l,c,f,d,h,p={},m={},g=[],v={},b={},y=function(t,n,r){var i=e[t];return i?i=Gi(i,/[, ]/,Gi(i.toUpperCase(),/[, ]/)):(i=Ki[t])||(i=Gi(n," ",Gi(n.toUpperCase()," ")),i=Zi(i,r),Ki[t]=i),i};r=ro((e=e||{}).schema),!1===e.verify_html&&(e.valid_elements="*[*]"),t=io(e.valid_styles),n=io(e.invalid_styles,"map"),u=io(e.valid_classes,"map"),i=y("whitespace_elements","pre script noscript style textarea video audio iframe object code"),o=y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),a=y("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),s=y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),c=y("non_empty_elements","td th iframe video audio object script pre code",a),f=y("move_caret_before_on_enter_elements","table",c),d=y("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),l=y("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",d),h=y("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),Qi((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){b[e]=new RegExp("</"+e+"[^>]*>","gi")});var w=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},x=function(e){var t,n,r,i,o,a,s,u,l,c,f,d,h,m,v,b,y,x,C,_=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,S=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,T=/[*?+]/;if(e)for(e=no(e,","),p["@"]&&(b=p["@"].attributes,y=p["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(o=_.exec(e[t])){if(m=o[1],l=o[2],v=o[3],u=o[5],a={attributes:d={},attributesOrder:h=[]},"#"===m&&(a.paddEmpty=!0),"-"===m&&(a.removeEmpty=!0),"!"===o[4]&&(a.removeEmptyAttrs=!0),b){for(x in b)d[x]=b[x];h.push.apply(h,y)}if(u)for(r=0,i=(u=no(u,"|")).length;r<i;r++)if(o=S.exec(u[r])){if(s={},f=o[1],c=o[2].replace(/[\\:]:/g,":"),m=o[3],C=o[4],"!"===f&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(c),s.required=!0),"-"===f){delete d[c],h.splice(to(h,c),1);continue}m&&("="===m&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:c,value:C}),s.defaultValue=C),":"===m&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:c,value:C}),s.forcedValue=C),"<"===m&&(s.validValues=Gi(C,"?"))),T.test(c)?(a.attributePatterns=a.attributePatterns||[],s.pattern=w(c),a.attributePatterns.push(s)):(d[c]||h.push(c),d[c]=s)}b||"@"!==l||(b=d,y=h),v&&(a.outputName=l,p[v]=a),T.test(l)?(a.pattern=w(l),g.push(a)):p[l]=a}},C=function(e){p={},g=[],x(e),Qi(r,function(e,t){m[t]=e.children})},_=function(e){var t=/^(~)?(.+)$/;e&&(Ki.text_block_elements=Ki.block_elements=null,Qi(no(e,","),function(e){var n=t.exec(e),r="~"===n[1],i=r?"span":"div",o=n[2];if(m[o]=m[i],v[o]=i,r||(l[o.toUpperCase()]={},l[o]={}),!p[o]){var a=p[i];delete(a=Zi({},a)).removeEmptyAttrs,delete a.removeEmpty,p[o]=a}Qi(m,function(e,t){e[i]&&(m[t]=e=Zi({},m[t]),e[o]=e[i])})}))},S=function(t){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;Ki[e.schema]=null,t&&Qi(no(t,","),function(e){var t,r,i=n.exec(e);i&&(r=i[1],t=r?m[i[2]]:m[i[2]]={"#comment":{}},t=m[i[2]],Qi(no(i[3],"|"),function(e){"-"===r?delete t[e]:t[e]={}}))})},T=function(e){var t,n=p[e];if(n)return n;for(t=g.length;t--;)if((n=g[t]).pattern.test(e))return n};return e.valid_elements?C(e.valid_elements):(Qi(r,function(e,t){p[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},m[t]=e.children}),"html5"!==e.schema&&Qi(no("strong/b em/i"),function(e){e=no(e,"/"),p[e[1]].outputName=e[0]}),Qi(no("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){p[e]&&(p[e].removeEmpty=!0)}),Qi(no("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){p[e].paddEmpty=!0}),Qi(no("span"),function(e){p[e].removeEmptyAttrs=!0})),_(e.custom_elements),S(e.valid_children),x(e.extended_valid_elements),S("+ol[ul|ol],+ul[ul|ol]"),Qi({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){p[t]&&(p[t].parentsRequired=no(e))}),e.invalid_elements&&Qi(eo(e.invalid_elements),function(e){p[e]&&delete p[e]}),T("span")||x("span[!data-mce-type|*]"),{children:m,elements:p,getValidStyles:function(){return t},getValidClasses:function(){return u},getBlockElements:function(){return l},getInvalidStyles:function(){return n},getShortEndedElements:function(){return a},getTextBlockElements:function(){return d},getTextInlineElements:function(){return h},getBoolAttrs:function(){return s},getElementRule:T,getSelfClosingElements:function(){return o},getNonEmptyElements:function(){return c},getMoveCaretBeforeOnEnterElements:function(){return f},getWhiteSpaceElements:function(){return i},getSpecialElements:function(){return b},isValidChild:function(e,t){var n=m[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:function(e,t){var n,r,i=T(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},getCustomElements:function(){return v},addValidElements:x,setValidElements:C,addCustomElements:_,addValidChildren:S}}var ao=function(e,t,n,r){var i=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+i(t)+i(n)+i(r)};function so(e,t){var n,r,i,o,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,u=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,c={};for(e=e||{},t&&(i=t.getValidStyles(),o=t.getInvalidStyles()),r="\\\" \\' \\; \\: ; : \ufeff".split(" "),n=0;n<r.length;n++)c[r[n]]="\ufeff"+n,c["\ufeff"+n]=r[n];return{toHex:function(e){return e.replace(a,ao)},parse:function(t){var r,i,o,f,d,h,p,m,g={},v=e.url_converter,b=e.url_converter_scope||this,y=function(e,t,r){var i,o,a,s;if((i=g[e+"-top"+t])&&(o=g[e+"-right"+t])&&(a=g[e+"-bottom"+t])&&(s=g[e+"-left"+t])){var u=[i,o,a,s];for(n=u.length-1;n--&&u[n]===u[n+1];);n>-1&&r||(g[e+t]=-1===n?u[0]:u.join(" "),delete g[e+"-top"+t],delete g[e+"-right"+t],delete g[e+"-bottom"+t],delete g[e+"-left"+t])}},w=function(e){var t,n=g[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return g[e]=n[0],!0}},x=function(e){return f=!0,c[e]},C=function(e,t){return f&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return c[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},_=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},S=function(e){return e.replace(/\\[0-9a-f]+/gi,_)},T=function(t,n,r,i,o,a){if(o=o||a)return"'"+(o=C(o)).replace(/\'/g,"\\'")+"'";if(n=C(n||r||i),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return v&&(n=v.call(b,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,x).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,x)});r=u.exec(t);)if(u.lastIndex=r.index+r[0].length,i=r[1].replace(l,"").toLowerCase(),o=r[2].replace(l,""),i&&o){if(i=S(i),o=S(o),-1!==i.indexOf("\ufeff")||-1!==i.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===i||/expression\s*\(|\/\*|\*\//.test(o)))continue;"font-weight"===i&&"700"===o?o="bold":"color"!==i&&"background-color"!==i||(o=o.toLowerCase()),o=(o=o.replace(a,ao)).replace(s,T),g[i]=f?C(o,!0):o}y("border","",!0),y("border","-width"),y("border","-color"),y("border","-style"),y("padding",""),y("margin",""),d="border",p="border-style",m="border-color",w(h="border-width")&&w(p)&&w(m)&&(g[d]=g[h]+" "+g[p]+" "+g[m],delete g[h],delete g[p],delete g[m]),"medium none"===g.border&&delete g.border,"none"===g["border-image"]&&delete g["border-image"]}return g},serialize:function(e,t){var n,r,a="",s=function(t){var n,r,o,s;if(n=i[t])for(r=0,o=n.length;r<o;r++)t=n[r],(s=e[t])&&(a+=(a.length>0?" ":"")+t+": "+s+";")},u=function(e,t){var n;return!((n=o["*"])&&n[e]||(n=o[t])&&n[e])};if(t&&i)s("*"),s(t);else for(n in e)!(r=e[n])||o&&!u(n,t)||(a+=(a.length>0?" ":"")+n+": "+r+";");return a}}}var uo=Vt.each,lo=Vt.grep,co=ke.ie,fo=/^([a-z0-9],?)+$/i,ho=/^[ \t\r\n]*$/,po=function(e,t,n){var r={},i=t.keep_values,o={set:function(e,r,i){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||n(),r,i,e[0])),e.attr("data-mce-"+i,r).attr(i,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};return r={style:{set:function(e,t){null===t||"object"!=typeof t?(i&&e.attr("data-mce-style",t),e.attr("style",t)):e.css(t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return e.serialize(e.parse(n),t[0].nodeName)}}},i&&(r.href=r.src=o),r},mo=function(e,t){var n=t.attr("style"),r=e.serialize(e.parse(n),t[0].nodeName);r||(r=null),t.attr("data-mce-style",r)},go=function(e,t){var n,r,i=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(i++,n=r);return i};function vo(e,t){var n,r=this;void 0===t&&(t={});var i={},o=window,a={},s=0,u=function(e,t){var n,r=0,i={};n=(t=t||{}).maxLoadTime||5e3;var o=function(t){e.getElementsByTagName("head")[0].appendChild(t)},a=function(t,a,s){var u,l,c,f,d=function(){for(var e=f.passed,t=e.length;t--;)e[t]();f.status=2,f.passed=[],f.failed=[]},h=function(){for(var e=f.failed,t=e.length;t--;)e[t]();f.status=3,f.passed=[],f.failed=[]},p=function(e,t){e()||((new Date).getTime()-c<n?Oe.setTimeout(t):h())},m=function(){p(function(){for(var t,n,r=e.styleSheets,i=r.length;i--;)if((n=(t=r[i]).ownerNode?t.ownerNode:t.owningElement)&&n.id===u.id)return d(),!0},m)},g=function(){p(function(){try{var e=l.sheet.cssRules;return d(),!!e}catch(e){}},g)};if(t=Vt._addCacheSuffix(t),i[t]?f=i[t]:(f={passed:[],failed:[]},i[t]=f),a&&f.passed.push(a),s&&f.failed.push(s),1!==f.status)if(2!==f.status)if(3!==f.status){if(f.status=1,(u=e.createElement("link")).rel="stylesheet",u.type="text/css",u.id="u"+r++,u.async=!1,u.defer=!1,u.crossOrigin="anonymous",c=(new Date).getTime(),"onload"in u&&!((v=navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(v[1],10)<536))u.onload=m,u.onerror=h;else{if(navigator.userAgent.indexOf("Firefox")>0)return(l=e.createElement("style")).textContent='@import "'+t+'"',g(),void o(l);m()}var v;o(u),u.href=t}else h();else d()},s=function(e){return ri.nu(function(t){a(e,m(t,g(si.value(e))),m(t,g(si.error(e))))})},u=function(e){return e.fold(v,v)};return{load:a,loadAll:function(e,t,n){ii(F(e,s)).get(function(e){var r=z(e,function(e){return e.isValue()});r.fail.length>0?n(r.fail.map(u)):t(r.pass.map(u))})}}}(e),l=[],c=t.schema?t.schema:oo({}),f=so({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new ze(t.proxy):ze.Event,h=c.getBlockElements(),p=dn.overrideDefaults(function(){return{context:e,element:V.getRoot()}}),b=function(t){if(t&&e&&"string"==typeof t){var n=e.getElementById(t);return n&&n.id!==t?e.getElementsByName(t)[1]:n}return t},y=function(e){return"string"==typeof e&&(e=b(e)),p(e)},w=function(e,t,r){var i,o,a=y(e);return a.length&&(o=(i=n[t])&&i.get?i.get(a,t):a.attr(t)),void 0===o&&(o=r||""),o},x=function(e){var t=b(e);return t?t.attributes:[]},C=function(e,r,i){var o,a;""===i&&(i=null);var s=y(e);o=s.attr(r),s.length&&((a=n[r])&&a.set?a.set(s,i,r):s.attr(r,i),o!==i&&t.onSetAttrib&&t.onSetAttrib({attrElm:s,attrName:r,attrValue:i}))},_=function(){return t.root_element||e.body},S=function(t,n){return Zr.getPos(e.body,b(t),n)},T=function(e,t,n){var r=y(e);return n?r.css(t):("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=ke.ie&&ke.ie<12?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:void 0)},k=function(e){var t,n;return e=b(e),t=T(e,"width"),n=T(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},E=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(fo.test(t)){var r=t.toLowerCase().split(/,/),i=e.nodeName.toLowerCase();for(n=r.length-1;n>=0;n--)if(r[n]===i)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var o=Array.isArray(e)?e:[e];return _t(t,o[0].ownerDocument||o[0],null,o).length>0},N=function(e,t,n,r){var i,o=[],a=b(e);for(r=void 0===r,n=n||("BODY"!==_().nodeName?_().parentNode:null),Vt.is(t,"string")&&(i=t,t="*"===t?function(e){return 1===e.nodeType}:function(e){return E(e,i)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];o.push(a)}a=a.parentNode}return r?o:null},A=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return E(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},R=function(e,t,n){var i,o="string"==typeof e?b(e):e;if(!o)return!1;if(Vt.isArray(o)&&(o.length||0===o.length))return i=[],uo(o,function(e,r){e&&("string"==typeof e&&(e=b(e)),i.push(t.call(n,e,r)))}),i;var a=n||r;return t.call(a,o)},O=function(e,t){y(e).each(function(e,n){uo(t,function(e,t){C(n,t,e)})})},D=function(e,t){var n=y(e);co?n.each(function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(e){dn("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}}):n.html(t)},P=function(t,n,r,i,o){return R(t,function(t){var a="string"==typeof n?e.createElement(n):n;return O(a,r),i&&("string"!=typeof i&&i.nodeType?a.appendChild(i):"string"==typeof i&&D(a,i)),o?a:t.appendChild(a)})},I=function(t,n,r){return P(e.createElement(t),t,n,r,!0)},B=Yi.decode,M=Yi.encodeAllRaw,L=function(e,t){var n=y(e);return t?n.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():n.remove(),n.length>1?n.toArray():n[0]},H=function(e,t,n){y(e).toggleClass(t,n).each(function(){""===this.className&&dn(this).attr("class",null)})},j=function(e,t,n){return R(t,function(t){return Vt.is(t,"array")&&(e=e.cloneNode(!0)),n&&uo(lo(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},W=function(){return e.createRange()},U=function(n,r,i,a){if(Vt.isArray(n)){for(var s=n.length;s--;)n[s]=U(n[s],r,i,a);return n}return!t.collect||n!==e&&n!==o||l.push([n,r,i,a]),d.bind(n,r,i,a||V)},$=function(t,n,r){var i;if(Vt.isArray(t)){for(i=t.length;i--;)t[i]=$(t[i],n,r);return t}if(l&&(t===e||t===o))for(i=l.length;i--;){var a=l[i];t!==a[0]||n&&n!==a[1]||r&&r!==a[2]||d.unbind(a[0],a[1],a[2])}return d.unbind(t,n,r)},q=function(e){if(e&&Ii.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},V={doc:e,settings:t,win:o,files:a,stdMode:!0,boxModel:!0,styleSheetLoader:u,boundEvents:l,styles:f,schema:c,events:d,isBlock:function(e){if("string"==typeof e)return!!h[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!h[e.nodeName])}return!1},$:p,$$:y,root:null,clone:function(t,n){if(!co||1!==t.nodeType||n)return t.cloneNode(n);if(!n){var r=e.createElement(t.nodeName);return uo(x(t),function(e){C(r,e.nodeName,w(t,e.nodeName))}),r}return null},getRoot:_,getViewPort:function(e){var t=e||o,n=t.document.documentElement;return{x:t.pageXOffset||n.scrollLeft,y:t.pageYOffset||n.scrollTop,w:t.innerWidth||n.clientWidth,h:t.innerHeight||n.clientHeight}},getRect:function(e){var t,n;return e=b(e),t=S(e),n=k(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:k,getParent:function(e,t,n){var r=N(e,t,n,!1);return r&&r.length>0?r[0]:null},getParents:N,get:b,getNext:function(e,t){return A(e,t,"nextSibling")},getPrev:function(e,t){return A(e,t,"previousSibling")},select:function(n,r){return _t(n,b(r)||t.root_element||e,[])},is:E,add:P,create:I,createHTML:function(e,t,n){var r,i="";for(r in i+="<"+e,t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(i+=" "+r+'="'+M(t[r])+'"');return void 0!==n?i+">"+n+"</"+e+">":i+" />"},createFragment:function(t){var n,r=e.createElement("div"),i=e.createDocumentFragment();for(t&&(r.innerHTML=t);n=r.firstChild;)i.appendChild(n);return i},remove:L,setStyle:function(e,n,r){var i=y(e).css(n,r);t.update_styles&&mo(f,i)},getStyle:T,setStyles:function(e,n){var r=y(e).css(n);t.update_styles&&mo(f,r)},removeAllAttribs:function(e){return R(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:C,setAttribs:O,getAttrib:w,getPos:S,parseStyle:function(e){return f.parse(e)},serializeStyle:function(e,t){return f.serialize(e,t)},addStyle:function(t){var n,r;if(V!==vo.DOM&&e===document){if(i[t])return;i[t]=!0}(r=e.getElementById("mceDefaultStyles"))||((r=e.createElement("style")).id="mceDefaultStyles",r.type="text/css",(n=e.getElementsByTagName("head")[0]).firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)),r.styleSheet?r.styleSheet.cssText+=t:r.appendChild(e.createTextNode(t))},loadCSS:function(t){var n;V===vo.DOM||e!==document?(t||(t=""),n=e.getElementsByTagName("head")[0],uo(t.split(","),function(e){var t;e=Vt._addCacheSuffix(e),a[e]||(a[e]=!0,t=I("link",{rel:"stylesheet",href:e}),n.appendChild(t))})):vo.DOM.loadCSS(t)},addClass:function(e,t){y(e).addClass(t)},removeClass:function(e,t){H(e,t,!1)},hasClass:function(e,t){return y(e).hasClass(t)},toggleClass:H,show:function(e){y(e).show()},hide:function(e){y(e).hide()},isHidden:function(e){return"none"===y(e).css("display")},uniqueId:function(e){return(e||"mce_")+s++},setHTML:D,getOuterHTML:function(e){var t="string"==typeof e?b(e):e;return Ii.isElement(t)?t.outerHTML:dn("<div></div>").append(dn(t).clone()).html()},setOuterHTML:function(e,t){y(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}L(dn(this).html(t),!0)})},decode:B,encode:M,insertAfter:function(e,t){var n=b(t);return R(e,function(e){var t,r;return t=n.parentNode,(r=n.nextSibling)?t.insertBefore(e,r):t.appendChild(e),e})},replace:j,rename:function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=I(t),uo(x(e),function(t){C(n,t.nodeName,w(e,t.nodeName))}),j(n,e,!0)),n||e},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return f.toHex(Vt.trim(e))},run:R,getAttribs:x,isEmpty:function(e,t){var n,r,i,o,a,s,u=0;if(e=e.firstChild){a=new ui(e,e.parentNode),t=t||(c?c.getNonEmptyElements():null),o=c?c.getWhiteSpaceElements():{};do{if(i=e.nodeType,Ii.isElement(e)){var l=e.getAttribute("data-mce-bogus");if(l){e=a.next("all"===l);continue}if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){u++,e=a.next();continue}return!1}for(n=(r=x(e)).length;n--;)if("name"===(s=r[n].nodeName)||"data-mce-bookmark"===s)return!1}if(8===i)return!1;if(3===i&&!ho.test(e.nodeValue))return!1;if(3===i&&e.parentNode&&o[e.parentNode.nodeName]&&ho.test(e.nodeValue))return!1;e=a.next()}while(e)}return u<=1},createRng:W,nodeIndex:go,split:function(e,t,n){var r,i,o,a=W();if(e&&t)return a.setStart(e.parentNode,go(e)),a.setEnd(t.parentNode,go(t)),r=a.extractContents(),(a=W()).setStart(t.parentNode,go(t)+1),a.setEnd(e.parentNode,go(e)+1),i=a.extractContents(),(o=e.parentNode).insertBefore(Li.trimNode(V,r),e),n?o.insertBefore(n,e):o.insertBefore(t,e),o.insertBefore(Li.trimNode(V,i),e),L(e),n||t},bind:U,unbind:$,fire:function(e,t,n){return d.fire(e,t,n)},getContentEditable:q,getContentEditableParent:function(e){for(var t=_(),n=null;e&&e!==t&&null===(n=q(e));e=e.parentNode);return n},destroy:function(){if(l)for(var e=l.length;e--;){var t=l[e];d.unbind(t[0],t[1],t[2])}_t.setDocument&&_t.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}};return n=po(f,t,function(){return V}),V}!function(e){e.DOM=e(document),e.nodeIndex=go}(vo||(vo={}));var bo=vo,yo=bo.DOM,wo=Vt.each,xo=Vt.grep,Co=function(e){return"function"==typeof e},_o=function(){var e={},t=[],n={},r=[],i=0;this.isDone=function(t){return 2===e[t]},this.markDone=function(t){e[t]=2},this.add=this.load=function(r,i,o,a){void 0===e[r]&&(t.push(r),e[r]=0),i&&(n[r]||(n[r]=[]),n[r].push({success:i,failure:a,scope:o||this}))},this.remove=function(t){delete e[t],delete n[t]},this.loadQueue=function(e,n,r){this.loadScripts(t,e,n,r)},this.loadScripts=function(t,o,a,s){var u,l=[],c=function(e,t){wo(n[t],function(t){Co(t[e])&&t[e].call(t.scope)}),n[t]=void 0};r.push({success:o,failure:s,scope:a||this}),(u=function(){var n=xo(t);if(t.length=0,wo(n,function(t){2!==e[t]?3!==e[t]?1!==e[t]&&(e[t]=1,i++,function(e,t,n){var r,i,o=yo;i=o.uniqueId(),(r=document.createElement("script")).id=i,r.type="text/javascript",r.src=Vt._addCacheSuffix(e),r.onload=function(){o.remove(i),r&&(r.onreadystatechange=r.onload=r=null),t()},r.onerror=function(){Co(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(r)}(t,function(){e[t]=2,i--,c("success",t),u()},function(){e[t]=3,i--,l.push(t),c("failure",t),u()})):c("failure",t):c("success",t)}),!i){var o=r.slice(0);r.length=0,wo(o,function(e){0===l.length?Co(e.success)&&e.success.call(e.scope):Co(e.failure)&&e.failure.call(e.scope,l)})}})()}};_o.ScriptLoader=new _o;var So=Vt.each;function To(){var e=this,t=[],n={},r={},i=[],o=function(e){var t;return r[e]&&(t=r[e].dependencies),t||[]},a=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},s=function(e,t,n,r){var i=o(e);So(i,function(e){var n=a(t,e);u(n.resource,n,void 0,void 0)}),n&&(r?n.call(r):n.call(_o))},u=function(e,t,i,o,a){if(!n[e]){var u="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==u.indexOf("/")&&-1===u.indexOf("://")&&(u=To.baseURL+"/"+u),n[e]=u.substring(0,u.lastIndexOf("/")),r[e]?s(e,t,i,o):_o.ScriptLoader.add(u,function(){return s(e,t,i,o)},o,a)}};return{items:t,urls:n,lookup:r,_listeners:i,get:function(e){if(r[e])return r[e].instance},dependencies:o,requireLangPack:function(e,t){var r=To.language;if(r&&!1!==To.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+r.substr(0,2)+","))r=r.substr(0,2);else if(-1===t.indexOf(","+r+","))return;_o.ScriptLoader.add(n[e]+"/langs/"+r+".js")}},add:function(e,n,o){t.push(n),r[e]={instance:n,dependencies:o};var a=z(i,function(t){return t.name===e});return i=a.fail,So(a.pass,function(e){e.callback()}),n},remove:function(e){delete n[e],delete r[e]},createUrl:a,addComponents:function(t,n){var r=e.urls[t];So(n,function(e){_o.ScriptLoader.add(r+"/"+e)})},load:u,waitFor:function(e,t){r.hasOwnProperty(e)?t():i.push({name:e,callback:t})}}}!function(e){e.PluginManager=e(),e.ThemeManager=e()}(To||(To={}));var ko=function(e,t){zr(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})},Eo=function(e,t){e.dom().appendChild(t.dom())},No=ko,Ao=function(e,t){$r(e).fold(function(){zr(e).each(function(e){Eo(e,t)})},function(e){ko(e,t)})},Ro=Eo,Oo=function(e,t){ko(e,t),Eo(t,e)},Do=function(e,t){H(t,function(t){Ro(e,t)})},Po=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Io={empty:function(e){e.dom().textContent="",H(Vr(e),function(e){Po(e)})},remove:Po,unwrap:function(e){var t=Vr(e);t.length>0&&function(e,t){H(t,function(t){No(e,t)})}(e,t),Po(e)}},Bo=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];null===n&&(n=setTimeout(function(){e.apply(null,r),n=null},t))}}},Mo=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Mo(n())}}},Lo=function(e,t){var n=fr(e,t);return void 0===n||""===n?[]:n.split(" ")},Fo=Lo,Ho=function(e){return Fo(e,"class")},zo=function(e,t){return function(e,t,n){var r=Lo(e,t).concat([n]);return lr(e,t,r.join(" ")),!0}(e,"class",t)},jo=function(e,t){return function(e,t,n){var r=j(Lo(e,t),function(e){return e!==n});return r.length>0?lr(e,t,r.join(" ")):hr(e,t),!1}(e,"class",t)},Wo=Ho,Uo=zo,$o=jo,qo=function(e){return void 0!==e.dom().classList},Vo=function(e,t){return qo(e)&&e.dom().classList.contains(t)},Xo=function(e,t){qo(e)?e.dom().classList.add(t):Uo(e,t)},Yo=function(e,t){qo(e)?e.dom().classList.remove(t):$o(e,t),function(e){0===(qo(e)?e.dom().classList:Wo(e)).length&&hr(e,"class")}(e)},Ko=Vo,Jo=function(e,t){return Nr.all(t,e)};function Go(e,t,n,r,i){return e(n,r)?k.some(n):P(i)&&i(n)?k.none():t(n,r,i)}var Qo=function(e,t,n){for(var r=e.dom(),i=P(n)?n:g(!1);r.parentNode;){r=r.parentNode;var o=Vn.fromDom(r);if(t(o))return k.some(o);if(i(o))break}return k.none()},Zo=Qo,ea=function(e,t,n){return Go(function(e){return t(e)},Qo,e,t,n)},ta=function(e,t,n){return Zo(e,function(e){return Nr.is(e,t)},n)},na=ta,ra=function(e,t){return Nr.one(t,e)},ia=function(e,t,n){return Go(Nr.is,ta,e,t,n)},oa=g("mce-annotation"),aa=g("data-mce-annotation"),sa=g("data-mce-annotation-uid"),ua=function(e,t){var n=e.selection.getRng(),r=Vn.fromDom(n.startContainer),i=Vn.fromDom(e.getBody()),o=t.fold(function(){return"."+oa()},function(e){return"["+aa()+'="'+e+'"]'}),a=Xr(r,n.startOffset).getOr(r),s=function(e,t){return dr(e,t)?k.some(fr(e,t)):k.none()};return ia(a,o,function(e){return Or.eq(e,i)}).bind(function(t){return s(t,""+sa()).bind(function(n){return s(t,""+aa()).map(function(t){var r=la(e,n);return{uid:n,name:t,elements:r}})})})},la=function(e,t){var n=Vn.fromDom(e.getBody());return Jo(n,"["+sa()+'="'+t+'"]')},ca=function(e,t){var n=Vn.fromDom(e.getBody()),r=Jo(n,"["+aa()+'="'+t+'"]'),i={};return H(r,function(e){var t=fr(e,sa()),n=i.hasOwnProperty(t)?i[t]:[];i[t]=n.concat([e])}),i},fa=function(e,t){var n,r,i=Mo({}),o=function(e,t){a(e,function(e){return t(e),e})},a=function(e,t){var n=i.get(),r=t(n.hasOwnProperty(e)?n[e]:{listeners:[],previous:Mo(k.none())});n[e]=r,i.set(n)},s=(n=function(){var t,n,r=i.get(),s=(t=tr(r),(n=K.call(t,0)).sort(void 0),n);H(s,function(t){a(t,function(n){var r=n.previous.get();return ua(e,k.some(t)).fold(function(){var e;r.isSome()&&(o(e=t,function(t){H(t.listeners,function(t){return t(!1,e)})}),n.previous.set(k.none()))},function(e){var t=e.uid,i=e.name,a=e.elements;r.is(t)||(function(e,t,n){o(e,function(r){H(r.listeners,function(r){return r(!0,e,{uid:t,nodes:F(n,function(e){return e.dom()})})})})}(i,t,a),n.previous.set(k.some(t)))}),{previous:n.previous,listeners:n.listeners}})})},30,r=null,{cancel:function(){null!==r&&(clearTimeout(r),r=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!==r&&clearTimeout(r),r=setTimeout(function(){n.apply(null,e),r=null},30)}});return e.on("remove",function(){s.cancel()}),e.on("nodeChange",function(){s.throttle()}),{addListener:function(e,t){a(e,function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}})}}},da=function(e,t){e.on("init",function(){e.serializer.addNodeFilter("span",function(e){H(e,function(e){(function(e){return k.from(e.attributes.map[aa()]).bind(t.lookup)})(e).each(function(t){!1===t.persistent&&e.unwrap()})})})})},ha=function(){var e={};return{register:function(t,n){e[t]={name:t,settings:n}},lookup:function(t){return e.hasOwnProperty(t)?k.from(e[t]).map(function(e){return e.settings}):k.none()}}},pa=0,ma=function(e,t){return Vn.fromDom(e.dom().cloneNode(t))},ga=function(e){return ma(e,!1)},va=function(e){return ma(e,!0)},ba=function(e){return e.dom().innerHTML},ya=function(e,t){var n=Lr(e).dom(),r=Vn.fromDom(n.createDocumentFragment()),i=function(e,t){var n=(t||document).createElement("div");return n.innerHTML=e,Vr(Vn.fromDom(n))}(t,n);Do(r,i),Io.empty(e),Ro(e,r)},wa=[].slice,xa=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=wa.call(arguments);return r.length-1>=e.length?e.apply(this,r.slice(1)):function(){var e=r.concat([].slice.call(arguments));return xa.apply(this,e)}},Ca={constant:function(e){return function(){return e}},negate:function(e){return function(t){return!e(t)}},and:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=wa.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}},or:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=wa.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}},curry:xa,compose:function(e,t){return function(n){return e(t(n))}},noop:function(){}},_a="\ufeff",Sa=function(e){return e.replace(new RegExp("\ufeff","g"),"")},Ta=Ii.isElement,ka=Ii.isText,Ea=function(e){return ka(e)&&(e=e.parentNode),Ta(e)&&e.hasAttribute("data-mce-caret")},Na=function(e){return ka(e)&&function(e){return"\ufeff"===e}(e.data)},Aa=function(e){return Ea(e)||Na(e)},Ra=function(e){return e.firstChild!==e.lastChild||!Ii.isBr(e.firstChild)},Oa=function(e){var t=e.container();return e&&Ii.isText(t)&&t.data.charAt(e.offset())===_a},Da=function(e){var t=e.container();return e&&Ii.isText(t)&&t.data.charAt(e.offset()-1)===_a},Pa=function(e){return ka(e)&&e.data[0]===_a},Ia=function(e){return ka(e)&&e.data[e.data.length-1]===_a},Ba=function(e){return e&&e.hasAttribute("data-mce-caret")?(n=(t=e.getElementsByTagName("br"))[t.length-1],Ii.isBogus(n)&&n.parentNode.removeChild(n),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null;var t,n},Ma=Ii.isContentEditableTrue,La=Ii.isContentEditableFalse,Fa=Ii.isBr,Ha=Ii.isText,za=Ii.matchNodeNames("script style textarea"),ja=Ii.matchNodeNames("img input textarea hr iframe video audio object"),Wa=Ii.matchNodeNames("table"),Ua=Aa,$a=function(e){return!Ua(e)&&(Ha(e)?!za(e.parentNode):ja(e)||Fa(e)||Wa(e)||qa(e))},qa=function(e){return!1===function(e){return Ii.isElement(e)&&"true"===e.getAttribute("unselectable")}(e)&&La(e)},Va=function(e){return ja(e)||function(e){return!!qa(e)&&!0!==jt.reduce(e.getElementsByTagName("*"),function(e,t){return e||Ma(t)},!1)}(e)},Xa=function(e,t){return $a(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(qa(e))return!1;if(Ma(e))return!0}return!0}(e,t)},Ya=Math.round,Ka=function(e){return e?{left:Ya(e.left),top:Ya(e.top),bottom:Ya(e.bottom),right:Ya(e.right),width:Ya(e.width),height:Ya(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Ja=function(e,t){return e=Ka(e),t?e.right=e.left:(e.left=e.left+e.width,e.right=e.left),e.width=0,e},Ga=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},Qa=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&Ga(t.top-e.bottom,e,t)},Za=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Ga(t.bottom-e.top,e,t)},es=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},ts=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},ns=new RegExp("[Ì-Í¯Ò-ÒÒ-ÒÖ-Ö½Ö¿×-××-××Ø-ØÙ-ÙÙ°Û-ÛÛ-Û¤Û§-Û¨Ûª-Û­ÜÜ°-ÝÞ¦-Þ°ß«-ß³à -à à -à £à ¥-à §à ©-à ­à¡-à¡à££-à¤à¤ºà¤¼à¥-à¥à¥à¥-à¥à¥¢-à¥£à¦à¦¼à¦¾à§-à§à§à§à§¢-à§£à¨-à¨à¨¼à©-à©à©-à©à©-à©à©à©°-à©±à©µàª-àªàª¼à«-à«à«-à«à«à«¢-à«£à¬à¬¼à¬¾à¬¿à­-à­à­à­à­à­¢-à­£à®à®¾à¯à¯à¯à°à°¾-à±à±-à±à±-à±à±-à±à±¢-à±£à²à²¼à²¿à³à³à³-à³à³-à³à³¢-à³£à´à´¾àµ-àµàµàµàµ¢-àµ£à·à·à·-à·à·à·à¸±à¸´-à¸ºà¹-à¹àº±àº´-àº¹àº»-àº¼à»-à»à¼-à¼à¼µà¼·à¼¹à½±-à½¾à¾-à¾à¾-à¾à¾-à¾à¾-à¾¼à¿á­-á°á²-á·á¹-áºá½-á¾á-áá-á á±-á´áá-áááá-áá-áá²-á´á-áá²-á³á´-áµá·-á½áá-ááá -á á¢©á¤ -á¤¢á¤§-á¤¨á¤²á¤¹-á¤»á¨-á¨á¨á©á©-á©á© á©¢á©¥-á©¬á©³-á©¼á©¿áª°-áª½áª¾á¬-á¬á¬´á¬¶-á¬ºá¬¼á­á­«-á­³á®-á®á®¢-á®¥á®¨-á®©á®«-á®­á¯¦á¯¨-á¯©á¯­á¯¯-á¯±á°¬-á°³á°¶-á°·á³-á³á³-á³ á³¢-á³¨á³­á³´á³¸-á³¹á·-á·µá·¼-á·¿â-ââ-ââ-â â¡â¢-â¤â¥-â°â³¯-â³±âµ¿â· -â·¿ãª-ã­ã®-ã¯ã-ãê¯ê°-ê²ê´-ê½ê-êê°-ê±ê ê ê ê ¥-ê ¦ê£ê£ -ê£±ê¤¦-ê¤­ê¥-ê¥ê¦-ê¦ê¦³ê¦¶-ê¦¹ê¦¼ê§¥ê¨©-ê¨®ê¨±-ê¨²ê¨µ-ê¨¶ê©ê©ê©¼êª°êª²-êª´êª·-êª¸êª¾-êª¿ê«ê«¬-ê«­ê«¶ê¯¥ê¯¨ê¯­ï¬ï¸-ï¸ï¸ -ï¸¯ï¾-ï¾]"),rs=function(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&ns.test(e)},is=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(!i.isSome())return k.none();n.push(i.getOrDie())}return k.some(t.apply(null,n))},os=Ii.isElement,as=$a,ss=Ii.matchStyleValues("display","block table"),us=Ii.matchStyleValues("float","left right"),ls=Ca.and(os,as,Ca.negate(us)),cs=Ca.negate(Ii.matchStyleValues("white-space","pre pre-line pre-wrap")),fs=Ii.isText,ds=Ii.isBr,hs=bo.nodeIndex,ps=ts,ms=function(e){return"createRange"in e?e.createRange():bo.DOM.createRng()},gs=function(e){return e&&/[\r\n\t ]/.test(e)},vs=function(e){return!!e.setStart&&!!e.setEnd},bs=function(e){var t,n=e.startContainer,r=e.startOffset;return!!(gs(e.toString())&&cs(n.parentNode)&&Ii.isText(n)&&(t=n.data,gs(t[r-1])||gs(t[r+1])))},ys=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},ws=function(e){var t,n;return t=(n=e.getClientRects()).length>0?Ka(n[0]):Ka(e.getBoundingClientRect()),!vs(e)&&ds(e)&&ys(t)?function(e){var t,n=e.ownerDocument,r=ms(n),i=n.createTextNode("Â "),o=e.parentNode;return o.insertBefore(i,e),r.setStart(i,0),r.setEnd(i,1),t=Ka(r.getBoundingClientRect()),o.removeChild(i),t}(e):ys(t)&&vs(e)?function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,i=e.endOffset;if(t===n&&Ii.isText(n)&&0===r&&1===i){var o=e.cloneRange();return o.setEndAfter(n),ws(o)}return null}(e):t},xs=function(e,t){var n=Ja(e,t);return n.width=1,n.right=n.left+1,n},Cs=function(e){var t,n,r=[],i=function(e){var t,n;0!==e.height&&(r.length>0&&(t=e,n=r[r.length-1],t.left===n.left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right)||r.push(e))},o=function(e,t){var n=ms(e.ownerDocument);if(t<e.data.length){if(rs(e.data[t]))return r;if(rs(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!bs(n)))return i(xs(ws(n),!1)),r}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),bs(n)||i(xs(ws(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),bs(n)||i(xs(ws(n),!0)))};if(fs(e.container()))return o(e.container(),e.offset()),r;if(os(e.container()))if(e.isAtEnd())n=ps(e.container(),e.offset()),fs(n)&&o(n,n.data.length),ls(n)&&!ds(n)&&i(xs(ws(n),!1));else{if(n=ps(e.container(),e.offset()),fs(n)&&o(n,0),ls(n)&&e.isAtEnd())return i(xs(ws(n),!1)),r;t=ps(e.container(),e.offset()-1),ls(t)&&!ds(t)&&(ss(t)||ss(n)||!ls(n))&&i(xs(ws(t),!1)),ls(n)&&i(xs(ws(n),!0))}return r};function _s(e,t,n){var r=function(){return n||(n=Cs(_s(e,t))),n};return{container:Ca.constant(e),offset:Ca.constant(t),toRange:function(){var n;return(n=ms(e.ownerDocument)).setStart(e,t),n.setEnd(e,t),n},getClientRects:r,isVisible:function(){return r().length>0},isAtStart:function(){return fs(e),0===t},isAtEnd:function(){return fs(e)?t>=e.data.length:t>=e.childNodes.length},isEqual:function(n){return n&&e===n.container()&&t===n.offset()},getNode:function(n){return ps(e,n?t-1:t)}}}!function(e){e.fromRangeStart=function(t){return e(t.startContainer,t.startOffset)},e.fromRangeEnd=function(t){return e(t.endContainer,t.endOffset)},e.after=function(t){return e(t.parentNode,hs(t)+1)},e.before=function(t){return e(t.parentNode,hs(t))},e.isAbove=function(e,t){return is([G(t.getClientRects()),Q(e.getClientRects())],Qa).getOr(!1)},e.isBelow=function(e,t){return is([Q(t.getClientRects()),G(e.getClientRects())],Za).getOr(!1)},e.isAtStart=function(e){return!!e&&e.isAtStart()},e.isAtEnd=function(e){return!!e&&e.isAtEnd()},e.isTextPosition=function(e){return!!e&&Ii.isText(e.container())},e.isElementPosition=function(t){return!1===e.isTextPosition(t)}}(_s||(_s={}));var Ss,Ts=_s,ks=Ii.isText,Es=Ii.isBogus,Ns=bo.nodeIndex,As=function(e){var t=e.parentNode;return Es(t)?As(t):t},Rs=function(e){return e?jt.reduce(e.childNodes,function(e,t){return Es(t)&&"BR"!==t.nodeName?e=e.concat(Rs(t)):e.push(t),e},[]):[]},Os=function(e){return function(t){return e===t}},Ds=function(e){return(ks(e)?"text()":e.nodeName.toLowerCase())+"["+function(e){var t,n,r;return t=Rs(As(e)),n=jt.findIndex(t,Os(e),e),t=t.slice(0,n+1),r=jt.reduce(t,function(e,n,r){return ks(n)&&ks(t[r-1])&&e++,e},0),t=jt.filter(t,Ii.matchNodeNames(e.nodeName)),(n=jt.findIndex(t,Os(e),e))-r}(e)+"]"},Ps=function(e,t){var n,r,i,o,a,s=[];return n=t.container(),r=t.offset(),ks(n)?i=function(e,t){for(;(e=e.previousSibling)&&ks(e);)t+=e.data.length;return t}(n,r):(r>=(o=n.childNodes).length?(i="after",r=o.length-1):i="before",n=o[r]),s.push(Ds(n)),a=function(e,t,n){var r=[];for(t=t.parentNode;t!==e;t=t.parentNode)r.push(t);return r}(e,n),a=jt.filter(a,Ca.negate(Ii.isBogus)),(s=s.concat(jt.map(a,function(e){return Ds(e)}))).reverse().join("/")+","+i},Is=function(e,t){var n,r,i;return t?(t=(n=t.split(","))[0].split("/"),i=n.length>1?n[1]:"before",(r=jt.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),n=e,r=t[1],i=parseInt(t[2],10),o=Rs(n),o=jt.filter(o,function(e,t){return!ks(e)||!ks(o[t-1])}),(o=jt.filter(o,Ii.matchNodeNames(r)))[i]):null;var n,r,i,o},e))?ks(r)?function(e,t){for(var n,r=e,i=0;ks(r);){if(n=r.data.length,t>=i&&t<=i+n){e=r,t-=i;break}if(!ks(r.nextSibling)){e=r,t=n;break}i+=n,r=r.nextSibling}return ks(e)&&t>e.data.length&&(t=e.data.length),Ts(e,t)}(r,parseInt(i,10)):(i="after"===i?Ns(r)+1:Ns(r),Ts(r.parentNode,i)):null):null},Bs=Ii.isContentEditableFalse,Ms=function(e,t,n,r,i){var o,a=r[i?"startContainer":"endContainer"],s=r[i?"startOffset":"endOffset"],u=[],l=0,c=e.getRoot();for(Ii.isText(a)?u.push(n?function(e,t,n){var r,i;for(i=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&Ii.isText(r);r=r.previousSibling)i+=e(r.data).length;return i}(t,a,s):s):(s>=(o=a.childNodes).length&&o.length&&(l=1,s=Math.max(0,o.length-1)),u.push(e.nodeIndex(o[s],n)+l));a&&a!==c;a=a.parentNode)u.push(e.nodeIndex(a,n));return u},Ls=function(e){Ii.isText(e)&&0===e.data.length&&e.parentNode.removeChild(e)},Fs=function(e,t,n){var r=0;return Vt.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},Hs=function(e,t){var n,r,i,o=t?"start":"end";n=e[o+"Container"],r=e[o+"Offset"],Ii.isElement(n)&&"TR"===n.nodeName&&(n=(i=n.childNodes)[Math.min(t?r:r-1,i.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r))},zs=function(e){return Hs(e,!0),Hs(e,!1),e},js=function(e,t){var n;if(Ii.isElement(e)&&(e=ts(e,t),Bs(e)))return e;if(Aa(e)){if(Ii.isText(e)&&Ea(e)&&(e=e.parentNode),n=e.previousSibling,Bs(n))return n;if(n=e.nextSibling,Bs(n))return n}},Ws=function(e,t,n){var r=n.getNode(),i=r?r.nodeName:null,o=n.getRng();if(Bs(r)||"IMG"===i)return{name:i,index:Fs(n.dom,i,r)};var a=function(e){return js(e.startContainer,e.startOffset)||js(e.endContainer,e.endOffset)}(o);return a?{name:i=a.tagName,index:Fs(n.dom,i,a)}:function(e,t,n,r){var i=t.dom,o={};return o.start=Ms(i,e,n,r,!0),t.isCollapsed()||(o.end=Ms(i,e,n,r,!1)),o}(e,n,t,o)},Us=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},$s=function(e,t){var n=e.dom,r=e.getRng(),i=n.uniqueId(),o=e.isCollapsed(),a=e.getNode(),s=a.nodeName;if("IMG"===s)return{name:s,index:Fs(n,s,a)};var u=zs(r.cloneRange());if(!o){u.collapse(!1);var l=Us(n,i+"_end",t);u.insertNode(l),Ls(l.nextSibling)}(r=zs(r)).collapse(!0);var c=Us(n,i+"_start",t);return r.insertNode(c),Ls(c.previousSibling),Ls(c.nextSibling),e.moveToBookmark({id:i,keep:1}),{id:i}},qs={getBookmark:function(e,t,n){return 2===t?Ws(Sa,n,e):3===t?function(e){var t=e.getRng();return{start:Ps(e.dom.getRoot(),Ts.fromRangeStart(t)),end:Ps(e.dom.getRoot(),Ts.fromRangeEnd(t))}}(e):t?function(e){return{rng:e.getRng()}}(e):$s(e,!1)},getUndoBookmark:b(Ws,v,!0),getPersistentBookmark:$s},Vs=function(e){return Ii.isElement(e)&&"_mce_caret"===e.id},Xs=function(e,t){for(;t&&t!==e;){if("_mce_caret"===t.id)return t;t=t.parentNode}return null},Ys=Ii.isElement,Ks=Ii.isText,Js=function(e){var t=e.parentNode;t&&t.removeChild(e)},Gs=function(e,t){0===t.length?Js(e):e.nodeValue=t},Qs=function(e){var t=Sa(e);return{count:e.length-t.length,text:t}},Zs=function(e,t){return eu(e),t},eu=function(e){if(Ys(e)&&Aa(e)&&(Ra(e)?e.removeAttribute("data-mce-caret"):Js(e)),Ks(e)){var t=Sa(function(e){try{return e.nodeValue}catch(e){return""}}(e));Gs(e,t)}},tu={removeAndReposition:function(e,t){return Ts.isTextPosition(t)?function(e,t){return Ks(e)&&t.container()===e?function(e,t){var n=Qs(e.data.substr(0,t.offset())),r=Qs(e.data.substr(t.offset())),i=n.text+r.text;return i.length>0?(Gs(e,i),Ts(e,t.offset()-n.count)):t}(e,t):Zs(e,t)}(e,t):function(e,t){return t.container()===e.parentNode?function(e,t){var n,r,i,o=t.container(),a=(n=Z(o.childNodes),r=e,i=B(n,r),-1===i?k.none():k.some(i)).map(function(e){return e<t.offset()?Ts(o,t.offset()-1):t}).getOr(t);return eu(e),a}(e,t):Zs(e,t)}(e,t)},remove:eu},nu=Ii.isContentEditableTrue,ru=Ii.isContentEditableFalse,iu=function(e,t,n,r,i){return t._selectionOverrides.showCaret(e,n,r,i)},ou=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t}(t)},au=function(e,t,n){var r=gl(1,e.getBody(),t),i=Ts.fromRangeStart(r),o=i.getNode();if(ru(o))return iu(1,e,o,!i.isAtEnd(),!1);var a=i.getNode(!0);if(ru(a))return iu(1,e,a,!1,!1);var s=e.dom.getParent(i.getNode(),function(e){return ru(e)||nu(e)});return ru(s)?iu(1,e,s,!1,n):null},su=function(e,t,n){return t&&t.collapsed&&au(e,t,n)||t};!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(Ss||(Ss={}));var uu,lu=Ii.isContentEditableFalse,cu=Ii.isText,fu=Ii.isElement,du=Ii.isBr,hu=$a,pu=Va,mu=Xa,gu=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},vu=function(e,t){if(il(e)){if(hu(t.previousSibling)&&!cu(t.previousSibling))return Ts.before(t);if(cu(t))return Ts(t,0)}if(ol(e)){if(hu(t.nextSibling)&&!cu(t.nextSibling))return Ts.after(t);if(cu(t))return Ts(t,t.data.length)}return ol(e)?du(t)?Ts.before(t):Ts.after(t):Ts.before(t)},bu=function(e,t,n){var r,i,o,a,s;if(!fu(n)||!t)return null;if(t.isEqual(Ts.after(n))&&n.lastChild){if(s=Ts.after(n.lastChild),ol(e)&&hu(n.lastChild)&&fu(n.lastChild))return du(n.lastChild)?Ts.before(n.lastChild):s}else s=t;var u=s.container(),l=s.offset();if(cu(u)){if(ol(e)&&l>0)return Ts(u,--l);if(il(e)&&l<u.length)return Ts(u,++l);r=u}else{if(ol(e)&&l>0&&(i=gu(u,l-1),hu(i)))return!pu(i)&&(o=sl(i,e,mu,i))?cu(o)?Ts(o,o.data.length):Ts.after(o):cu(i)?Ts(i,i.data.length):Ts.before(i);if(il(e)&&l<u.childNodes.length&&(i=gu(u,l),hu(i)))return du(i)&&n.lastChild===i?null:function(e,t){var n;return!(!Ii.isBr(e)||Va(e.nextSibling)||!(n=bu(Ss.Forwards,Ts.after(e),t))||ll(Ts.before(e),Ts.before(n),t))}(i,n)?bu(e,Ts.after(i),n):!pu(i)&&(o=sl(i,e,mu,i))?cu(o)?Ts(o,0):Ts.before(o):cu(i)?Ts(i,0):Ts.after(i);r=i||s.getNode()}return(il(e)&&s.isAtEnd()||ol(e)&&s.isAtStart())&&(r=sl(r,e,Ca.constant(!0),n,!0),mu(r,n))?vu(e,r):(i=sl(r,e,mu,n),!(a=jt.last(jt.filter(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(u,n),lu)))||i&&a.contains(i)?i?vu(e,i):null:s=il(e)?Ts.after(a):Ts.before(a))},yu=function(e){return{next:function(t){return bu(Ss.Forwards,t,e)},prev:function(t){return bu(Ss.Backwards,t,e)}}};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(uu||(uu={}));var wu=function(e,t){return e===Ss.Backwards?t.reverse():t},xu=function(e,t,n){return e===Ss.Forwards?t.next(n):t.prev(n)},Cu=function(e,t,n,r){return Ii.isBr(r.getNode(t===Ss.Forwards))?uu.Br:!1===ll(n,r)?uu.Block:uu.Wrap},_u=function(e,t,n,r){for(var i,o=yu(n),a=r,s=[];a&&(i=xu(t,o,a));){if(Ii.isBr(i.getNode(!1)))return t===Ss.Forwards?{positions:wu(t,s).concat([i]),breakType:uu.Br,breakAt:k.some(i)}:{positions:wu(t,s),breakType:uu.Br,breakAt:k.some(i)};if(i.isVisible()){if(e(a,i)){var u=Cu(0,t,a,i);return{positions:wu(t,s),breakType:u,breakAt:k.some(i)}}s.push(i),a=i}else a=i}return{positions:wu(t,s),breakType:uu.Eol,breakAt:k.none()}},Su=function(e,t,n,r){return t(n,r).breakAt.map(function(r){var i=t(n,r).positions;return e===Ss.Backwards?i.concat(r):[r].concat(i)}).getOr([])},Tu=function(e,t){return W(e,function(e,n){return e.fold(function(){return k.some(n)},function(r){return is([G(r.getClientRects()),G(n.getClientRects())],function(e,i){var o=Math.abs(t-e.left);return Math.abs(t-i.left)<=o?n:r}).or(e)})},k.none())},ku=function(e,t){return G(t.getClientRects()).bind(function(t){return Tu(e,t.left)})},Eu=b(_u,_s.isAbove,-1),Nu=b(_u,_s.isBelow,1),Au=b(Su,-1,Eu),Ru=b(Su,1,Nu),Ou=function(e,t,n,r,i){var o=Jo(Vn.fromDom(n),"td,th,caption").map(function(e){return e.dom()});return function(e,t,n){return W(e,function(e,r){return e.fold(function(){return k.some(r)},function(e){var i=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),o=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return k.some(o<i?r:e)})},k.none())}(j(function(e,t){return X(o,function(t){var n=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+-2,bottom:e.bottom+-2,width:e.width+t,height:e.height+t}}(Ka(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]})}(e),function(e){return t(e,i)}),r,i).map(function(e){return e.cell})},Du=b(Ou,function(e){return e.bottom},function(e,t){return e.y<t}),Pu=b(Ou,function(e){return e.top},function(e,t){return e.y>t}),Iu=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},Bu=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var i=e.getParam(t,"","hash");return i.hasOwnProperty(e.id)?i[e.id]:n}return r},Mu={getIframeAttrs:function(e){return e.getParam("iframe_attrs",{})},getDocType:function(e){return e.getParam("doctype","<!DOCTYPE html>")},getDocumentBaseUrl:function(e){return e.getParam("document_base_url","")},getBodyId:function(e){return Bu(e,"body_id","tinymce")},getBodyClass:function(e){return Bu(e,"body_class","")},getContentSecurityPolicy:function(e){return e.getParam("content_security_policy","")},shouldPutBrInPre:function(e){return e.getParam("br_in_pre",!0)},getForcedRootBlock:function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},getForcedRootBlockAttrs:function(e){return e.getParam("forced_root_block_attrs",{})},getBrNewLineSelector:function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},getNoNewLineSelector:function(e){return e.getParam("no_newline_selector","")},shouldKeepStyles:function(e){return e.getParam("keep_styles",!0)},shouldEndContainerOnEmptyBlock:function(e){return e.getParam("end_container_on_empty_block",!1)},getFontStyleValues:function(e){return Vt.explode(e.getParam("font_size_style_values",""))},getFontSizeClasses:function(e){return Vt.explode(e.getParam("font_size_classes",""))},getImagesDataImgFilter:function(e){return e.getParam("images_dataimg_filter",g(!0),"function")},isAutomaticUploadsEnabled:function(e){return e.getParam("automatic_uploads",!0,"boolean")},shouldReuseFileName:function(e){return e.getParam("images_reuse_filename",!1,"boolean")},shouldReplaceBlobUris:function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},getImageUploadUrl:function(e){return e.getParam("images_upload_url","","string")},getImageUploadBasePath:function(e){return e.getParam("images_upload_base_path","","string")},getImagesUploadCredentials:function(e){return e.getParam("images_upload_credentials",!1,"boolean")},getImagesUploadHandler:function(e){return e.getParam("images_upload_handler",null,"function")}},Lu=$n.detect().browser,Fu=function(){return Lu.isIE()||Lu.isEdge()||Lu.isFirefox()},Hu=function(e,t){e.selection.setRng(t),function(e,t){G(_s.fromRangeStart(t).getClientRects()).each(function(t){var n,r,i=function(e,t){return t.left>e.left&&t.right<e.right?0:t.left<e.left?t.left-e.left:t.right-e.right}(n=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}}(e),r=t),o=function(e,t){return t.top>e.top&&t.bottom<e.bottom?0:t.top<e.top?t.top-e.top:t.bottom-e.bottom}(n,r);!function(e,t,n){e.inline?(e.getBody().scrollLeft+=t,e.getBody().scrollTop+=n):e.getWin().scrollBy(t,n)}(e,0!==i?i>0?i+4:i-4:0,0!==o?o>0?o+4:o-4:0)})}(e,t)},zu=function(e,t,n){var r=e(t,n);return function(e){return e.breakType===uu.Wrap&&0===e.positions.length}(r)||!Ii.isBr(n.getNode())&&function(e){return e.breakType===uu.Br&&1===e.positions.length}(r)?!function(e,t,n){return r.breakAt.map(function(n){return e(t,n).breakAt.isSome()}).getOr(!1)}(e,t):r.breakAt.isNone()},ju=Ca.curry(zu,Eu),Wu=Ca.curry(zu,Nu),Uu=function(e,t,n){var r=function(e,t){var n=t.getNode(e);return Ii.isElement(n)&&"TABLE"===n.nodeName?k.some(n):k.none()}(!!t,n),i=!1===t;r.fold(function(){return Hu(e,n.toRange())},function(r){return Rl.positionIn(i,e.getBody()).filter(function(e){return e.isEqual(n)}).fold(function(){return Hu(e,n.toRange())},function(i){return function(e,t,n,r){var i=Mu.getForcedRootBlock(t);i?t.undoManager.transact(function(){var r=Vn.fromTag(i);cr(r,Mu.getForcedRootBlockAttrs(t)),Ro(r,Vn.fromTag("br")),e?Ao(Vn.fromDom(n),r):No(Vn.fromDom(n),r);var o=t.dom.createRng();o.setStart(r.dom(),0),o.setEnd(r.dom(),0),Hu(t,o)}):Hu(t,r.toRange())}(t,e,r,n)})})},$u=function(e,t,n,r){var i=e.selection.getRng(),o=Ts.fromRangeStart(i),a=e.getBody();if(!t&&ju(r,o)){var s=function(e,t,n){return function(e,t){return G(t.getClientRects()).bind(function(t){return Du(e,t.left,t.top)}).bind(function(e){return ku((n=e,Rl.lastPositionIn(n).map(function(e){return Eu(n,e).positions.concat(e)}).getOr([])),t);var n})}(t,n).orThunk(function(){return G(n.getClientRects()).bind(function(n){return Tu(Au(e,Ts.before(t)),n.left)})}).getOr(Ts.before(t))}(a,n,o);return Uu(e,t,s),!0}return!(!t||!Wu(r,o)||(s=function(e,t,n){return function(e,t){return Q(t.getClientRects()).bind(function(t){return Pu(e,t.left,t.top)}).bind(function(e){return ku((n=e,Rl.firstPositionIn(n).map(function(e){return[e].concat(Nu(n,e).positions)}).getOr([])),t);var n})}(t,n).orThunk(function(){return G(n.getClientRects()).bind(function(n){return Tu(Ru(e,Ts.after(t)),n.left)})}).getOr(Ts.after(t))}(a,n,o),Uu(e,t,s),0))},qu=function(e,t){return function(){return k.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return k.from(e.dom.getParent(n,"table")).map(function(n){return function(e,t,n,r){var i=e.selection.getRng(),o=t?1:-1;if(Fu()&&function(e,t,n){var r=Ts.fromRangeStart(t);return Rl.positionIn(!e,n).map(function(e){return e.isEqual(r)}).getOr(!1)}(t,i,n)){var a=iu(o,e,n,!t,!0);return Hu(e,a),!0}return!1}(e,t,n)})}).getOr(!1)}},Vu=function(e,t){return function(){return k.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return k.from(e.dom.getParent(n,"table")).map(function(r){return $u(e,t,r,n)})}).getOr(!1)}},Xu=Ii.isContentEditableFalse,Yu=function(e,t,n){var r,i,o,a,s,u=Ja(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(r=e.ownerDocument.documentElement,i=e.scrollLeft||r.scrollLeft,o=e.scrollTop||r.scrollTop):(s=e.getBoundingClientRect(),i=e.scrollLeft-s.left,o=e.scrollTop-s.top),u.left+=i,u.right+=i,u.top+=o,u.bottom+=o,u.width=1,(a=t.offsetWidth-t.clientWidth)>0&&(n&&(a*=-1),u.left+=a,u.right+=a),u},Ku=function(e,t,n){var r,i,o=Mo(k.none()),a=function(){!function(e){var t,n,r,i,o;for(t=dn("*[contentEditable=false]",e),i=0;i<t.length;i++)r=(n=t[i]).previousSibling,Ia(r)&&(1===(o=r.data).length?r.parentNode.removeChild(r):r.deleteData(o.length-1,1)),r=n.nextSibling,Pa(r)&&(1===(o=r.data).length?r.parentNode.removeChild(r):r.deleteData(0,1))}(e),i&&(tu.remove(i),i=null),o.get().each(function(e){dn(e.caret).remove(),o.set(k.none())}),clearInterval(r)},s=function(){r=Oe.setInterval(function(){n()?dn("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden"):dn("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")},500)};return{show:function(n,r){var u,l,c;if(a(),c=r,Ii.isElement(c)&&/^(TD|TH)$/i.test(c.tagName))return null;if(!t(r))return i=function(e,t){var n,r,i;if(r=e.ownerDocument.createTextNode(_a),i=e.parentNode,t){if(n=e.previousSibling,ka(n)){if(Aa(n))return n;if(Ia(n))return n.splitText(n.data.length-1)}i.insertBefore(r,e)}else{if(n=e.nextSibling,ka(n)){if(Aa(n))return n;if(Pa(n))return n.splitText(1),n}e.nextSibling?i.insertBefore(r,e.nextSibling):i.appendChild(r)}return r}(r,n),l=r.ownerDocument.createRange(),Xu(i.nextSibling)?(l.setStart(i,0),l.setEnd(i,0)):(l.setStart(i,1),l.setEnd(i,1)),l;i=function(e,t,n){var r,i,o;return(r=t.ownerDocument.createElement(e)).setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(((o=document.createElement("br")).setAttribute("data-mce-bogus","1"),o)),i=t.parentNode,n?i.insertBefore(r,t):t.nextSibling?i.insertBefore(r,t.nextSibling):i.appendChild(r),r}("p",r,n),u=Yu(e,r,n),dn(i).css("top",u.top);var f=dn('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(u).appendTo(e)[0];return o.set(k.some({caret:f,element:r,before:n})),o.get().each(function(e){n&&dn(e.caret).addClass("mce-visual-caret-before")}),s(),(l=r.ownerDocument.createRange()).setStart(i,0),l.setEnd(i,0),l},hide:a,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){o.get().each(function(t){var n=Yu(e,t.element,t.before);dn(t.caret).css(n)})},destroy:function(){return Oe.clearInterval(r)}}},Ju=function(e){return Xu(e)||Ii.isTable(e)&&Fu()},Gu=Ii.isContentEditableFalse,Qu=Ii.matchStyleValues("display","block table table-cell table-caption list-item"),Zu=Aa,el=Ea,tl=Ca.curry,nl=Ii.isElement,rl=$a,il=function(e){return e>0},ol=function(e){return e<0},al=function(e,t){for(var n;n=e(t);)if(!el(n))return n;return null},sl=function(e,t,n,r,i){var o=new ui(e,r);if(ol(t)){if((Gu(e)||el(e))&&n(e=al(o.prev,!0)))return e;for(;e=al(o.prev,i);)if(n(e))return e}if(il(t)){if((Gu(e)||el(e))&&n(e=al(o.next,!0)))return e;for(;e=al(o.next,i);)if(n(e))return e}return null},ul=function(e,t){for(;e&&e!==t;){if(Qu(e))return e;e=e.parentNode}return null},ll=function(e,t,n){return ul(e.container(),n)===ul(t.container(),n)},cl=function(e,t){var n,r;return t?(n=t.container(),r=t.offset(),nl(n)?n.childNodes[r+e]:null):null},fl=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},dl=function(e,t,n){return ul(t,e)===ul(n,e)},hl=function(e,t,n){var r,i;for(i=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[i],Zu(r)&&(r=r[i]),Gu(r)){if(dl(t,r,n))return r;break}if(rl(r))break;n=n.parentNode}return null},pl=tl(fl,!0),ml=tl(fl,!1),gl=function(e,t,n){var r,i,o,a,s=tl(hl,!0,t),u=tl(hl,!1,t);if(i=n.startContainer,o=n.startOffset,Ea(i)){if(nl(i)||(i=i.parentNode),"before"===(a=i.getAttribute("data-mce-caret"))&&(r=i.nextSibling,Ju(r)))return pl(r);if("after"===a&&(r=i.previousSibling,Ju(r)))return ml(r)}if(!n.collapsed)return n;if(Ii.isText(i)){if(Zu(i)){if(1===e){if(r=u(i))return pl(r);if(r=s(i))return ml(r)}if(-1===e){if(r=s(i))return ml(r);if(r=u(i))return pl(r)}return n}if(Ia(i)&&o>=i.data.length-1)return 1===e&&(r=u(i))?pl(r):n;if(Pa(i)&&o<=1)return-1===e&&(r=s(i))?ml(r):n;if(o===i.data.length)return(r=u(i))?pl(r):n;if(0===o)return(r=s(i))?ml(r):n}return n},vl=function(e,t){var n=cl(e,t);return Gu(n)&&!Ii.isBogusAll(n)},bl=function(e,t){return Ii.isTable(cl(e,t))},yl=function(e,t){return k.from(cl(e?0:-1,t)).filter(Gu)},wl=function(e,t,n){var r=gl(e,t,n);return-1===e?_s.fromRangeStart(r):_s.fromRangeEnd(r)},xl=tl(vl,0),Cl=tl(vl,-1),_l=tl(bl,0),Sl=tl(bl,-1),Tl=function(e){return Ts.isTextPosition(e)?0===e.offset():$a(e.getNode())},kl=function(e){if(Ts.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return $a(e.getNode(!0))},El=function(e,t){return!Ts.isTextPosition(e)&&!Ts.isTextPosition(t)&&e.getNode()===t.getNode(!0)},Nl=function(e,t,n){var r=yu(t);return k.from(e?r.next(n):r.prev(n))},Al=function(e,t){var n,r=e?t.firstChild:t.lastChild;return Ii.isText(r)?k.some(Ts(r,e?0:r.data.length)):r?$a(r)?k.some(e?Ts.before(r):(n=r,Ii.isBr(n)?Ts.before(n):Ts.after(n))):function(e,t,n){var r=e?Ts.before(n):Ts.after(n);return Nl(e,t,r)}(e,t,r):k.none()},Rl={fromPosition:Nl,nextPosition:b(Nl,!0),prevPosition:b(Nl,!1),navigate:function(e,t,n){return Nl(e,t,n).bind(function(r){return ll(n,r,t)&&function(e,t,n){return e?!El(t,n)&&(r=t,!(!Ts.isTextPosition(r)&&Ii.isBr(r.getNode())))&&kl(t)&&Tl(n):!El(n,t)&&Tl(t)&&kl(n);var r}(e,n,r)?Nl(e,t,r):k.some(r)})},positionIn:Al,firstPositionIn:b(Al,!0),lastPositionIn:b(Al,!1)},Ol=function(e,t){return!e.isBlock(t)||t.innerHTML||ke.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},Dl=function(e,t){return Rl.lastPositionIn(e).fold(function(){return!1},function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})},Pl=function(e,t,n){return!(!1!==t.hasChildNodes()||!Xs(e,t)||(function(e,t){var n=e.ownerDocument.createTextNode(_a);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)}(t,n),0))},Il=function(e,t,n,r){var i,o,a,s,u=n[t?"start":"end"],l=e.getRoot();if(u){for(a=u[0],o=l,i=u.length-1;i>=1;i--){if(s=o.childNodes,Pl(l,o,r))return!0;if(u[i]>s.length-1)return!!Pl(l,o,r)||Dl(o,r);o=s[u[i]]}3===o.nodeType&&(a=Math.min(u[0],o.nodeValue.length)),1===o.nodeType&&(a=Math.min(u[0],o.childNodes.length)),t?r.setStart(o,a):r.setEnd(o,a)}return!0},Bl=function(e){return Ii.isText(e)&&e.data.length>0},Ml=function(e,t,n){var r,i,o,a,s,u,l=e.get(n.id+"_"+t),c=n.keep;if(l){if(r=l.parentNode,"start"===t?(c?l.hasChildNodes()?(r=l.firstChild,i=1):Bl(l.nextSibling)?(r=l.nextSibling,i=0):Bl(l.previousSibling)?(r=l.previousSibling,i=l.previousSibling.data.length):(r=l.parentNode,i=e.nodeIndex(l)+1):i=e.nodeIndex(l),s=r,u=i):(c?l.hasChildNodes()?(r=l.firstChild,i=1):Bl(l.previousSibling)?(r=l.previousSibling,i=l.previousSibling.data.length):(r=l.parentNode,i=e.nodeIndex(l)):i=e.nodeIndex(l),s=r,u=i),!c){for(a=l.previousSibling,o=l.nextSibling,Vt.each(Vt.grep(l.childNodes),function(e){Ii.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});l=e.get(n.id+"_"+t);)e.remove(l,!0);a&&o&&a.nodeType===o.nodeType&&Ii.isText(a)&&!ke.opera&&(i=a.nodeValue.length,a.appendData(o.nodeValue),e.remove(o),s=a,u=i)}return k.some(Ts(s,u))}return k.none()},Ll={getBookmark:function(e,t,n){return qs.getBookmark(e,t,n)},moveToBookmark:function(e,t){(function(e,t){var n=e.dom;if(t){if(function(e){return Vt.isArray(e.start)}(t))return function(e,t){var n=e.createRng();return Il(e,!0,t,n)&&Il(e,!1,t,n)?k.some(n):k.none()}(n,t);if("string"==typeof t.start)return k.some(function(e,t){var n,r;return n=e.createRng(),r=Is(e.getRoot(),t.start),n.setStart(r.container(),r.offset()),r=Is(e.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n}(n,t));if(t.hasOwnProperty("id"))return function(e,t){var n,r,i=Ml(e,"start",t),o=Ml(e,"end",t);return is([i,(n=o,r=i,n.isSome()?n:r)],function(t,n){var r=e.createRng();return r.setStart(Ol(e,t.container()),t.offset()),r.setEnd(Ol(e,n.container()),n.offset()),r})}(n,t);if(t.hasOwnProperty("name"))return function(e,t){return k.from(e.select(t.name)[t.index]).map(function(t){var n=e.createRng();return n.selectNode(t),n})}(n,t);if(t.hasOwnProperty("rng"))return k.some(t.rng)}return k.none()})(e,t).each(function(t){e.setRng(t)})},isBookmarkNode:function(e){return Ii.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")}},Fl=function(e){return e&&/^(IMG)$/.test(e.nodeName)},Hl=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},zl=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},jl=function(e,t,n){var r,i,o,a=n.startOffset,s=n.startContainer;if((n.startContainer!==n.endContainer||!Fl(n.startContainer.childNodes[n.startOffset]))&&1===s.nodeType)for(a<(o=s.childNodes).length?r=new ui(s=o[a],e.getParent(s,e.isBlock)):(r=new ui(s=o[o.length-1],e.getParent(s,e.isBlock))).next(!0),i=r.current();i;i=r.next())if(3===i.nodeType&&!Hl(i))return n.setStart(i,0),void t.setRng(n)},Wl=function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!Hl(e))return e},Ul=function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},$l=function(e,t,n){return e.schema.isValidChild(t,n)},ql=Hl,Vl=function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e},Xl=function(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},Yl=zl,Kl=function(e,t,n){return zl(e,e.getStyle(t,n),n)},Jl=function(e,t){var n;return e.getParent(t,function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n}),n},Gl=function(e,t,n){return e.getParents(t,n,e.getRoot())},Ql=Ll.isBookmarkNode,Zl=Gl,ec=ql,tc=Ul,nc=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},rc=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},ic=function(e,t,n,r){var i,o,a=n.nodeValue;return void 0===r&&(r=e?a.length:0),e?-1!==(i=(i=a.lastIndexOf(" ",r))>(o=a.lastIndexOf("Â ",r))?i:o)&&!t&&(i<r||!e)&&i<=a.length&&i++:(i=a.indexOf(" ",r),o=a.indexOf("Â ",r),i=-1!==i&&(-1===o||i<o)?i:o),i},oc=function(e,t,n,r,i,o){var a,s,u,l;if(3===n.nodeType){if(-1!==(u=ic(i,o,n,r)))return{container:n,offset:u};l=n}for(a=new ui(n,e.getParent(n,e.isBlock)||t);s=a[i?"prev":"next"]();)if(3!==s.nodeType||Ql(s.parentNode)){if(e.isBlock(s)||Xl(s,"BR"))break}else if(l=s,-1!==(u=ic(i,o,s)))return{container:s,offset:u};if(l)return{container:l,offset:r=i?0:l.length}},ac=function(e,t,n,r,i){var o,a,s,u;for(3===r.nodeType&&0===r.nodeValue.length&&r[i]&&(r=r[i]),o=Zl(e,r),a=0;a<o.length;a++)for(s=0;s<t.length;s++)if(!("collapsed"in(u=t[s])&&u.collapsed!==n.collapsed)&&e.is(o[a],u.selector))return o[a];return r},sc=function(e,t,n,r){var i,o=e.dom,a=o.getRoot();if(t[0].wrapper||(i=o.getParent(n,t[0].block,a)),!i){var s=o.getParent(n,"LI,TD,TH");i=o.getParent(3===n.nodeType?n.parentNode:n,function(t){return t!==a&&tc(e,t)},s)}if(i&&t[0].wrapper&&(i=Zl(o,i,"ul,ol").reverse()[0]||i),!i)for(i=n;i[r]&&!o.isBlock(i[r])&&(i=i[r],!Xl(i,"br")););return i||n},uc=function(e,t,n,r,i,o,a){var s,u,l,c,f,d;if(s=u=a?n:i,c=a?"previousSibling":"nextSibling",f=e.getRoot(),3===s.nodeType&&!ec(s)&&(a?r>0:o<s.nodeValue.length))return s;for(;;){if(!t[0].block_expand&&e.isBlock(u))return u;for(l=u[c];l;l=l[c])if(!Ql(l)&&!ec(l)&&("BR"!==(d=l).nodeName||!d.getAttribute("data-mce-bogus")||d.nextSibling))return u;if(u===f||u.parentNode===f){s=u;break}u=u.parentNode}return s},lc=function(e,t,n,r){var i,o=t.startContainer,a=t.startOffset,s=t.endContainer,u=t.endOffset,l=e.dom;return 1===o.nodeType&&o.hasChildNodes()&&3===(o=ts(o,a)).nodeType&&(a=0),1===s.nodeType&&s.hasChildNodes()&&3===(s=ts(s,t.collapsed?u:u-1)).nodeType&&(u=s.nodeValue.length),o=rc(l,o),s=rc(l,s),(Ql(o.parentNode)||Ql(o))&&(o=Ql(o)?o:o.parentNode,3===(o=t.collapsed?o.previousSibling||o:o.nextSibling||o).nodeType&&(a=t.collapsed?o.length:0)),(Ql(s.parentNode)||Ql(s))&&(s=Ql(s)?s:s.parentNode,3===(s=t.collapsed?s.nextSibling||s:s.previousSibling||s).nodeType&&(u=t.collapsed?0:s.length)),t.collapsed&&((i=oc(l,e.getBody(),o,a,!0,r))&&(o=i.container,a=i.offset),(i=oc(l,e.getBody(),s,u,!1,r))&&(s=i.container,u=i.offset)),n[0].inline&&(s=r?s:function(e,t){var n=nc(e,u);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=nc(n.node.previousSibling);n.node&&n.offset>0&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&n.offset>1&&(e=n.node).splitText(n.offset-1)}return e}(s)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===o.nodeType&&0!==a||(o=uc(l,n,o,a,s,u,!0)),n[0].inline&&3===s.nodeType&&u!==s.nodeValue.length||(s=uc(l,n,o,a,s,u,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(o=ac(l,n,t,o,"previousSibling"),s=ac(l,n,t,s,"nextSibling")),(n[0].block||n[0].selector)&&(o=sc(e,n,o,"previousSibling"),s=sc(e,n,s,"nextSibling"),n[0].block&&(l.isBlock(o)||(o=uc(l,n,o,a,s,u,!0)),l.isBlock(s)||(s=uc(l,n,o,a,s,u,!1)))),1===o.nodeType&&(a=l.nodeIndex(o),o=o.parentNode),1===s.nodeType&&(u=l.nodeIndex(s)+1,s=s.parentNode),{startContainer:o,startOffset:a,endContainer:s,endOffset:u}},cc=Vt.each,fc={walk:function(e,t,n){var r,i,o,a,s,u,l,c=t.startContainer,f=t.startOffset,d=t.endContainer,h=t.endOffset;if((l=e.select("td[data-mce-selected],th[data-mce-selected]")).length>0)cc(l,function(e){n([e])});else{var p,m,g,v=function(e){var t;return 3===(t=e[0]).nodeType&&t===c&&f>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===h&&e.length>0&&t===d&&3===t.nodeType&&e.splice(e.length-1,1),e},b=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},y=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},w=function(e,t,r){var i=r?"nextSibling":"previousSibling";for(s=(a=e).parentNode;a&&a!==t;a=s)s=a.parentNode,(u=b(a===e?a:a[i],i)).length&&(r||u.reverse(),n(v(u)))};if(1===c.nodeType&&c.hasChildNodes()&&(c=c.childNodes[f]),1===d.nodeType&&d.hasChildNodes()&&(m=h,--m>(g=(p=d).childNodes).length-1?m=g.length-1:m<0&&(m=0),d=g[m]||p),c===d)return n(v([c]));for(r=e.findCommonAncestor(c,d),a=c;a;a=a.parentNode){if(a===d)return w(c,r,!0);if(a===r)break}for(a=d;a;a=a.parentNode){if(a===c)return w(d,r);if(a===r)break}i=y(c,r)||c,o=y(d,r)||d,w(c,i,!0),(u=b(i===c?i:i.nextSibling,"nextSibling",o===d?o.nextSibling:o)).length&&n(v(u)),w(d,o)}}},dc=function(e,t){var n=function(t){return e(t)?k.from(t.dom().nodeValue):k.none()},r=$n.detect().browser,i=r.isIE()&&10===r.version.major?function(e){try{return n(e)}catch(e){return k.none()}}:n;return{get:function(t){if(!e(t))throw new Error("Can only get text value of a text node");return i(t).getOr("")},getOption:i,set:function(t,n){if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom().nodeValue=n}}}(er.isText),hc=function(e){return dc.get(e)},pc=function(e,t,n,r){var i,o,a=t.uid,s=void 0===a?(i="mce-annotation",o=(new Date).getTime(),i+"_"+Math.floor(1e9*Math.random())+ ++pa+String(o)):a,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}(t,["uid"]),l=Vn.fromTag("span",e);Xo(l,oa()),lr(l,""+sa(),s),lr(l,""+aa(),n);var c=r(s,u),f=c.attributes,d=void 0===f?{}:f,h=c.classes,p=void 0===h?[]:h;return cr(l,d),function(e,t){H(t,function(t){Xo(e,t)})}(l,p),l},mc=function(e,t,n,r,i){var o=[],a=pc(e.getDoc(),i,n,r),s=Mo(k.none()),u=function(){s.set(k.none())},l=function(e){H(e,c)},c=function(t){switch(function(e,t,n,r){return zr(t).fold(function(){return"skipping"},function(i){return"br"===r||function(e){return er.isText(e)&&"\ufeff"===hc(e)}(t)?"valid":function(e){return er.isElement(e)&&Ko(e,oa())}(t)?"existing":Vs(t)?"caret":$l(e,n,r)&&$l(e,er.name(i),n)?"valid":"invalid-child"})}(e,t,"span",er.name(t))){case"invalid-child":u();var n=Vr(t);l(n),u();break;case"valid":var r=s.get().getOrThunk(function(){var e=ga(a);return o.push(e),s.set(k.some(e)),e});Oo(t,r)}};return fc.walk(e.dom,t,function(e){u(),function(e){var t=F(e,Vn.fromDom);l(t)}(e)}),o},gc=function(e,t,n,r){e.undoManager.transact(function(){var i=e.selection.getRng();if(i.collapsed&&function(e,t){var n=lc(e,t,[{inline:!0}],function(e){return 3===e.startContainer.nodeType&&e.startContainer.nodeValue.length>=e.startOffset&&"Â "===e.startContainer.nodeValue[e.startOffset]}(t));t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)}(e,i),e.selection.getRng().collapsed){var o=pc(e.getDoc(),r,t,n.decorate);ya(o,"Â "),e.selection.getRng().insertNode(o.dom()),e.selection.select(o.dom())}else{var a=qs.getPersistentBookmark(e.selection,!1),s=e.selection.getRng();mc(e,s,t,n.decorate,r),e.selection.moveToBookmark(a)}})};function vc(e){var t=ha();da(e,t);var n=fa(e,t);return{register:function(e,n){t.register(e,n)},annotate:function(n,r){t.lookup(n).each(function(t){gc(e,n,t,r)})},annotationChanged:function(e,t){n.addListener(e,t)},remove:function(t){ua(e,k.some(t)).each(function(e){var t=e.elements;H(t,Io.unwrap)})},getAll:function(t){var n=ca(e,t);return rr(n,function(e){return F(e,function(e){return e.dom()})})}}}var bc=function(e){return e.length>0&&(!(t=e[e.length-1]).firstChild||function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&function(e){return"Â "===e.data||Ii.isBr(e)}(e.firstChild)}(t))?e.slice(0,-1):e;var t},yc=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},wc=function(e,t){var n=Ts.after(e),r=yu(t).prev(n);return r?r.toRange():null},xc=function(e,t,n,r){var i=function(e,t,n){var r=t.serialize(n);return function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e}(e.createFragment(r))}(t,e,r),o=yc(t,n.startContainer),a=bc(function(e){return Vt.grep(e.childNodes,function(e){return"LI"===e.nodeName})}(i.firstChild)),s=t.getRoot(),u=function(e){var r=Ts.fromRangeStart(n),i=yu(t.getRoot()),a=1===e?i.prev(r):i.next(r);return!a||yc(t,a.getNode())!==o};return u(1)?function(e,t,n){var r=e.parentNode;return Vt.each(t,function(t){r.insertBefore(t,e)}),function(e,t){var n=Ts.before(e),r=yu(t).next(n);return r?r.toRange():null}(e,n)}(o,a,s):u(2)?function(e,t,n,r){return r.insertAfter(t.reverse(),e),wc(t[0],n)}(o,a,s,t):function(e,t,n,r){var i=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]}(e,r),o=e.parentNode;return o.insertBefore(i[0],e),Vt.each(t,function(t){o.insertBefore(t,e)}),o.insertBefore(i[1],e),o.removeChild(e),wc(t[t.length-1],n)}(o,a,s,n)},Cc=Vt.each,_c=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var r=function(t){var n={};return Cc(e.getAttribs(t),function(r){var i=r.nodeName.toLowerCase();0!==i.indexOf("_")&&"style"!==i&&0!==i.indexOf("data-")&&(n[i]=e.getAttrib(t,i))}),n},i=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!(!i(r(t),r(n))||!i(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))||Ll.isBookmarkNode(t)||Ll.isBookmarkNode(n))}},Sc=function(e){Io.empty(e),Ro(e,Vn.fromHtml('<br data-mce-bogus="1">'))},Tc=function(e){Kr(e).each(function(t){Wr(t).each(function(n){pi(e)&&gi(t)&&pi(n)&&Io.remove(t)})})},kc=Vt.makeMap;function Ec(e){var t,n,r,i,o,a=[];return t=(e=e||{}).indent,n=kc(e.indent_before||""),r=kc(e.indent_after||""),i=Yi.getEncodeFunc(e.entity_encoding||"raw",e.entities),o="html"===e.element_format,{start:function(e,s,u){var l,c,f,d;if(t&&n[e]&&a.length>0&&(d=a[a.length-1]).length>0&&"\n"!==d&&a.push("\n"),a.push("<",e),s)for(l=0,c=s.length;l<c;l++)f=s[l],a.push(" ",f.name,'="',i(f.value,!0),'"');a[a.length]=!u||o?">":" />",u&&t&&r[e]&&a.length>0&&(d=a[a.length-1]).length>0&&"\n"!==d&&a.push("\n")},end:function(e){var n;a.push("</",e,">"),t&&r[e]&&a.length>0&&(n=a[a.length-1]).length>0&&"\n"!==n&&a.push("\n")},text:function(e,t){e.length>0&&(a[a.length]=t?e:i(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("\x3c!--",e,"--\x3e")},pi:function(e,n){n?a.push("<?",e," ",i(n),"?>"):a.push("<?",e,"?>"),t&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}}function Nc(e,t){void 0===t&&(t=oo());var n=Ec(e);return(e=e||{}).validate=!("validate"in e)||e.validate,{serialize:function(r){var i,o;o=e.validate,i={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)do{a(e)}while(e=e.next)}},n.reset();var a=function(e){var r,s,u,l,c,f,d,h,p,m=i[e.type];if(m)m(e);else{if(r=e.name,s=e.shortEnded,u=e.attributes,o&&u&&u.length>1&&((f=[]).map={},p=t.getElementRule(e.name))){for(d=0,h=p.attributesOrder.length;d<h;d++)(l=p.attributesOrder[d])in u.map&&(c=u.map[l],f.map[l]=c,f.push({name:l,value:c}));for(d=0,h=u.length;d<h;d++)(l=u[d].name)in f.map||(c=u.map[l],f.map[l]=c,f.push({name:l,value:c}));u=f}if(n.start(e.name,u,s),!s){if(e=e.firstChild)do{a(e)}while(e=e.next);n.end(r)}}};return 1!==r.type||e.inner?i[11](r):a(r),n.getContent()}}}var Ac=function(e){return e.collapsed?e:function(e){var t=Ts.fromRangeStart(e),n=Ts.fromRangeEnd(e),r=e.commonAncestorContainer;return Rl.fromPosition(!1,r,n).map(function(i){return!ll(t,n,r)&&ll(t,i,r)?function(e,t,n,r){var i=document.createRange();return i.setStart(e,t),i.setEnd(n,r),i}(t.container(),t.offset(),i.container(),i.offset()):e}).getOr(e)}(e)},Rc=Ii.matchNodeNames("td th"),Oc=function(e,t){var n=e.selection.getRng(),r=n.startContainer,i=n.startOffset;n.collapsed&&function(e,t){return Ii.isText(e)&&"Â "===e.nodeValue[t-1]}(r,i)&&Ii.isText(r)&&(r.insertData(i-1," "),r.deleteData(i,1),n.setStart(r,i),n.setEnd(r,i),e.selection.setRng(n)),e.selection.setContent(t)},Dc=function(e,t,n){var r,i,o,a,s,u,l,c,f,d,h,p=e.selection,m=e.dom;if(/^ | $/.test(t)&&(t=function(e,t){var n,r;n=e.startContainer,r=e.startOffset;var i=function(e){return n[e]&&3===n[e].nodeType};return 3===n.nodeType&&(r>0?t=t.replace(/^&nbsp;/," "):i("previousSibling")||(t=t.replace(/^ /,"&nbsp;")),r<n.length?t=t.replace(/&nbsp;(<br>|)$/," "):i("nextSibling")||(t=t.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),t}(p.getRng(),t)),r=e.parser,h=n.merge,i=Nc({validate:e.settings.validate},e.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',u={content:t,format:"html",selection:!0,paste:n.paste},(u=e.fire("BeforeSetContent",u)).isDefaultPrevented())e.fire("SetContent",{content:u.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=u.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,d);var g=(c=p.getRng()).startContainer||(c.parentElement?c.parentElement():null),v=e.getBody();g===v&&p.isCollapsed()&&m.isBlock(v.firstChild)&&function(e,t){return t&&!e.schema.getShortEndedElements()[t.nodeName]}(e,v.firstChild)&&m.isEmpty(v.firstChild)&&((c=m.createRng()).setStart(v.firstChild,0),c.setEnd(v.firstChild,0),p.setRng(c)),p.isCollapsed()||(e.selection.setRng(Ac(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),t=function(e,t){var n,r;return n=e.startContainer,r=e.startOffset,3===n.nodeType&&e.collapsed&&("Â "===n.data[r]?(n.deleteData(r,1),/[\u00a0| ]$/.test(t)||(t+=" ")):"Â "===n.data[r-1]&&(n.deleteData(r-1,1),/[\u00a0| ]$/.test(t)||(t=" "+t))),t}(e.selection.getRng(),t));var b,y={context:(o=p.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0};if(s=r.parse(t,y),!0===n.paste&&function(e,t){var n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||function(e,t){return e.getBlockElements()[t.name]&&function(e){return e.firstChild&&e.firstChild===e.lastChild}(t)&&function(e){return"br"===e.name||"Â "===e.value}(t.firstChild)}(e,t))}(e,r)&&(r=r.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)}(e.schema,s)&&function(e,t){return!!yc(e,t)}(m,o))return c=xc(i,m,e.selection.getRng(),s),e.selection.setRng(c),void e.fire("SetContent",u);if(function(e){for(var t=s;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(),"mce_marker"===(f=s.lastChild).attr("id"))for(l=f,f=f.prev;f;f=f.walk(!0))if(3===f.type||!m.isBlock(f.name)){e.schema.isValidChild(f.parent.name,"span")&&f.parent.insert(l,f,"br"===f.name);break}if(e._selectionOverrides.showBlockCaretContainer(o),y.invalid){for(Oc(e,d),o=p.getNode(),a=e.getBody(),9===o.nodeType?o=f=a:f=o;f!==a;)o=f,f=f.parentNode;t=o===a?a.innerHTML:m.getOuterHTML(o),t=i.serialize(r.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return i.serialize(s)}))),o===a?m.setHTML(a,t):m.setOuterHTML(o,t)}else!function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,i=n.lastChild;!r||r===i&&"BR"===r.nodeName?e.dom.setHTML(n,t):Oc(e,t)}}(e,t=i.serialize(s),o);!function(e,t){var n=e.schema.getTextInlineElements(),r=e.dom;if(t){var i=e.getBody(),o=new _c(r);Vt.each(r.select("*[data-mce-fragment]"),function(e){for(var t=e.parentNode;t&&t!==i;t=t.parentNode)n[e.nodeName.toLowerCase()]&&o.compare(t,e)&&r.remove(e,!0)})}}(e,h),function(e,t){var n,r,i,o,a,s=e.dom,u=e.selection;if(t){if(e.selection.scrollIntoView(t),n=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===e.dom.getContentEditable(t))return t;return null}(t))return s.remove(t),void u.select(n);var l=s.createRng();(o=t.previousSibling)&&3===o.nodeType?(l.setStart(o,o.nodeValue.length),ke.ie||(a=t.nextSibling)&&3===a.nodeType&&(o.appendData(a.data),a.parentNode.removeChild(a))):(l.setStartBefore(t),l.setEndBefore(t)),r=s.getParent(t,s.isBlock),s.remove(t),r&&s.isEmpty(r)&&(e.$(r).empty(),l.setStart(r,0),l.setEnd(r,0),Rc(r)||r.getAttribute("data-mce-fragment")||!(i=function(t){var n=Ts.fromRangeStart(t);if(n=yu(e.getBody()).next(n))return n.toRange()}(l))?s.add(r,s.create("br",{"data-mce-bogus":"1"})):(l=i,s.remove(r))),u.setRng(l)}}(e,m.get("mce_marker")),b=e.getBody(),Vt.each(b.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")}),function(e,t){k.from(e.getParent(t,"td,th")).map(Vn.fromDom).each(Tc)}(e.dom,e.selection.getStart()),e.fire("SetContent",u),e.addVisual()}},Pc={insertAtCaret:function(e,t){var n=function(e){var t;return"string"!=typeof e?(t=Vt.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}}(t);Dc(e,n.content,n.details)}},Ic=Cr("sections","settings"),Bc=$n.detect().deviceType.isTouch(),Mc=["lists","autolink","autosave"],Lc={theme:"mobile"},Fc=function(e){var t=R(e)?e.join(" "):e,n=F(N(t)?t.split(" "):[],Ln);return j(n,function(e){return e.length>0})},Hc=function(e,t){return e.sections().hasOwnProperty(t)},zc=function(e,t,n,r){var i=function(e,t){var n,r,i,o=(n=function(t,n){return M(e,n)},r={},i={},nr(t,function(e,t){(n(0,t)?r:i)[t]=e}),{t:r,f:i});return Ic(o.t,o.f)}(["mobile"],r);return function(e,t,n,r){var i=Fc(n.forced_plugins),o=Fc(r.plugins),a=function(e,t){return[].concat(Fc(e)).concat(Fc(t))}(i,e&&Hc(t,"mobile")?j(o,b(M,Mc)):o);return Vt.extend(r,{plugins:a.join(" ")})}(e,i,n,Vt.extend(t,n,i.settings(),function(e,t){var n=t.settings().inline;return e&&Hc(t,"mobile")&&!n}(e,i)?function(e,t,n){var r=e.sections(),i=r.hasOwnProperty(t)?r[t]:{};return Vt.extend({},n,i)}(i,"mobile",Lc):{},{validate:!0,content_editable:i.settings().inline,external_plugins:function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?Vt.extend({},e.external_plugins,n):n}(n,i.settings())}))},jc=function(e,t,n){return k.from(t.settings[n]).filter(e)},Wc=b(jc,N),Uc=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,$c=function(e,t){var n=t.container(),r=t.offset();return e?Na(n)?Ii.isText(n.nextSibling)?Ts(n.nextSibling,0):Ts.after(n):Oa(t)?Ts(n,r+1):t:Na(n)?Ii.isText(n.previousSibling)?Ts(n.previousSibling,n.previousSibling.data.length):Ts.before(n):Da(t)?Ts(n,r-1):t},qc={isInlineTarget:function(e,t){var n=Wc(e,"inline_boundaries_selector").getOr("a[href],code");return Nr.is(Vn.fromDom(t),n)},findRootInline:function(e,t,n){var r=function(e,t,n){return j(bo.DOM.getParents(n.container(),"*",t),e)}(e,t,n);return k.from(r[r.length-1])},isRtl:function(e){return"rtl"===bo.DOM.getStyle(e,"direction",!0)||(t=e.textContent,Uc.test(t));var t},isAtZwsp:function(e){return Oa(e)||Da(e)},normalizePosition:$c,normalizeForwards:b($c,!0),normalizeBackwards:b($c,!1),hasSameParentBlock:function(e,t,n){var r=ul(t,e),i=ul(n,e);return r&&r===i}},Vc=function(e,t){return Or.contains(e,t)?ea(t,function(e){return vi(e)||yi(e)},function(e){return function(t){return Or.eq(e,Vn.fromDom(t.dom().parentNode))}}(e)):k.none()},Xc=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)}(e))},Yc=function(e,t){return Ii.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&!1===function(e,t){var n=Vn.fromDom(e);return function(e,t,n){return na(e,t,n).isSome()}(Vn.fromDom(t),"pre,code",b(Or.eq,n))}(e,t)},Kc=function(e,t){return $a(t)&&!1===Yc(e,t)||function(e){return Ii.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")}(t)||Jc(t)},Jc=Ii.hasAttribute("data-mce-bookmark"),Gc=Ii.hasAttribute("data-mce-bogus"),Qc=Ii.hasAttributeValue("data-mce-bogus","all"),Zc=function(e){return function(e){var t,n,r=0;if(Kc(e,e))return!1;if(!(n=e.firstChild))return!0;t=new ui(n,e);do{if(Qc(n))n=t.next(!0);else if(Gc(n))n=t.next();else if(Ii.isBr(n))r++,n=t.next();else{if(Kc(e,n))return!1;n=t.next()}}while(n);return r<=1}(e.dom())},ef=Cr("block","position"),tf=Cr("from","to"),nf=function(e,t){var n=Vn.fromDom(e),r=Vn.fromDom(t.container());return Vc(n,r).map(function(e){return ef(e,t)})},rf=function(e,t,n){return n.collapsed?function(e,t,n){var r=nf(e,Ts.fromRangeStart(n)),i=r.bind(function(n){return Rl.fromPosition(t,e,n.position()).bind(function(n){return nf(e,n).map(function(n){return function(e,t,n){return Ii.isBr(n.position().getNode())&&!1===Zc(n.block())?Rl.positionIn(!1,n.block().dom()).bind(function(r){return r.isEqual(n.position())?Rl.fromPosition(t,e,r).bind(function(t){return nf(e,t)}):k.some(n)}).getOr(n):n}(e,t,n)})})});return is([r,i],tf).filter(function(e){return function(e){return!1===Or.eq(e.from().block(),e.to().block())}(e)&&function(e){return zr(e.from().block()).bind(function(t){return zr(e.to().block()).filter(function(e){return Or.eq(t,e)})}).isSome()}(e)&&function(e){return!1===Ii.isContentEditableFalse(e.from().block())&&!1===Ii.isContentEditableFalse(e.to().block())}(e)})}(e,t,n):k.none()},of=function(e,t){return function(e,t,n){return Or.contains(t,e)?jr(e,function(e){return n(e)||Or.eq(e,t)}).slice(0,-1):[]}(e,t,g(!1))},af=of,sf=function(e,t){return[e].concat(of(e,t))},uf=function(e){var t=function(e){var t=Vr(e);return $(t,pi).fold(function(){return t},function(e){return t.slice(0,e)})}(e);return H(t,Io.remove),t},lf=function(e,t){var n=sf(t,e);return U(n.reverse(),Zc).each(Io.remove)},cf=function(e,t,n,r){if(Zc(n))return Sc(n),Rl.firstPositionIn(n.dom());0===j(Ur(r),function(e){return!Zc(e)}).length&&Zc(t)&&No(r,Vn.fromTag("br"));var i=Rl.prevPosition(n.dom(),Ts.before(r.dom()));return H(uf(t),function(e){No(r,e)}),lf(e,t),i},ff=function(e,t,n){if(Zc(n))return Io.remove(n),Zc(t)&&Sc(t),Rl.firstPositionIn(t.dom());var r=Rl.lastPositionIn(n.dom());return H(uf(t),function(e){Ro(n,e)}),lf(e,t),r},df=function(e,t){Rl.positionIn(e,t.dom()).map(function(e){return e.getNode()}).map(Vn.fromDom).filter(gi).each(Io.remove)},hf=function(e,t,n){return df(!0,t),df(!1,n),function(e,t){return Or.contains(t,e)?function(e,t){var n=sf(t,e);return k.from(n[n.length-1])}(t,e):k.none()}(t,n).fold(b(ff,e,t,n),b(cf,e,t,n))},pf=function(e,t,n,r){return t?hf(e,r,n):hf(e,n,r)},mf=function(e,t){var n,r=Vn.fromDom(e.getBody());return(n=rf(r.dom(),t,e.selection.getRng()).bind(function(e){return pf(r,t,e.from().block(),e.to().block())})).each(function(t){e.selection.setRng(t.toRange())}),n.isSome()},gf=function(e,t){var n=Vn.fromDom(t),r=b(Or.eq,e);return Zo(n,Ci,r).isSome()},vf=function(e){var t=Vn.fromDom(e.getBody());return function(e,t){var n=Rl.prevPosition(e.dom(),Ts.fromRangeStart(t)).isNone(),r=Rl.nextPosition(e.dom(),Ts.fromRangeEnd(t)).isNone();return!function(e,t){return gf(e,t.startContainer)||gf(e,t.endContainer)}(e,t)&&n&&r}(t,e.selection.getRng())?function(e){return e.setContent(""),e.selection.setCursorLocation(),!0}(e):function(e,t){var n=t.getRng();return is([Vc(e,Vn.fromDom(n.startContainer)),Vc(e,Vn.fromDom(n.endContainer))],function(r,i){return!1===Or.eq(r,i)&&(n.deleteContents(),pf(e,!0,r,i).each(function(e){t.setRng(e.toRange())}),!0)}).getOr(!1)}(t,e.selection)},bf=function(e,t){return!e.selection.isCollapsed()&&vf(e)},yf=function(e){if(!R(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return H(e,function(r,i){var o=tr(r);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!R(s))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),o=0;o<r.length;o++)r[o]=arguments[o];return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[i].apply(null,r)},match:function(e){var n=tr(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!Y(t,function(e){return M(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)},log:function(e){console.log(e,{constructors:t,constructor:a,params:r})}}}}),n},wf=yf([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),xf=function(e,t,n,r){var i=r.getNode(!1===t);return Vc(Vn.fromDom(e),Vn.fromDom(n.getNode())).map(function(e){return Zc(e)?wf.remove(e.dom()):wf.moveToElement(i)}).orThunk(function(){return k.some(wf.moveToElement(i))})},Cf=function(e,t,n){return Rl.fromPosition(t,e,n).bind(function(r){return i=r.getNode(),Ci(Vn.fromDom(i))||yi(Vn.fromDom(i))?k.none():function(e,t,n,r){var i=function(t){return mi(Vn.fromDom(t))&&!ll(n,r,e)};return yl(!t,n).fold(function(){return yl(t,r).fold(g(!1),i)},i)}(e,t,n,r)?k.none():t&&Ii.isContentEditableFalse(r.getNode())?xf(e,t,n,r):!1===t&&Ii.isContentEditableFalse(r.getNode(!0))?xf(e,t,n,r):t&&Cl(n)?k.some(wf.moveToPosition(r)):!1===t&&xl(n)?k.some(wf.moveToPosition(r)):k.none();var i})},_f=function(e,t){return function(e,t){var n=e.container(),r=e.offset();return!1===Ts.isTextPosition(e)&&n===t.parentNode&&r>Ts.before(t).offset()}(t,e)?Ts(t.container(),t.offset()-1):t},Sf=function(e){return $a(e.previousSibling)?k.some((t=e.previousSibling,Ii.isText(t)?Ts(t,t.data.length):Ts.after(t))):e.previousSibling?Rl.lastPositionIn(e.previousSibling):k.none();var t},Tf=function(e){return $a(e.nextSibling)?k.some((t=e.nextSibling,Ii.isText(t)?Ts(t,0):Ts.before(t))):e.nextSibling?Rl.firstPositionIn(e.nextSibling):k.none();var t},kf=function(e,t,n){return function(e,t,n){return e?function(e,t){return Tf(t).orThunk(function(){return Sf(t)}).orThunk(function(){return function(e,t){return Rl.nextPosition(e,Ts.after(t)).fold(function(){return Rl.prevPosition(e,Ts.before(t))},k.some)}(e,t)})}(t,n):function(e,t){return Sf(t).orThunk(function(){return Tf(t)}).orThunk(function(){return function(e,t){var n=Ts.before(t.previousSibling?t.previousSibling:t.parentNode);return Rl.prevPosition(e,n).fold(function(){return Rl.nextPosition(e,Ts.after(t))},k.some)}(e,t)})}(t,n)}(e,t,n).map(b(_f,n))},Ef=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},Nf=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(er.name(t))},Af=function(e){if(Zc(e)){var t=Vn.fromHtml('<br data-mce-bogus="1">');return Io.empty(e),Ro(e,t),k.some(Ts.before(t.dom()))}return k.none()},Rf=function(e,t,n){var r,i=kf(t,e.getBody(),n.dom()),o=Zo(n,b(Nf,e),(r=e.getBody(),function(e){return e.dom()===r})),a=function(e,t){return is([Wr(e),$r(e),t],function(t,n,r){var i,o=t.dom(),a=n.dom();return Ii.isText(o)&&Ii.isText(a)?(i=o.data.length,o.appendData(a.data),Io.remove(n),Io.remove(e),r.container()===a?Ts(o,i):r):(Io.remove(e),r)}).orThunk(function(){return Io.remove(e),t})}(n,i);e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):o.bind(Af).fold(function(){Ef(e,t,a)},function(n){Ef(e,t,k.some(n))})},Of=function(e,t){return function(e,t,n){var r=gl(t?1:-1,e,n),i=Ts.fromRangeStart(r);return!1===t&&Cl(i)?k.some(wf.remove(i.getNode(!0))):t&&xl(i)?k.some(wf.remove(i.getNode())):function(e,t,n){return function(e,t){var n=t.getNode(!1===e),r=e?"after":"before";return Ii.isElement(n)&&n.getAttribute("data-mce-caret")===r}(t,n)?function(e,t){return e&&Ii.isContentEditableFalse(t.nextSibling)?k.some(wf.moveToElement(t.nextSibling)):!1===e&&Ii.isContentEditableFalse(t.previousSibling)?k.some(wf.moveToElement(t.previousSibling)):k.none()}(t,n.getNode(!1===t)).fold(function(){return Cf(e,t,n)},k.some):Cf(e,t,n).bind(function(t){return function(e,t,n){return n.fold(function(e){return k.some(wf.remove(e))},function(e){return k.some(wf.moveToElement(e))},function(n){return ll(t,n,e)?k.none():k.some(wf.moveToPosition(n))})}(e,n,t)})}(e,t,i)}(e.getBody(),t,e.selection.getRng()).map(function(n){return n.fold(function(e,t){return function(n){return e._selectionOverrides.hideFakeCaret(),Rf(e,t,Vn.fromDom(n)),!0}}(e,t),function(e,t){return function(n){var r=t?Ts.before(n):Ts.after(n);return e.selection.setRng(r.toRange()),!0}}(e,t),function(e){return function(t){return e.selection.setRng(t.toRange()),!0}}(e))}).getOr(!1)},Df=function(e,t){return e.selection.isCollapsed()?Of(e,t):function(e,t){var n,r=e.selection.getNode();return!!Ii.isContentEditableFalse(r)&&(n=Vn.fromDom(e.getBody()),H(Jo(n,".mce-offscreen-selection"),Io.remove),Rf(e,t,Vn.fromDom(e.selection.getNode())),Xc(e),!0)}(e,t)},Pf=function(e){var t,n=function(e,t){for(;t&&t!==e;){if(Ii.isContentEditableTrue(t)||Ii.isContentEditableFalse(t))return t;t=t.parentNode}return null}(e.getBody(),e.selection.getNode());return Ii.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(Ts.before(t).toRange())),!0},If=Ii.isText,Bf=function(e){return If(e)&&e.data[0]===_a},Mf=function(e){return If(e)&&e.data[e.data.length-1]===_a},Lf=function(e){return e.ownerDocument.createTextNode(_a)},Ff=function(e,t){return e?function(e){if(If(e.previousSibling))return Mf(e.previousSibling)?e.previousSibling:(e.previousSibling.appendData(_a),e.previousSibling);if(If(e))return Bf(e)?e:(e.insertData(0,_a),e);var t=Lf(e);return e.parentNode.insertBefore(t,e),t}(t):function(e){if(If(e.nextSibling))return Bf(e.nextSibling)?e.nextSibling:(e.nextSibling.insertData(0,_a),e.nextSibling);if(If(e))return Mf(e)?e:(e.appendData(_a),e);var t=Lf(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}(t)},Hf=b(Ff,!0),zf=b(Ff,!1),jf=function(e,t){return Ii.isText(e.container())?Ff(t,e.container()):Ff(t,e.getNode())},Wf=function(e,t){var n=t.get();return n&&e.container()===n&&Na(n)},Uf=function(e,t){return t.fold(function(t){tu.remove(e.get());var n=Hf(t);return e.set(n),k.some(Ts(n,n.length-1))},function(t){return Rl.firstPositionIn(t).map(function(t){if(Wf(t,e))return Ts(e.get(),1);tu.remove(e.get());var n=jf(t,!0);return e.set(n),Ts(n,1)})},function(t){return Rl.lastPositionIn(t).map(function(t){if(Wf(t,e))return Ts(e.get(),e.get().length-1);tu.remove(e.get());var n=jf(t,!1);return e.set(n),Ts(n,n.length-1)})},function(t){tu.remove(e.get());var n=zf(t);return e.set(n),k.some(Ts(n,1))})},$f=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return k.none()},qf=yf([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Vf=function(e,t){return ul(t,e)||e},Xf=function(e,t,n){var r=qc.normalizeForwards(n),i=Vf(t,r.container());return qc.findRootInline(e,i,r).fold(function(){return Rl.nextPosition(i,r).bind(b(qc.findRootInline,e,i)).map(function(e){return qf.before(e)})},k.none)},Yf=function(e,t){return null===Xs(e,t)},Kf=function(e,t,n){return qc.findRootInline(e,t,n).filter(b(Yf,t))},Jf=function(e,t,n){var r=qc.normalizeBackwards(n);return Kf(e,t,r).bind(function(e){return Rl.prevPosition(e,r).isNone()?k.some(qf.start(e)):k.none()})},Gf=function(e,t,n){var r=qc.normalizeForwards(n);return Kf(e,t,r).bind(function(e){return Rl.nextPosition(e,r).isNone()?k.some(qf.end(e)):k.none()})},Qf=function(e,t,n){var r=qc.normalizeBackwards(n),i=Vf(t,r.container());return qc.findRootInline(e,i,r).fold(function(){return Rl.prevPosition(i,r).bind(b(qc.findRootInline,e,i)).map(function(e){return qf.after(e)})},k.none)},Zf=function(e){return!1===qc.isRtl(td(e))},ed=function(e,t,n){return $f([Xf,Jf,Gf,Qf],[e,t,n]).filter(Zf)},td=function(e){return e.fold(v,v,v,v)},nd=function(e){return e.fold(g("before"),g("start"),g("end"),g("after"))},rd=function(e){return e.fold(qf.before,qf.before,qf.after,qf.after)},id=function(e,t,n,r,i,o){return is([qc.findRootInline(t,n,r),qc.findRootInline(t,n,i)],function(t,r){return t!==r&&qc.hasSameParentBlock(n,t,r)?qf.after(e?t:r):o}).getOr(o)},od=function(e,t){return e.fold(g(!0),function(e){return r=t,!(nd(n=e)===nd(r)&&td(n)===td(r));var n,r})},ad=function(e,t){return e?t.fold(m(k.some,qf.start),k.none,m(k.some,qf.after),k.none):t.fold(k.none,m(k.some,qf.before),k.none,m(k.some,qf.end))},sd=function(e,t,n,r){var i=qc.normalizePosition(e,r),o=ed(t,n,i);return ed(t,n,i).bind(b(ad,e)).orThunk(function(){return function(e,t,n,r,i){var o=qc.normalizePosition(e,i);return Rl.fromPosition(e,n,o).map(b(qc.normalizePosition,e)).fold(function(){return r.map(rd)},function(i){return ed(t,n,i).map(b(id,e,t,n,o,i)).filter(b(od,r))}).filter(Zf)}(e,t,n,o,r)})},ud=ed,ld=sd,cd=(b(sd,!1),b(sd,!0),rd),fd=function(e){return e.fold(qf.start,qf.start,qf.end,qf.end)},dd=function(e,t,n){var r=e?1:-1;return t.setRng(Ts(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},hd=function(e,t){var n=t.selection.getRng(),r=e?Ts.fromRangeEnd(n):Ts.fromRangeStart(n);return!!function(e){return P(e.selection.getSel().modify)}(t)&&(e&&Oa(r)?dd(!0,t.selection,r):!(e||!Da(r))&&dd(!1,t.selection,r))},pd=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},md=function(e){return!1!==e.settings.inline_boundaries},gd=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},vd=function(e,t,n){return Uf(t,n).map(function(t){return pd(e,t),n})},bd=function(e,t,n){return function(){return!!md(t)&&hd(e,t)}},yd={move:function(e,t,n){return function(){return!!md(e)&&function(e,t,n){var r=e.getBody(),i=Ts.fromRangeStart(e.selection.getRng()),o=b(qc.isInlineTarget,e);return ld(n,o,r,i).bind(function(n){return vd(e,t,n)})}(e,t,n).isSome()}},moveNextWord:b(bd,!0),movePrevWord:b(bd,!1),setupSelectedState:function(e){var t=Mo(null),n=b(qc.isInlineTarget,e);return e.on("NodeChange",function(r){md(e)&&(function(e,t,n){var r=j(t.select('*[data-mce-selected="inline-boundary"]'),e),i=j(n,e);H(J(r,i),b(gd,!1)),H(J(i,r),b(gd,!0))}(n,e.dom,r.parents),function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=Ts.fromRangeStart(e.selection.getRng());Ts.isTextPosition(n)&&!1===qc.isAtZwsp(n)&&(pd(e,tu.removeAndReposition(t.get(),n)),t.set(null))}}(e,t),function(e,t,n,r){if(t.selection.isCollapsed()){var i=j(r,e);H(i,function(r){var i=Ts.fromRangeStart(t.selection.getRng());ud(e,t.getBody(),i).bind(function(e){return vd(t,n,e)})})}}(n,e,t,r.parents))}),t},setCaretPosition:pd},wd=function(e,t){return function(n){return Uf(t,n).map(function(t){return yd.setCaretPosition(e,t),!0}).getOr(!1)}},xd=function(e,t,n,r){var i=e.getBody(),o=b(qc.isInlineTarget,e);e.undoManager.ignore(function(){e.selection.setRng(function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n}(n,r)),e.execCommand("Delete"),ud(o,i,Ts.fromRangeStart(e.selection.getRng())).map(fd).map(wd(e,t))}),e.nodeChanged()},Cd=function(e,t,n){return!(!e.selection.isCollapsed()||!function(e){return!1!==e.settings.inline_boundaries}(e))&&function(e,t,n,r){var i=function(e,t){return ul(t,e)||e}(e.getBody(),r.container()),o=b(qc.isInlineTarget,e),a=ud(o,i,r);return a.bind(function(e){return n?e.fold(g(k.some(fd(e))),k.none,g(k.some(cd(e))),k.none):e.fold(k.none,g(k.some(cd(e))),k.none,g(k.some(fd(e))))}).map(wd(e,t)).getOrThunk(function(){var s=Rl.navigate(n,i,r),u=s.bind(function(e){return ud(o,i,e)});return a.isSome()&&u.isSome()?qc.findRootInline(o,i,r).map(function(t){return!!function(e){return is([Rl.firstPositionIn(e),Rl.lastPositionIn(e)],function(t,n){var r=qc.normalizePosition(!0,t),i=qc.normalizePosition(!1,n);return Rl.nextPosition(e,r).map(function(e){return e.isEqual(i)}).getOr(!0)}).getOr(!0)}(t)&&(Rf(e,n,Vn.fromDom(t)),!0)}).getOr(!1):u.bind(function(i){return s.map(function(i){return n?xd(e,t,r,i):xd(e,t,i,r),!0})}).getOr(!1)})}(e,t,n,Ts.fromRangeStart(e.selection.getRng()))},_d=Cr("start","end"),Sd=Cr("rng","table","cells"),Td=yf([{removeTable:["element"]},{emptyCells:["cells"]}]),kd=function(e,t){return ia(Vn.fromDom(e),"td,th",t)},Ed=function(e,t){return na(e,"table",t)},Nd=function(e){return!1===Or.eq(e.start(),e.end())},Ad=function(e,t){return Ed(e.start(),t).bind(function(n){return Ed(e.end(),t).bind(function(e){return Or.eq(n,e)?k.some(n):k.none()})})},Rd=function(e){return Jo(e,"td,th")},Od=function(e,t){return Ad(t,e).isSome()},Dd=function(e,t){var n=function(e){return b(Or.eq,e)}(e);return function(e,t){var n=kd(e.startContainer,t),r=kd(e.endContainer,t);return is([n,r],_d).filter(Nd).filter(function(e){return Od(t,e)}).orThunk(function(){return function(e,t){var n=kd(t.startContainer,e),r=kd(t.endContainer,e);return t.collapsed?k.none():is([n,r],_d).fold(function(){return n.fold(function(){return r.bind(function(t){return Ed(t,e).bind(function(e){return G(Rd(e)).map(function(e){return _d(e,t)})})})},function(t){return Ed(t,e).bind(function(e){return Q(Rd(e)).map(function(e){return _d(t,e)})})})},function(t){return Od(e,t)?k.none():function(e,t){return Ed(e.start(),t).bind(function(t){return Q(Rd(t)).map(function(t){return _d(e.start(),t)})})}(t,e)})}(t,e)})}(t,n).bind(function(e){return function(e,t){return Ad(e,n).map(function(t){return Sd(e,t,Rd(t))})}(e)})},Pd=function(e,t){return $(e,function(e){return Or.eq(e,t)})},Id=function(e){return function(e){return is([Pd(e.cells(),e.rng().start()),Pd(e.cells(),e.rng().end())],function(t,n){return e.cells().slice(t,n+1)})}(e).map(function(t){var n=e.cells();return t.length===n.length?Td.removeTable(e.table()):Td.emptyCells(t)})},Bd=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Md=Bd,Ld=function(e){return j(function(e){return X(e,function(e){var t=es(e);return t?[Vn.fromDom(t)]:[]})}(e),Ci)},Fd=function(e,t){var n=function(e){return Jo(e,"td[data-mce-selected],th[data-mce-selected]")}(t),r=Ld(e);return n.length>0?n:r},Hd=Fd,zd=function(e){return Fd(Md(e.selection.getSel()),Vn.fromDom(e.getBody()))},jd=function(e,t){return H(t,Sc),e.selection.setCursorLocation(t[0].dom(),0),!0},Wd=function(e,t){return Rf(e,!1,t),!0},Ud=function(e,t,n,r){return qd(t,r).fold(function(){return function(e,t,n){return function(e,t){return Dd(e,t).bind(Id)}(t,n).map(function(t){return t.fold(b(Wd,e),b(jd,e))})}(e,t,n)},function(t){return function(e,t){return Vd(e,t)}(e,t)}).getOr(!1)},$d=function(e,t){return U(sf(t,e),Ci)},qd=function(e,t){return U(sf(t,e),function(e){return"caption"===er.name(e)})},Vd=function(e,t){return Sc(t),e.selection.setCursorLocation(t.dom(),0),k.some(!0)},Xd=function(e,t,n){var r=Vn.fromDom(e.getBody());return qd(r,n).fold(function(){return function(e,t,n,r){var i=Ts.fromRangeStart(e.selection.getRng());return $d(n,r).bind(function(r){return Zc(r)?Vd(e,r):function(e,t,n,r,i){return Rl.navigate(n,e.getBody(),i).bind(function(e){return $d(t,Vn.fromDom(e.getNode())).map(function(e){return!1===Or.eq(e,r)})})}(e,n,t,r,i)})}(e,t,r,n)},function(n){return function(e,t,n,r){var i=Ts.fromRangeStart(e.selection.getRng());return Zc(r)?Vd(e,r):function(e,t,n,r,i){return Rl.navigate(n,e.getBody(),i).bind(function(o){return function(e,t,n,r){return Rl.firstPositionIn(e.dom()).bind(function(i){return Rl.lastPositionIn(e.dom()).map(function(e){return t?n.isEqual(i)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(i)})}).getOr(!0)}(r,n,i,o)?function(e,t){return Vd(e,r)}(e):function(e,t,n){return qd(e,Vn.fromDom(o.getNode())).map(function(e){return!1===Or.eq(e,t)})}(t,r)}).or(k.some(!0))}(e,n,t,r,i)}(e,t,r,n)}).getOr(!1)},Yd=function(e,t){var n=Vn.fromDom(e.selection.getStart(!0)),r=zd(e);return e.selection.isCollapsed()&&0===r.length?Xd(e,t,n):function(e,t){var n=Vn.fromDom(e.getBody()),r=e.selection.getRng(),i=zd(e);return 0!==i.length?jd(e,i):Ud(e,n,r,t)}(e,n)},Kd=function(e,t){e.getDoc().execCommand(t,!1,null)},Jd={deleteCommand:function(e){Df(e,!1)||Cd(e,!1)||mf(e,!1)||Yd(e)||bf(e)||(Kd(e,"Delete"),Xc(e))},forwardDeleteCommand:function(e){Df(e,!0)||Cd(e,!0)||mf(e,!0)||Yd(e)||bf(e)||Kd(e,"ForwardDelete")}},Gd=function(e){return function(t,n){return k.from(n).map(Vn.fromDom).filter(er.isElement).bind(function(n){return function(e,t,n){var r=function(t){return xr(t,e)};return ea(Vn.fromDom(n),function(e){return r(e).isSome()},function(e){return Or.eq(Vn.fromDom(t),e)}).bind(r)}(e,t,n.dom()).or(function(e,t){return k.from(bo.DOM.getStyle(t,e,!0))}(e,n.dom()))}).getOr("")}},Qd={getFontSize:Gd("font-size"),getFontFamily:m(function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},Gd("font-family")),toPt:function(e,t){return/[0-9.]+px$/.test(e)?function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(72*parseInt(e,10)/96,t||0)+"pt":e}},Zd=function(e){return Rl.firstPositionIn(e.getBody()).map(function(e){var t=e.container();return Ii.isText(t)?t.parentNode:t})},eh=function(e){return k.from(e.selection.getRng()).bind(function(t){return function(e,t){return e.startContainer===t&&0===e.startOffset}(t,e.getBody())?k.none():k.from(e.selection.getStart(!0))})},th=function(e,t){if(/^[0-9\.]+$/.test(t)){var n=parseInt(t,10);if(n>=1&&n<=7){var r=Mu.getFontStyleValues(e),i=Mu.getFontSizeClasses(e);return i?i[n-1]||t:r[n-1]||t}return t}return t},nh=function(e,t){e.formatter.toggle("fontname",{value:th(e,t)}),e.nodeChanged()},rh=function(e){return eh(e).fold(function(){return Zd(e).map(function(t){return Qd.getFontFamily(e.getBody(),t)}).getOr("")},function(t){return Qd.getFontFamily(e.getBody(),t)})},ih=function(e,t){e.formatter.toggle("fontsize",{value:th(e,t)}),e.nodeChanged()},oh=function(e){return eh(e).fold(function(){return Zd(e).map(function(t){return Qd.getFontSize(e.getBody(),t)}).getOr("")},function(t){return Qd.getFontSize(e.getBody(),t)})},ah={isEq:function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}},sh=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},uh=function(e,t,n){return sh(e,t,function(e){return e.nodeName===n})},lh=function(e){return e&&"TABLE"===e.nodeName},ch=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},fh=function(e,t){return Aa(e)&&!1===sh(e,t,Vs)},dh=function(e,t,n){for(var r=new ui(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(Ii.isBr(t))return!0},hh=function(e,t,n,r,i){var o,a,s,u,l=e.getRoot(),c=e.schema.getNonEmptyElements();if(s=e.getParent(i.parentNode,e.isBlock)||l,r&&Ii.isBr(i)&&t&&e.isEmpty(s))return k.some(_s(i.parentNode,e.nodeIndex(i)));for(o=new ui(i,s);u=o[r?"prev":"next"]();){if("false"===e.getContentEditableParent(u)||fh(u,l))return k.none();if(Ii.isText(u)&&u.nodeValue.length>0)return!1===uh(u,l,"A")?k.some(_s(u,r?u.nodeValue.length:0)):k.none();if(e.isBlock(u)||c[u.nodeName.toLowerCase()])return k.none();a=u}return n&&a?k.some(_s(a,0)):k.none()},ph=function(e,t,n,r){var i,o,a,s,u,l,c,f=e.getRoot(),d=!1;if(i=r[(n?"start":"end")+"Container"],o=r[(n?"start":"end")+"Offset"],c=Ii.isElement(i)&&o===i.childNodes.length,u=e.schema.getNonEmptyElements(),l=n,Aa(i))return k.none();if(Ii.isElement(i)&&o>i.childNodes.length-1&&(l=!1),Ii.isDocument(i)&&(i=f,o=0),i===f){if(l&&(s=i.childNodes[o>0?o-1:0])){if(Aa(s))return k.none();if(u[s.nodeName]||lh(s))return k.none()}if(i.hasChildNodes()){if(o=Math.min(!l&&o>0?o-1:o,i.childNodes.length-1),i=i.childNodes[o],o=Ii.isText(i)&&c?i.data.length:0,!t&&i===f.lastChild&&lh(i))return k.none();if(function(e,t){for(;t&&t!==e;){if(Ii.isContentEditableFalse(t))return!0;t=t.parentNode}return!1}(f,i)||Aa(i))return k.none();if(i.hasChildNodes()&&!1===lh(i)){s=i,a=new ui(i,f);do{if(Ii.isContentEditableFalse(s)||Aa(s)){d=!1;break}if(Ii.isText(s)&&s.nodeValue.length>0){o=l?0:s.nodeValue.length,i=s,d=!0;break}if(u[s.nodeName.toLowerCase()]&&!ch(s)){o=e.nodeIndex(s),i=s.parentNode,l||o++,d=!0;break}}while(s=l?a.next():a.prev())}}}return t&&(Ii.isText(i)&&0===o&&hh(e,c,t,!0,i).each(function(e){i=e.container(),o=e.offset(),d=!0}),Ii.isElement(i)&&((s=i.childNodes[o])||(s=i.childNodes[o-1]),!s||!Ii.isBr(s)||function(e,t){return e.previousSibling&&"A"===e.previousSibling.nodeName}(s)||dh(e,s,!1)||dh(e,s,!0)||hh(e,c,t,!0,s).each(function(e){i=e.container(),o=e.offset(),d=!0}))),l&&!t&&Ii.isText(i)&&o===i.nodeValue.length&&hh(e,c,t,!1,i).each(function(e){i=e.container(),o=e.offset(),d=!0}),d?k.some(_s(i,o)):k.none()},mh={normalize:function(e,t){var n=t.collapsed,r=t.cloneRange(),i=_s.fromRangeStart(t);return ph(e,n,!0,r).each(function(e){n&&_s.isAbove(i,e)||r.setStart(e.container(),e.offset())}),n||ph(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),ah.isEq(t,r)?k.none():k.some(r)}},gh=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},vh=function(e,t,n,r){var i=e.createRng();r?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),t.setRng(i)},bh=function(e,t){var n=Vn.fromTag("br");No(Vn.fromDom(t),n),e.undoManager.add()},yh=function(e,t){wh(e.getBody(),t)||Ao(Vn.fromDom(t),Vn.fromTag("br"));var n=Vn.fromTag("br");Ao(Vn.fromDom(t),n),gh(e.dom,e.selection,n.dom()),vh(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},wh=function(e,t){return n=Ts.after(t),!!Ii.isBr(n.getNode())||Rl.nextPosition(e,Ts.after(t)).map(function(e){return Ii.isBr(e.getNode())}).getOr(!1);var n},xh=function(e){return e&&"A"===e.nodeName&&"href"in e},Ch=function(e){return e.fold(g(!1),xh,xh,g(!1))},_h=function(e,t){t.fold(p,b(bh,e),b(yh,e),p)},Sh={insert:function(e,t){var n=function(e){var t=b(qc.isInlineTarget,e),n=Ts.fromRangeStart(e.selection.getRng());return ud(t,e.getBody(),n).filter(Ch)}(e);n.isSome()?n.each(b(_h,e)):function(e,t){var n,r,i=e.selection,o=e.dom,a=i.getRng();mh.normalize(o,a).each(function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)});var s=a.startOffset,u=a.startContainer;if(1===u.nodeType&&u.hasChildNodes()){var l=s>u.childNodes.length-1;u=u.childNodes[Math.min(s,u.childNodes.length-1)]||u,s=l&&3===u.nodeType?u.nodeValue.length:0}var c=o.getParent(u,o.isBlock),f=c?o.getParent(c.parentNode,o.isBlock):null,d=f?f.nodeName.toUpperCase():"",h=t&&t.ctrlKey;"LI"!==d||h||(c=f),u&&3===u.nodeType&&s>=u.nodeValue.length&&(function(e,t,n){for(var r,i=new ui(u,c),o=e.getNonEmptyElements();r=i.next();)if(o[r.nodeName.toLowerCase()]||r.length>0)return!0}(e.schema)||(n=o.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0)),n=o.create("br"),a.insertNode(n),gh(o,i,n),vh(o,i,n,r),e.undoManager.add()}(e,t)}},Th=yf([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),kh=(Th.before,Th.on,Th.after,function(e){return e.fold(v,v,v)}),Eh=yf([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Nh=Cr("start","soffset","finish","foffset"),Ah={domRange:Eh.domRange,relative:Eh.relative,exact:Eh.exact,exactFromRange:function(e){return Eh.exact(e.start(),e.soffset(),e.finish(),e.foffset())},range:Nh,getWin:function(e){var t=function(e){return e.match({domRange:function(e){return Vn.fromDom(e.startContainer)},relative:function(e,t){return kh(e)},exact:function(e,t,n,r){return e}})}(e);return Fr(t)}},Rh=$n.detect().browser,Oh=function(e,t){var n=er.isText(t)?hc(t).length:Vr(t).length+1;return e>n?n:e<0?0:e},Dh=function(e){return Ah.range(e.start(),Oh(e.soffset(),e.start()),e.finish(),Oh(e.foffset(),e.finish()))},Ph=function(e,t){return Or.contains(e,t)||Or.eq(e,t)},Ih=function(e){return function(t){return Ph(e,t.start())&&Ph(e,t.finish())}},Bh=function(e){return!0===e.inline||Rh.isIE()},Mh=function(e){return Ah.range(Vn.fromDom(e.startContainer),e.startOffset,Vn.fromDom(e.endContainer),e.endOffset)},Lh=function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?k.from(t.getRangeAt(0)):k.none()).map(Mh)},Fh=function(e){var t=Fr(e);return Lh(t.dom()).filter(Ih(e))},Hh=function(e,t){return k.from(t).filter(Ih(e)).map(Dh)},zh=function(e){var t=document.createRange();try{return t.setStart(e.start().dom(),e.soffset()),t.setEnd(e.finish().dom(),e.foffset()),k.some(t)}catch(e){return k.none()}},jh=function(e){return(e.bookmark?e.bookmark:k.none()).bind(b(Hh,Vn.fromDom(e.getBody()))).bind(zh)},Wh={store:function(e){var t=Bh(e)?Fh(Vn.fromDom(e.getBody())):k.none();e.bookmark=t.isSome()?t:e.bookmark},storeNative:function(e,t){var n=Vn.fromDom(e.getBody()),r=(Bh(e)?k.from(t):k.none()).map(Mh).filter(Ih(n));e.bookmark=r.isSome()?r:e.bookmark},readRange:Lh,restore:function(e){jh(e).each(function(t){e.selection.setRng(t)})},getRng:jh,getBookmark:Fh,validate:Hh},Uh=function(e,t){var n=e.settings,r=e.dom,i=e.selection,o=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],s=parseInt(n.indentation,10),u=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||(n.forced_root_block||r.getParent(i.getNode(),r.isBlock)||o.apply("div"),H(i.getSelectedBlocks(),function(e){return function(e,t,n,r,i,o){if("false"!==e.getContentEditable(o)&&"LI"!==o.nodeName){var a=n?"margin":"padding";if(a="TABLE"===o.nodeName?"margin":a,a+="rtl"===e.getStyle(o,"direction",!0)?"Right":"Left","outdent"===t){var s=Math.max(0,parseInt(o.style[a]||0,10)-r);e.setStyle(o,a,s?s+i:"")}else s=parseInt(o.style[a]||0,10)+r+i,e.setStyle(o,a,s)}}(r,t,u,s,a,e)}))},$h=Vt.each,qh=Vt.extend,Vh=Vt.map,Xh=Vt.inArray;function Yh(e){var t,n,r,i,o={state:{},exec:{},value:{}},a=e.settings;e.on("PreInit",function(){t=e.dom,n=e.selection,a=e.settings,r=e.formatter});var s=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=o.state[t])return n(t);try{return e.getDoc().queryCommandState(t)}catch(e){}return!1}},u=function(e,t){t=t||"exec",$h(e,function(e,n){$h(n.toLowerCase().split(","),function(n){o[t][n]=e})})},l=function(t,n,r){t=t.toLowerCase(),o.value[t]=function(){return n.call(r||e)}};qh(this,{execCommand:function(t,n,r,i){var a,s,u=!1;if(!e.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||i&&i.skip_focus?Wh.restore(e):e.focus(),(i=e.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;if(s=t.toLowerCase(),a=o.exec[s])return a(s,n,r),e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if($h(e.plugins,function(i){if(i.execCommand&&i.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),u=!0,!1}),u)return u;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{u=e.getDoc().execCommand(t,n,r)}catch(e){}return!!u&&(e.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},queryCommandState:s,queryCommandValue:function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=o.value[t])return n(t);try{return e.getDoc().queryCommandValue(t)}catch(e){}}},queryCommandSupported:function(t){if(t=t.toLowerCase(),o.exec[t])return!0;try{return e.getDoc().queryCommandSupported(t)}catch(e){}return!1},addCommands:u,addCommand:function(t,n,r){t=t.toLowerCase(),o.exec[t]=function(t,i,o,a){return n.call(r||e,i,o,a)}},addQueryStateHandler:function(t,n,r){t=t.toLowerCase(),o.state[t]=function(){return n.call(r||e)}},addQueryValueHandler:l,hasCustomCommand:function(e){return e=e.toLowerCase(),!!o.exec[e]}});var c=function(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=null),e.getDoc().execCommand(t,n,r)},f=function(e){return r.match(e)},d=function(t,n){r.toggle(t,n?{value:n}:void 0),e.nodeChanged()},h=function(e){i=n.getBookmark(e)},p=function(){n.moveToBookmark(i)};u({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(t){var n,r=e.getDoc();try{c(t)}catch(e){n=!0}if("paste"!==t||r.queryCommandEnabled(t)||(n=!0),n||!r.queryCommandSupported(t)){var i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");ke.mac&&(i=i.replace(/Ctrl\+/g,"â+")),e.notificationManager.open({text:i,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else r.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),$h("left,center,right,justify".split(","),function(e){t!==e&&r.remove("align"+e)}),"none"!==t&&d("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var r,i;c(e),(r=t.getParent(n.getNode(),"ol,ul"))&&(i=r.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)&&(h(),t.split(i,r),p()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){d(e)},"ForeColor,HiliteColor":function(e,t,n){d(e,n)},FontName:function(t,n,r){nh(e,r)},FontSize:function(t,n,r){ih(e,r)},RemoveFormat:function(e){r.remove(e)},mceBlockQuote:function(){d("blockquote")},FormatBlock:function(e,t,n){return d(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent()),n.moveToBookmark(t)},mceRemoveNode:function(t,r,i){var o=i||n.getNode();o!==e.getBody()&&(h(),e.dom.remove(o,!0),p())},mceSelectNodeDepth:function(r,i,o){var a=0;t.getParent(n.getNode(),function(e){if(1===e.nodeType&&a++===o)return n.select(e),!1},e.getBody())},mceSelectNode:function(e,t,r){n.select(r)},mceInsertContent:function(t,n,r){Pc.insertAtCaret(e,r)},mceInsertRawHTML:function(t,r,i){n.setContent("tiny_mce_marker");var o=e.getContent();e.setContent(o.replace(/tiny_mce_marker/g,function(){return i}))},mceToggleFormat:function(e,t,n){d(n)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){Uh(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,r,i){e.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,i,o){var a;"string"==typeof o&&(o={href:o}),a=t.getParent(n.getNode(),"a"),o.href=o.href.replace(" ","%20"),a&&o.href||r.remove("link"),o.href&&r.apply("link",o,a)},selectAll:function(){var e=t.getParent(n.getStart(),Ii.isContentEditableTrue);if(e){var r=t.createRng();r.selectNodeContents(e),n.setRng(r)}},delete:function(){Jd.deleteCommand(e)},forwardDelete:function(){Jd.forwardDeleteCommand(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){return Sh.insert(e,r),!0}});var m=function(e){return function(){var i=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks(),o=Vh(i,function(t){return!!r.matchNode(t,e)});return-1!==Xh(o,!0)}};u({JustifyLeft:m("alignleft"),JustifyCenter:m("aligncenter"),JustifyRight:m("alignright"),JustifyFull:m("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return f(e)},mceBlockQuote:function(){return f("blockquote")},Outdent:function(){var e;if(a.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0;if((e=t.getParent(n.getEnd(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0}return s("InsertUnorderedList")||s("InsertOrderedList")||!a.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var r=t.getParent(n.getNode(),"ul,ol");return r&&("insertunorderedlist"===e&&"UL"===r.tagName||"insertorderedlist"===e&&"OL"===r.tagName)}},"state"),u({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),l("FontName",function(){return rh(e)},this),l("FontSize",function(){return oh(e)},this)}var Kh=Vt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),Jh=function(e){var t,n,r=this,i={},o=function(){return!1},a=function(){return!0};t=(e=e||{}).scope||r,n=e.toggleEvent||o;var s=function(e,t,a,s){var u,l,c;if(!1===t&&(t=o),t)for(t={func:t},s&&Vt.extend(t,s),c=(l=e.toLowerCase().split(" ")).length;c--;)e=l[c],(u=i[e])||(u=i[e]=[],n(e,!0)),a?u.unshift(t):u.push(t);return r},u=function(e,t){var o,a,s,u,l;if(e)for(o=(u=e.toLowerCase().split(" ")).length;o--;){if(e=u[o],a=i[e],!e){for(s in i)n(s,!1),delete i[s];return r}if(a){if(t)for(l=a.length;l--;)a[l].func===t&&(a=a.slice(0,l).concat(a.slice(l+1)),i[e]=a);else a.length=0;a.length||(n(e,!1),delete i[e])}}else{for(e in i)n(e,!1);i={}}return r};r.fire=function(n,r){var s,l,c,f;if(n=n.toLowerCase(),(r=r||{}).type=n,r.target||(r.target=t),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=a},r.stopPropagation=function(){r.isPropagationStopped=a},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=a},r.isDefaultPrevented=o,r.isPropagationStopped=o,r.isImmediatePropagationStopped=o),e.beforeFire&&e.beforeFire(r),s=i[n])for(l=0,c=s.length;l<c;l++){if((f=s[l]).once&&u(n,f.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===f.func.call(t,r))return r.preventDefault(),r}return r},r.on=s,r.off=u,r.once=function(e,t,n){return s(e,t,n,{once:!0})},r.has=function(e){return e=e.toLowerCase(),!(!i[e]||0===i[e].length)}};Jh.isNative=function(e){return!!Kh[e.toLowerCase()]};var Gh,Qh=function(e){return e._eventDispatcher||(e._eventDispatcher=new Jh({scope:e,toggleEvent:function(t,n){Jh.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},Zh={fire:function(e,t,n){if(this.removed&&"remove"!==e)return t;if(t=Qh(this).fire(e,t,n),!1!==n&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},on:function(e,t,n){return Qh(this).on(e,t,n)},off:function(e,t){return Qh(this).off(e,t)},once:function(e,t){return Qh(this).once(e,t)},hasEventListeners:function(e){return Qh(this).has(e)}},ep=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},tp=function(e,t){!function(e,t,n){Ko(e,t)&&!1===n?Yo(e,t):n&&Xo(e,t)}(Vn.fromDom(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",ep(e,"StyleWithCSS",!1),ep(e,"enableInlineTableEditing",!1),ep(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},np=bo.DOM,rp=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=np.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},ip=function(e,t,n){!function(e){return!e.hidden&&!e.readonly}(e)?function(e){return!0===e.readonly}(e)&&n.preventDefault():e.fire(t,n)},op=function(e,t){var n,r;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=rp(e,t),e.settings.event_root){if(Gh||(Gh={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&Gh){for(t in Gh)e.dom.unbind(rp(e,t));Gh=null}})),Gh[t])return;r=function(n){for(var r=n.target,i=e.editorManager.get(),o=i.length;o--;){var a=i[o].getBody();(a===r||np.isChildOf(r,a))&&ip(i[o],t,n)}},Gh[t]=r,np.bind(n,t,r)}else r=function(n){ip(e,t,n)},np.bind(n,t,r),e.delegates[t]=r},ap={bindPendingEventDelegates:function(){var e=this;Vt.each(e._pendingNativeEvents,function(t){op(e,t)})},toggleNativeEvent:function(e,t){"focus"!==e&&"blur"!==e&&(t?this.initialized?op(this,e):this._pendingNativeEvents?this._pendingNativeEvents.push(e):this._pendingNativeEvents=[e]:this.initialized&&(this.dom.unbind(rp(this,e),e,this.delegates[e]),delete this.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this.getBody(),n=this.dom;if(this.delegates){for(e in this.delegates)this.dom.unbind(rp(this,e),e,this.delegates[e]);delete this.delegates}!this.inline&&t&&n&&(t.onload=null,n.unbind(this.getWin()),n.unbind(this.getDoc())),n&&(n.unbind(t),n.unbind(this.getContainer()))}},sp=ap=Vt.extend({},Zh,ap),up=Vt.each,lp=Vt.explode,cp={f9:120,f10:121,f11:122},fp=Vt.makeMap("alt,ctrl,shift,meta,access");function dp(e){var t={},n=[],r=function(e){var t,n,r={};for(n in up(lp(e,"+"),function(e){e in fp?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=cp[e]||e.toUpperCase().charCodeAt(0))}),t=[r.keyCode],fp)r[n]?t.push(n):r[n]=!1;return r.id=t.join(","),r.access&&(r.alt=!0,ke.mac?r.ctrl=!0:r.shift=!0),r.meta&&(ke.mac?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r},i=function(t,n,i,o){var a;return(a=Vt.map(lp(t,">"),r))[a.length-1]=Vt.extend(a[a.length-1],{func:i,scope:o||e}),Vt.extend(a[0],{desc:e.translate(n),subpatterns:a.slice(1)})},o=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},a=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",function(e){!function(e){return e.altKey||e.ctrlKey||e.metaKey}(e)&&!function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}(e)||e.isDefaultPrevented()||(up(t,function(t){if(o(e,t))return n=t.subpatterns.slice(0),"keydown"===e.type&&a(t),!0}),o(e,n[0])&&(1===n.length&&"keydown"===e.type&&a(n[0]),n.shift()))}),this.add=function(n,r,o,a){var s;return s=o,"string"==typeof o?o=function(){e.execCommand(s,!1,null)}:Vt.isArray(s)&&(o=function(){e.execCommand(s[0],s[1],s[2])}),up(lp(Vt.trim(n.toLowerCase())),function(e){var n=i(e,r,o,a);t[n.id]=n}),!0},this.remove=function(e){var n=i(e);return!!t[n.id]&&(delete t[n.id],!0)}}var hp=function(e){var t=Lr(e).dom();return e.dom()===t.activeElement},pp=function(e){return function(e){var t=void 0!==e?e.dom():document;return k.from(t.activeElement).map(Vn.fromDom)}(Lr(e)).filter(function(t){return e.dom().contains(t.dom())})},mp=function(e,t){(function(e,t){return function(e){return e.collapsed?k.from(ts(e.startContainer,e.startOffset)).map(Vn.fromDom):k.none()}(t).bind(function(t){return xi(t)?k.some(t):!1===Or.contains(e,t)?k.some(e):k.none()})})(Vn.fromDom(e.getBody()),t).bind(function(e){return Rl.firstPositionIn(e.dom())}).fold(function(){e.selection.normalize()},function(t){return e.selection.setRng(t.toRange())})},gp=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},vp=function(e){return e.inline?function(e){var t,n=e.getBody();return n&&(t=Vn.fromDom(n),hp(t)||pp(t).isSome())}(e):function(e){return e.iframeElement&&hp(Vn.fromDom(e.iframeElement))}(e)},bp=function(e){return e.editorManager.setActive(e)},yp=vp,wp=function(e,t){return t.dom()[e]},xp=function(e,t){return parseInt(wr(t,e),10)},Cp=b(wp,"clientWidth"),_p=b(wp,"clientHeight"),Sp=b(xp,"margin-top"),Tp=b(xp,"margin-left"),kp={isXYInContentArea:function(e,t,n){var r=Vn.fromDom(e.getBody()),i=e.inline?r:Hr(r),o=function(e,t,n,r){var i=t.dom().getBoundingClientRect();return{x:n-(e?i.left+t.dom().clientLeft+Tp(t):0),y:r-(e?i.top+t.dom().clientTop+Sp(t):0)}}(e.inline,i,t,n);return function(e,t,n){var r=Cp(e),i=_p(e);return t>=0&&n>=0&&t<=r&&n<=i}(i,o.x,o.y)},isEditorAttachedToDom:function(e){var t;return(t=e.inline?e.getBody():e.getContentAreaContainer(),k.from(t).map(Vn.fromDom)).map(function(e){return Or.contains(Lr(e),e)}).getOr(!1)}};function Ep(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getNotificationManagerImpl?n.getNotificationManagerImpl():{open:t=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,reposition:t,getArgs:t}},r=function(){t.length>0&&n().reposition(t)},i=function(e){$(t,function(t){return t===e}).each(function(e){t.splice(e,1)})},o=function(o){if(!e.removed&&kp.isEditorAttachedToDom(e))return U(t,function(e){return t=n().getArgs(e),r=o,!(t.type!==r.type||t.text!==r.text||t.progressBar||t.timeout||r.progressBar||r.timeout);var t,r}).getOrThunk(function(){e.editorManager.setActive(e);var a=n().open(o,function(){i(a),r()});return function(e){t.push(e)}(a),r(),a})};return function(e){e.on("SkinLoaded",function(){var t=e.settings.service_message;t&&o({text:t,type:"warning",timeout:0,icon:""})}),e.on("ResizeEditor ResizeWindow",function(){Oe.requestAnimationFrame(r)}),e.on("remove",function(){H(t.slice(),function(e){n().close(e)})})}(e),{open:o,close:function(){k.from(t[0]).each(function(e){n().close(e),i(e),r()})},getNotifications:function(){return t}}}function Np(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getWindowManagerImpl?n.getWindowManagerImpl():{open:t=function(){throw new Error("Theme did not provide a WindowManager implementation.")},alert:t,confirm:t,close:t,getParams:t,setParams:t}},r=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},i=function(n){t.push(n),function(t){e.fire("OpenWindow",{win:t})}(n)},o=function(n){$(t,function(e){return e===n}).each(function(r){t.splice(r,1),function(t){e.fire("CloseWindow",{win:t})}(n),0===t.length&&e.focus()})},a=function(){return k.from(t[t.length-1])};return e.on("remove",function(){H(t.slice(0),function(e){n().close(e)})}),{windows:t,open:function(t,r){e.editorManager.setActive(e),Wh.store(e);var a=n().open(t,r,o);return i(a),a},alert:function(e,t,a){var s=n().alert(e,r(a||this,t),o);i(s)},confirm:function(e,t,a){var s=n().confirm(e,r(a||this,t),o);i(s)},close:function(){a().each(function(e){n().close(e),o(e)})},getParams:function(){return a().map(n().getParams).getOr(null)},setParams:function(e){a().each(function(t){n().setParams(t,e)})},getWindows:function(){return t}}}var Ap=To.PluginManager,Rp=function(e,t){e.notificationManager.open({type:"error",text:t})},Op=function(e,t){e._skinLoaded?Rp(e,t):e.on("SkinLoaded",function(){Rp(e,t)})},Dp={pluginLoadError:function(e,t){Op(e,function(e,t){var n=function(e,t){for(var n in Ap.urls)if(Ap.urls[n]+"/plugin"+t+".js"===e)return n;return null}(t,e.suffix);return n?"Failed to load plugin: "+n+" from url "+t:"Failed to load plugin url: "+t}(e,t))},uploadError:function(e,t){Op(e,"Failed to upload image: "+t)},displayError:Op,initError:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=window.console;r&&(r.error?r.error.apply(r,arguments):r.log.apply(r,arguments))}},Pp=To.PluginManager,Ip=To.ThemeManager;function Bp(){return new(te.getOrDie("XMLHttpRequest"))}var Mp=function(e){var t,n,r=decodeURIComponent(e).split(",");return(n=/data:([^;]+)/.exec(r[0]))&&(t=n[1]),{type:t,data:r[1]}},Lp=function(e){return new Ee(function(t){var n,r,i,o=Mp(e);try{n=function(e){return te.getOrDie("atob")(e)}(o.data)}catch(e){return void t(new Blob([]))}for(r=function(e){return new(te.getOrDie("Uint8Array"))(e)}(n.length),i=0;i<r.length;i++)r[i]=n.charCodeAt(i);t(new Blob([r],{type:o.type}))})},Fp=function(e){return 0===e.indexOf("blob:")?function(e){return new Ee(function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var i=Bp();i.open("GET",e,!0),i.responseType="blob",i.onload=function(){200===this.status?t(this.response):r()},i.onerror=r,i.send()}catch(e){r()}})}(e):0===e.indexOf("data:")?Lp(e):null},Hp=Mp,zp=0,jp=function(e){return(e||"blobid")+zp++},Wp=function(e,t,n,r){var i,o;0!==t.src.indexOf("blob:")?(i=Hp(t.src).data,(o=e.findFirst(function(e){return e.base64()===i}))?n({image:t,blobInfo:o}):Fp(t.src).then(function(r){o=e.create(jp(),r,i),e.add(o),n({image:t,blobInfo:o})},function(e){r(e)})):(o=e.getByUri(t.src))?n({image:t,blobInfo:o}):Fp(t.src).then(function(r){(function(e){return new Ee(function(t){var n=new(te.getOrDie("FileReader"));n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})})(r).then(function(a){i=Hp(a).data,o=e.create(jp(),r,i),e.add(o),n({image:t,blobInfo:o})})},function(e){r(e)})},Up=function(e){return e?e.getElementsByTagName("img"):[]},$p=0,qp={uuid:function(e){return e+$p+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+t()+t()+t());var t}};function Vp(e){var t,n,r,i,o,a,s,u,l,c,f=(t=[],n=Ca.constant,r=function(e){var t,r,i;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return t=e.id||qp.uuid("blobid"),r=e.name||t,{id:n(t),name:n(r),filename:n(r+"."+(i=e.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[i.toLowerCase()]||"dat")),blob:n(e.blob),base64:n(e.base64),blobUri:n(e.blobUri||re.createObjectURL(e.blob)),uri:n(e.uri)}},{create:function(e,t,n,i){if(N(e))return r({id:e,name:i,blob:t,base64:n});if(A(e))return r(e);throw new Error("Unknown input type")},add:function(e){i(e.id())||t.push(e)},get:i=function(e){return o(function(t){return t.id()===e})},getByUri:function(e){return o(function(t){return t.blobUri()===e})},findFirst:o=function(e){return jt.filter(t,e)[0]},removeByUri:function(e){t=jt.filter(t,function(t){return t.blobUri()!==e||(re.revokeObjectURL(t.blobUri()),!1)})},destroy:function(){jt.each(t,function(e){re.revokeObjectURL(e.blobUri())}),t=[]}}),d=(u={},l=function(e,t){return{status:e,resultUri:t}},{hasBlobUri:c=function(e){return e in u},getResultUri:function(e){var t=u[e];return t?t.resultUri:null},isPending:function(e){return!!c(e)&&1===u[e].status},isUploaded:function(e){return!!c(e)&&2===u[e].status},markPending:function(e){u[e]=l(1,null)},markUploaded:function(e,t){u[e]=l(2,t)},removeFailed:function(e){delete u[e]},destroy:function(){u={}}}),h=[],p=function(t){return function(n){return e.selection?t(n):[]}},m=function(e,t,n){var r=0;do{-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1)}while(-1!==r);return e},g=function(e,t,n){return e=m(e,'src="'+t+'"','src="'+n+'"'),m(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},v=function(t,n){H(e.undoManager.data,function(e){"fragmented"===e.type?e.fragments=F(e.fragments,function(e){return g(e,t,n)}):e.content=g(e.content,t,n)})},b=function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},y=function(t){return a||(a=function(e,t){var n={},r=function(e,n,r,i){var o,a;(o=Bp()).open("POST",t.url),o.withCredentials=t.credentials,o.upload.onprogress=function(e){i(e.loaded/e.total*100)},o.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){var e,i,a;o.status<200||o.status>=300?r("HTTP Error: "+o.status):(e=JSON.parse(o.responseText))&&"string"==typeof e.location?n((i=t.basePath,a=e.location,i?i.replace(/\/$/,"")+"/"+a.replace(/^\//,""):a)):r("Invalid JSON: "+o.responseText)},(a=new FormData).append("file",e.blob(),e.filename()),o.send(a)},i=function(e,t){return{url:t,blobInfo:e,status:!0}},o=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},a=function(e,t){Vt.each(n[e],function(e){e(t)}),delete n[e]},s=function(r,s){return r=Vt.grep(r,function(t){return!e.isUploaded(t.blobUri())}),Ee.all(Vt.map(r,function(r){return e.isPending(r.blobUri())?function(e){var t=r.blobUri();return new Ee(function(e){n[t]=n[t]||[],n[t].push(e)})}():function(t,n,r){return e.markPending(t.blobUri()),new Ee(function(s){var u;try{var l=function(){u&&u.close()};n(t,function(n){l(),e.markUploaded(t.blobUri(),n),a(t.blobUri(),i(t,n)),s(i(t,n))},function(n){l(),e.removeFailed(t.blobUri()),a(t.blobUri(),o(t,n)),s(o(t,n))},function(e){e<0||e>100||(u||(u=r()),u.progressBar.value(e))})}catch(e){s(o(t,e.message))}})}(r,t.handler,s)}))};return!1===P(t.handler)&&(t.handler=r),{upload:function(e,n){return t.url||t.handler!==r?s(e,n):new Ee(function(e){e([])})}}}(d,{url:Mu.getImageUploadUrl(e),basePath:Mu.getImageUploadBasePath(e),credentials:Mu.getImagesUploadCredentials(e),handler:Mu.getImagesUploadHandler(e)})),C().then(p(function(n){var r;return r=F(n,function(e){return e.blobInfo}),a.upload(r,b).then(p(function(r){var i=F(r,function(t,r){var i=n[r].image;return t.status&&Mu.shouldReplaceBlobUris(e)?function(t,n){f.removeByUri(t.src),v(t.src,n),e.$(t).attr({src:Mu.shouldReuseFileName(e)?n+"?"+(new Date).getTime():n,"data-mce-src":e.convertURL(n,"src")})}(i,t.url):t.error&&Dp.uploadError(e,t.error),{element:i,status:t.status}});return t&&t(i),i}))}))},w=function(t){if(Mu.isAutomaticUploadsEnabled(e))return y(t)},x=function(t){return!1!==Y(h,function(e){return e(t)})&&(0!==t.getAttribute("src").indexOf("data:")||Mu.getImagesDataImgFilter(e)(t))},C=function(){return s||(s=function(e,t){var n={};return{findAll:function(r,i){var o;i||(i=Ca.constant(!0)),o=jt.filter(Up(r),function(t){var n=t.src;return!!ke.fileApi&&!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!n||n===ke.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n)&&i(t):0===n.indexOf("data:")&&i(t))});var a=jt.map(o,function(e){if(n[e.src])return new Ee(function(t){n[e.src].then(function(n){if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})})});var r=new Ee(function(n,r){Wp(t,e,n,r)}).then(function(e){return delete n[e.image.src],e}).catch(function(t){return delete n[e.src],t});return n[e.src]=r,r});return Ee.all(a)}}}(d,f)),s.findAll(e.getBody(),x).then(p(function(t){return t=j(t,function(t){return"string"!=typeof t||(Dp.displayError(e,t),!1)}),H(t,function(e){v(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))},_=function(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var r=d.getResultUri(n);if(r)return'src="'+r+'"';var i=f.getByUri(n);return i||(i=W(e.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':t})};return e.on("setContent",function(){Mu.isAutomaticUploadsEnabled(e)?w():C()}),e.on("RawSaveContent",function(e){e.content=_(e.content)}),e.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=_(e.content))}),e.on("PostRender",function(){e.parser.addNodeFilter("img",function(e){H(e,function(e){var t=e.attr("src");if(!f.getByUri(t)){var n=d.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:f,addFilter:function(e){h.push(e)},uploadImages:y,uploadImagesAuto:w,scanForImages:C,destroy:function(){f.destroy(),d.destroy(),s=a=null}}}var Xp=function(e,t){return e.hasOwnProperty(t.nodeName)},Yp=function(e,t){return!!Ii.isText(t)||!!Ii.isElement(t)&&!Xp(e,t)&&!Ll.isBookmarkNode(t)},Kp=function(e,t){if(Ii.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||Xp(e,t.nextSibling)))return!0}return!1},Jp=function(e){var t,n,r,i,o,a,s,u,l,c,f,d=e.settings,h=e.dom,p=e.selection,m=e.schema,g=m.getBlockElements(),v=p.getStart(),b=e.getBody();if(f=d.forced_root_block,v&&Ii.isElement(v)&&f&&(c=b.nodeName.toLowerCase(),m.isValidChild(c,f.toLowerCase())&&!function(e,t,n){return L(af(Vn.fromDom(v),Vn.fromDom(t)),function(t){return Xp(e,t.dom())})}(g,b))){for(n=(t=p.getRng()).startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,l=yp(e),v=b.firstChild;v;)if(Yp(g,v)){if(Kp(g,v)){s=v,v=v.nextSibling,h.remove(s);continue}a||(a=h.create(f,e.settings.forced_root_block_attrs),v.parentNode.insertBefore(a,v),u=!0),s=v,v=v.nextSibling,a.appendChild(s)}else a=null,v=v.nextSibling;u&&l&&(t.setStart(n,r),t.setEnd(i,o),p.setRng(t),e.nodeChanged())}},Gp=function(e){return Yr(e).fold(g([e]),function(t){return[e].concat(Gp(t))})},Qp=function(e){return Kr(e).fold(g([e]),function(t){return"br"===er.name(t)?Wr(t).map(function(t){return[e].concat(Qp(t))}).getOr([]):[e].concat(Qp(t))})},Zp=function(e,t,n,r){var i=n,o=new ui(n,i),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==Vt.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(ke.ie&&ke.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?o.next():o.prev());"BODY"===i.nodeName&&(r?t.setStart(i,0):t.setEnd(i,i.childNodes.length))},em=function(e){var t=e.selection.getSel();return t&&t.rangeCount>0};var tm,nm=function(e){var t,n,r,i;return i=e.getBoundingClientRect(),n=(t=e.ownerDocument).documentElement,r=t.defaultView,{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}},rm=Ii.isContentEditableFalse,im=Ii.isContentEditableTrue,om=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},am=function(e){e.dragging=!1,e.element=null,om(e.ghost)},sm=function(e){var t,n,r,i,o,a,s={};t=bo.DOM,a=document,n=function(e,t){return function(n){if(0===n.button){var r=jt.find(t.dom.getParents(n.target),Ca.or(rm,im));if(s=t.getBody(),rm(u=r)&&u!==s){var i=t.dom.getPos(r),o=t.getBody(),a=t.getDoc().documentElement;e.element=r,e.screenX=n.screenX,e.screenY=n.screenY,e.maxX=(t.inline?o.scrollWidth:a.offsetWidth)-2,e.maxY=(t.inline?o.scrollHeight:a.offsetHeight)-2,e.relX=n.pageX-i.x,e.relY=n.pageY-i.y,e.width=r.offsetWidth,e.height=r.offsetHeight,e.ghost=function(e,t,n,r){var i=t.cloneNode(!0);e.dom.setStyles(i,{width:n,height:r}),e.dom.setAttrib(i,"data-mce-selected",null);var o=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(o,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(i,{margin:0,boxSizing:"border-box"}),o.appendChild(i),o}(t,r,e.width,e.height)}}var s,u}}(s,e),r=function(e,t){var n=Oe.throttle(function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)},0);return function(r){var i,o,a=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(function(e){return e.element}(e)&&!e.dragging&&a>10){if(t.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var s=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}}(e,function(e,t){return n=function(e){return e.inline?nm(e.getBody()):{left:0,top:0}}(e),r=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}}(e),{pageX:(i=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=nm(e.getContentAreaContainer()),r=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},i={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:i}(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}}(e,t)).left-n.left+r.left,pageY:i.top-n.top+r.top};var n,r,i}(t,r));i=e.ghost,o=t.getBody(),i.parentNode!==o&&o.appendChild(i),function(e,t,n,r,i,o){var a=0,s=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>i&&(a=t.pageX+n-i),t.pageY+r>o&&(s=t.pageY+r-o),e.style.width=n-a+"px",e.style.height=r-s+"px"}(e.ghost,s,e.width,e.height,e.maxX,e.maxY),n(r.clientX,r.clientY)}}}(s,e),i=function(e,t){return function(n){if(e.dragging&&function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!rm(t)}(t,3===(a=t.selection.getSel().getRangeAt(0).startContainer).nodeType?a.parentNode:a,e.element)){var r=((o=e.element.cloneNode(!0)).removeAttribute("data-mce-selected"),o),i=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});i.isDefaultPrevented()||(r=i.targetClone,t.undoManager.transact(function(){om(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()}))}var o,a;am(e)}}(s,e),o=function(e,t){return function(){e.dragging&&t.fire("dragend"),am(e)}}(s,e),e.on("mousedown",n),e.on("mousemove",r),e.on("mouseup",i),t.bind(a,"mousemove",r),t.bind(a,"mouseup",o),e.on("remove",function(){t.unbind(a,"mousemove",r),t.unbind(a,"mouseup",o)})},um=function(e){return jt.reduce(e,function(e,t){return e.concat(function(e){var t=function(t){return jt.map(t,function(t){return(t=Ka(t)).node=e,t})};if(Ii.isElement(e))return t(e.getClientRects());if(Ii.isText(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}}(t))},[])};!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(tm||(tm={}));var lm=function(e,t,n,r,i,o){var a,s,u=0,l=[],c=function(r){var o,a,c;for(c=um([r]),-1===e&&(c=c.reverse()),o=0;o<c.length;o++)if(a=c[o],!n(a,s)){if(l.length>0&&t(a,jt.last(l))&&u++,a.line=u,i(a))return!0;l.push(a)}};return(s=jt.last(o.getClientRects()))?(c(a=o.getNode()),function(e,t,n,r){for(;r=sl(r,e,Xa,t);)if(n(r))return}(e,r,c,a),l):l},cm=b(lm,tm.Up,Qa,Za),fm=b(lm,tm.Down,Za,Qa),dm=function(e){return function(t){return function(e,t){return t.line>e}(e,t)}},hm=function(e){return function(t){return function(e,t){return t.line===e}(e,t)}},pm=Ii.isContentEditableFalse,mm=sl,gm=function(e,t){return Math.abs(e.left-t)},vm=function(e,t){return Math.abs(e.right-t)},bm=function(e,t){return e>=t.left&&e<=t.right},ym=function(e,t){return jt.reduce(e,function(e,n){var r,i;return r=Math.min(gm(e,t),vm(e,t)),i=Math.min(gm(n,t),vm(n,t)),bm(t,n)?n:bm(t,e)?e:i===r&&pm(n.node)?n:i<r?n:e})},wm=function(e,t,n,r){for(;r=mm(r,e,Xa,t);)if(n(r))return},xm=function(e,t,n){return!n.collapsed&&W(n.getClientRects(),function(n,r){return n||function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}(r,e,t)},!1)},Cm={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return ke.mac?e.metaKey:e.ctrlKey&&!e.altKey}},_m=Ii.isContentEditableTrue,Sm=Ii.isContentEditableFalse,Tm=Cl,km=xl,Em=function(e,t){for(var n=e.getBody();t&&t!==n;){if(_m(t)||Sm(t))return t;t=t.parentNode}return null},Nm=function(e){var t,n,r=e.getBody(),i=Ku(e.getBody(),function(t){return e.dom.isBlock(t)},function(){return yp(e)}),o="sel-"+e.dom.uniqueId(),a=function(t){t&&e.selection.setRng(t)},s=function(){return e.selection.getRng()},u=function(t,n,r,o){return void 0===o&&(o=!0),e.fire("ShowCaret",{target:n,direction:t,before:r}).isDefaultPrevented()?null:(o&&e.selection.scrollIntoView(n,-1===t),i.show(r,n))},l=function(e,t){return t=gl(e,r,t),-1===e?Ts.fromRangeStart(t):Ts.fromRangeEnd(t)},c=function(e){return Aa(e)||Pa(e)||Ia(e)},f=function(e){return c(e.startContainer)||c(e.endContainer)},d=function(n,r){var i,a,s,c,d,h,m,g,v,b,y=e.$,w=e.dom;if(!n)return null;if(n.collapsed){if(!f(n))if(!1===r){if(g=l(-1,n),Ju(g.getNode(!0)))return u(-1,g.getNode(!0),!1,!1);if(Ju(g.getNode()))return u(-1,g.getNode(),!g.isAtEnd(),!1)}else{if(g=l(1,n),Ju(g.getNode()))return u(1,g.getNode(),!g.isAtEnd(),!1);if(Ju(g.getNode(!0)))return u(1,g.getNode(!0),!1,!1)}return null}return c=n.startContainer,d=n.startOffset,h=n.endOffset,3===c.nodeType&&0===d&&Sm(c.parentNode)&&(c=c.parentNode,d=w.nodeIndex(c),c=c.parentNode),1!==c.nodeType?null:(h===d+1&&(i=c.childNodes[d]),Sm(i)?(v=b=i.cloneNode(!0),(m=e.fire("ObjectSelected",{target:i,targetClone:v})).isDefaultPrevented()?null:(a=ra(Vn.fromDom(e.getBody()),"#"+o).fold(function(){return y([])},function(e){return y([e.dom()])}),v=m.targetClone,0===a.length&&(a=y('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",o)).appendTo(e.getBody()),n=e.dom.createRng(),v===b&&ke.ie?(a.empty().append('<p style="font-size: 0" data-mce-bogus="all">Â </p>').append(v),n.setStartAfter(a[0].firstChild.firstChild),n.setEndAfter(v)):(a.empty().append("Â ").append(v).append("Â "),n.setStart(a[0].firstChild,1),n.setEnd(a[0].lastChild,0)),a.css({top:w.getPos(i,e.getBody()).y}),a[0].focus(),(s=e.selection.getSel()).removeAllRanges(),s.addRange(n),H(Jo(Vn.fromDom(e.getBody()),"*[data-mce-selected]"),function(e){hr(e,"data-mce-selected")}),i.setAttribute("data-mce-selected","1"),t=i,p(),n)):null)},h=function(){t&&(t.removeAttribute("data-mce-selected"),ra(Vn.fromDom(e.getBody()),"#"+o).each(Io.remove),t=null),ra(Vn.fromDom(e.getBody()),"#"+o).each(Io.remove),t=null},p=function(){i.hide()};return ke.ceFalse&&(function(){e.on("mouseup",function(t){var n=s();n.collapsed&&kp.isXYInContentArea(e,t.clientX,t.clientY)&&a(au(e,n,!1))}),e.on("click",function(t){var n;(n=Em(e,t.target))&&(Sm(n)&&(t.preventDefault(),e.focus()),_m(n)&&e.dom.isChildOf(n,e.selection.getNode())&&h())}),e.on("blur NewBlock",function(){h()}),e.on("ResizeWindow FullscreenStateChanged",function(){return i.reposition()});!function(e){var t=!1;e.on("touchstart",function(){t=!1}),e.on("touchmove",function(){t=!0}),e.on("touchend",function(n){var r=Em(e,n.target);Sm(r)&&(t||(n.preventDefault(),d(ou(e,r))))})}(e),e.on("mousedown",function(t){var n,i=t.target;if((i===r||"HTML"===i.nodeName||e.dom.isChildOf(i,r))&&!1!==kp.isXYInContentArea(e,t.clientX,t.clientY))if(n=Em(e,i))Sm(n)?(t.preventDefault(),d(ou(e,n))):(h(),_m(n)&&t.shiftKey||xm(t.clientX,t.clientY,e.selection.getRng())||(p(),e.selection.placeCaretAt(t.clientX,t.clientY)));else if(!1===Ju(i)){h(),p();var o=function(e,t,n){var r,i=um(function(e){return jt.filter(jt.toArray(e.getElementsByTagName("*")),Ju)}(e)),o=jt.filter(i,function(e){return n>=e.top&&n<=e.bottom});return(r=ym(o,t))&&(r=ym(function(e,t){var n=[],r=function(e,r){var i;return i=jt.filter(um([r]),function(n){return!e(n,t)}),n=n.concat(i),0===i.length};return n.push(t),wm(tm.Up,e,b(r,Qa),t.node),wm(tm.Down,e,b(r,Za),t.node),n}(e,r),t))&&Ju(r.node)?function(e,t){return{node:e.node,before:gm(e,t)<vm(e,t)}}(r,t):null}(r,t.clientX,t.clientY);if(o&&!function(t,n){var r,i,o=e.dom.getParent(t,e.dom.isBlock),a=e.dom.getParent(n,e.dom.isBlock);return!(!o||!e.dom.isChildOf(o,a)||!1!==Sm(Em(e,o)))||o&&(r=o,i=a,!(e.dom.getParent(r,e.dom.isBlock)===e.dom.getParent(i,e.dom.isBlock)))&&function(e){var t=yu(e);if(!e.firstChild)return!1;var n=Ts.before(e.firstChild),r=t.next(n);return r&&!km(r)&&!Tm(r)}(o)}(t.target,o.node)){t.preventDefault();var s=u(1,o.node,o.before,!1);e.getBody().focus(),a(s)}}}),e.on("keypress",function(t){Cm.modifierPressed(t)||(t.keyCode,Sm(e.selection.getNode())&&t.preventDefault())}),e.on("getSelectionRange",function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);(n=n.cloneRange()).selectNode(t),e.range=n}}),e.on("setSelectionRange",function(e){var t;(t=d(e.range,e.forward))&&(e.range=t)}),e.on("AfterSetSelectionRange",function(t){var n,r=t.range;f(r)||"mcepastebin"===r.startContainer.parentNode.id||p(),n=r.startContainer.parentNode,e.dom.hasClass(n,"mce-offscreen-selection")||h()}),e.on("copy",function(t){var n,r=t.clipboardData;if(!t.isDefaultPrevented()&&t.clipboardData&&!ke.ie){var i=(n=e.dom.get(o))?n.getElementsByTagName("*")[0]:n;i&&(t.preventDefault(),r.clearData(),r.setData("text/html",i.outerHTML),r.setData("text/plain",i.outerText))}}),function(e){sm(e),function(e){e.on("drop",function(t){var n=void 0!==t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(rm(n)||rm(e.dom.getContentEditableParent(n)))&&t.preventDefault()})}(e)}(e),function(e){var t=Bo(function(){if(!e.removed&&e.selection.getRng().collapsed){var t=su(e,e.selection.getRng(),!1);e.selection.setRng(t)}},0);e.on("focus",function(){t.throttle()}),e.on("blur",function(){t.cancel()})}(e)}(),(n=e.contentStyles).push(i.getCss()),n.push(".mce-content-body .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}.mce-content-body *[contentEditable=false] {cursor: default;}.mce-content-body *[contentEditable=true] {cursor: text;}")),{showCaret:u,showBlockCaretContainer:function(t){t.hasAttribute("data-mce-caret")&&(Ba(t),a(s()),e.selection.scrollIntoView(t[0]))},hideFakeCaret:p,destroy:function(){i.destroy(),t=null}}},Am=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},Rm=function(e){return e.replace(/<!--|-->/g,"")},Om=function(e,t){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?!1===e.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(t):/^data:/i.test(t))},Dm=function(e,t,n){var r,i,o,a,s=1;for(a=e.getShortEndedElements(),(o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=r=n;i=o.exec(t);){if(r=o.lastIndex,"/"===i[1])s--;else if(!i[1]){if(i[2]in a)continue;s++}if(0===s)break}return r};function Pm(e,t){void 0===t&&(t=oo());var n=function(){};!1!==(e=e||{}).fix_self_closing&&(e.fix_self_closing=!0);var r=e.comment?e.comment:n,i=e.cdata?e.cdata:n,o=e.text?e.text:n,a=e.start?e.start:n,s=e.end?e.end:n,u=e.pi?e.pi:n,l=e.doctype?e.doctype:n;return{parse:function(n){var c,f,d,h,p,m,g,v,b,y,w,x,C,_,S,T,k,E,N,A,R,O,D,P,I,B,M,L,F,H=0,z=[],j=0,W=Yi.decode,U=Vt.makeMap("src,href,data,background,formaction,poster,xlink:href"),$=/((java|vb)script|mhtml):/i,q=function(e){var t,n;for(t=z.length;t--&&z[t].name!==e;);if(t>=0){for(n=z.length-1;n>=t;n--)(e=z[n]).valid&&s(e.name);z.length=t}},V=function(t,n,r,i,o){var a,s;if(r=(n=n.toLowerCase())in w?n:W(r||i||o||""),C&&!v&&!1===Am(n)){if(!(a=E[n])&&N){for(s=N.length;s--&&!(a=N[s]).pattern.test(n););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(r in a.validValues))return}if(U[n]&&!e.allow_script_urls){var u=r.replace(/[\s\u0000-\u001F]+/g,"");try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}if($.test(u))return;if(Om(e,u))return}v&&(n in U||0===n.indexOf("on"))||(h.map[n]=r,h.push({name:n,value:r}))};for(I=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),B=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,y=t.getShortEndedElements(),P=e.self_closing_elements||t.getSelfClosingElements(),w=t.getBoolAttrs(),C=e.validate,b=e.remove_internals,F=e.fix_self_closing,M=t.getSpecialElements(),D=n+">";c=I.exec(D);){if(H<c.index&&o(W(n.substr(H,c.index-H))),f=c[6])":"===(f=f.toLowerCase()).charAt(0)&&(f=f.substr(1)),q(f);else if(f=c[7]){if(c.index+c[0].length>n.length){o(W(n.substr(c.index))),H=c.index+c[0].length;continue}if(":"===(f=f.toLowerCase()).charAt(0)&&(f=f.substr(1)),x=f in y,F&&P[f]&&z.length>0&&z[z.length-1].name===f&&q(f),!C||(_=t.getElementRule(f))){if(S=!0,C&&(E=_.attributes,N=_.attributePatterns),(k=c[8])?((v=-1!==k.indexOf("data-mce-type"))&&b&&(S=!1),(h=[]).map={},k.replace(B,V)):(h=[]).map={},C&&!v){if(A=_.attributesRequired,R=_.attributesDefault,O=_.attributesForced,_.removeEmptyAttrs&&!h.length&&(S=!1),O)for(p=O.length;p--;)g=(T=O[p]).name,"{$uid}"===(L=T.value)&&(L="mce_"+j++),h.map[g]=L,h.push({name:g,value:L});if(R)for(p=R.length;p--;)(g=(T=R[p]).name)in h.map||("{$uid}"===(L=T.value)&&(L="mce_"+j++),h.map[g]=L,h.push({name:g,value:L}));if(A){for(p=A.length;p--&&!(A[p]in h.map););-1===p&&(S=!1)}if(T=h.map["data-mce-bogus"]){if("all"===T){H=Dm(t,n,I.lastIndex),I.lastIndex=H;continue}S=!1}}S&&a(f,h,x)}else S=!1;if(d=M[f]){d.lastIndex=H=c.index+c[0].length,(c=d.exec(n))?(S&&(m=n.substr(H,c.index-H)),H=c.index+c[0].length):(m=n.substr(H),H=n.length),S&&(m.length>0&&o(m,!0),s(f)),I.lastIndex=H;continue}x||(k&&k.indexOf("/")===k.length-1?S&&s(f):z.push({name:f,valid:S}))}else(f=c[1])?(">"===f.charAt(0)&&(f=" "+f),e.allow_conditional_comments||"[if"!==f.substr(0,3).toLowerCase()||(f=" "+f),r(f)):(f=c[2])?i(Rm(f)):(f=c[3])?l(f):(f=c[4])&&u(f,c[5]);H=c.index+c[0].length}for(H<n.length&&o(W(n.substr(H))),p=z.length-1;p>=0;p--)(f=z[p]).valid&&s(f.name)}}}(Pm||(Pm={})).findEndTag=Dm;var Im=Pm,Bm=function(e,t){var n,r,i,o,a,s=t,u=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,l=e.schema;for(s=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")}(e.getTempAttrs(),s),a=l.getShortEndedElements();o=u.exec(s);)r=u.lastIndex,i=o[0].length,n=a[o[1]]?r:Im.findEndTag(l,s,r),s=s.substring(0,r-i)+s.substring(n),u.lastIndex=r-i;return Sa(s)},Mm=Bm,Lm=Bm,Fm=function(e){return Ii.isElement(e)?e.outerHTML:Ii.isText(e)?Yi.encodeRaw(e.data,!1):Ii.isComment(e)?"\x3c!--"+e.data+"--\x3e":""},Hm=function(e,t){return function(e,t){var n=0;jt.each(e,function(e){0===e[0]?n++:1===e[0]?(function(e,t,n){var r=function(e){var t,n,r;for(r=document.createElement("div"),t=document.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t}(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(r,i)}else e.appendChild(r)}(t,e[1],n),n++):2===e[0]&&function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}}(t,n)})}(function(e,t){var n=e.length+t.length+2,r=new Array(n),i=new Array(n),o=function(n,r,i,a,u){var l=s(n,r,i,a);if(null===l||l.start===r&&l.diag===r-a||l.end===n&&l.diag===n-i)for(var c=n,f=i;c<r||f<a;)c<r&&f<a&&e[c]===t[f]?(u.push([0,e[c]]),++c,++f):r-n>a-i?(u.push([2,e[c]]),++c):(u.push([1,t[f]]),++f);else{o(n,l.start,i,l.start-l.diag,u);for(var d=l.start;d<l.end;++d)u.push([0,e[d]]);o(l.end,r,l.end-l.diag,a,u)}},a=function(n,r,i,o){for(var a=n;a-r<o&&a<i&&e[a]===t[a-r];)++a;return function(e,t,n){return{start:e,end:a,diag:r}}(n)},s=function(n,o,s,u){var l=o-n,c=u-s;if(0===l||0===c)return null;var f,d,h,p,m,g=l-c,v=c+l,b=(v%2==0?v:v+1)/2;for(r[1+b]=n,i[1+b]=o+1,f=0;f<=b;++f){for(d=-f;d<=f;d+=2){for(h=d+b,d===-f||d!==f&&r[h-1]<r[h+1]?r[h]=r[h+1]:r[h]=r[h-1]+1,m=(p=r[h])-n+s-d;p<o&&m<u&&e[p]===t[m];)r[h]=++p,++m;if(g%2!=0&&g-f<=d&&d<=g+f&&i[h-g]<=r[h])return a(i[h-g],d+n-s,o,u)}for(d=g-f;d<=g+f;d+=2){for(h=d+b-g,d===g-f||d!==g+f&&i[h+1]<=i[h-1]?i[h]=i[h+1]-1:i[h]=i[h-1],m=(p=i[h]-1)-n+s-d;p>=n&&m>=s&&e[p]===t[m];)i[h]=p--,m--;if(g%2==0&&-f<=d&&d<=f&&i[h]<=r[h+g])return a(i[h],d+n-s,o,u)}}},u=[];return o(0,e.length,0,t.length,u),u}(jt.map(t.childNodes,Fm),e),t),t},zm=Mo(k.none()),jm=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},Wm=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},Um=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},$m=function(e){var t=Vn.fromTag("body",zm.get().getOrThunk(function(){var e=document.implementation.createHTMLDocument("undo");return zm.set(k.some(e)),e}));return ya(t,Um(e)),H(Jo(t,"*[data-mce-bogus]"),Io.unwrap),ba(t)},qm={createFragmentedLevel:jm,createCompleteLevel:Wm,createFromEditor:function(e){var t,n,r;return t=function(e){return jt.filter(jt.map(e.childNodes,Fm),function(e){return e.length>0})}(e.getBody()),-1!==(n=(r=X(t,function(t){var n=Lm(e.serializer,t);return n.length>0?[n]:[]})).join("")).indexOf("</iframe>")?jm(r):Wm(n)},applyToEditor:function(e,t,n){"fragmented"===t.type?Hm(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},isEq:function(e,t){return!(!e||!t)&&(!!function(e,t){return Um(e)===Um(t)}(e,t)||function(e,t){return $m(e)===$m(t)}(e,t))}};function Vm(e){var t,n,r=this,i=0,o=[],a=0,s=function(){return 0===a},u=function(e){s()&&(r.typing=e)},l=function(t){e.setDirty(t)},c=function(e){u(!1),r.add({},e)},f=function(){r.typing&&(u(!1),r.add())};return e.on("init",function(){r.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(f(),r.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&c(e)}),e.on("ObjectResizeStart Cut",function(){r.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("DragEnd",c),e.on("KeyUp",function(t){var i=t.keyCode;t.isDefaultPrevented()||((i>=33&&i<=36||i>=37&&i<=40||45===i||t.ctrlKey)&&(c(),e.nodeChanged()),46!==i&&8!==i||e.nodeChanged(),n&&r.typing&&!1===qm.isEq(qm.createFromEditor(e),o[0])&&(!1===e.isDirty()&&(l(!0),e.fire("change",{level:o[0],lastLevel:null})),e.fire("TypingUndo"),n=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented())if(t>=33&&t<=36||t>=37&&t<=40||45===t)r.typing&&c(e);else{var i=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||t>20)||224===t||91===t||r.typing||i||(r.beforeChange(),u(!0),r.add({},e),n=!0)}}),e.on("MouseDown",function(e){r.typing&&c(e)}),e.on("input",function(e){e.inputType&&("insertReplacementText"===e.inputType||function(e){return"insertText"===e.inputType&&null===e.data}(e))&&c(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),r={data:o,typing:!1,beforeChange:function(){s()&&(t=qs.getUndoBookmark(e.selection))},add:function(n,r){var a,u,c,f=e.settings;if(c=qm.createFromEditor(e),n=n||{},n=Vt.extend(n,c),!1===s()||e.removed)return null;if(u=o[i],e.fire("BeforeAddUndo",{level:n,lastLevel:u,originalEvent:r}).isDefaultPrevented())return null;if(u&&qm.isEq(u,n))return null;if(o[i]&&(o[i].beforeBookmark=t),f.custom_undo_redo_levels&&o.length>f.custom_undo_redo_levels){for(a=0;a<o.length-1;a++)o[a]=o[a+1];o.length--,i=o.length}n.bookmark=qs.getUndoBookmark(e.selection),i<o.length-1&&(o.length=i+1),o.push(n),i=o.length-1;var d={level:n,lastLevel:u,originalEvent:r};return e.fire("AddUndo",d),i>0&&(l(!0),e.fire("change",d)),n},undo:function(){var t;return r.typing&&(r.add(),r.typing=!1,u(!1)),i>0&&(t=o[--i],qm.applyToEditor(e,t,!0),l(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return i<o.length-1&&(t=o[++i],qm.applyToEditor(e,t,!1),l(!0),e.fire("redo",{level:t})),t},clear:function(){o=[],i=0,r.typing=!1,r.data=o,e.fire("ClearUndos")},hasUndo:function(){return i>0||r.typing&&o[0]&&!qm.isEq(qm.createFromEditor(e),o[0])},hasRedo:function(){return i<o.length-1&&!r.typing},transact:function(e){return f(),r.beforeChange(),r.ignore(e),r.add()},ignore:function(e){try{a++,e()}finally{a--}},extra:function(t,n){var a,s;r.transact(t)&&(s=o[i].bookmark,a=o[i-1],qm.applyToEditor(e,a,!0),r.transact(n)&&(o[i-1].beforeBookmark=s))}}}var Xm=Xl,Ym=function(e,t,n){var r=e.formatter.get(n);if(r)for(var i=0;i<r.length;i++)if(!1===r[i].inherit&&e.dom.is(t,r[i].selector))return!0;return!1},Km=function(e,t,n,r){var i=e.dom.getRoot();return t!==i&&(t=e.dom.getParent(t,function(t){return!!Ym(e,t,n)||t.parentNode===i||!!Qm(e,t,n,r,!0)}),Qm(e,t,n,r))},Jm=function(e,t,n){return!!Xm(t,n.inline)||!!Xm(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},Gm=function(e,t,n,r,i,o){var a,s,u,l=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(l)if(void 0===l.length){for(a in l)if(l.hasOwnProperty(a)){if(s="attributes"===r?e.getAttrib(t,a):Kl(e,t,a),i&&!s&&!n.exact)return;if((!i||n.exact)&&!Xm(s,Yl(e,Vl(l[a],o),a)))return}}else for(u=0;u<l.length;u++)if("attributes"===r?e.getAttrib(t,l[u]):Kl(e,t,l[u]))return n;return n},Qm=function(e,t,n,r,i){var o,a,s,u,l=e.formatter.get(n),c=e.dom;if(l&&t)for(a=0;a<l.length;a++)if(o=l[a],Jm(e.dom,t,o)&&Gm(c,t,o,"attributes",i,r)&&Gm(c,t,o,"styles",i,r)){if(u=o.classes)for(s=0;s<u.length;s++)if(!e.dom.hasClass(t,u[s]))return;return o}},Zm={matchNode:Qm,matchName:Jm,match:function(e,t,n,r){var i;return r?Km(e,r,t,n):(r=e.selection.getNode(),!!Km(e,r,t,n)||!((i=e.selection.getStart())===r||!Km(e,i,t,n)))},matchAll:function(e,t,n){var r,i=[],o={};return r=e.selection.getStart(),e.dom.getParent(r,function(r){var a,s;for(a=0;a<t.length;a++)s=t[a],!o[s]&&Qm(e,r,s,n)&&(o[s]=!0,i.push(s))},e.dom.getRoot()),i},canApply:function(e,t){var n,r,i,o,a,s=e.formatter.get(t),u=e.dom;if(s)for(n=e.selection.getStart(),r=Gl(u,n),o=s.length-1;o>=0;o--){if(!(a=s[o].selector)||s[o].defaultBlock)return!0;for(i=r.length-1;i>=0;i--)if(u.is(r[i],a))return!0}return!1},matchesUnInheritedFormatSelector:Ym},eg=function(e,t){return e.splitText(t)},tg={split:function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;return t===r&&Ii.isText(t)?n>0&&n<t.nodeValue.length&&(t=(r=eg(t,n)).previousSibling,i>n?(t=r=eg(r,i-=n).previousSibling,i=r.nodeValue.length,n=0):i=0):(Ii.isText(t)&&n>0&&n<t.nodeValue.length&&(t=eg(t,n),n=0),Ii.isText(r)&&i>0&&i<r.nodeValue.length&&(i=(r=eg(r,i).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:i}}},ng=_a,rg=function(e){var t;if(e)for(e=(t=new ui(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},ig=function(e){var t=Vn.fromTag("span");return cr(t,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Ro(t,Vn.fromText(ng)),t},og=function(e,t,n,r){var i,o,a;i=t.getRng(!0),o=e.getParent(n,e.isBlock),function(e){return function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==ng||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length>0}(n)?(!1!==r&&(i.setStartBefore(n),i.setEndBefore(n)),e.remove(n)):(a=function(e){var t=rg(n);return t&&t.nodeValue.charAt(0)===ng&&t.deleteData(0,1),t}(),i.startContainer===a&&i.startOffset>0&&i.setStart(a,i.startOffset-1),i.endContainer===a&&i.endOffset>0&&i.setEnd(a,i.endOffset-1),e.remove(n,!0)),o&&e.isEmpty(o)&&Sc(Vn.fromDom(o)),t.setRng(i)},ag=function(e,t,n,r,i){if(r)og(t,n,r,i);else if(!(r=Xs(e,n.getStart())))for(;r=t.get("_mce_caret");)og(t,n,r,!1)},sg=function(e,t,n){var r=e.dom,i=r.getParent(n,Ca.curry(Ul,e));i&&r.isEmpty(i)?n.parentNode.replaceChild(t,n):(function(e){var t=Jo(e,"br"),n=j(function(e){for(var t=[],n=e.dom();n;)t.push(Vn.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),gi);t.length===n.length&&H(n,Io.remove)}(Vn.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))},ug=function(e,t){return e.appendChild(t),t},lg=function(e,t){var n,r,i=(n=function(e,t){return ug(e,t.cloneNode(!1))},r=t,function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n])}(e,function(e){r=n(r,e)}),r);return ug(i,i.ownerDocument.createTextNode(ng))},cg=function(e){var t=e.dom,n=e.selection,r=e.getBody();e.on("mouseup keydown",function(e){!function(e,t,n,r){ag(e,t,n,null,!1),8===r&&n.isCollapsed()&&n.getStart().innerHTML===ng&&ag(e,t,n,Xs(e,n.getStart())),37!==r&&39!==r||ag(e,t,n,Xs(e,n.getStart()))}(r,t,n,e.keyCode)})},fg=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(er.name(t))&&!Vs(t.dom())&&!Ii.isBogus(t.dom())},dg={},hg=jt.filter,pg=jt.each;!function(e,t){var n=dg[e];n||(dg[e]=n=[]),dg[e].push(function(e){var t,n,r=e.selection.getRng();t=Ii.matchNodeNames("pre"),r.collapsed||(n=e.selection.getSelectedBlocks(),pg(hg(hg(n,t),function(e){return t(e.previousSibling)&&-1!==jt.indexOf(n,e.previousSibling)}),function(e){var t,n;t=e.previousSibling,dn(n=e).remove(),dn(t).append("<br><br>").append(n.childNodes)}))})}("pre");var mg=/^(src|href|style)$/,gg=Vt.each,vg=Xl,bg=function(e){return/^(TH|TD)$/.test(e.nodeName)},yg=function(e,t,n){var r,i,o;return r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],Ii.isElement(r)&&(o=r.childNodes.length-1,!n&&i&&i--,r=r.childNodes[i>o?o:i]),Ii.isText(r)&&n&&i>=r.nodeValue.length&&(r=new ui(r,e.getBody()).next()||r),Ii.isText(r)&&!n&&0===i&&(r=new ui(r,e.getBody()).prev()||r),r},wg=function(e,t,n,r){var i=e.create(n,r);return t.parentNode.insertBefore(i,t),i.appendChild(t),i},xg=function(e,t,n,r){return!(t=Wl(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},Cg=function(e,t,n,r,i){var o,a,s,u=e.dom;if(!function(e,t,n){return!!vg(t,n.inline)||!!vg(t,n.block)||(n.selector?Ii.isElement(t)&&e.is(t,n.selector):void 0)}(u,r,t)&&!function(e,t){return t.links&&"A"===e.tagName}(r,t))return!1;if("all"!==t.remove)for(gg(t.styles,function(e,o){e=Yl(u,Vl(e,n),o),"number"==typeof o&&(o=e,i=0),(t.remove_similar||!i||vg(Kl(u,i,o),e))&&u.setStyle(r,o,""),s=1}),s&&""===u.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),gg(t.attributes,function(e,t){var o;if(e=Vl(e,n),"number"==typeof t&&(t=e,i=0),!i||vg(u.getAttrib(i,t),e)){if("class"===t&&(e=u.getAttrib(r,t))&&(o="",gg(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(o+=(o?" ":"")+e)}),o))return void u.setAttrib(r,t,o);"class"===t&&r.removeAttribute("className"),mg.test(t)&&r.removeAttribute("data-mce-"+t),r.removeAttribute(t)}}),gg(t.classes,function(e){e=Vl(e,n),i&&!u.hasClass(i,e)||u.removeClass(r,e)}),a=u.getAttribs(r),o=0;o<a.length;o++){var l=a[o].nodeName;if(0!==l.indexOf("_")&&0!==l.indexOf("data-"))return!1}return"none"!==t.remove?(function(e,t,n){var r,i=t.parentNode,o=e.dom,a=e.settings.forced_root_block;n.block&&(a?i===o.getRoot()&&(n.list_block&&vg(t,n.list_block)||gg(Vt.grep(t.childNodes),function(t){$l(e,a,t.nodeName.toLowerCase())?r?r.appendChild(t):(r=wg(o,t,a),o.setAttribs(r,e.settings.forced_root_block_attrs)):r=0})):o.isBlock(t)&&!o.isBlock(i)&&(xg(o,t,!1)||xg(o,t.firstChild,!0,1)||t.insertBefore(o.create("br"),t.firstChild),xg(o,t,!0)||xg(o,t.lastChild,!1,1)||t.appendChild(o.create("br")))),n.selector&&n.inline&&!vg(n.inline,t)||o.remove(t,1)}(e,r,t),!0):void 0},_g={removeFormat:Cg,remove:function(e,t,n,r,i){var o,a,s=e.formatter.get(t),u=s[0],l=!0,c=e.dom,f=e.selection,d=function(r){var o=function(e,t,n,r,i){var o;return gg(Gl(e.dom,t.parentNode).reverse(),function(t){var a;o||"_start"===t.id||"_end"===t.id||(a=Zm.matchNode(e,t,n,r,i))&&!1!==a.split&&(o=t)}),o}(e,r,t,n,i);return function(e,t,n,r,i,o,a,s){var u,l,c,f,d,h,p=e.dom;if(n){for(h=n.parentNode,u=r.parentNode;u&&u!==h;u=u.parentNode){for(l=p.clone(u,!1),d=0;d<t.length;d++)if(Cg(e,t[d],s,l,l)){l=0;break}l&&(c&&l.appendChild(c),f||(f=l),c=l)}a.mixed&&p.isBlock(n)||(r=p.split(n,r)),c&&(i.parentNode.insertBefore(c,i),f.appendChild(i))}return r}(e,s,o,r,r,0,u,n)},h=function(t){var r,i,o,a,f;if(Ii.isElement(t)&&c.getContentEditable(t)&&(a=l,l="true"===c.getContentEditable(t),f=!0),r=Vt.grep(t.childNodes),l&&!f)for(i=0,o=s.length;i<o&&!Cg(e,s[i],n,t,t);i++);if(u.deep&&r.length){for(i=0,o=r.length;i<o;i++)h(r[i]);f&&(l=a)}},p=function(e){var t=c.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return Ll.isBookmarkNode(n)&&(n=n[e?"firstChild":"lastChild"]),Ii.isText(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),c.remove(t,!0),n},m=function(t){var n,r,i=t.commonAncestorContainer;if(t=lc(e,t,s,!0),u.split){if(t=tg.split(t),(n=yg(e,t,!0))!==(r=yg(e,t))){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n="TR"===n.nodeName?n.firstChild.firstChild||n:n.firstChild||n),i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&bg(r)&&r.firstChild&&(r=r.firstChild||r),c.isChildOf(n,r)&&n!==r&&!c.isBlock(r)&&!bg(n)&&!bg(r)){var o=function(e,t,n,r,i){var o=c.create("span",{id:"_start","data-mce-type":"bookmark"});t.parentNode.insertBefore(o,t);for(var a=[t],s=t;s=s.nextSibling;)a.push(s);return a.forEach(function(e){return o.appendChild(e)}),o}(0,n);return d(o),void(n=p(!0))}n=wg(c,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=wg(c,r,"span",{id:"_end","data-mce-type":"bookmark"}),d(n),d(r),n=p(!0),r=p()}else n=r=d(n);t.startContainer=n.parentNode?n.parentNode:n,t.startOffset=c.nodeIndex(n),t.endContainer=r.parentNode?r.parentNode:r,t.endOffset=c.nodeIndex(r)+1}fc.walk(c,t,function(t){gg(t,function(t){h(t),Ii.isElement(t)&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===Jl(c,t.parentNode)&&Cg(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})};if(r)r.nodeType?((a=c.createRng()).setStartBefore(r),a.setEndAfter(r),m(a)):m(r);else if("false"!==c.getContentEditable(f.getNode()))f.isCollapsed()&&u.inline&&!c.select("td[data-mce-selected],th[data-mce-selected]").length?function(e,t,n,r){var i,o,a,s,u,l,c,f=e.dom,d=e.selection,h=[],p=d.getRng();for(i=p.startContainer,o=p.startOffset,u=i,3===i.nodeType&&(o!==i.nodeValue.length&&(s=!0),u=u.parentNode);u;){if(Zm.matchNode(e,u,t,n,r)){l=u;break}u.nextSibling&&(s=!0),h.push(u),u=u.parentNode}if(l)if(s){a=d.getBookmark(),p.collapse(!0);var m=lc(e,p,e.formatter.get(t),!0);m=tg.split(m),e.formatter.remove(t,n,m),d.moveToBookmark(a)}else{c=Xs(e.getBody(),l);var g=ig(!1).dom(),v=lg(h,g);sg(e,g,c||l),og(f,d,c,!1),d.setCursorLocation(v,1),f.isEmpty(l)&&f.remove(l)}}(e,t,n,i):(o=qs.getPersistentBookmark(e.selection,!0),m(f.getRng()),f.moveToBookmark(o),u.inline&&Zm.match(e,t,n,f.getStart())&&jl(c,f,f.getRng()),e.nodeChanged());else{r=f.getNode();for(var g=0,v=s.length;g<v&&(!s[g].ceFalseOverride||!Cg(e,s[g],n,r,r));g++);}}},Sg=Vt.each,Tg=function(e){return e&&1===e.nodeType&&!Ll.isBookmarkNode(e)&&!Vs(e)&&!Ii.isBogus(e)},kg=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!Ll.isBookmarkNode(n))return n}return e},Eg=function(e,t,n){var r,i,o=new _c(e);if(t&&n&&(t=kg(t,"previousSibling"),n=kg(n,"nextSibling"),o.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)i=r,r=r.nextSibling,t.appendChild(i);return e.remove(n),Vt.each(Vt.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},Ng=function(e,t,n){Sg(e.childNodes,function(e){Tg(e)&&(t(e)&&n(e),e.hasChildNodes()&&Ng(e,t,n))})},Ag=function(e,t){return b(function(t,n){return!(!n||!Kl(e,n,t))},t)},Rg=function(e,t,n){return b(function(t,n,r){e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),Og(e,r)},t,n)},Og=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},Dg=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=Jl(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},Pg=Vt.each,Ig=function(e,t,n,r){var i,o,a=e.formatter.get(t),s=a[0],u=!r&&e.selection.isCollapsed(),l=e.dom,c=e.selection,f=function(e,t){if(t=t||s,e){if(t.onformat&&t.onformat(e,t,n,r),Pg(t.styles,function(t,r){l.setStyle(e,r,Vl(t,n))}),t.styles){var i=l.getAttrib(e,"style");i&&e.setAttribute("data-mce-style",i)}Pg(t.attributes,function(t,r){l.setAttrib(e,r,Vl(t,n))}),Pg(t.classes,function(t){t=Vl(t,n),l.hasClass(e,t)||l.addClass(e,t)})}},d=function(e,t){var n=!1;return!!s.selector&&(Pg(e,function(e){if(!("collapsed"in e&&e.collapsed!==u))return l.is(t,e.selector)&&!Vs(t)?(f(t,e),n=!0,!1):void 0}),n)},h=function(r,i,o,u){var l,c,h=[],p=!0;l=s.inline||s.block,c=r.create(l),f(c),fc.walk(r,i,function(i){var o,m=function(i){var g,v,b,y;if(y=p,g=i.nodeName.toLowerCase(),v=i.parentNode.nodeName.toLowerCase(),1===i.nodeType&&r.getContentEditable(i)&&(y=p,p="true"===r.getContentEditable(i),b=!0),Xl(g,"br"))return o=0,void(s.block&&r.remove(i));if(s.wrapper&&Zm.matchNode(e,i,t,n))o=0;else{if(p&&!b&&s.block&&!s.wrapper&&Ul(e,g)&&$l(e,v,l))return i=r.rename(i,l),f(i),h.push(i),void(o=0);if(s.selector){var w=d(a,i);if(!s.inline||w)return void(o=0)}!p||b||!$l(e,l,g)||!$l(e,v,l)||!u&&3===i.nodeType&&1===i.nodeValue.length&&65279===i.nodeValue.charCodeAt(0)||Vs(i)||s.inline&&r.isBlock(i)?(o=0,Pg(Vt.grep(i.childNodes),m),b&&(p=y),o=0):(o||(o=r.clone(c,!1),i.parentNode.insertBefore(o,i),h.push(o)),o.appendChild(i))}};Pg(i,m)}),!0===s.links&&Pg(h,function(e){var t=function(e){"A"===e.nodeName&&f(e,s),Pg(Vt.grep(e.childNodes),t)};t(e)}),Pg(h,function(i){var o;o=function(e){var t=0;return Pg(i.childNodes,function(e){ql(e)||Ll.isBookmarkNode(e)||t++}),t}(),!(h.length>1)&&r.isBlock(i)||0!==o?(s.inline||s.wrapper)&&(s.exact||1!==o||(i=function(e){var t,n;return(t=function(e){var t=!1;return Pg(e.childNodes,function(e){if(function(e){return e&&1===e.nodeType&&!Ll.isBookmarkNode(e)&&!Vs(e)&&!Ii.isBogus(e)}(e))return t=e,!1}),t}(e))&&!Ll.isBookmarkNode(t)&&Zm.matchName(r,t,s)&&(n=r.clone(t,!1),f(n),r.replace(n,e,!0),r.remove(t,1)),n||e}(i)),function(e,t,n,r){Sg(t,function(t){Sg(e.dom.select(t.inline,r),function(r){Tg(r)&&_g.removeFormat(e,t,n,r,t.exact?r:null)}),function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";Sg(e.select(r,n),function(n){Tg(n)&&Sg(t.styles,function(t,r){e.setStyle(n,r,"")})})}}(e.dom,t,r)})}(e,a,n,i),function(e,t,n,r,i){Zm.matchNode(e,i.parentNode,n,r)&&_g.removeFormat(e,t,r,i)||t.merge_with_parents&&e.dom.getParent(i.parentNode,function(o){if(Zm.matchNode(e,o,n,r))return _g.removeFormat(e,t,r,i),!0})}(e,s,t,n,i),function(e,t,n,r){t.styles&&t.styles.backgroundColor&&Ng(r,Ag(e,"fontSize"),Rg(e,"backgroundColor",Vl(t.styles.backgroundColor,n)))}(r,s,n,i),function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(Ng(r,Ag(e,"fontSize"),Rg(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))}(r,s,0,i),function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=Eg(e,Wl(r),r),r=Eg(e,r,Wl(r,!0)))}(r,s,0,i)):r.remove(i,1)})};if("false"!==l.getContentEditable(c.getNode())){if(s){if(r)r.nodeType?d(a,r)||((o=l.createRng()).setStartBefore(r),o.setEndAfter(r),h(l,lc(e,o,a),0,!0)):h(l,r,0,!0);else if(u&&s.inline&&!l.select("td[data-mce-selected],th[data-mce-selected]").length)!function(e,t,n){var r,i,o,a,s,u,l=e.selection;a=(r=l.getRng(!0)).startOffset,u=r.startContainer.nodeValue,(i=Xs(e.getBody(),l.getStart()))&&(o=rg(i));var c,f,d=/[^\s\u00a0\u00ad\u200b\ufeff]/;u&&a>0&&a<u.length&&d.test(u.charAt(a))&&d.test(u.charAt(a-1))?(s=l.getBookmark(),r.collapse(!0),r=lc(e,r,e.formatter.get(t)),r=tg.split(r),e.formatter.apply(t,n,r),l.moveToBookmark(s)):(i&&o.nodeValue===ng?e.formatter.apply(t,n,i):(c=e.getDoc(),f=ig(!0).dom(),o=(i=c.importNode(f,!0)).firstChild,r.insertNode(i),a=1,e.formatter.apply(t,n,i)),l.setCursorLocation(o,a))}(e,t,n);else{var p=e.selection.getNode();e.settings.forced_root_block||!a[0].defaultBlock||l.getParent(p,l.isBlock)||Ig(e,a[0].defaultBlock),e.selection.setRng(Ac(e.selection.getRng())),i=qs.getPersistentBookmark(e.selection,!0),h(l,lc(e,c.getRng(),a)),s.styles&&function(e,t,n,r){(t.styles.color||t.styles.textDecoration)&&(Vt.walk(r,b(Dg,e),"childNodes"),Dg(e,r))}(l,s,0,p),c.moveToBookmark(i),jl(l,c,c.getRng()),e.nodeChanged()}!function(e,t){pg(dg[e],function(e){e(t)})}(t,e)}}else{r=c.getNode();for(var m=0,g=a.length;m<g;m++)if(a[m].ceFalseOverride&&l.is(r,a[m].selector))return void f(r,a[m])}},Bg={applyFormat:Ig},Mg=Vt.each,Lg={formatChanged:function(e,t,n,r,i){null===t.get()&&function(e,t){var n={};e.set({}),t.on("NodeChange",function(r){var i=Gl(t.dom,r.element),o={};i=Vt.grep(i,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}),Mg(e.get(),function(e,r){Mg(i,function(a){return t.formatter.matchNode(a,r,{},e.similar)?(n[r]||(Mg(e,function(e){e(!0,{node:a,format:r,parents:i})}),n[r]=e),o[r]=e,!1):!Zm.matchesUnInheritedFormatSelector(t,a,r)&&void 0})}),Mg(n,function(e,t){o[t]||(delete n[t],Mg(e,function(e){e(!1,{node:r.element,format:t,parents:i})}))})})}(t,e),function(e,t,n,r){var i=e.get();Mg(t.split(","),function(e){i[e]||(i[e]=[],i[e].similar=r),i[e].push(n)}),e.set(i)}(t,n,r,i)}},Fg={get:function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,n,r){Vt.each(r,function(n,r){e.setAttrib(t,r,n)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Vt.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t}},Hg=Vt.each,zg=bo.DOM,jg=function(e,t){var n,r,i,o=t&&t.schema||oo({}),a=function(e){var t;return r="string"==typeof e?{name:e,classes:[],attrs:{}}:e,function(e,t){t.classes.length&&zg.addClass(e,t.classes.join(" ")),zg.setAttribs(e,t.attrs)}(t=zg.create(r.name),r),t},s=function(e,t,n){var r,i,u,l=t.length>0&&t[0],c=l&&l.name;if(u=function(e,t){var n="string"!=typeof e?e.nodeName.toLowerCase():e,r=o.getElementRule(n),i=r&&r.parentsRequired;return!(!i||!i.length)&&(t&&-1!==Vt.inArray(i,t)?t:i[0])}(e,c))c===u?(i=t[0],t=t.slice(1)):i=u;else if(l)i=t[0],t=t.slice(1);else if(!n)return e;return i&&(r=a(i)).appendChild(e),n&&(r||(r=zg.create("div")).appendChild(e),Vt.each(n,function(t){var n=a(t);r.insertBefore(n,e)})),s(r,t,i&&i.siblings)};return e&&e.length?(r=e[0],n=a(r),(i=zg.create("div")).appendChild(s(n,e.slice(1),r.siblings)),i):""},Wg=function(e){var t,n={classes:[],attrs:{}};return"*"!==(e=n.selector=Vt.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,r,i,o){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==Vt.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===i){var a=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""})),n.name=t||"div",n},Ug=function(e){return e&&"string"==typeof e?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Vt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=Vt.map(e.split(/(?:~\+|~|\+)/),Wg),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]},$g={getCssText:function(e,t){var n,r,i,o,a,s,u="";if(!1===(s=e.settings.preview_styles))return"";"string"!=typeof s&&(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var l=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(s=t.preview)?"":(n=t.block||t.inline||"span",(o=Ug(t.selector)).length?(o[0].name||(o[0].name=n),n=t.selector,r=jg(o,e)):r=jg([n],e),i=zg.select(n,r)[0]||r.firstChild,Hg(t.styles,function(e,t){(e=l(e))&&zg.setStyle(i,t,e)}),Hg(t.attributes,function(e,t){(e=l(e))&&zg.setAttrib(i,t,e)}),Hg(t.classes,function(e){e=l(e),zg.hasClass(i,e)||zg.addClass(i,e)}),e.fire("PreviewFormats"),zg.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),a=zg.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,Hg(s.split(" "),function(t){var n=zg.getStyle(i,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=zg.getStyle(e.getBody(),t,!0),"#ffffff"===zg.toHex(n).toLowerCase())||"color"===t&&"#000000"===zg.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*a+"px"}"border"===t&&n&&(u+="padding:0 2px;"),u+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),zg.remove(r),u)},parseSelector:Ug,selectorToHtml:function(e,t){return jg(Ug(e),t)}},qg={toggle:function(e,t,n,r,i){var o=t.get(n);!Zm.match(e,n,r,i)||"toggle"in o[0]&&!o[0].toggle?Bg.applyFormat(e,n,r,i):_g.remove(e,n,r,i)}},Vg={setup:function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}};function Xg(e){var t=function(e){var t={},n=function(e,r){e&&("string"!=typeof e?Vt.each(e,function(e,t){n(t,e)}):(r=r.length?r:[r],Vt.each(r,function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),t[e]=r))};return n(Fg.get(e.dom)),n(e.settings.formats),{get:function(e){return e?t[e]:t},register:n,unregister:function(e){return e&&t[e]&&delete t[e],t}}}(e),n=Mo(null);return Vg.setup(e),cg(e),{get:t.get,register:t.register,unregister:t.unregister,apply:b(Bg.applyFormat,e),remove:b(_g.remove,e),toggle:b(qg.toggle,e,t),match:b(Zm.match,e),matchAll:b(Zm.matchAll,e),matchNode:b(Zm.matchNode,e),canApply:b(Zm.canApply,e),formatChanged:b(Lg.formatChanged,e,n),getCssText:b($g.getCssText,e)}}var Yg,Kg=Object.prototype.hasOwnProperty,Jg=(Yg=function(e,t){return t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var i=e[r];for(var o in i)Kg.call(i,o)&&(n[o]=Yg(n[o],i[o]))}return n}),Gg={register:function(e,t,n){e.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),e.addAttributeFilter("src,href,style",function(e,r){for(var i,o,a=e.length,s="data-mce-"+r,u=t.url_converter,l=t.url_converter_scope;a--;)void 0!==(o=(i=e[a]).attributes.map[s])?(i.attr(r,o.length>0?o:null),i.attr(s,null)):(o=i.attributes.map[r],"style"===r?o=n.serializeStyle(n.parseStyle(o),i.name):u&&(o=u.call(l,o,r,i.name)),i.attr(r,o.length>0?o:null))}),e.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)(n=(t=e[r]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),e.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,i=e.length;i--;)"bookmark"!==(r=e[i]).attributes.map["data-mce-type"]||n.cleanup||r.remove()}),e.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=Yi.decode(t.value))}),e.addNodeFilter("script,style",function(e,n){for(var r,i,o,a=e.length,s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};a--;)i=(r=e[a]).firstChild?r.firstChild.value:"","script"===n?((o=r.attr("type"))&&r.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===t.element_format&&i.length>0&&(r.firstChild.value="// <![CDATA[\n"+s(i)+"\n// ]]>")):"xhtml"===t.element_format&&i.length>0&&(r.firstChild.value="\x3c!--\n"+s(i)+"\n--\x3e")}),e.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),e.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.addAttributeFilter("data-mce-type",function(t){H(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})},trimTrailingBr:function(e){var t,n,r=function(e){return e&&"br"===e.name};r(t=e.lastChild)&&r(n=t.prev)&&(t.remove(),n.remove())}},Qg={process:function(e,t,n){return function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events}(e,n)?function(e,t,n){var r,i,o,a=e.dom;return t=t.cloneNode(!0),(r=document.implementation).createHTMLDocument&&(i=r.createHTMLDocument(""),Vt.each("BODY"===t.nodeName?t.childNodes:[t],function(e){i.body.appendChild(i.importNode(e,!0))}),t="BODY"!==t.nodeName?i.body.firstChild:i.body,o=a.doc,a.doc=i),function(e,t){e.fire("PreProcess",t)}(e,Jg(n,{node:t})),o&&(a.doc=o),t}(e,t,n):t}},Zg=function(e,t){var n=so();t.convert_fonts_to_spans&&function(e,t,n){e.addNodeFilter("font",function(e){H(e,function(e){var r=t.parse(e.attr("style")),i=e.attr("color"),o=e.attr("face"),a=e.attr("size");i&&(r.color=i),o&&(r["font-family"]=o),a&&(r["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(r)),function(e,t){H(["color","face","size"],function(t){e.attr(t,null)})}(e)})})}(e,n,Vt.explode(t.font_size_legacy_values)),function(e,t){e.addNodeFilter("strike",function(e){H(e,function(e){var n=t.parse(e.attr("style"));n["text-decoration"]="line-through",e.name="span",e.attr("style",t.serialize(n))})})}(e,n)},ev={register:function(e,t){t.inline_styles&&Zg(e,t)}},tv=/^[ \t\r\n]*$/,nv={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},rv=function(e,t,n){var r,i,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(r=e[a])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[a])return r}},iv=function(){function e(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var r,i;if(r=new e(t,nv[t]||1),n)for(i in n)r.attr(i,n[i]);return r},e.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},e.prototype.attr=function(e,t){var n,r;if("string"!=typeof e){for(r in e)this.attr(r,e[r]);return this}if(n=this.attributes){if(void 0!==t){if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),this;return this}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,this}return n.map[e]}},e.prototype.clone=function(){var t,n,r,i,o,a=new e(this.name,this.type);if(r=this.attributes){for((o=[]).map={},t=0,n=r.length;t<n;t++)"id"!==(i=r[t]).name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value);a.attributes=o}return a.value=this.value,a.shortEnded=this.shortEnded,a},e.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},e.prototype.unwrap=function(){var e,t;for(e=this.firstChild;e;)t=e.next,this.insert(e,this,!0),e=t;this.remove()},e.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t,t&&(t.prev=null)):n.next=t,e.lastChild===this?(e.lastChild=n,n&&(n.next=null)):t.prev=n,this.parent=this.next=this.prev=null),this},e.prototype.append=function(e){var t;return e.parent&&e.remove(),(t=this.lastChild)?(t.next=e,e.prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},e.prototype.insert=function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},e.prototype.getAll=function(e){var t,n=[];for(t=this.firstChild;t;t=rv(t,this))t.name===e&&n.push(t);return n},e.prototype.empty=function(){var e,t,n;if(this.firstChild){for(e=[],n=this.firstChild;n;n=rv(n,this))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return this.firstChild=this.lastChild=null,this},e.prototype.isEmpty=function(e,t,n){var r,i,o=this.firstChild;if(t=t||{},o)do{if(1===o.type){if(o.attributes.map["data-mce-bogus"])continue;if(e[o.name])return!1;for(r=o.attributes.length;r--;)if("name"===(i=o.attributes[r].name)||0===i.indexOf("data-mce-bookmark"))return!1}if(8===o.type)return!1;if(3===o.type&&!tv.test(o.value))return!1;if(3===o.type&&o.parent&&t[o.parent.name]&&tv.test(o.value))return!1;if(n&&n(o))return!1}while(o=rv(o,this));return!0},e.prototype.walk=function(e){return rv(this,null,e)},e}(),ov=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new iv("br",1)).shortEnded=!0:r.empty().append(new iv("#text",3)).value="Â "},av=function(e){return sv(e,"#text")&&"Â "===e.firstChild.value},sv=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},uv=function(e,t,n,r){return r.isEmpty(t,n,function(t){return function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty}(e,t)})},lv=function(e,t){return e&&(t[e.name]||"br"===e.name)},cv=function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",function(e,r,i){var o,a,s,u,l,c,f,d,h=e.length,p=Vt.extend({},n.getBlockElements()),m=n.getNonEmptyElements(),g=n.getNonEmptyElements();for(p.body=1,o=0;o<h;o++)if(s=(a=e[o]).parent,p[a.parent.name]&&a===s.lastChild){for(l=a.prev;l;){if("span"!==(c=l.name)||"bookmark"!==l.attr("data-mce-type")){if("br"!==c)break;if("br"===c){a=null;break}}l=l.prev}a&&(a.remove(),uv(n,m,g,s)&&(f=n.getElementRule(s.name))&&(f.removeEmpty?s.remove():f.paddEmpty&&ov(t,i,p,s)))}else{for(u=a;s&&s.firstChild===u&&s.lastChild===u&&(u=s,!p[s.name]);)s=s.parent;u===s&&!0!==t.padd_empty_with_br&&((d=new iv("#text",3)).value="Â ",a.replace(d))}}),e.addAttributeFilter("href",function(e){var n,r,i,o=e.length;if(!t.allow_unsafe_link_target)for(;o--;)"a"===(n=e[o]).name&&"_blank"===n.attr("target")&&n.attr("rel",(i=(r=n.attr("rel"))?Vt.trim(r):"",/\b(noopener)\b/g.test(i)?i:i.split(" ").filter(function(e){return e.length>0}).concat(["noopener"]).sort().join(" ")))}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,i,o=e.length;o--;)if("a"===(i=e[o]).name&&i.firstChild&&!i.attr("href")){r=i.parent,t=i.lastChild;do{n=t.prev,r.insert(t,i),t=n}while(t)}}),t.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)if("ul"===(n=(t=e[r]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var i=new iv("li",1);i.attr("style","list-style-type: none"),t.wrap(i)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,r,i,o,a,s,u,l=e.length,c=n.getValidClasses();l--;){for(r=(t=e[l]).attr("class").split(" "),a="",i=0;i<r.length;i++)o=r[i],u=!1,(s=c["*"])&&s[o]&&(u=!0),s=c[t.name],!u&&s&&s[o]&&(u=!0),u&&(a&&(a+=" "),a+=o);a.length||(a=null),t.attr("class",a)}})},fv=Vt.makeMap,dv=Vt.each,hv=Vt.explode,pv=Vt.extend;function mv(e,t){void 0===t&&(t=oo());var n={},r=[],i={},o={};(e=e||{}).validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var a=function(e){var t,a,s;a in n&&((s=i[a])?s.push(e):i[a]=[e]),t=r.length;for(;t--;)(a=r[t].name)in e.attributes.map&&((s=o[a])?s.push(e):o[a]=[e]);return e},s={schema:t,addAttributeFilter:function(e,t){dv(hv(e),function(e){var n;for(n=0;n<r.length;n++)if(r[n].name===e)return void r[n].callbacks.push(t);r.push({name:e,callbacks:[t]})})},getAttributeFilters:function(){return[].concat(r)},addNodeFilter:function(e,t){dv(hv(e),function(e){var r=n[e];r||(n[e]=r=[]),r.push(t)})},getNodeFilters:function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},filterNode:a,parse:function(s,u){var l,c,f,d,h,p,m,g,v,b,y,w=[];u=u||{},i={},o={},v=pv(fv("script,style,head,html,body,title,meta,param"),t.getBlockElements());var x=t.getNonEmptyElements(),C=t.children,_=e.validate,S="forced_root_block"in u?u.forced_root_block:e.forced_root_block,T=t.getWhiteSpaceElements(),k=/^[ \t\r\n]+/,E=/[ \t\r\n]+$/,N=/[ \t\r\n]+/g,A=/^[ \t\r\n]+$/;b=T.hasOwnProperty(u.context)||T.hasOwnProperty(e.root_name);var R=function(e,t){var r,o=new iv(e,t);return e in n&&((r=i[e])?r.push(o):i[e]=[o]),o},O=function(e){var n,r,i,o,a=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if((i=n.value.replace(E,"")).length>0)return void(n.value=i);if(r=n.next){if(3===r.type&&r.value.length){n=n.prev;continue}if(!a[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}o=n.prev,n.remove(),n=o}};l=Im({validate:_,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(t.getSelfClosingElements()),cdata:function(e){y.append(R("#cdata",4)).value=e},text:function(e,t){var n;b||(e=e.replace(N," "),lv(y.lastChild,v)&&(e=e.replace(k,""))),0!==e.length&&((n=R("#text",3)).raw=!!t,y.append(n).value=e)},comment:function(e){y.append(R("#comment",8)).value=e},pi:function(e,t){y.append(R(e,7)).value=t,O(y)},doctype:function(e){y.append(R("#doctype",10)).value=e,O(y)},start:function(e,n,i){var a,s,u,l,c;if(u=_?t.getElementRule(e):{}){for((a=R(u.outputName||e,1)).attributes=n,a.shortEnded=i,y.append(a),(c=C[y.name])&&C[a.name]&&!c[a.name]&&w.push(a),s=r.length;s--;)(l=r[s].name)in n.map&&((m=o[l])?m.push(a):o[l]=[a]);v[e]&&O(a),i||(y=a),!b&&T[e]&&(b=!0)}},end:function(n){var r,i,o,a,s;if(i=_?t.getElementRule(n):{}){if(v[n]&&!b){if((r=y.firstChild)&&3===r.type)if((o=r.value.replace(k,"")).length>0)r.value=o,r=r.next;else for(a=r.next,r.remove(),r=a;r&&3===r.type;)o=r.value,a=r.next,(0===o.length||A.test(o))&&(r.remove(),r=a),r=a;if((r=y.lastChild)&&3===r.type)if((o=r.value.replace(E,"")).length>0)r.value=o,r=r.prev;else for(a=r.prev,r.remove(),r=a;r&&3===r.type;)o=r.value,a=r.prev,(0===o.length||A.test(o))&&(r.remove(),r=a),r=a}if(b&&T[n]&&(b=!1),i.removeEmpty&&uv(t,x,T,y)&&!y.attributes.map.name&&!y.attr("id"))return s=y.parent,v[y.name]?y.empty().remove():y.unwrap(),void(y=s);i.paddEmpty&&(av(y)||uv(t,x,T,y))&&ov(e,u,v,y),y=y.parent}}},t);var D=y=new iv(u.context||e.root_name,11);if(l.parse(s),_&&w.length&&(u.context?u.invalid=!0:function(e){var n,r,i,o,s,u,l,c,f,d,h,p,m,g,v,b;for(p=fv("tr,td,th,tbody,thead,tfoot,table"),d=t.getNonEmptyElements(),h=t.getWhiteSpaceElements(),m=t.getTextBlockElements(),g=t.getSpecialElements(),n=0;n<e.length;n++)if((r=e[n]).parent&&!r.fixed)if(m[r.name]&&"li"===r.parent.name){for(v=r.next;v&&m[v.name];)v.name="li",v.fixed=!0,r.parent.insert(v,r.parent),v=v.next;r.unwrap(r)}else{for(o=[r],i=r.parent;i&&!t.isValidChild(i.name,r.name)&&!p[i.name];i=i.parent)o.push(i);if(i&&o.length>1){for(o.reverse(),s=u=a(o[0].clone()),f=0;f<o.length-1;f++){for(t.isValidChild(u.name,o[f].name)?(l=a(o[f].clone()),u.append(l)):l=u,c=o[f].firstChild;c&&c!==o[f+1];)b=c.next,l.append(c),c=b;u=l}uv(t,d,h,s)?i.insert(r,o[0],!0):(i.insert(s,o[0],!0),i.insert(r,s)),i=o[0],(uv(t,d,h,i)||sv(i,"br"))&&i.empty().remove()}else if(r.parent){if("li"===r.name){if((v=r.prev)&&("ul"===v.name||"ul"===v.name)){v.append(r);continue}if((v=r.next)&&("ul"===v.name||"ul"===v.name)){v.insert(r,v.firstChild,!0);continue}r.wrap(a(new iv("ul",1)));continue}t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)?r.wrap(a(new iv("div",1))):g[r.name]?r.empty().remove():r.unwrap()}}}(w)),S&&("body"===D.name||u.isRootContent)&&function(){var n,r,i=D.firstChild,o=function(e){e&&((i=e.firstChild)&&3===i.type&&(i.value=i.value.replace(k,"")),(i=e.lastChild)&&3===i.type&&(i.value=i.value.replace(E,"")))};if(t.isValidChild(D.name,S.toLowerCase())){for(;i;)n=i.next,3===i.type||1===i.type&&"p"!==i.name&&!v[i.name]&&!i.attr("data-mce-type")?r?r.append(i):((r=R(S,1)).attr(e.forced_root_block_attrs),D.insert(r,i),r.append(i)):(o(r),r=null),i=n;o(r)}}(),!u.invalid){for(g in i){for(m=n[g],h=(c=i[g]).length;h--;)c[h].parent||c.splice(h,1);for(f=0,d=m.length;f<d;f++)m[f](c,g,u)}for(f=0,d=r.length;f<d;f++)if((m=r[f]).name in o){for(h=(c=o[m.name]).length;h--;)c[h].parent||c.splice(h,1);for(h=0,p=m.callbacks.length;h<p;h++)m.callbacks[h](c,m.name,u)}}return D}};return cv(s,e),ev.register(s,e),s}var gv=function(e,t,n){-1===Vt.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},vv=function(e,t,n){var r=Sa(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||_i(Vn.fromDom(t))?r:Vt.trim(r)},bv=function(e,t,n){var r=n.selection?Jg({forced_root_block:!1},n):n,i=e.parse(t,r);return Gg.trimTrailingBr(i),i},yv=function(e,t,n,r,i){return function(e,t,n){return!t.no_events&&e?function(e,t){return e.fire("PostProcess",t)}(e,Jg(t,{content:n})).content:n}(e,i,function(e,t,n){return Nc(e,t).serialize(n)}(t,n,r))};function wv(e,t){var n=function(e,t){var n,r,i,o=["data-mce-selected"];return n=t&&t.dom?t.dom:bo.DOM,r=t&&t.schema?t.schema:oo(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,i=mv(e,r),Gg.register(i,e,n),{schema:r,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:function(o,a){var s=Jg({format:"html"},a||{}),u=Qg.process(t,o,s),l=vv(n,u,s),c=bv(i,l,s);return"tree"===s.format?c:yv(t,e,r,c,s)},addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)},addTempAttr:b(gv,i,o),getTempAttrs:function(){return o}}}(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs}}function xv(e){return{getBookmark:b(Ll.getBookmark,e),moveToBookmark:b(Ll.moveToBookmark,e)}}(xv||(xv={})).isBookmarkNode=Ll.isBookmarkNode;var Cv=xv,_v=Ii.isContentEditableFalse,Sv=Ii.isContentEditableTrue,Tv=function(e,t){var n,r,i,o,a,s,u,l,c,f,d,h,p,m,g,v,b,y=t.dom,w=Vt.each,x=t.getDoc(),C=document,_=Math.abs,S=Math.round,T=t.getBody();o={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var k=".mce-content-body";t.contentStyles.push(k+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+k+" .mce-resizehandle:hover {background: #000}"+k+" img[data-mce-selected],"+k+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+k+" .mce-clonedresizable {position: absolute;"+(ke.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+k+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var E=function(e){return e&&("IMG"===e.nodeName||t.dom.is(e,"figure.image"))},N=function(e){var n=e.target;(function(e,t){return E(e.target)&&!xm(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&(e.preventDefault(),t.selection.select(n))},A=function(e){return t.dom.is(e,"figure.image")?e.querySelector("img"):e},R=function(e){var n=t.settings.object_resizing;return!1!==n&&!ke.iOS&&("string"!=typeof n&&(n="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&e!==t.getBody()&&Nr.is(Vn.fromDom(e),n))},O=function(e){var o,w,x,C;o=e.screenX-s,w=e.screenY-u,m=o*a[2]+f,g=w*a[3]+d,m=m<5?5:m,g=g<5?5:g,(E(n)&&!1!==t.settings.resize_img_proportional?!Cm.modifierPressed(e):Cm.modifierPressed(e)||E(n)&&a[2]*a[3]!=0)&&(_(o)>_(w)?(g=S(m*h),m=S(g/h)):(m=S(g/h),g=S(m*h))),y.setStyles(A(r),{width:m,height:g}),x=a.startPos.x+o,C=a.startPos.y+w,x=x>0?x:0,C=C>0?C:0,y.setStyles(i,{left:x,top:C,display:"block"}),i.innerHTML=m+" &times; "+g,a[2]<0&&r.clientWidth<=m&&y.setStyle(r,"left",l+(f-m)),a[3]<0&&r.clientHeight<=g&&y.setStyle(r,"top",c+(d-g)),(o=T.scrollWidth-v)+(w=T.scrollHeight-b)!=0&&y.setStyles(i,{left:x-o,top:C-w}),p||(function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})}(t,n,f,d),p=!0)},D=function(){p=!1;var e=function(e,r){r&&(n.style[e]||!t.schema.isValid(n.nodeName.toLowerCase(),e)?y.setStyle(A(n),e,r):y.setAttrib(A(n),e,r))};e("width",m),e("height",g),y.unbind(x,"mousemove",O),y.unbind(x,"mouseup",D),C!==x&&(y.unbind(C,"mousemove",O),y.unbind(C,"mouseup",D)),y.remove(r),y.remove(i),P(n),function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})}(t,n,m,g),y.setAttrib(n,"style",y.getAttrib(n,"style")),t.nodeChanged()},P=function(e){var p,_,S,k,E;I(),L(),p=y.getPos(e,T),l=p.x,c=p.y,E=e.getBoundingClientRect(),_=E.width||E.right-E.left,S=E.height||E.bottom-E.top,n!==e&&(n=e,m=g=0),k=t.fire("ObjectSelected",{target:e}),R(e)&&!k.isDefaultPrevented()?w(o,function(e,t){var o;(o=y.get("mceResizeHandle"+t))&&y.remove(o),o=y.add(T,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),11===ke.ie&&(o.contentEditable=!1),y.bind(o,"mousedown",function(t){t.stopImmediatePropagation(),t.preventDefault(),function(t){s=t.screenX,u=t.screenY,f=A(n).clientWidth,d=A(n).clientHeight,h=d/f,a=e,e.startPos={x:_*e[0]+l,y:S*e[1]+c},v=T.scrollWidth,b=T.scrollHeight,r=n.cloneNode(!0),y.addClass(r,"mce-clonedresizable"),y.setAttrib(r,"data-mce-bogus","all"),r.contentEditable=!1,r.unSelectabe=!0,y.setStyles(r,{left:l,top:c,margin:0}),r.removeAttribute("data-mce-selected"),T.appendChild(r),y.bind(x,"mousemove",O),y.bind(x,"mouseup",D),C!==x&&(y.bind(C,"mousemove",O),y.bind(C,"mouseup",D)),i=y.add(T,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},f+" &times; "+d)}(t)}),e.elm=o,y.setStyles(o,{left:_*e[0]+l-o.offsetWidth/2,top:S*e[1]+c-o.offsetHeight/2})}):I(),n.setAttribute("data-mce-selected","1")},I=function(){var e,t;for(e in L(),n&&n.removeAttribute("data-mce-selected"),o)(t=y.get("mceResizeHandle"+e))&&(y.unbind(t),y.remove(t))},B=function(n){var r,i=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};p||t.removed||(w(y.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),r="mousedown"===n.type?n.target:e.getNode(),i(r=y.$(r).closest("table,img,figure.image,hr")[0],T)&&(F(),i(e.getStart(!0),r)&&i(e.getEnd(!0),r))?P(r):I())},M=function(e){return _v(function(e,t){for(;t&&t!==e;){if(Sv(t)||_v(t))return t;t=t.parentNode}return null}(t.getBody(),e))},L=function(){for(var e in o){var t=o[e];t.elm&&(y.unbind(t.elm),delete t.elm)}},F=function(){try{t.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}};return t.on("init",function(){F(),ke.ie&&ke.ie>=11&&(t.on("mousedown click",function(e){var n=e.target,r=n.nodeName;p||!/^(TABLE|IMG|HR)$/.test(r)||M(n)||(2!==e.button&&t.selection.select(n,"TABLE"===r),"mousedown"===e.type&&t.nodeChanged())}),t.dom.bind(T,"mscontrolselect",function(e){var n=function(e){Oe.setEditorTimeout(t,function(){t.selection.select(e)})};if(M(e.target))return e.preventDefault(),void n(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&n(e.target))}));var e=Oe.throttle(function(e){t.composing||B(e)});t.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e),t.on("keyup compositionend",function(t){n&&"TABLE"===n.nodeName&&e(t)}),t.on("hide blur",I),t.on("contextmenu",N)}),t.on("remove",L),{isResizable:R,showResizeRect:P,hideResizeRect:I,updateResizeRect:B,destroy:function(){n=r=null}}},kv=function(e){return Ii.isContentEditableTrue(e)||Ii.isContentEditableFalse(e)},Ev={fromPoint:function(e,t,n){var r,i,o=n;if(o.caretPositionFromPoint)(i=o.caretPositionFromPoint(e,t))&&((r=n.createRange()).setStart(i.offsetNode,i.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(o.body.createTextRange){r=o.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(i){r=function(e,t,n){var r,i,o;if(r=n.elementFromPoint(e,t),i=n.body.createTextRange(),r&&"HTML"!==r.tagName||(r=n.body),i.moveToElementText(r),(o=(o=Vt.toArray(i.getClientRects())).sort(function(e,n){return(e=Math.abs(Math.max(e.top-t,e.bottom-t)))-Math.abs(Math.max(n.top-t,n.bottom-t))})).length>0){t=(o[0].bottom+o[0].top)/2;try{return i.moveToPoint(e,t),i.collapse(!0),i}catch(e){}}return null}(e,t,n)}return function(e,t){var n=e&&e.parentElement?e.parentElement():null;return Ii.isContentEditableFalse(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(n,t,kv))?null:e}(r,n.body)}return r}},Nv=function(e,t){return F(t,function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t})},Av=function(e,t){var n=(t||document).createDocumentFragment();return H(e,function(e){n.appendChild(e.dom())}),Vn.fromDom(n)},Rv=Cr("element","width","rows"),Ov=Cr("element","cells"),Dv=Cr("x","y"),Pv=function(e,t){var n=parseInt(fr(e,t),10);return isNaN(n)?1:n},Iv=function(e,t,n){var r=e.rows();return!!(r[n]?r[n].cells():[])[t]},Bv=function(e){return W(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},Mv=function(e,t){for(var n=e.rows(),r=0;r<n.length;r++)for(var i=n[r].cells(),o=0;o<i.length;o++)if(Or.eq(i[o],t))return k.some(Dv(o,r));return k.none()},Lv=function(e,t,n,r,i){for(var o=[],a=e.rows(),s=n;s<=i;s++){var u=a[s].cells(),l=t<r?u.slice(t,r+1):u.slice(r,t+1);o.push(Ov(a[s].element(),l))}return o},Fv=function(e,t){return U(e,function(e){return"li"===er.name(e)&&function(e,t){return is([function(e){var t=e.startContainer,n=e.startOffset;return Ii.isText(t)?0===n?k.some(Vn.fromDom(t)):k.none():k.from(t.childNodes[n]).map(Vn.fromDom)}(t),function(e){var t=e.endContainer,n=e.endOffset;return Ii.isText(t)?n===t.data.length?k.some(Vn.fromDom(t)):k.none():k.from(t.childNodes[n-1]).map(Vn.fromDom)}(t)],function(t,n){var r=U(Gp(e),b(Or.eq,t)),i=U(Qp(e),b(Or.eq,n));return r.isSome()&&i.isSome()}).getOr(!1)}(e,t)}).fold(g([]),function(t){return function(e){return U(e,function(e){return"ul"===er.name(e)||"ol"===er.name(e)})}(e).map(function(e){return[Vn.fromTag("li"),Vn.fromTag(er.name(e))]}).getOr([])})},Hv=function(){return Av([])},zv=function(e,t){return n=Vn.fromDom(t.cloneContents()),r=function(e,t){var n=Vn.fromDom(t.commonAncestorContainer),r=sf(n,e),i=j(r,function(e){return mi(e)||hi(e)}),o=Fv(r,t),a=i.concat(o.length?o:function(e){return yi(e)?zr(e).filter(bi).fold(g([]),function(t){return[e,t]}):bi(e)?[e]:[]}(n));return F(a,ga)}(e,t),i=W(r,function(e,t){return Ro(t,e),t},n),r.length>0?Av([i]):i;var n,r,i},jv=function(e,t){return(n=e,r=t[0],na(r,"table",b(Or.eq,n))).bind(function(e){var n=t[0],r=t[t.length-1];return function(e,t,n){return Mv(e,t).bind(function(t){return Mv(e,n).map(function(n){return function(e,t,n){var r=t.x(),i=t.y(),o=n.x(),a=n.y(),s=i<a?Lv(e,r,i,o,a):Lv(e,r,a,o,i);return Rv(e.element(),Bv(s),s)}(e,t,n)})})}(function(e){var t=Rv(ga(e),0,[]);return H(Jo(e,"tr"),function(e,n){H(Jo(e,"td,th"),function(r,i){!function(e,t,n,r,i){for(var o=Pv(i,"rowspan"),a=Pv(i,"colspan"),s=e.rows(),u=n;u<n+o;u++){s[u]||(s[u]=Ov(va(r),[]));for(var l=t;l<t+a;l++)s[u].cells()[l]=u===n&&l===t?i:ga(i)}}(t,function(e,t,n){for(;Iv(e,t,n);)t++;return t}(t,i,n),n,e,r)})}),Rv(t.element(),Bv(t.rows()),t.rows())}(e),n,r).map(function(e){return Av([function(e){return function(e,t){var n=ga(e.element()),r=Vn.fromTag("tbody");return Do(r,t),Ro(n,r),n}(e,function(e){return F(e.rows(),function(e){var t=F(e.cells(),function(e){var t=va(e);return hr(t,"colspan"),hr(t,"rowspan"),t}),n=ga(e.element());return Do(n,t),n})}(e))}(e)])})}).getOrThunk(Hv);var n,r},Wv=function(e,t){var n,r=e.selection.getRng(),i=e.dom.create("body"),o=e.selection.getSel(),a=Nv(e,Md(o));if((t=t||{}).get=!0,t.format=t.format||"html",t.selection=!0,(t=e.fire("BeforeGetContent",t)).isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return e.selection.isCollapsed()?"":Sa(r.text||(o.toString?o.toString():""));r.cloneContents?(n=t.contextual?function(e,t){var n=Hd(t,e);return n.length>0?jv(e,n):function(e,t){return t.length>0&&t[0].collapsed?Hv():zv(e,t[0])}(e,t)}(Vn.fromDom(e.getBody()),a).dom():r.cloneContents())&&i.appendChild(n):void 0!==r.item||void 0!==r.htmlText?(i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),i.removeChild(i.firstChild)):i.innerHTML=r.toString(),t.getInner=!0;var s=e.selection.serializer.serialize(i,t);return"tree"===t.format?s:(t.content=e.selection.isCollapsed()?"":s,e.fire("GetContent",t),t.content)},Uv=function(e,t,n,r,i){var o=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return k.from(o).map(Vn.fromDom).map(function(e){return r&&t.collapsed?e:Xr(e,i(e,a)).getOr(e)}).bind(function(e){return er.isElement(e)?k.some(e):zr(e)}).map(function(e){return e.dom()}).getOr(e)},$v=function(e,t,n){return Uv(e,t,!0,n,function(e,t){return Math.min(Jr(e),t)})},qv=function(e,t,n){return Uv(e,t,!1,n,function(e,t){return t>0?t-1:t})},Vv=function(e,t){for(var n=e;e&&Ii.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Xv=Vt.each,Yv=function(e){return!!e.select},Kv=function(e){return!(!e||!e.ownerDocument)&&Or.contains(Vn.fromDom(e.ownerDocument),Vn.fromDom(e))},Jv=function(e,t,n,r){var i,o,a,s,u,l=function(e,t){return function(e,t,n){var r,i,o,a=e.selection.getRng(),s=e.getDoc();if((n=n||{format:"html"}).set=!0,n.selection=!0,n.content=t,n.no_events||!(n=e.fire("BeforeSetContent",n)).isDefaultPrevented()){if(t=n.content,a.insertNode){t+='<span id="__caret">_</span>',a.startContainer===s&&a.endContainer===s?s.body.innerHTML=t:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=t:a.createContextualFragment?a.insertNode(a.createContextualFragment(t)):(i=s.createDocumentFragment(),o=s.createElement("div"),i.appendChild(o),o.outerHTML=t,a.insertNode(i))),r=e.dom.get("__caret"),(a=s.createRange()).setStartBefore(r),a.setEndBefore(r),e.selection.setRng(a),e.dom.remove("__caret");try{e.selection.setRng(a)}catch(e){}}else a.item&&(s.execCommand("Delete",!1,null),a=e.getRng()),/^\s+/.test(t)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):a.pasteHTML(t);n.no_events||e.fire("SetContent",n)}else e.fire("SetContent",n)}(r,e,t)},c=function(e){var t=d();t.collapse(!!e),h(t)},f=function(){return t.getSelection?t.getSelection():t.document.selection},d=function(){var n,i,o,u,l=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!t)return null;if(void 0===(u=t.document)||null===u)return null;if(void 0!==r.bookmark&&!1===yp(r)){var c=Wh.getRng(r);if(c.isSome())return c.map(function(e){return Nv(r,[e])[0]}).getOr(u.createRange())}try{(n=f())&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():u.createRange())}catch(e){}return(i=Nv(r,[i])[0])||(i=u.createRange?u.createRange():u.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(o=e.getRoot(),i.setStart(o,0),i.setEnd(o,0)),a&&s&&(0===l(i.START_TO_START,i,a)&&0===l(i.END_TO_END,i,a)?i=s:(a=null,s=null)),i},h=function(e,t){var n,i;if(function(e){return!!e&&(!!Yv(e)||Kv(e.startContainer)&&Kv(e.endContainer))}(e)){var o=Yv(e)?e:null;if(o){s=null;try{o.select()}catch(e){}}else{if(n=f(),e=r.fire("SetSelectionRange",{range:e,forward:t}).range,n){s=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),a=n.rangeCount>0?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||ke.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(i=e.startContainer.childNodes[e.startOffset])&&"IMG"===i.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(i,0,i,1)),r.fire("AfterSetSelectionRange",{range:e,forward:t})}}},p=function(){var t,n,r=f();return!(r&&r.anchorNode&&r.focusNode)||((t=e.createRng()).setStart(r.anchorNode,r.anchorOffset),t.collapse(!0),(n=e.createRng()).setStart(r.focusNode,r.focusOffset),n.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,n)<=0)},m={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:c,setCursorLocation:function(t,n){var i=e.createRng();t?(i.setStart(t,n),i.setEnd(t,n),h(i),c(!1)):(Zp(e,i,r.getBody(),!0),h(i))},getContent:function(e){return Wv(r,e)},setContent:l,getBookmark:function(e,t){return i.getBookmark(e,t)},moveToBookmark:function(e){return i.moveToBookmark(e)},select:function(t,n){return function(e,t,n){return k.from(t).map(function(t){var r=e.nodeIndex(t),i=e.createRng();return i.setStart(t.parentNode,r),i.setEnd(t.parentNode,r+1),n&&(Zp(e,i,t,!0),Zp(e,i,t,!1)),i})}(e,t,n).each(h),t},isCollapsed:function(){var e=d(),t=f();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:p,setNode:function(t){return l(e.getOuterHTML(t)),t},getNode:function(){return e=r.getBody(),(t=d())?(i=t.startContainer,o=t.endContainer,a=t.startOffset,s=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(i===o&&s-a<2&&i.hasChildNodes()&&(n=i.childNodes[a]),3===i.nodeType&&3===o.nodeType&&(i=i.length===a?Vv(i.nextSibling,!0):i.parentNode,o=0===s?Vv(o.previousSibling,!1):o.parentNode,i&&i===o))?i:n&&3===n.nodeType?n.parentNode:n):e;var e,t,n,i,o,a,s},getSel:f,setRng:h,getRng:d,getStart:function(e){return $v(r.getBody(),d(),e)},getEnd:function(e){return qv(r.getBody(),d(),e)},getSelectedBlocks:function(t,n){return function(e,t,n,r){var i,o,a=[];if(o=e.getRoot(),n=e.getParent(n||$v(o,t,t.collapsed),e.isBlock),r=e.getParent(r||qv(o,t,t.collapsed),e.isBlock),n&&n!==o&&a.push(n),n&&r&&n!==r){i=n;for(var s=new ui(n,o);(i=s.next())&&i!==r;)e.isBlock(i)&&a.push(i)}return r&&n!==r&&r!==o&&a.push(r),a}(e,d(),t,n)},normalize:function(){var t=d();if(!function(e){return Bd(e).length>1}(f())&&em(r)){var n=mh.normalize(e,t);return n.each(function(e){h(e,p())}),n.getOr(t)}return t},selectorChanged:function(t,n){var i;return u||(u={},i={},r.on("NodeChange",function(t){var n=t.element,r=e.getParents(n,null,e.getRoot()),o={};Xv(u,function(t,n){Xv(r,function(a){if(e.is(a,n))return i[n]||(Xv(t,function(e){e(!0,{node:a,selector:n,parents:r})}),i[n]=t),o[n]=t,!1})}),Xv(i,function(e,t){o[t]||(delete i[t],Xv(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),u[t]||(u[t]=[]),u[t].push(n),m},getScrollContainer:function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(e,t){return function(e,t,n){var r,i,o,a,s=e.dom,u=s.getRoot(),l=0;if(!function(e,t,n){var r={elm:t,alignToTop:n};return e.fire("scrollIntoView",r),r.isDefaultPrevented()}(e,t,n)&&Ii.isElement(t)){if(!1===n&&(l=t.offsetHeight),"BODY"!==u.nodeName){var c=e.selection.getScrollContainer();if(c)return r=Iu(t).y-Iu(c).y+l,a=c.clientHeight,void((r<(o=c.scrollTop)||r+25>o+a)&&(c.scrollTop=r<o?r:r-a+25))}i=s.getViewPort(e.getWin()),r=s.getPos(t).y+l,o=i.y,a=i.h,(r<i.y||r+25>o+a)&&e.getWin().scrollTo(0,r<o?r:r-a+25)}}(r,e,t)},placeCaretAt:function(e,t){return h(Ev.fromPoint(e,t,r.getDoc()))},getBoundingClientRect:function(){var e=d();return e.collapsed?Ts.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){t=a=s=null,o.destroy()}};return i=Cv(m),o=Tv(m,r),m.bookmarkManager=i,m.controlSelection=o,m},Gv=Ii.isContentEditableFalse,Qv=es,Zv=Cl,eb=xl,tb=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},nb=function(e,t,n){var r,i,o=yu(e.getBody()),a=Ca.curry(tb,o.next),s=Ca.curry(tb,o.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(r=e.dom.getParent(n.startContainer,"PRE")))return;(1===t?a(Ts.fromRangeStart(n)):s(Ts.fromRangeStart(n)))||(i=function(e){var t=e.dom.create(e.settings.forced_root_block);return(!ke.ie||ke.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t}(e),1===t?e.$(r).after(i):e.$(r).before(i),e.selection.select(i,!0),e.selection.collapse())}},rb=function(e,t){return function(){var n=function(e,t){var n,r=yu(e.getBody()),i=Ca.curry(tb,r.next),o=Ca.curry(tb,r.prev),a=t?Ss.Forwards:Ss.Backwards,s=t?i:o,u=e.selection.getRng();return(n=function(e,t,n,r){var i,o,a,s,u,l,c=e===Ss.Forwards,f=c?eb:Zv;return!r.collapsed&&(i=Qv(r),Gv(i))?iu(e,t,i,e===Ss.Backwards,!0):(s=Ea(r.startContainer),f(o=wl(e,t.getBody(),r))?ou(t,o.getNode(!c)):(o=n(o))?f(o)?iu(e,t,o.getNode(!c),c,!0):f(a=n(o))&&(!(l=ll(u=o,a))&&Ii.isBr(u.getNode())||l)?iu(e,t,a.getNode(!c),c,!0):s?su(t,o.toRange(),!0):null:s?r:null)}(a,e,s,u))?n:(n=nb(e,a,u))||null}(e,t);return!!n&&(e.selection.setRng(n),!0)}},ib=function(e,t){return function(){var n=function(e,t){var n,r=t?1:-1,i=t?fm:cm,o=e.selection.getRng();return(n=function(e,t,n,r){var i,o,a,s,u,l,c,f,d;if(d=Qv(r),i=wl(e,t.getBody(),r),o=n(t.getBody(),dm(1),i),a=jt.filter(o,hm(1)),u=jt.last(i.getClientRects()),(eb(i)||_l(i))&&(d=i.getNode()),(Zv(i)||Sl(i))&&(d=i.getNode(!0)),!u)return null;if(l=u.left,(s=ym(a,l))&&Gv(s.node))return c=Math.abs(l-s.left),f=Math.abs(l-s.right),iu(e,t,s.node,c<f,!0);if(d){var h=function(e,t,n,r){var i,o,a,s,u,l,c=yu(t),f=[],d=0,h=function(e){return jt.last(e.getClientRects())};1===e?(i=c.next,o=Za,a=Qa,s=Ts.after(r)):(i=c.prev,o=Qa,a=Za,s=Ts.before(r)),l=h(s);do{if(s.isVisible()&&!a(u=h(s),l)){if(f.length>0&&o(u,jt.last(f))&&d++,(u=Ka(u)).position=s,u.line=d,n(u))return f;f.push(u)}}while(s=i(s));return f}(e,t.getBody(),dm(1),d);if(s=ym(jt.filter(h,hm(1)),l))return su(t,s.position.toRange(),!0);if(s=jt.last(jt.filter(h,hm(0))))return su(t,s.position.toRange(),!0)}}(r,e,i,o))?n:(n=nb(e,r,o))||null}(e,t);return!!n&&(e.selection.setRng(n),!0)}},ob=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}},ab=function(e,t){return U(function(e,t){return X(function(e){return F(e,function(e){return Jg({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:p},e)})}(e),function(e){return function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey}(e,t)?[e]:[]})}(e,t),function(e){return e.action()})},sb=function(e){return 1===Vr(e).length},ub=function(e,t){var n=Vn.fromDom(e.getBody()),r=Vn.fromDom(e.selection.getStart()),i=j(function(e,t){var n=sf(r,e);return $(n,pi).fold(g(n),function(e){return n.slice(0,e)})}(n),sb);return Q(i).map(function(n){var r=Ts.fromRangeStart(e.selection.getRng());return!!function(e,t,n){return is([Rl.firstPositionIn(n),Rl.lastPositionIn(n)],function(r,i){var o=qc.normalizePosition(!0,r),a=qc.normalizePosition(!1,i),s=qc.normalizePosition(!1,t);return e?Rl.nextPosition(n,s).map(function(e){return e.isEqual(a)&&t.isEqual(o)}).getOr(!1):Rl.prevPosition(n,s).map(function(e){return e.isEqual(o)&&t.isEqual(a)}).getOr(!1)}).getOr(!0)}(t,r,n.dom())&&(function(e,t,n,r){var i=b(fg,t),o=F(j(r,i),function(e){return e.dom()});if(0===o.length)Rf(t,e,n);else{var a=function(e,t){var n=ig(!1),r=lg(t,n.dom());return No(Vn.fromDom(e),n),Io.remove(Vn.fromDom(e)),Ts(r,0)}(n.dom(),o);t.selection.setRng(a.toRange())}}(t,e,n,i),!0)}).getOr(!1)},lb=function(e,t){return!!e.selection.isCollapsed()&&ub(e,t)},cb=function(e){return k.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},fb=function(e,t){var n,r,i,o=t,a=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var u=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&t.insertBefore(a.doc.createTextNode("Â "),t.firstChild)}if(i=a.createRng(),t.normalize(),t.hasChildNodes()){for(n=new ui(t,t);r=n.current();){if(Ii.isText(r)){i.setStart(r,0),i.setEnd(r,0);break}if(s[r.nodeName.toLowerCase()]){i.setStartBefore(r),i.setEndBefore(r);break}o=r,r=n.next()}r||(i.setStart(o,0),i.setEnd(o,0))}else Ii.isBr(t)?t.nextSibling&&a.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),a.remove(void 0),e.selection.scrollIntoView(t)}},db=cb,hb=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},pb=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},mb=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},gb=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!Ii.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},vb=function(e){e.innerHTML='<br data-mce-bogus="1">'},bb=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},yb=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},wb=function(e,t,n){return!1===Ii.isText(t)?n:e?1===n&&t.data.charAt(n-1)===_a?0:n:n===t.data.length-1&&t.data.charAt(n)===_a?t.data.length:n},xb=function(e,t){var n,r,i=e.getRoot();for(n=t;n!==i&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i},Cb=function(e,t){var n=Mu.getForcedRootBlock(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,Mu.getForcedRootBlockAttrs(e))},_b=function(e,t){var n,r,i,o,a,s,u,l,c,f,d,h,p,m=e.dom,g=e.schema,v=g.getNonEmptyElements(),b=e.selection.getRng(),y=function(t){var n,o,s,u=i,l=g.getTextInlineElements();if(t||"TABLE"===f||"HR"===f?(n=m.create(t||h),Cb(e,n)):n=a.cloneNode(!1),s=n,!1===Mu.shouldKeepStyles(e))m.setAttrib(n,"style",null),m.setAttrib(n,"class",null);else do{if(l[u.nodeName]){if(Vs(u))continue;o=u.cloneNode(!1),m.setAttrib(o,"id",""),n.hasChildNodes()?(o.appendChild(n.firstChild),n.appendChild(o)):(s=o,n.appendChild(o))}}while((u=u.parentNode)&&u!==r);return vb(s),n},w=function(e){var t,n,r,s;if(s=wb(e,i,o),Ii.isText(i)&&(e?s>0:s<i.nodeValue.length))return!1;if(i.parentNode===a&&p&&!e)return!0;if(e&&Ii.isElement(i)&&i===a.firstChild)return!0;if(bb(i,"TABLE")||bb(i,"HR"))return p&&!e||!p&&e;for(t=new ui(i,a),Ii.isText(i)&&(e&&0===s?t.prev():e||s!==i.nodeValue.length||t.next());n=t.current();){if(Ii.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),v[r]&&"br"!==r))return!1}else if(Ii.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},x=function(){u=/^(H[1-6]|PRE|FIGURE)$/.test(f)&&"HGROUP"!==d?y(h):y(),Mu.shouldEndContainerOnEmptyBlock(e)&&yb(m,c)&&m.isEmpty(a)?u=m.split(c,a):m.insertAfter(u,a),fb(e,u)};mh.normalize(m,b).each(function(e){b.setStart(e.startContainer,e.startOffset),b.setEnd(e.endContainer,e.endOffset)}),i=b.startContainer,o=b.startOffset,h=Mu.getForcedRootBlock(e),s=t.shiftKey,Ii.isElement(i)&&i.hasChildNodes()&&(p=o>i.childNodes.length-1,i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i,o=p&&Ii.isText(i)?i.nodeValue.length:0),(r=xb(m,i))&&((h&&!s||!h&&s)&&(i=function(e,t,n,r,i){var o,a,s,u,l,c,f=t||"P",d=e.dom,h=xb(d,r);if(!(a=d.getParent(r,d.isBlock))||!yb(d,a)){if(c=(a=a||h)===e.getBody()||a&&/^(TD|TH|CAPTION)$/.test(a.nodeName)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return o=d.create(f),Cb(e,o),a.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o;for(u=r;u.parentNode!==a;)u=u.parentNode;for(;u&&!d.isBlock(u);)s=u,u=u.previousSibling;if(s&&e.schema.isValidChild(c,f.toLowerCase())){for(o=d.create(f),Cb(e,o),s.parentNode.insertBefore(o,s),u=s;u&&!d.isBlock(u);)l=u.nextSibling,o.appendChild(u),u=l;n.setStart(r,i),n.setEnd(r,i)}}return r}(e,h,b,i,o)),a=m.getParent(i,m.isBlock),c=a?m.getParent(a.parentNode,m.isBlock):null,f=a?a.nodeName.toUpperCase():"","LI"!==(d=c?c.nodeName.toUpperCase():"")||t.ctrlKey||(a=c,c=c.parentNode,f=d),/^(LI|DT|DD)$/.test(f)&&m.isEmpty(a)?function(e,t,n,r,i){var o=e.dom,a=e.selection.getRng();if(n!==e.getBody()){var s;pb(s=n)&&pb(s.parentNode)&&(i="LI");var u=i?t(i):o.create("BR");if(gb(n,r,!0)&&gb(n,r,!1))hb(n,"LI")?o.insertAfter(u,mb(n)):o.replace(u,n);else if(gb(n,r,!0))hb(n,"LI")?(o.insertAfter(u,mb(n)),u.appendChild(o.doc.createTextNode(" ")),u.appendChild(n)):n.parentNode.insertBefore(u,n);else if(gb(n,r,!1))o.insertAfter(u,mb(n));else{n=mb(n);var l=a.cloneRange();l.setStartAfter(r),l.setEndAfter(n);var c=l.extractContents();"LI"===i&&function(e,t){return e.firstChild&&"LI"===e.firstChild.nodeName}(c)?(u=c.firstChild,o.insertAfter(c,n)):(o.insertAfter(c,n),o.insertAfter(u,n))}o.remove(r),fb(e,u)}}(e,y,c,a,h):h&&a===e.getBody()||(h=h||"P",Ea(a)?(u=Ba(a),m.isEmpty(a)&&vb(a),fb(e,u)):w()?x():w(!0)?(u=a.parentNode.insertBefore(y(),a),fb(e,bb(a,"HR")?u:a)):((n=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,wb(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,wb(!1,e.endContainer,e.endOffset)),t}(b).cloneRange()).setEndAfter(a),function(e){do{Ii.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)}(l=n.extractContents()),u=l.firstChild,m.insertAfter(l,a),function(e,t,n){var r,i=u,o=[];if(i){for(;i=i.firstChild;){if(e.isBlock(i))return;Ii.isElement(i)&&!t[i.nodeName.toLowerCase()]&&o.push(i)}for(r=o.length;r--;)!(i=o[r]).hasChildNodes()||i.firstChild===i.lastChild&&""===i.firstChild.nodeValue?e.remove(i):(a=i)&&"A"===a.nodeName&&0===Vt.trim(Sa(a.innerText||a.textContent)).length&&e.remove(i);var a}}(m,v),function(e,t){var n;t.normalize(),(n=t.lastChild)&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")}(m,a),m.isEmpty(a)&&vb(a),u.normalize(),m.isEmpty(u)?(m.remove(u),x()):fb(e,u)),m.setAttrib(u,"id",""),e.fire("NewBlock",{newBlock:u})))},Sb=function(e,t){return db(e).filter(function(e){return t.length>0&&Nr.is(Vn.fromDom(e),t)}).isSome()},Tb=yf([{br:[]},{block:[]},{none:[]}]),kb=function(e,t){return function(e){return Sb(e,Mu.getNoNewLineSelector(e))}(e)},Eb=function(e){return function(t,n){return""===Mu.getForcedRootBlock(t)===e}},Nb=function(e){return function(t,n){return function(e){return cb(e).filter(function(e){return yi(Vn.fromDom(e))}).isSome()}(t)===e}},Ab=function(e,t){return function(n,r){return function(e){return cb(e).fold(g(""),function(e){return e.nodeName.toUpperCase()})}(n)===e.toUpperCase()===t}},Rb=function(e){return Ab("pre",e)},Ob=function(e){return function(t,n){return Mu.shouldPutBrInPre(t)===e}},Db=function(e,t){return function(e){return Sb(e,Mu.getBrNewLineSelector(e))}(e)},Pb=function(e,t){return t},Ib=function(e){var t=Mu.getForcedRootBlock(e),n=function(e,t){var n,r,i=e.getRoot();for(n=t;n!==i&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i}(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},Bb=function(e,t){return function(n,r){return W(e,function(e,t){return e&&t(n,r)},!0)?k.some(t):k.none()}},Mb=function(e,t){(function(e,t){return $f([Bb([kb],Tb.none()),Bb([Ab("summary",!0)],Tb.br()),Bb([Rb(!0),Ob(!1),Pb],Tb.br()),Bb([Rb(!0),Ob(!1)],Tb.block()),Bb([Rb(!0),Ob(!0),Pb],Tb.block()),Bb([Rb(!0),Ob(!0)],Tb.br()),Bb([Nb(!0),Pb],Tb.br()),Bb([Nb(!0)],Tb.block()),Bb([Eb(!0),Pb,Ib],Tb.block()),Bb([Eb(!0)],Tb.br()),Bb([Db],Tb.br()),Bb([Eb(!1),Pb],Tb.br()),Bb([Ib],Tb.block())],[e,t.shiftKey]).getOr(Tb.none())})(e,t).fold(function(){Sh.insert(e,t)},function(){_b(e,t)},p)},Lb=function(e,t,n){return!!function(e,t){return Fb(n)&&Ii.isText(t.container())}(0,t)&&(function(e,t){var n=t.container(),r=t.offset();n.insertData(r,"Â "),e.selection.setCursorLocation(n,r+1)}(e,t),!0)},Fb=function(e){return e.fold(g(!1),g(!0),g(!0),g(!1))},Hb=function(e){return!!e.selection.isCollapsed()&&function(e){var t=b(qc.isInlineTarget,e),n=Ts.fromRangeStart(e.selection.getRng());return ud(t,e.getBody(),n).map(b(Lb,e,n)).getOr(!1)}(e)},zb=function(e,t){t.hasAttribute("data-mce-caret")&&(Ba(t),function(e){e.selection.setRng(e.selection.getRng())}(e),e.selection.scrollIntoView(t))},jb=function(e,t){var n=function(e){return ra(Vn.fromDom(e.getBody()),"*[data-mce-caret]").fold(g(null),function(e){return e.dom()})}(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void zb(e,n)):void(Ra(n)&&(zb(e,n),e.undoManager.add()))},Wb=function(e){var t=yd.setupSelectedState(e);(function(e){e.on("keyup compositionstart",b(jb,e))})(e),function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&function(e,t,n){var r=$n.detect().os;ab([{keyCode:Cm.RIGHT,action:rb(e,!0)},{keyCode:Cm.LEFT,action:rb(e,!1)},{keyCode:Cm.UP,action:ib(e,!1)},{keyCode:Cm.DOWN,action:ib(e,!0)},{keyCode:Cm.RIGHT,action:qu(e,!0)},{keyCode:Cm.LEFT,action:qu(e,!1)},{keyCode:Cm.UP,action:Vu(e,!1)},{keyCode:Cm.DOWN,action:Vu(e,!0)},{keyCode:Cm.RIGHT,action:yd.move(e,t,!0)},{keyCode:Cm.LEFT,action:yd.move(e,t,!1)},{keyCode:Cm.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:yd.moveNextWord(e,t)},{keyCode:Cm.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:yd.movePrevWord(e,t)}],n).each(function(e){n.preventDefault()})}(e,t,n)})}(e,t),function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&function(e,t,n){ab([{keyCode:Cm.BACKSPACE,action:ob(Df,e,!1)},{keyCode:Cm.DELETE,action:ob(Df,e,!0)},{keyCode:Cm.BACKSPACE,action:ob(Cd,e,t,!1)},{keyCode:Cm.DELETE,action:ob(Cd,e,t,!0)},{keyCode:Cm.BACKSPACE,action:ob(Yd,e,!1)},{keyCode:Cm.DELETE,action:ob(Yd,e,!0)},{keyCode:Cm.BACKSPACE,action:ob(bf,e,!1)},{keyCode:Cm.DELETE,action:ob(bf,e,!0)},{keyCode:Cm.BACKSPACE,action:ob(mf,e,!1)},{keyCode:Cm.DELETE,action:ob(mf,e,!0)},{keyCode:Cm.BACKSPACE,action:ob(lb,e,!1)},{keyCode:Cm.DELETE,action:ob(lb,e,!0)}],n).each(function(e){n.preventDefault()})}(e,t,n)}),e.on("keyup",function(t){!1===t.isDefaultPrevented()&&function(e,t){ab([{keyCode:Cm.BACKSPACE,action:ob(Pf,e)},{keyCode:Cm.DELETE,action:ob(Pf,e)}],t)}(e,t)})}(e,t),function(e){e.on("keydown",function(t){t.keyCode===Cm.ENTER&&function(e,t){var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete"),Mb(e,t)}))}(e,t)})}(e),function(e){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&function(e,t){ab([{keyCode:Cm.SPACEBAR,action:ob(Hb,e)}],t).each(function(e){t.preventDefault()})}(e,t)})}(e)};var Ub=function(e){return Ii.isElement(e)&&vi(Vn.fromDom(e))},$b=bo.DOM,qb=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),function(e){e.settings.auto_focus&&Oe.setEditorTimeout(e,function(){var t;(t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus)).destroyed||t.focus()},100)}(e)},Vb=function(e,t){var n,r,i=e.settings,o=e.getElement(),a=e.getDoc();i.inline||(e.getElement().style.visibility=e.orgVisibility),t||i.content_editable||(a.open(),a.write(e.iframeHTML),a.close()),i.content_editable&&(e.on("remove",function(){var e=this.getBody();$b.removeClass(e,"mce-content-body"),$b.removeClass(e,"mce-edit-focus"),$b.setAttrib(e,"contentEditable",null)}),$b.addClass(o,"mce-content-body"),e.contentDocument=a=i.content_document||document,e.contentWindow=i.content_window||window,e.bodyElement=o,i.content_document=i.content_window=null,i.root_name=o.nodeName.toLowerCase()),(n=e.getBody()).disabled=!0,e.readonly=i.readonly,e.readonly||(e.inline&&"static"===$b.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=e.getParam("content_editable_state",!0)),n.disabled=!1,e.editorUpload=Vp(e),e.schema=oo(i),e.dom=bo(a,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:i.force_hex_style_colors,class_filter:i.class_filter,update_styles:!0,root_element:e.inline?e.getBody():null,collect:i.content_editable,schema:e.schema,onSetAttrib:function(t){e.fire("SetAttrib",t)}}),e.parser=function(e){var t=mv(e.settings,e.schema);return t.addAttributeFilter("src,href,style,tabindex",function(t,n){for(var r,i,o,a=t.length,s=e.dom;a--;)if(i=(r=t[a]).attr(n),o="data-mce-"+n,!r.attributes.map[o]){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===n?((i=s.serializeStyle(s.parseStyle(i),r.name)).length||(i=null),r.attr(o,i),r.attr(n,i)):"tabindex"===n?(r.attr(o,i),r.attr(n,null)):r.attr(o,e.convertURL(i,n,r.name))}}),t.addNodeFilter("script",function(e){for(var t,n,r=e.length;r--;)0!==(n=(t=e[r]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)}),t.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n,r=t.length,i=e.schema.getNonEmptyElements();r--;)(n=t[r]).isEmpty(i)&&0===n.getAll("br").length&&(n.append(new iv("br",1)).shortEnded=!0)}),t}(e),e.serializer=wv(i,e),e.selection=Jv(e.dom,e.getWin(),e.serializer,e),e.annotator=vc(e),e.formatter=Xg(e),e.undoManager=Vm(e),e._nodeChangeDispatcher=new function(e){var t,n=[];"onselectionchange"in e.getDoc()||e.on("NodeChange Click MouseUp KeyUp Focus",function(n){var r,i;i={startContainer:(r=e.selection.getRng()).startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset},"nodechange"!==n.type&&ah.isEq(i,t)||e.fire("SelectionChange"),t=i}),e.on("contextmenu",function(){e.fire("SelectionChange")}),e.on("SelectionChange",function(){var t=e.selection.getStart(!0);!t||!ke.range&&e.selection.isCollapsed()||em(e)&&!function(t){var r,i;if((i=e.$(t).parentsUntil(e.getBody()).add(t)).length===n.length){for(r=i.length;r>=0&&i[r]===n[r];r--);if(-1===r)return n=i,!0}return n=i,!1}(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("MouseUp",function(t){!t.isDefaultPrevented()&&em(e)&&("IMG"===e.selection.getNode().nodeName?Oe.setEditorTimeout(e,function(){e.nodeChanged()}):e.nodeChanged())}),this.nodeChanged=function(t){var n,r,i,o=e.selection;e.initialized&&o&&!e.settings.disable_nodechange&&!e.readonly&&(i=e.getBody(),(n=o.getStart(!0)||i).ownerDocument===e.getDoc()&&e.dom.isChildOf(n,i)||(n=i),r=[],e.dom.getParent(n,function(e){if(e===i)return!0;r.push(e)}),(t=t||{}).element=n,t.parents=r,e.fire("NodeChange",t))}}(e),e._selectionOverrides=Nm(e),function(e){!function(e){e.on("click",function(t){e.dom.getParent(t.target,"details")&&t.preventDefault()})}(e),function(e){e.parser.addNodeFilter("details",function(e){H(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",function(e){H(e,function(e){var t=e.attr("data-mce-open");e.attr("open",N(t)?t:null),e.attr("data-mce-open",null)})})}(e)}(e),function(e){e.on("click",function(t){t.detail>=3&&function(e){var t=e.selection.getRng(),n=_s.fromRangeStart(t),r=_s.fromRangeEnd(t);if(_s.isElementPosition(n)){var i=n.container();Ub(i)&&Rl.firstPositionIn(i).each(function(e){return t.setStart(e.container(),e.offset())})}_s.isElementPosition(r)&&(i=n.container(),Ub(i)&&Rl.lastPositionIn(i).each(function(e){return t.setEnd(e.container(),e.offset())})),e.selection.setRng(Ac(t))}(e)})}(e),Wb(e),function(e){e.settings.forced_root_block&&e.on("NodeChange",b(Jp,e))}(e),e.fire("PreInit"),i.browser_spellcheck||i.gecko_spellcheck||(a.body.spellcheck=!1,$b.setAttrib(n,"spellcheck","false")),e.quirks=function(e){var t,n,r,i=Vt.each,o=Cm.BACKSPACE,a=Cm.DELETE,s=e.dom,u=e.selection,l=e.settings,c=e.parser,f=ke.gecko,d=ke.ie,h=ke.webkit,p=d?"Text":"URL",m=function(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},g=function(e){return e.isDefaultPrevented()},v=function(){e.shortcuts.add("meta+a",null,"SelectAll")},b=function(){e.on("keydown",function(e){if(!g(e)&&e.keyCode===o&&u.isCollapsed()&&0===u.getRng().startOffset){var t=u.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},y=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",function(t){var n;if("HTML"===t.target.nodeName){if(ke.ie>11)return void e.getBody().focus();n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged()}}))};return e.on("keydown",function(t){var n,r,i,o,a;if(!g(t)&&t.keyCode===Cm.BACKSPACE&&(r=(n=u.getRng()).startContainer,i=n.startOffset,o=s.getRoot(),a=r,n.collapsed&&0===i)){for(;a&&a.parentNode&&a.parentNode.firstChild===a&&a.parentNode!==o;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(e.formatter.toggle("blockquote",null,a),(n=s.createRng()).setStart(r,0),n.setEnd(r,0),u.setRng(n))}}),t=function(e){var t=s.create("body"),n=e.cloneContents();return t.appendChild(n),u.serializer.serialize(t,{format:"html"})},e.on("keydown",function(n){var r,i,u,l,c,f=n.keyCode;if(!g(n)&&(f===a||f===o)){if(r=e.selection.isCollapsed(),i=e.getBody(),r&&!s.isEmpty(i))return;if(!r&&(u=e.selection.getRng(),l=t(u),(c=s.createRng()).selectNode(e.getBody()),l!==t(c)))return;n.preventDefault(),e.setContent(""),i.firstChild&&s.isBlock(i.firstChild)?e.selection.setCursorLocation(i.firstChild,0):e.selection.setCursorLocation(i,0),e.nodeChanged()}}),ke.windowsPhone||e.on("keyup focusin mouseup",function(e){Cm.modifierPressed(e)||u.normalize()},!0),h&&(e.settings.content_editable||s.bind(e.getDoc(),"mousedown mouseup",function(t){var n;if(t.target===e.getDoc().documentElement)if(n=u.getRng(),e.getBody().focus(),"mousedown"===t.type){if(Aa(n.startContainer))return;u.placeCaretAt(t.clientX,t.clientY)}else u.setRng(n)}),e.on("click",function(t){var n=t.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==s.getContentEditableParent(n)&&(t.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&s.hasClass(n,"mce-item-anchor")&&(t.preventDefault(),u.select(n))}),l.forced_root_block&&e.on("init",function(){m("DefaultParagraphSeparator",l.forced_root_block)}),e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(e){e.preventDefault()})}),b(),c.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),ke.iOS?(e.inline||e.on("keydown",function(){document.activeElement===document.body&&e.getWin().focus()}),y(),e.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):v()),ke.ie>=11&&(y(),b()),ke.ie&&(v(),m("AutoUrlDetect",!1),e.on("dragstart",function(t){!function(t){var n,r;t.dataTransfer&&(e.selection.isCollapsed()&&"IMG"===t.target.tagName&&u.select(t.target),(n=e.selection.getContent()).length>0&&(r="data:text/mce-internal,"+escape(e.id)+","+escape(n),t.dataTransfer.setData(p,r)))}(t)}),e.on("drop",function(t){if(!g(t)){var n=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(p))&&t.indexOf("data:text/mce-internal,")>=0?(t=t.substr("data:text/mce-internal,".length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}(t);if(n&&n.id!==e.id){t.preventDefault();var r=Ev.fromPoint(t.x,t.y,e.getDoc());u.setRng(r),i=n.html,e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:i,internal:!0}):e.execCommand("mceInsertContent",!1,i)}}var i})),f&&(e.on("keydown",function(t){if(!g(t)&&t.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&0===u.getRng().startOffset){var n=u.getNode(),r=n.previousSibling;if("HR"===n.nodeName)return s.remove(n),void t.preventDefault();r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(s.remove(r),t.preventDefault())}}}),Range.prototype.getClientRects||e.on("mousedown",function(t){if(!g(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),Oe.setEditorTimeout(e,function(){n.focus()})}}),n=function(){var t=s.getAttribs(u.getStart().cloneNode(!1));return function(){var n=u.getStart();n!==e.getBody()&&(s.setAttrib(n,"style",null),i(t,function(e){n.setAttributeNode(e.cloneNode(!0))}))}},r=function(){return!u.isCollapsed()&&s.getParent(u.getStart(),s.isBlock)!==s.getParent(u.getEnd(),s.isBlock)},e.on("keypress",function(t){var i;if(!g(t)&&(8===t.keyCode||46===t.keyCode)&&r())return i=n(),e.getDoc().execCommand("delete",!1,null),i(),t.preventDefault(),!1}),s.bind(e.getDoc(),"cut",function(t){var i;!g(t)&&r()&&(i=n(),Oe.setEditorTimeout(e,function(){i()}))}),l.readonly||e.on("BeforeExecCommand MouseDown",function(){m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),l.object_resizing||m("enableObjectResizing",!1)}),e.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||i(s.select("a"),function(e){var t=e.parentNode,n=s.getRoot();if(t.lastChild===e){for(;t&&!s.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}s.add(t,"br",{"data-mce-bogus":1})}})}),e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),ke.mac&&e.on("keydown",function(t){!Cm.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))}),b()),{refreshContentEditable:function(){},isHidden:function(){var t;return!f||e.removed?0:!(t=e.selection.getSel())||!t.rangeCount||0===t.rangeCount}}}(e),e.fire("PostRender"),i.directionality&&(n.dir=i.directionality),i.nowrap&&(n.style.whiteSpace="nowrap"),i.protect&&e.on("BeforeSetContent",function(e){Vt.each(i.protect,function(t){e.content=e.content.replace(t,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.on("compositionstart compositionend",function(t){e.composing="compositionstart"===t.type}),e.contentStyles.length>0&&(r="",Vt.each(e.contentStyles,function(e){r+=e+"\r\n"}),e.dom.addStyle(r)),function(e){return e.inline?$b.styleSheetLoader:e.dom.styleSheetLoader}(e).loadAll(e.contentCSS,function(t){qb(e)},function(t){qb(e)}),i.content_style&&function(e,t){var n=Vn.fromDom(e.getDoc().head),r=Vn.fromTag("style");lr(r,"type","text/css"),Ro(r,Vn.fromText(t)),Ro(n,r)}(e,i.content_style)},Xb=bo.DOM,Yb=function(e,t){var n=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),r=function(e,t,n,r){var i=Vn.fromTag("iframe");return cr(i,r),cr(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),yr(i,{width:"100%",height:("number"==typeof n?n+"px":n)||"",display:"block"}),i}(e.id,n,t.height,Mu.getIframeAttrs(e)).dom();r.onload=function(){r.onload=null,e.fire("load")};var i=function(e,t){if(document.domain!==window.location.hostname&&ke.ie&&ke.ie<12){var n=qp.uuid("mce");e[n]=function(){Vb(e)};var r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return Xb.setAttrib(t,"src",r),!0}return!1}(e,r);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=function(e){var t,n,r;return r=Mu.getDocType(e)+"<html><head>",Mu.getDocumentBaseUrl(e)!==e.documentBaseUrl&&(r+='<base href="'+e.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',t=Mu.getBodyId(e),n=Mu.getBodyClass(e),Mu.getContentSecurityPolicy(e)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+Mu.getContentSecurityPolicy(e)+'" />'),r+'</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>'}(e),Xb.add(t.iframeContainer,r),i}(e,t);t.editorContainer&&(Xb.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=Xb.isHidden(t.editorContainer)),e.getElement().style.display="none",Xb.setAttrib(e.id,"aria-hidden","true"),n||Vb(e)},Kb=bo.DOM,Jb=function(e,t,n){var r,i,o=Pp.get(n);if(r=Pp.urls[n]||e.documentBaseUrl.replace(/\/$/,""),n=Vt.trim(n),o&&-1===Vt.inArray(t,n)){if(Vt.each(Pp.dependencies(n),function(n){Jb(e,t,n)}),e.plugins[n])return;i=new o(e,r,e.$),e.plugins[n]=i,i.init&&(i.init(e,r),t.push(n))}},Gb=function(e){return e.replace(/^\-/,"")},Qb=function(e){return{editorContainer:e,iframeContainer:e}},Zb=function(e){var t=e.settings,n=e.getElement();return e.orgDisplay=n.style.display,N(t.theme)?function(e){var t,n,r,i,o,a=e.settings,s=e.getElement();return t=a.width||Kb.getStyle(s,"width")||"100%",n=a.height||Kb.getStyle(s,"height")||s.offsetHeight,r=a.min_height||100,(i=/^[0-9\.]+(|px)$/i).test(""+t)&&(t=Math.max(parseInt(t,10),100)),i.test(""+n)&&(n=Math.max(parseInt(n,10),r)),o=e.theme.renderUI({targetNode:s,width:t,height:n,deltaWidth:a.delta_width,deltaHeight:a.delta_height}),a.content_editable||(n=(o.iframeHeight||n)+("number"==typeof n?o.deltaHeight||0:""))<r&&(n=r),o.height=n,o}(e):P(t.theme)?function(e){var t,n=e.getElement();return(t=e.settings.theme(e,n)).editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||e.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"),t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight,t}(e):function(e){var t=e.getElement();return e.inline?Qb(null):function(e){var t=Kb.create("div");return Kb.insertAfter(t,e),Qb(t)}(t)}(e)},ey=function(e){var t,n=e.settings,r=e.getElement();return e.rtl=n.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(n.language),n.aria_label=n.aria_label||Kb.getAttrib(r,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),function(e){var t,n=e.settings.theme;N(n)?(e.settings.theme=Gb(n),t=Ip.get(n),e.theme=new t(e,Ip.urls[n]),e.theme.init&&e.theme.init(e,Ip.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme={}}(e),function(e){var t=[];Vt.each(e.settings.plugins.split(/[ ,]/),function(n){Jb(e,t,Gb(n))})}(e),t=Zb(e),e.editorContainer=t.editorContainer?t.editorContainer:null,n.content_css&&Vt.each(Vt.explode(n.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))}),n.content_editable?Vb(e):Yb(e,t)},ty=bo.DOM,ny=function(e){return"-"===e.charAt(0)},ry=function(e){var t=e.settings,n=e.id,r=function(){ty.unbind(window,"ready",r),e.render()};if(ze.Event.domLoaded){if(e.getElement()&&ke.contentEditable){t.inline?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var i=e.getElement().form||ty.getParent(n,"form");i&&(e.formElement=i,t.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&(ty.insertAfter(ty.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},ty.bind(i,"submit reset",e.formEventDelegate),e.on("reset",function(){e.setContent(e.startContent,{format:"raw"})}),!t.submit_patch||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),i._mceOldSubmit(i)})),e.windowManager=Np(e),e.notificationManager=Ep(e),"xml"===t.encoding&&e.on("GetContent",function(e){e.save&&(e.content=ty.encode(e.content))}),t.add_form_submit_trigger&&e.on("submit",function(){e.initialized&&e.save()}),t.add_unload_trigger&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),function(e,t){var n=_o.ScriptLoader;!function(e,t,n,r){var i=t.settings,o=i.theme;if(N(o)){if(!ny(o)&&!Ip.urls.hasOwnProperty(o)){var a=i.theme_url;a?Ip.load(o,t.documentBaseURI.toAbsolute(a)):Ip.load(o,"themes/"+o+"/theme"+n+".js")}e.loadQueue(function(){Ip.waitFor(o,r)})}else r()}(n,e,t,function(){!function(e,t){var n=t.settings;n.language&&"en"!==n.language&&!n.language_url&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&!t.editorManager.i18n.data[n.language]&&e.add(n.language_url)}(n,e),function(e,t){Vt.isArray(e.plugins)&&(e.plugins=e.plugins.join(" ")),Vt.each(e.external_plugins,function(t,n){Pp.load(n,t),e.plugins+=" "+n}),Vt.each(e.plugins.split(/[ ,]/),function(e){if((e=Vt.trim(e))&&!Pp.urls[e])if(ny(e)){e=e.substr(1,e.length);var n=Pp.dependencies(e);Vt.each(n,function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=Pp.createUrl(n,e),Pp.load(e.resource,e)})}else Pp.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})})}(e.settings,t),n.loadQueue(function(){e.removed||ey(e)},e,function(t){Dp.pluginLoadError(e,t[0]),e.removed||ey(e)})})}(e,e.suffix)}}else ty.bind(window,"ready",r)},iy=Vt.each,oy=Vt.trim,ay="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),sy={ftp:21,http:80,https:443,mailto:25},uy=function(e,t){var n,r,i=this;if(e=oy(e),n=(t=i.settings=t||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))i.source=e;else{var o=0===e.indexOf("//");0!==e.indexOf("/")||o||(e=(n&&n.protocol||"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(r=t.base_uri?t.base_uri.path:new uy(document.location.href).directory,""==t.base_uri.protocol?e="//mce_host"+i.toAbsPath(r,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(n&&n.protocol||"http")+"://mce_host"+i.toAbsPath(r,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),iy(ay,function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),i[t]=r}),n&&(i.protocol||(i.protocol=n.protocol),i.userInfo||(i.userInfo=n.userInfo),i.port||"mce_host"!==i.host||(i.port=n.port),i.host&&"mce_host"!==i.host||(i.host=n.host),i.source=""),o&&(i.protocol="")}};uy.prototype={setPath:function(e){e=/^(.*?)\/?(\w+)?$/.exec(e),this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},toRelative:function(e){var t;if("./"===e)return e;if("mce_host"!==(e=new uy(e,{base_uri:this})).host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var n=this.getURI(),r=e.getURI();return n===r||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===r?n:(t=this.toRelPath(this.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new uy(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=sy[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,i,o=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(r=0,i=e.length;r<i;r++)if(r>=n.length||e[r]!==n[r]){o=r+1;break}if(e.length<n.length)for(r=0,i=n.length;r<i;r++)if(r>=e.length||e[r]!==n[r]){o=r+1;break}if(1===o)return t;for(r=0,i=e.length-(o-1);r<i;r++)a+="../";for(r=o-1,i=n.length;r<i;r++)a+=r!==o-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var n,r,i,o=0,a=[];for(r=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),iy(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];n>=0;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?o>0?o--:a.push(t[n]):o++);return 0!==(i=(n=e.length-o)<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/")).indexOf("/")&&(i="/"+i),r&&i.lastIndexOf("/")!==i.length-1&&(i+=r),i},getURI:function(e){var t;return this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}},uy.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},uy.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var ly=function(e,t){t(e),e.firstChild&&ly(e.firstChild,t),e.next&&ly(e.next,t)},cy=function(e){return e instanceof iv},fy=function(e,t){e.dom.setHTML(e.getBody(),t),function(e){yp(e)&&Rl.firstPositionIn(e.getBody()).each(function(t){var n=t.getNode(),r=Ii.isTable(n)?Rl.firstPositionIn(n).getOr(t):t;e.selection.setRng(r.toRange())})}(e)},dy=function(e,t,n){return void 0===n&&(n={}),n.format=n.format?n.format:"html",n.set=!0,n.content=cy(t)?"":t,cy(t)||n.no_events||(e.fire("BeforeSetContent",n),t=n.content),k.from(e.getBody()).fold(g(t),function(r){return cy(t)?function(e,t,n,r){!function(e,t,n){var r=function(e,t,n){var r={},i={},o=[];for(var a in n.firstChild&&ly(n.firstChild,function(n){H(e,function(e){e.name===n.name&&(r[e.name]?r[e.name].nodes.push(n):r[e.name]={filter:e,nodes:[n]})}),H(t,function(e){"string"==typeof n.attr(e.name)&&(i[e.name]?i[e.name].nodes.push(n):i[e.name]={filter:e,nodes:[n]})})}),r)r.hasOwnProperty(a)&&o.push(r[a]);for(var a in i)i.hasOwnProperty(a)&&o.push(i[a]);return o}(e,t,n);H(r,function(e){H(e.filter.callbacks,function(t){t(e.nodes,e.filter.name,{})})})}(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var i=Nc({validate:e.validate},e.schema).serialize(n);return r.content=_i(Vn.fromDom(t))?i:Vt.trim(i),fy(e,r.content),r.no_events||e.fire("SetContent",r),n}(e,r,t,n):function(e,t,n,r){var i,o;return 0===n.length||/^\s+$/.test(n)?(o='<br data-mce-bogus="1">',"TABLE"===t.nodeName?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>"),(i=Mu.getForcedRootBlock(e))&&e.schema.isValidChild(t.nodeName.toLowerCase(),i.toLowerCase())?(n=o,n=e.dom.createHTML(i,e.settings.forced_root_block_attrs,n)):n||(n='<br data-mce-bogus="1">'),fy(e,n),e.fire("SetContent",r)):("raw"!==r.format&&(n=Nc({validate:e.validate},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0}))),r.content=_i(Vn.fromDom(t))?n:Vt.trim(n),fy(e,r.content),r.no_events||e.fire("SetContent",r)),r.content}(e,r,t,n)})},hy=bo.DOM,py=function(e){return k.from(e).each(function(e){return e.destroy()})},my=bo.DOM,gy=Vt.extend,vy=Vt.each,by=Vt.resolve,yy=ke.ie,wy=function(e,t,n){var r=this,i=r.documentBaseUrl=n.documentBaseURL,o=n.baseURI;t=function(e,t,n,r,i){var o=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:!0}}(t,n,e);return zc(Bc,o,r,i)}(r,e,i,n.defaultSettings,t),r.settings=t,To.language=t.language||"en",To.languageLoad=t.language_load,To.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new uy(t.document_base_url,{base_uri:o}),r.baseURI=o,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new dp(r),r.loadedCSS={},r.editorCommands=new Yh(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(ke.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(ke.overrideViewPort=!1),n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=dn.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})};gy(wy.prototype={render:function(){ry(this)},focus:function(e){!function(e,t){e.removed||(t?bp(e):function(e){var t=e.selection,n=e.settings.content_editable,r=e.getBody(),i=t.getRng();e.quirks.refreshContentEditable();var o=function(e,t){return e.dom.getParent(t,function(t){return"true"===e.dom.getContentEditable(t)})}(e,t.getNode());if(e.$.contains(r,o))return gp(o),mp(e,i),void bp(e);void 0!==e.bookmark&&!1===vp(e)&&Wh.getRng(e).each(function(t){e.selection.setRng(t),i=t}),n||(ke.opera||gp(r),e.getWin().focus()),(ke.gecko||n)&&(gp(r),mp(e,i)),bp(e)}(e))}(this,e)},hasFocus:function(){return yp(this)},execCallback:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,i=this.settings[e];if(i)return this.callbackLookup&&(r=this.callbackLookup[e])&&(i=r.func,r=r.scope),"string"==typeof i&&(r=(r=i.replace(/\.\w+$/,""))?by(r):0,i=by(i),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:i,scope:r}),i.apply(r||this,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&Vt.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return function(e,t,n,r){var i,o=t in e.settings?e.settings[t]:n;return"hash"===r?function(e){var t={};return"string"==typeof e?H(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(e){var n=e.split("=");n.length>1?t[Vt.trim(n[0])]=Vt.trim(n[1]):t[Vt.trim(n[0])]=Vt.trim(n)}):t=e,t}(o):"string"===r?jc(N,e,t).getOr(n):"number"===r?jc(I,e,t).getOr(n):"boolean"===r?jc(D,e,t).getOr(n):"object"===r?jc(A,e,t).getOr(n):"array"===r?jc(R,e,t).getOr(n):"string[]"===r?jc((i=N,function(e){return R(e)&&Y(e,i)}),e,t).getOr(n):"function"===r?jc(P,e,t).getOr(n):o}(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&void 0===t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r}(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:qp.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(my.show(this.getContainer()),my.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var e=this.getDoc();this.hidden||(yy&&e&&!this.inline&&e.execCommand("SelectAll"),this.save(),this.inline?(this.getBody().contentEditable=!1,this===this.editorManager.focusedEditor&&(this.editorManager.focusedEditor=null)):(my.hide(this.getContainer()),my.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this.getElement();return this.removed?"":n?((e=e||{}).load=!0,t=this.setContent(void 0!==n.value?n.value:n.innerHTML,e),e.element=n,e.no_events||this.fire("LoadContent",e),e.element=n=null,t):void 0},save:function(e){var t,n,r=this,i=r.getElement();if(i&&r.initialized&&!r.removed)return(e=e||{}).save=!0,e.element=i,e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(i.nodeName)?i.value=t:(!e.is_removing&&r.inline||(i.innerHTML=t),(n=my.getParent(r.id,"form"))&&vy(n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=i=null,!1!==e.set_dirty&&r.setDirty(!1),t},setContent:function(e,t){return dy(this,e,t)},getContent:function(e){return function(e,t){return void 0===t&&(t={}),k.from(e.getBody()).fold(g("tree"===t.format?new iv("body",11):""),function(n){return function(e,t,n){var r;if(t.format=t.format?t.format:"html",t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)r=Vt.trim(Mm(e.serializer,n.innerHTML));else if("text"===t.format)r=Sa(n.innerText||n.textContent);else{if("tree"===t.format)return e.serializer.serialize(n,t);r=function(e,t){var n=Mu.getForcedRootBlock(e),r=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s|Â |<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(r,"")}(e,e.serializer.serialize(n,t))}return"text"===t.format||_i(Vn.fromDom(n))?t.content=r:t.content=Vt.trim(r),t.no_events||e.fire("GetContent",t),t.content}(e,t,n)})}(this,e)},insertContent:function(e,t){t&&(e=gy({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){!function(e,t){t!==function(e){return e.readonly?"readonly":"design"}(e)&&(e.initialized?tp(e,"readonly"===t):e.on("init",function(){tp(e,"readonly"===t)}),function(e,t){e.fire("SwitchMode",{mode:t})}(e,t))}(this,e)},getContainer:function(){return this.container||(this.container=my.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=my.get(this.id)),this.targetElm},getWin:function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},getDoc:function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var t,n=this,r=n.settings,i=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=r.visual),vy(i.select("table,a",e),function(e){var o;switch(e.nodeName){case"TABLE":return t=r.visual_table_class||"mce-item-table",void((o=i.getAttrib(e,"border"))&&"0"!==o||!n.hasVisual?i.removeClass(e,t):i.addClass(e,t));case"A":return void(i.getAttrib(e,"href")||(o=i.getAttrib(e,"name")||e.id,t=r.visual_anchor_class||"mce-item-anchor",o&&n.hasVisual?i.addClass(e,t):i.removeClass(e,t)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){!function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&i&&hy.remove(i.nextSibling),!e.inline&&r&&function(e){hy.setStyle(e.id,"display",e.orgDisplay)}(e),function(e){e.fire("remove")}(e),e.editorManager.remove(e),hy.remove(e.getContainer()),py(t),py(n),e.destroy()}}(this)},destroy:function(e){!function(e,t){var n=e.selection,r=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),py(n),py(r)),function(e){var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),hy.unbind(t,"submit reset",e.formEventDelegate))}(e),function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)}(e),e.destroyed=!0):e.remove())}(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},sp);var xy,Cy,_y,Sy={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}},Ty=function(e){var t=Bo(function(){Wh.store(e)},0);e.inline&&function(e,t){var n=function(){t.throttle()};bo.DOM.bind(document,"mouseup",n),e.on("remove",function(){bo.DOM.unbind(document,"mouseup",n)})}(e,t),e.on("init",function(){!function(e,t){$n.detect().browser.isIE()?function(e){e.on("focusout",function(){Wh.store(e)})}(e):function(e,t){e.on("mouseup touchend",function(e){t.throttle()})}(e,t),e.on("keyup nodechange",function(t){(function(e){return"nodechange"===e.type&&e.selectionChange})(t)||Wh.store(e)})}(e,t)}),e.on("remove",function(){t.cancel()})},ky=bo.DOM,Ey=function(e,t){var n=e?e.settings.custom_ui_selector:"";return null!==ky.getParent(t,function(t){return function(e){return Sy.isEditorUIElement(e)}(t)||!!n&&e.dom.is(t,n)})},Ny=function(e,t){var n=t.editor;Ty(n),n.on("focusin",function(){var t=e.focusedEditor;t!==this&&(t&&t.fire("blur",{focusedEditor:this}),e.setActive(this),e.focusedEditor=this,this.fire("focus",{blurredEditor:t}),this.focus(!0))}),n.on("focusout",function(){var t=this;Oe.setEditorTimeout(t,function(){var n=e.focusedEditor;Ey(t,function(){try{return document.activeElement}catch(e){return document.body}}())||n!==t||(t.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),xy||(xy=function(t){var n,r=e.activeEditor;n=t.target,r&&n.ownerDocument===document&&(n===document.body||Ey(r,n)||e.focusedEditor!==r||(r.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},ky.bind(document,"focusin",xy))},Ay=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(ky.unbind(document,"focusin",xy),xy=null)},Ry={},Oy="en",Dy={setCode:function(e){e&&(Oy=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return Oy},rtl:!1,add:function(e,t){var n=Ry[e];for(var r in n||(Ry[e]=n={}),t)n[r]=t[r];this.setCode(e)},translate:function(e){var t=Ry[Oy]||{},n=function(e){return Vt.is(e,"function")?Object.prototype.toString.call(e):r(e)?"":""+e},r=function(e){return""===e||null===e||Vt.is(e,"undefined")},i=function(e){return e=n(e),Vt.hasOwn(t,e)?n(t[e]):e};if(r(e))return"";if(Vt.is(e,"object")&&Vt.hasOwn(e,"raw"))return n(e.raw);if(Vt.is(e,"array")){var o=e.slice(1);e=i(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return Vt.hasOwn(o,t)?n(o[t]):e})}return i(e).replace(/{context:\w+}$/,"")},data:Ry},Py=bo.DOM,Iy=Vt.explode,By=Vt.each,My=Vt.extend,Ly=0,Fy=!1,Hy=[],zy=[],jy=function(e){By(_y.get(),function(t){"scroll"===e.type?t.fire("ScrollWindow",e):t.fire("ResizeWindow",e)})},Wy=function(e){e!==Fy&&(e?dn(window).on("resize scroll",jy):dn(window).off("resize scroll",jy),Fy=e)},Uy=function(e){var t=zy;delete Hy[e.id];for(var n=0;n<Hy.length;n++)if(Hy[n]===e){Hy.splice(n,1);break}return zy=j(zy,function(t){return e!==t}),_y.activeEditor===e&&(_y.activeEditor=zy.length>0?zy[0]:null),_y.focusedEditor===e&&(_y.focusedEditor=null),t.length!==zy.length};My(_y={defaultSettings:{},$:dn,majorVersion:"4",minorVersion:"8.4",releaseDate:"2018-10-23",editors:Hy,i18n:Dy,activeEditor:null,settings:{},setup:function(){var e,t,n,r,i="";if(t=uy.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,i=n.suffix;else{for(var o=document.getElementsByTagName("script"),a=0;a<o.length;a++){var s=(r=o[a].src).substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){-1!==s.indexOf(".min")&&(i=".min"),e=r.substring(0,r.lastIndexOf("/"));break}}!e&&document.currentScript&&(-1!==(r=document.currentScript.src).indexOf(".min")&&(i=".min"),e=r.substring(0,r.lastIndexOf("/")))}this.baseURL=new uy(t).toAbsolute(e),this.documentBaseURL=t,this.baseURI=new uy(this.baseURL),this.suffix=i,function(e){e.on("AddEditor",b(Ny,e)),e.on("RemoveEditor",b(Ay,e))}(this)},overrideDefaults:function(e){var t,n;(t=e.base_url)&&(this.baseURL=new uy(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new uy(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n),this.defaultSettings=e;var r=e.plugin_base_urls;for(var i in r)To.PluginManager.urls[i]=r[i]},init:function(e){var t,n,r=this;n=Vt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var i=function(e){var t=e.id;return t||(t=(t=e.name)&&!Py.get(t)?e.name:Py.uniqueId(),e.setAttribute("id",t)),t},o=function(e,t){return t.constructor===RegExp?t.test(e.className):Py.hasClass(e,t)},a=function(e){t=e},s=function(){var t,u=0,l=[],c=function(e,n,i){var o=new wy(e,n,r);l.push(o),o.on("init",function(){++u===t.length&&a(l)}),o.targetElm=o.targetElm||i,o.render()};Py.unbind(window,"ready",s),function(t){var n=e[t];n&&n.apply(r,Array.prototype.slice.call(arguments,2))}("onpageload"),t=dn.unique(function(e){var t,n=[];if(ke.ie&&ke.ie<11)return Dp.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(e.types)return By(e.types,function(e){n=n.concat(Py.select(e.selector))}),n;if(e.selector)return Py.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":(t=e.elements||"").length>0&&By(Iy(t),function(e){var t;(t=Py.get(e))?n.push(t):By(document.forms,function(t){By(t.elements,function(t){t.name===e&&(e="mce_editor_"+Ly++,Py.setAttrib(t,"id",e),n.push(t))})})});break;case"textareas":case"specific_textareas":By(Py.select("textarea"),function(t){e.editor_deselector&&o(t,e.editor_deselector)||e.editor_selector&&!o(t,e.editor_selector)||n.push(t)})}return n}(e)),e.types?By(e.types,function(n){Vt.each(t,function(t){return!Py.is(t,n.selector)||(c(i(t),My({},e,n),t),!1)})}):(Vt.each(t,function(e){var t;(t=r.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(Uy(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)}),0===(t=Vt.grep(t,function(e){return!r.get(e.id)})).length?a([]):By(t,function(t){!function(e,t){return e.inline&&t.tagName.toLowerCase()in n}(e,t)?c(i(t),e,t):Dp.initError("Could not initialize inline editor on invalid inline target element",t)}))};return r.settings=e,Py.bind(window,"ready",s),new Ee(function(e){t?e(t):a=function(t){e(t)}})},get:function(e){return 0===arguments.length?zy.slice(0):N(e)?U(zy,function(t){return t.id===e}).getOr(null):I(e)&&zy[e]?zy[e]:null},add:function(e){var t=this;return Hy[e.id]===e?e:(null===t.get(e.id)&&("length"!==e.id&&(Hy[e.id]=e),Hy.push(e),zy.push(e)),Wy(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),Cy||(Cy=function(){t.fire("BeforeUnload")},Py.bind(window,"beforeunload",Cy)),e)},createEditor:function(e,t){return this.add(new wy(e,t,this))},remove:function(e){var t,n,r=this;if(e){if(!N(e))return n=e,O(r.get(n.id))?null:(Uy(n)&&r.fire("RemoveEditor",{editor:n}),0===zy.length&&Py.unbind(window,"beforeunload",Cy),n.remove(),Wy(zy.length>0),n);By(Py.select(e),function(e){(n=r.get(e.id))&&r.remove(n)})}else for(t=zy.length-1;t>=0;t--)r.remove(zy[t])},execCommand:function(e,t,n){var r=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new wy(n,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?(r.isHidden()?r.show():r.hide(),!0):(this.execCommand("mceAddEditor",0,n),!0)}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){By(zy,function(e){e.save()})},addI18n:function(e,t){Dy.add(e,t)},translate:function(e){return Dy.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},Zh),_y.setup();var $y=_y;function qy(e){return{walk:function(t,n){return fc.walk(e,t,n)},split:tg.split,normalize:function(t){return mh.normalize(e,t).fold(g(!1),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}}!function(e){e.compareRanges=ah.isEq,e.getCaretRangeFromPoint=Ev.fromPoint,e.getSelectedNode=es,e.getNode=ts}(qy||(qy={}));var Vy,Xy,Yy=qy,Ky=Math.min,Jy=Math.max,Gy=Math.round,Qy=function(e,t,n){var r,i,o,a,s,u;return r=t.x,i=t.y,o=e.w,a=e.h,s=t.w,u=t.h,"b"===(n=(n||"").split(""))[0]&&(i+=u),"r"===n[1]&&(r+=s),"c"===n[0]&&(i+=Gy(u/2)),"c"===n[1]&&(r+=Gy(s/2)),"b"===n[3]&&(i-=a),"r"===n[4]&&(r-=o),"c"===n[3]&&(i-=Gy(a/2)),"c"===n[4]&&(r-=Gy(o/2)),Zy(r,i,o,a)},Zy=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},ew={inflate:function(e,t,n){return Zy(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:Qy,findBestRelativePosition:function(e,t,n,r){var i,o;for(o=0;o<r.length;o++)if((i=Qy(e,t,r[o])).x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o];return null},intersect:function(e,t){var n,r,i,o;return n=Jy(e.x,t.x),r=Jy(e.y,t.y),i=Ky(e.x+e.w,t.x+t.w),o=Ky(e.y+e.h,t.y+t.h),i-n<0||o-r<0?null:Zy(n,r,i-n,o-r)},clamp:function(e,t,n){var r,i,o,a,s,u,l,c,f,d;return s=e.x,u=e.y,l=e.x+e.w,c=e.y+e.h,f=t.x+t.w,d=t.y+t.h,r=Jy(0,t.x-s),i=Jy(0,t.y-u),o=Jy(0,l-f),a=Jy(0,c-d),s+=r,u+=i,n&&(l+=r,c+=i,s-=o,u-=a),Zy(s,u,(l-=o)-s,(c-=a)-u)},create:Zy,fromClientRect:function(e){return Zy(e.left,e.top,e.width,e.height)}},tw={},nw={add:function(e,t){tw[e.toLowerCase()]=t},has:function(e){return!!tw[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=tw.hasOwnProperty(t)?tw[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"==typeof e?(t=t||{}).type=e:e=(t=e).type,e=e.toLowerCase(),!(n=tw[e]))throw new Error("Could not find control by type: "+e);return(n=new n(t)).type=e,n}},rw=Vt.each,iw=Vt.extend,ow=function(){};ow.extend=Vy=function(e){var t,n,r,i=this.prototype,o=function(){var e,t,n;if(!Xy&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(this,arguments)},a=function(){return this},s=function(e,t){return function(){var n,r=this._super;return this._super=i[e],n=t.apply(this,arguments),this._super=r,n}};for(n in Xy=!0,t=new this,Xy=!1,e.Mixins&&(rw(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),i.Mixins&&(e.Mixins=i.Mixins.concat(e.Mixins))),e.Methods&&rw(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&rw(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){return void 0!==e?(this[n]=e,this):this[n]}}),e.Statics&&rw(e.Statics,function(e,t){o[t]=e}),e.Defaults&&i.Defaults&&(e.Defaults=iw({},i.Defaults,e.Defaults)),e)"function"==typeof(r=e[n])&&i[n]?t[n]=s(n,r):t[n]=r;return o.prototype=t,o.constructor=o,o.extend=Vy,o};var aw=Math.min,sw=Math.max,uw=Math.round,lw=function(e,t){var n,r,i,o;if(t=t||'"',null===e)return"null";if("string"==(i=typeof e))return r="\bb\tt\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,i){return'"'===t&&"'"===e?e:(n=r.indexOf(i))+1?"\\"+r.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+t;if("object"===i){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,r="[";n<e.length;n++)r+=(n>0?",":"")+lw(e[n],t);return r+"]"}for(o in r="{",e)e.hasOwnProperty(o)&&(r+="function"!=typeof e[o]?(r.length>1?","+t:t)+o+t+":"+lw(e[o],t):"");return r+"}"}return""+e},cw={serialize:lw,parse:function(e){try{return JSON.parse(e)}catch(e){}}},fw={callbacks:{},count:0,send:function(e){var t=this,n=bo.DOM,r=void 0!==e.count?e.count:t.count,i="tinymce_jsonp_"+r;t.callbacks[r]=function(o){n.remove(i),delete t.callbacks[r],e.callback(o)},n.add(n.doc.body,"script",{id:i,src:e.url,type:"text/javascript"}),t.count++}},dw={send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||n++>1e4?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",dw.fire("beforeInitialize",{settings:e}),t=Bp()){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&Vt.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=dw.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();setTimeout(r,10)}}};Vt.extend(dw,Zh);var hw,pw=Vt.extend,mw=function(e){this.settings=pw({},e),this.count=0};mw.sendRPC=function(e){return(new mw).send(e)},mw.prototype={send:function(e){var t=e.error,n=e.success;(e=pw(this.settings,e)).success=function(r,i){void 0===(r=cw.parse(r))&&(r={error:"JSON Parse error."}),r.error?t.call(e.error_scope||e.scope,r.error,i):n.call(e.success_scope||e.scope,r.result)},e.error=function(n,r){t&&t.call(e.error_scope||e.scope,n,r)},e.data=cw.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),e.content_type="application/json",dw.send(e)}};try{hw=window.localStorage}catch(e){hw=function(){return e={},t=[],n={getItem:function(t){return e[t]||null},setItem:function(n,r){t.push(n),e[n]=String(r)},key:function(e){return t[e]},removeItem:function(n){t=t.filter(function(e){return e===n}),delete e[n]},clear:function(){t=[],e={}},length:0},Object.defineProperty(n,"length",{get:function(){return t.length},configurable:!1,enumerable:!1}),n;var e,t,n}()}var gw=$y,vw={geom:{Rect:ew},util:{Promise:Ee,Delay:Oe,Tools:Vt,VK:Cm,URI:uy,Class:ow,EventDispatcher:Jh,Observable:Zh,I18n:Dy,XHR:dw,JSON:cw,JSONRequest:mw,JSONP:fw,LocalStorage:hw,Color:function(e){var t={},n=0,r=0,i=0,o=function(e){var o;return"object"==typeof e?"r"in e?(n=e.r,r=e.g,i=e.b):"v"in e&&function(e,t,o){var a,s,u,l;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,o=parseInt(o,10)/100,t=sw(0,aw(t,1)),o=sw(0,aw(o,1)),0!==t){switch(a=e/60,u=(s=o*t)*(1-Math.abs(a%2-1)),l=o-s,Math.floor(a)){case 0:n=s,r=u,i=0;break;case 1:n=u,r=s,i=0;break;case 2:n=0,r=s,i=u;break;case 3:n=0,r=u,i=s;break;case 4:n=u,r=0,i=s;break;case 5:n=s,r=0,i=u;break;default:n=r=i=0}n=uw(255*(n+l)),r=uw(255*(r+l)),i=uw(255*(i+l))}else n=r=i=uw(255*o)}(e.h,e.s,e.v):(o=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(o[1],10),r=parseInt(o[2],10),i=parseInt(o[3],10)):(o=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(o[1],16),r=parseInt(o[2],16),i=parseInt(o[3],16)):(o=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(o[1]+o[1],16),r=parseInt(o[2]+o[2],16),i=parseInt(o[3]+o[3],16)),n=n<0?0:n>255?255:n,r=r<0?0:r>255?255:r,i=i<0?0:i>255?255:i,t};return e&&o(e),t.toRgb=function(){return{r:n,g:r,b:i}},t.toHsv=function(){return function(e,t,n){var r,i,o,a;return i=0,(o=aw(e/=255,aw(t/=255,n/=255)))===(a=sw(e,sw(t,n)))?{h:0,s:0,v:100*(i=o)}:(r=(a-o)/a,i=a,{h:uw(60*((e===o?3:n===o?1:5)-(e===o?t-n:n===o?e-t:n-e)/(a-o))),s:uw(100*r),v:uw(100*i)})}(n,r,i)},t.toHex=function(){var e=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+e(n)+e(r)+e(i)},t.parse=o,t}},dom:{EventUtils:ze,Sizzle:_t,DomQuery:dn,TreeWalker:ui,DOMUtils:bo,ScriptLoader:_o,RangeUtils:Yy,Serializer:wv,ControlSelection:Tv,BookmarkManager:Cv,Selection:Jv,Event:ze.Event},html:{Styles:so,Entities:Yi,Node:iv,Schema:oo,SaxParser:Im,DomParser:mv,Writer:Ec,Serializer:Nc},ui:{Factory:nw},Env:ke,AddOnManager:To,Annotator:vc,Formatter:Xg,UndoManager:Vm,EditorCommands:Yh,WindowManager:Np,NotificationManager:Ep,EditorObservable:sp,Shortcuts:dp,Editor:wy,FocusManager:Sy,EditorManager:$y,DOM:bo.DOM,ScriptLoader:_o.ScriptLoader,PluginManager:To.PluginManager,ThemeManager:To.ThemeManager,trim:Vt.trim,isArray:Vt.isArray,is:Vt.is,toArray:Vt.toArray,makeMap:Vt.makeMap,each:Vt.each,map:Vt.map,grep:Vt.grep,inArray:Vt.inArray,extend:Vt.extend,create:Vt.create,walk:Vt.walk,createNS:Vt.createNS,resolve:Vt.resolve,explode:Vt.explode,_addCacheSuffix:Vt._addCacheSuffix,isOpera:ke.opera,isWebKit:ke.webkit,isIE:ke.ie,isGecko:ke.gecko,isMac:ke.mac},bw=gw=Vt.extend(gw,vw);!function(e){window.tinymce=e,window.tinyMCE=e}(bw),function(t){try{e.exports=t}catch(e){}}(bw)}()},function(e,t){!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.ThemeManager"),n=tinymce.util.Tools.resolve("tinymce.EditorManager"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(e){return!1!==o(e)},o=function(e){return e.getParam("menubar")},a=function(e){return e.getParam("toolbar_items_size")},s=function(e){return e.getParam("menu")},u=function(e){return!1===e.settings.skin},l=function(e){var t=e.getParam("resize","vertical");return!1===t?"none":"both"===t?"both":"vertical"},c=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f=tinymce.util.Tools.resolve("tinymce.ui.Factory"),d=tinymce.util.Tools.resolve("tinymce.util.I18n"),h=function(e){return e.fire("ResizeEditor")},p=function(e){return e.fire("BeforeRenderUI")},m=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}},g=function(e,t){e.shortcuts.add("Alt+F9","",m(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",m(t,"toolbar")),e.shortcuts.add("Alt+F11","",m(t,"elementpath")),t.on("cancel",function(){e.focus()})},v=tinymce.util.Tools.resolve("tinymce.geom.Rect"),b=tinymce.util.Tools.resolve("tinymce.util.Delay"),y=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},w=function(e){return function(){return e}},x=w(!1),C=w(!0),_=function(){return S},S=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r={fold:function(e,t){return e()},is:x,isSome:x,isNone:C,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:t,map:_,ap:_,each:function(){},bind:_,flatten:_,exists:x,forall:C,filter:_,equals:e,equals_:e,toArray:function(){return[]},toString:w("none()")};return Object.freeze&&Object.freeze(r),r}(),T=function(e){var t=function(){return e},n=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:C,isNone:x,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return T(t(e))},ap:function(t){return t.fold(_,function(t){return T(t(e))})},each:function(t){t(e)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(e)?i:S},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(x,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},k={some:T,none:_,from:function(e){return null===e||void 0===e?S:T(e)}},E=function(e){return e?e.getRoot().uiContainer:null},N={getUiContainerDelta:function(e){var t=E(e);if(t&&"static"!==c.DOM.getStyle(t,"position",!0)){var n=c.DOM.getPos(t),r=t.scrollLeft-n.x,i=t.scrollTop-n.y;return k.some({x:r,y:i})}return k.none()},setUiContainer:function(e,t){var n=c.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=n},getUiContainer:E,inheritUiContainer:function(e,t){return t.uiContainer=E(e)}},A=function(e,t,n){var i,o=[];if(t)return r.each(t.split(/[ ,]/),function(t){var r,a=function(){var n=e.selection;t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})};"|"===t?i=null:(i||(i={type:"buttongroup",items:[]},o.push(i)),e.buttons[t]&&(r=t,"function"==typeof(t=e.buttons[r])&&(t=t()),t.type=t.type||"button",t.size=n,t=f.create(t),i.items.push(t),e.initialized?a():e.on("init",a)))}),{type:"toolbar",layout:"flow",items:o}},R=A,O=function(e,t){var n=[];if(r.each(function(e){var t=e.getParam("toolbar");return!1===t?[]:r.isArray(t)?r.grep(t,function(e){return e.length>0}):function(e,t){for(var n=[],r=1;r<10;r++){var i=e["toolbar"+r];if(!i)break;n.push(i)}var o=e.toolbar?[e.toolbar]:["undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"];return n.length>0?n:o}(e.settings)}(e),function(r){var i;(i=r)&&n.push(A(e,i,t))}),n.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}},D=c.DOM,P=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},I=function(e,t){e.moveTo(t.left,t.top)},B=function(e,t,n,r,i,o){return o=P({x:t,y:n,w:o.w,h:o.h}),e&&(o=e({elementRect:P(r),contentAreaRect:P(i),panelRect:o})),o},M=function(e){var t,n=function(){return e.contextToolbars||[]},i=function(t,n){var i,o,a,s,u,l,c,f=function(e){return e.getParam("inline_toolbar_position_handler")}(e);if(!e.removed)if(t&&t.toolbar.panel){var d,h,p,m;c=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],u=t.toolbar.panel,n&&u.show(),d=t.element,h=D.getPos(e.getContentAreaContainer()),p=e.dom.getRect(d),"BODY"===(m=e.dom.getRoot()).nodeName&&(p.x-=m.ownerDocument.documentElement.scrollLeft||m.scrollLeft,p.y-=m.ownerDocument.documentElement.scrollTop||m.scrollTop),p.x+=h.x,p.y+=h.y,a=p,o=D.getRect(u.getEl()),s=D.getRect(e.getContentAreaContainer()||e.getBody());var g=N.getUiContainerDelta(u).getOr({x:0,y:0});if(a.x+=g.x,a.y+=g.y,o.x+=g.x,o.y+=g.y,s.x+=g.x,s.y+=g.y,"inline"!==D.getStyle(t.element,"display",!0)){var b=t.element.getBoundingClientRect();a.w=b.width,a.h=b.height}e.inline||(s.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&a.w<25&&(a=v.inflate(a,0,8)),i=v.findBestRelativePosition(o,a,s,c),a=v.clamp(a,s),i?(l=v.relativePosition(o,a,i),I(u,B(f,l.x,l.y,a,s,o))):(s.h+=o.h,(a=v.intersect(s,a))?(i=v.findBestRelativePosition(o,a,s,["bc-tc","bl-tl","br-tr"]))?(l=v.relativePosition(o,a,i),I(u,B(f,l.x,l.y,a,s,o))):I(u,B(f,a.x,a.y,a,s,o)):u.hide()),function(e,t,n){t=t?t.substr(0,2):"",r.each({t:"down",b:"up"},function(r,i){e.classes.toggle("arrow-"+r,n(i,t.substr(0,1)))}),r.each({l:"left",r:"right"},function(r,i){e.classes.toggle("arrow-"+r,n(i,t.substr(1,1)))})}(u,i,function(e,t){return e===t})}else!function(e){r.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})}(e)},o=function(t){return function(){b.requestAnimationFrame(function(){e.selection&&i(u(e.selection.getNode()),t)})}},a=function(n){var r;if(n.toolbar.panel)return n.toolbar.panel.show(),void i(n);r=f.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:R(e,n.toolbar.items),oncancel:function(){e.focus()}}),N.setUiContainer(e,r),function(n){if(!t){var r=o(!0),i=N.getUiContainer(n);t=e.selection.getScrollContainer()||e.getWin(),D.bind(t,"scroll",r),D.bind(i,"scroll",r),e.on("remove",function(){D.unbind(t,"scroll",r),D.unbind(i,"scroll",r)})}}(r),n.toolbar.panel=r,r.renderTo().reflow(),i(n)},s=function(){r.each(n(),function(e){e.panel&&e.panel.hide()})},u=function(t){var r,i,o,a=n();for(r=(o=e.$(t).parents().add(t)).length-1;r>=0;r--)for(i=a.length-1;i>=0;i--)if(a[i].predicate(o[r]))return{toolbar:a[i],element:o[r]};return null};e.on("click keyup setContent ObjectResized",function(t){("setcontent"!==t.type||t.selection)&&b.setEditorTimeout(e,function(){var t;(t=u(e.selection.getNode()))?(s(),a(t)):s()})}),e.on("blur hide contextmenu",s),e.on("ObjectResizeStart",function(){var t=u(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()}),e.on("ResizeEditor ResizeWindow",o(!0)),e.on("nodeChange",o(!1)),e.on("remove",function(){r.each(n(),function(e){e.panel&&e.panel.remove()}),e.contextToolbars={}}),e.shortcuts.add("ctrl+F9","",function(){var t=u(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()})},L=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},F=L("function"),H=L("number"),z=void 0===(e=Array.prototype.indexOf)?function(e,t){return V(e,t)}:function(t,n){return e.call(t,n)},j=function(e,t){return q(e,t).isSome()},W=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},U=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},$=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},q=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return k.some(n);return k.none()},V=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},X=Array.prototype.push,Y=(Array.prototype.slice,F(Array.from)&&Array.from,{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),K=function(e,t){return"|"===e?{name:"|",item:{text:"|"}}:t?{name:e,item:t}:null},J=function(e){return e&&"|"===e.item.text},G=function(e,t,n,i){var o,a,s,u;return t?(a=t[i],u=!0):a=Y[i],a&&(o={text:a.title},s=[],r.each((a.items||"").split(/[ ,]/),function(t){var n=K(t,e[t]);n&&s.push(n)}),u||r.each(e,function(e,t){e.context!==i||function(e,t){return q(s,function(e){return e.name===t}).isSome()}(0,t)||("before"===e.separator&&s.push({name:"|",item:{text:"|"}}),e.prependToContext?s.unshift(K(t,e)):s.push(K(t,e)),"after"===e.separator&&s.push({name:"|",item:{text:"|"}}))}),o.menu=W(function(e,t){var n=$(s,function(e){return!1===t.hasOwnProperty(e.name)}),r=$(n,function(e,t,n){return!J(e)||!J(n[t-1])});return $(r,function(e,t,n){return!J(e)||t>0&&t<n.length-1})}(0,n),function(e){return e.item}),!o.menu.length)?null:o},Q=function(e){for(var t=[],n=function(e){var t,n=[],r=s(e);if(r)for(t in r)n.push(t);else for(t in Y)n.push(t);return n}(e),i=r.makeMap(function(e){return e.getParam("removed_menuitems","")}(e).split(/[ ,]/)),a=o(e),u="string"==typeof a?a.split(/[ ,]/):n,l=0;l<u.length;l++){var c=u[l],f=G(e.menuItems,s(e),i,c);f&&t.push(f)}return t},Z=c.DOM,ee=function(e){return{width:e.clientWidth,height:e.clientHeight}},te=function(e,t,n){var r,i,o,a;r=e.getContainer(),i=e.getContentAreaContainer().firstChild,o=ee(r),a=ee(i),null!==t&&(t=Math.max(function(e){return e.getParam("min_width",100,"number")}(e),t),t=Math.min(function(e){return e.getParam("max_width",65535,"number")}(e),t),Z.setStyle(r,"width",t+(o.width-a.width)),Z.setStyle(i,"width",t)),n=Math.max(function(e){return e.getParam("min_height",100,"number")}(e),n),n=Math.min(function(e){return e.getParam("max_height",65535,"number")}(e),n),Z.setStyle(i,"height",n),h(e)},ne=te,re=tinymce.util.Tools.resolve("tinymce.Env"),ie=function(e,t,n){var r,i=e.settings[n];i&&i((r=t.getEl("body"),{element:function(){return r}}))},oe=function(e){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:r.map(e.sidebars,function(t){var n=t.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:function(e,t,n){return function(i){var o=i.control,a=o.parents().filter("panel")[0],s=a.find("#"+t)[0],u=function(e,t){return r.grep(e,function(e){return e.name===t})[0]}(n,t);!function(e,t,n){r.each(n,function(n){var r=t.items().filter("#"+n.name)[0];r&&r.visible()&&n.name!==e&&(ie(n,r,"onhide"),r.visible(!1))})}(t,a,n),o.parent().items().each(function(e){e.active(!1)}),s&&s.visible()?(ie(u,s,"onhide"),s.hide(),o.active(!1)):(s?(s.show(),ie(u,s,"onshow")):(s=f.create({type:"container",name:t,layout:"stack",classes:"sidebar-panel",html:""}),a.prepend(s),ie(u,s,"onrender"),ie(u,s,"onshow")),o.active(!0)),h(e)}}(e,t.name,e.sidebars)}})}]}},ae=function(e){var t=function(){e._skinLoaded=!0,function(e){e.fire("SkinLoaded")}(e)};return function(){e.initialized?t():e.on("init",t)}},se=c.DOM,ue=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},le=function(e,t,n){var r,o,s;if(!1===u(e)&&n.skinUiCss?se.styleSheetLoader.load(n.skinUiCss,ae(e)):ae(e)(),r=t.panel=f.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===i(e)?null:{type:"menubar",border:"0 0 1 0",items:Q(e)},O(e,a(e))]},function(e){return!(re.ie&&!(re.ie>=11)||!e.sidebars)&&e.sidebars.length>0}(e)?function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[ue("0"),oe(e)]}}(e):ue("1 0 0 0")]}),N.setUiContainer(e,r),"none"!==l(e)&&(o={type:"resizehandle",direction:l(e),onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;s={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===l(e)?ne(e,s.width+t.deltaX,s.height+t.deltaY):ne(e,null,s.height+t.deltaY)}}),function(e){return e.getParam("statusbar",!0,"boolean")}(e)){var c=d.translate(["Powered by {0}",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>']),h=function(e){return e.getParam("branding",!0,"boolean")}(e)?{type:"label",classes:"branding",html:" "+c}:null;r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},o,h]})}return p(e),e.on("SwitchMode",function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}}(r)),r.renderBefore(n.targetNode).reflow(),function(e){return e.getParam("readonly",!1,"boolean")}(e)&&e.setMode("readonly"),n.width&&se.setStyle(r.getEl(),"width",n.width),e.on("remove",function(){r.remove(),r=null}),g(e,r),M(e),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},ce=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),fe=0,de={id:function(){return"mceu_"+fe++},create:function(e,t,n){var i=document.createElement(e);return c.DOM.setAttribs(i,t),"string"==typeof n?i.innerHTML=n:r.each(n,function(e){e.nodeType&&i.appendChild(e)}),i},createFragment:function(e){return c.DOM.createFragment(e)},getWindowSize:function(){return c.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return c.DOM.getPos(e,t||de.getContainer())},getContainer:function(){return re.container?re.container:document.body},getViewPort:function(e){return c.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,t){return c.DOM.addClass(e,t)},removeClass:function(e,t){return c.DOM.removeClass(e,t)},hasClass:function(e,t){return c.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return c.DOM.toggleClass(e,t,n)},css:function(e,t,n){return c.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return c.DOM.getStyle(e,t,!0)},on:function(e,t,n,r){return c.DOM.bind(e,t,n,r)},off:function(e,t,n){return c.DOM.unbind(e,t,n)},fire:function(e,t,n){return c.DOM.fire(e,t,n)},innerHtml:function(e,t){c.DOM.setHTML(e,t)}},he=function(e){return"static"===de.getRuntimeStyle(e,"position")},pe=function(e){return e.state.get("fixed")};function me(e,t,n){var r,i,o,a,s,u,l,c,f,d;return f=ge(),o=(i=de.getPos(t,N.getUiContainer(e))).x,a=i.y,pe(e)&&he(document.body)&&(o-=f.x,a-=f.y),r=e.getEl(),s=(d=de.getSize(r)).width,u=d.height,l=(d=de.getSize(t)).width,c=d.height,"b"===(n=(n||"").split(""))[0]&&(a+=c),"r"===n[1]&&(o+=l),"c"===n[0]&&(a+=Math.round(c/2)),"c"===n[1]&&(o+=Math.round(l/2)),"b"===n[3]&&(a-=u),"r"===n[4]&&(o-=s),"c"===n[3]&&(a-=Math.round(u/2)),"c"===n[4]&&(o-=Math.round(s/2)),{x:o,y:a,w:s,h:u}}var ge=function(){var e=window,t=Math.max(e.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),n=Math.max(e.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop);return{x:t,y:n,w:t+(e.innerWidth||document.documentElement.clientWidth),h:n+(e.innerHeight||document.documentElement.clientHeight)}},ve=function(e){var t=N.getUiContainer(e);return t&&!pe(e)?function(e){return{x:0,y:0,w:e.scrollWidth-1,h:e.scrollHeight-1}}(t):ge()},be={testMoveRel:function(e,t){for(var n=ve(this),r=0;r<t.length;r++){var i=me(this,e,t[r]);if(pe(this)){if(i.x>0&&i.x+i.w<n.w&&i.y>0&&i.y+i.h<n.h)return t[r]}else if(i.x>n.x&&i.x+i.w<n.w&&i.y>n.y&&i.y+i.h<n.h)return t[r]}return t[0]},moveRel:function(e,t){"string"!=typeof t&&(t=this.testMoveRel(e,t));var n=me(this,e,t);return this.moveTo(n.x,n.y)},moveBy:function(e,t){var n=this.layoutRect();return this.moveTo(n.x+e,n.y+t),this},moveTo:function(e,t){function n(e,t,n){return e<0?0:e+n>t&&(e=t-n)<0?0:e}if(this.settings.constrainToViewport){var r=ve(this),i=this.layoutRect();e=n(e,r.w,i.w),t=n(t,r.h,i.h)}var o=N.getUiContainer(this);return o&&he(o)&&!pe(this)&&(e-=o.scrollLeft,t-=o.scrollTop),o&&(e+=1,t+=1),this.state.get("rendered")?this.layoutRect({x:e,y:t}).repaint():(this.settings.x=e,this.settings.y=t),this.fire("move",{x:e,y:t}),this}},ye=tinymce.util.Tools.resolve("tinymce.util.Class"),we=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),xe=function(e){var t;if(e)return"number"==typeof e?{top:e=e||0,left:e,bottom:e,right:e}:(1===(t=(e=e.split(" ")).length)?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},Ce=function(e,t){function n(t){var n=parseFloat(function(t){var n=e.ownerDocument.defaultView;if(n){var r=n.getComputedStyle(e,null);return r?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),r.getPropertyValue(t)):null}return e.currentStyle[t]}(t));return isNaN(n)?0:n}return{top:n(t+"TopWidth"),right:n(t+"RightWidth"),bottom:n(t+"BottomWidth"),left:n(t+"LeftWidth")}};function _e(){}function Se(e){this.cls=[],this.cls._map={},this.onchange=e||_e,this.prefix=""}r.extend(Se.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){var t=void 0;for(t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),Se.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)t>0&&(e+=" "),e+=this.prefix+this.cls[t];return e};var Te,ke,Ee,Ne=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,Ae=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,Re=/^\s*|\s*$/g,Oe=ye.extend({init:function(e){var t=this.match;function n(e,n,i){var o;function a(e){e&&n.push(e)}return a(function(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}((o=Ne.exec(e.replace(Re,"")))[1])),a(function(e){if(e)return function(t){return t._name===e}}(o[2])),a(function(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}(o[3])),a(function(e,t,n){if(e)return function(r){var i=r[e]?r[e]():"";return t?"="===t?i===n:"*="===t?i.indexOf(n)>=0:"~="===t?(" "+i+" ").indexOf(" "+n+" ")>=0:"!="===t?i!==n:"^="===t?0===i.indexOf(n):"$="===t&&i.substr(i.length-n.length)===n:!!n}}(o[4],o[5],o[6])),a(function(e){var n;if(e)return(e=/(?:not\((.+)\))|(.+)/i.exec(e))[1]?(n=r(e[1],[]),function(e){return!t(e,n)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?n%2==0:"odd"===e?n%2==1:!!t[e]&&t[e]()})}(o[7])),n.pseudo=!!o[7],n.direct=i,n}function r(e,t){var i,o,a,s=[];do{if(Ae.exec(""),(o=Ae.exec(e))&&(e=o[3],s.push(o[1]),o[2])){i=o[3];break}}while(o);for(i&&r(i,t),e=[],a=0;a<s.length;a++)">"!==s[a]&&e.push(n(s[a],[],">"===s[a-1]));return t.push(e),t}this._selectors=r(e,[])},match:function(e,t){var n,r,i,o,a,s,u,l,c,f,d,h,p;for(n=0,r=(t=t||this._selectors).length;n<r;n++){for(p=e,h=0,i=(o=(a=t[n]).length)-1;i>=0;i--)for(l=a[i];p;){if(l.pseudo)for(c=f=(d=p.parent().items()).length;c--&&d[c]!==p;);for(s=0,u=l.length;s<u;s++)if(!l[s](p,c,f)){s=u+1;break}if(s===u){h++;break}if(i===o-1)break;p=p.parent()}if(h===o)return!0}return!1},find:function(e){var t,n,r=[],i=this._selectors;function o(e,t,n){var i,a,s,u,l,c=t[n];for(i=0,a=e.length;i<a;i++){for(l=e[i],s=0,u=c.length;s<u;s++)if(!c[s](l,i,a)){s=u+1;break}if(s===u)n===t.length-1?r.push(l):l.items&&o(l.items(),t,n+1);else if(c.direct)return;l.items&&o(l.items(),t,n)}}if(e.items){for(t=0,n=i.length;t<n;t++)o(e.items(),i[t],0);n>1&&(r=function(e){for(var t,n=[],r=e.length;r--;)(t=e[r]).__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}(r))}return Te||(Te=Oe.Collection),new Te(r)}}),De=Array.prototype.push,Pe=Array.prototype.slice;Ee={length:0,init:function(e){e&&this.add(e)},add:function(e){return r.isArray(e)?De.apply(this,e):e instanceof ke?this.add(e.toArray()):De.call(this,e),this},set:function(e){var t,n=this.length;for(this.length=0,this.add(e),t=this.length;t<n;t++)delete this[t];return this},filter:function(e){var t,n,r,i,o=[];for("string"==typeof e?(e=new Oe(e),i=function(t){return e.match(t)}):i=e,t=0,n=this.length;t<n;t++)i(r=this[t])&&o.push(r);return new ke(o)},slice:function(){return new ke(Pe.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return r.each(this,e),this},toArray:function(){return r.toArray(this)},indexOf:function(e){for(var t=this.length;t--&&this[t]!==e;);return t},reverse:function(){return new ke(r.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n;return void 0!==t?(this.each(function(n){n[e]&&n[e](t)}),this):(n=this[0])&&n[e]?n[e]():void 0},exec:function(e){var t=r.toArray(arguments).slice(1);return this.each(function(n){n[e]&&n[e].apply(n,t)}),this},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},r.each("fire on off show hide append prepend before after reflow".split(" "),function(e){Ee[e]=function(){var t=r.toArray(arguments);return this.each(function(n){e in n&&n[e].apply(n,t)}),this}}),r.each("text name disabled active selected checked visible parent value data".split(" "),function(e){Ee[e]=function(t){return this.prop(e,t)}}),ke=ye.extend(Ee),Oe.Collection=ke;var Ie=ke,Be=function(e){this.create=e.create};Be.create=function(e,t){return new Be({create:function(n,r){var i,o=function(e){n.set(r,e.value)};return n.on("change:"+r,function(n){e.set(t,n.value)}),e.on("change:"+t,o),(i=n._bindings)||(i=n._bindings=[],n.on("destroy",function(){for(var e=i.length;e--;)i[e]()})),i.push(function(){e.off("change:"+t,o)}),e.get(t)}})};var Me=tinymce.util.Tools.resolve("tinymce.util.Observable");function Le(e){return e.nodeType>0}var Fe,He,ze=ye.extend({Mixins:[Me],init:function(e){var t,n;for(t in e=e||{})(n=e[t])instanceof Be&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var n,i,o=this.data[e];if(t instanceof Be&&(t=t.create(this,e)),"object"==typeof e){for(n in e)this.set(n,e[n]);return this}return function e(t,n){var i,o;if(t===n)return!0;if(null===t||null===n)return t===n;if("object"!=typeof t||"object"!=typeof n)return t===n;if(r.isArray(n)){if(t.length!==n.length)return!1;for(i=t.length;i--;)if(!e(t[i],n[i]))return!1}if(Le(t)||Le(n))return t===n;for(i in o={},n){if(!e(t[i],n[i]))return!1;o[i]=!0}for(i in t)if(!o[i]&&!e(t[i],n[i]))return!1;return!0}(o,t)||(this.data[e]=t,i={target:this,name:e,value:t,oldValue:o},this.fire("change:"+e,i),this.fire("change",i)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return Be.create(this,e)},destroy:function(){this.fire("destroy")}}),je={},We={add:function(e){var t=e.parent();if(t){if(!t._layout||t._layout.isNative())return;je[t._id]||(je[t._id]=t),Fe||(Fe=!0,b.requestAnimationFrame(function(){var e,t;for(e in Fe=!1,je)(t=je[e]).state.get("rendered")&&t.reflow();je={}},document.body))}},remove:function(e){je[e._id]&&delete je[e._id]}},Ue="onmousewheel"in document,$e=!1,qe=0,Ve={Statics:{classPrefix:"mce-"},isRtl:function(){return He.rtl},classPrefix:"mce-",init:function(e){var t,n,i=this;function o(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)i.classes.add(e[t])}i.settings=e=r.extend({},i.Defaults,e),i._id=e.id||"mceu_"+qe++,i._aria={role:e.role},i._elmCache={},i.$=ce,i.state=new ze({visible:!0,active:!1,disabled:!1,value:""}),i.data=new ze(e.data),i.classes=new Se(function(){i.state.get("rendered")&&(i.getEl().className=this.toString())}),i.classes.prefix=i.classPrefix,(t=e.classes)&&(i.Defaults&&(n=i.Defaults.classes)&&t!==n&&o(n),o(t)),r.each("title text name visible disabled active value".split(" "),function(t){t in e&&i[t](e[t])}),i.on("click",function(){if(i.disabled())return!1}),i.settings=e,i.borderBox=xe(e.border),i.paddingBox=xe(e.padding),i.marginBox=xe(e.margin),e.hidden&&i.hide()},Properties:"parent,name",getContainerElm:function(){return N.getUiContainer(this)||de.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,r,i,o,a,s,u,l,c=this.settings,f=this.getEl();e=this.borderBox=this.borderBox||Ce(f,"border"),this.paddingBox=this.paddingBox||Ce(f,"padding"),this.marginBox=this.marginBox||Ce(f,"margin"),l=de.getSize(f),s=c.minWidth,u=c.minHeight,i=s||l.width,o=u||l.height,n=c.width,r=c.height,a=void 0!==(a=c.autoResize)?a:!n&&!r,n=n||i,r=r||o;var d=e.left+e.right,h=e.top+e.bottom,p=c.maxWidth||65535,m=c.maxHeight||65535;return this._layoutRect=t={x:c.x||0,y:c.y||0,w:n,h:r,deltaW:d,deltaH:h,contentW:n-d,contentH:r-h,innerW:n-d,innerH:r-h,startMinWidth:s||0,startMinHeight:u||0,minW:Math.min(i,p),minH:Math.min(o,m),maxW:p,maxH:m,autoResize:a,scrollW:0},this._lastLayoutRect={},t},layoutRect:function(e){var t,n,r,i,o,a=this._layoutRect;return a||(a=this.initLayoutRect()),e?(r=a.deltaW,i=a.deltaH,void 0!==e.x&&(a.x=e.x),void 0!==e.y&&(a.y=e.y),void 0!==e.minW&&(a.minW=e.minW),void 0!==e.minH&&(a.minH=e.minH),void 0!==(n=e.w)&&(n=(n=n<a.minW?a.minW:n)>a.maxW?a.maxW:n,a.w=n,a.innerW=n-r),void 0!==(n=e.h)&&(n=(n=n<a.minH?a.minH:n)>a.maxH?a.maxH:n,a.h=n,a.innerH=n-i),void 0!==(n=e.innerW)&&(n=(n=n<a.minW-r?a.minW-r:n)>a.maxW-r?a.maxW-r:n,a.innerW=n,a.w=n+r),void 0!==(n=e.innerH)&&(n=(n=n<a.minH-i?a.minH-i:n)>a.maxH-i?a.maxH-i:n,a.innerH=n,a.h=n+i),void 0!==e.contentW&&(a.contentW=e.contentW),void 0!==e.contentH&&(a.contentH=e.contentH),(t=this._lastLayoutRect).x===a.x&&t.y===a.y&&t.w===a.w&&t.h===a.h||((o=He.repaintControls)&&o.map&&!o.map[this._id]&&(o.push(this),o.map[this._id]=!0),t.x=a.x,t.y=a.y,t.w=a.w,t.h=a.h),this):a},repaint:function(){var e,t,n,r,i,o,a,s,u,l;u=document.createRange?function(e){return e}:Math.round,e=this.getEl().style,r=this._layoutRect,s=this._lastRepaintRect||{},o=(i=this.borderBox).left+i.right,a=i.top+i.bottom,r.x!==s.x&&(e.left=u(r.x)+"px",s.x=r.x),r.y!==s.y&&(e.top=u(r.y)+"px",s.y=r.y),r.w!==s.w&&(l=u(r.w-o),e.width=(l>=0?l:0)+"px",s.w=r.w),r.h!==s.h&&(l=u(r.h-a),e.height=(l>=0?l:0)+"px",s.h=r.h),this._hasBody&&r.innerW!==s.innerW&&(l=u(r.innerW),(n=this.getEl("body"))&&((t=n.style).width=(l>=0?l:0)+"px"),s.innerW=r.innerW),this._hasBody&&r.innerH!==s.innerH&&(l=u(r.innerH),(n=n||this.getEl("body"))&&((t=t||n.style).height=(l>=0?l:0)+"px"),s.innerH=r.innerH),this._lastRepaintRect=s,this.fire("repaint",{},!1)},updateLayoutRect:function(){this.parent()._lastRect=null,de.css(this.getEl(),{width:"",height:""}),this._layoutRect=this._lastRepaintRect=this._lastLayoutRect=null,this.initLayoutRect()},on:function(e,t){var n=this;return Xe(n).on(e,function(e){var t,r;return"string"!=typeof e?e:function(i){return t||n.parentsAndSelf().each(function(n){var i=n.settings.callbacks;if(i&&(t=i[e]))return r=n,!1}),t?t.call(r,i):(i.action=e,void this.fire("execute",i))}}(t)),n},off:function(e,t){return Xe(this).off(e,t),this},fire:function(e,t,n){if((t=t||{}).control||(t.control=this),t=Xe(this).fire(e,t),!1!==n&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},hasEventListeners:function(e){return Xe(this).has(e)},parents:function(e){var t,n=new Ie;for(t=this.parent();t;t=t.parent())n.add(t);return e&&(n=n.filter(e)),n},parentsAndSelf:function(e){return new Ie(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=ce("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this.getEl(this.ariaTarget);return void 0===t?this._aria[e]:(this._aria[e]=t,this.state.get("rendered")&&n.setAttribute("role"===e?e:"aria-"+e,t),this)},encode:function(e,t){return!1!==t&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return He.translate?He.translate(e):e},before:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this),!0),this},after:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this)),this},remove:function(){var e,t,n=this,r=n.getEl(),i=n.parent();if(n.items){var o=n.items().toArray();for(t=o.length;t--;)o[t].remove()}i&&i.items&&(e=[],i.items().each(function(t){t!==n&&e.push(t)}),i.items().set(e),i._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&ce(r).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],r&&r.parentNode&&r.parentNode.removeChild(r),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return ce(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return ce(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,r,i,o=this,a=o.settings;for(r in o.$el=ce(o.getEl()),o.state.set("rendered",!0),a)0===r.indexOf("on")&&o.on(r.substr(2),a[r]);if(o._eventsRoot){for(n=o.parent();!i&&n;n=n.parent())i=n._eventsRoot;if(i)for(r in i._nativeEvents)o._nativeEvents[r]=!0}Ye(o),a.style&&(e=o.getEl())&&(e.setAttribute("style",a.style),e.style.cssText=a.style),o.settings.border&&(t=o.borderBox,o.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var s=o.getRoot();for(var u in s.controlIdLookup||(s.controlIdLookup={}),s.controlIdLookup[o._id]=o,o._aria)o.aria(u,o._aria[u]);!1===o.state.get("visible")&&(o.getEl().style.display="none"),o.bindStates(),o.state.on("change:visible",function(e){var t,n=e.value;o.state.get("rendered")&&(o.getEl().style.display=!1===n?"none":"",o.getEl().getBoundingClientRect()),(t=o.parent())&&(t._lastRect=null),o.fire(n?"show":"hide"),We.add(o)}),o.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t,n,r,i,o,a,s=this.getEl(),u=s.parentNode,l=function(e,t){var n,r,i=s;for(n=r=0;i&&i!==t&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}(0,u);return t=l.x,n=l.y,r=s.offsetWidth,i=s.offsetHeight,o=u.clientWidth,a=u.clientHeight,"end"===e?(t-=o-r,n-=a-i):"center"===e&&(t-=o/2-r/2,n-=a/2-i/2),u.scrollLeft=t,u.scrollTop=n,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var r=n.length;r--;)n[r].rootControl=e;return e},reflow:function(){We.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};function Xe(e){return e._eventDispatcher||(e._eventDispatcher=new we({scope:e,toggleEvent:function(t,n){n&&we.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&Ye(e))}})),e._eventDispatcher}function Ye(e){var t,n,r,i,o,a;function s(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function u(){var e=i._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),i._lastHoverCtrl=null)}function l(t){var n,r,o,a=e.getParentCtrl(t.target),s=i._lastHoverCtrl,u=0;if(a!==s){if(i._lastHoverCtrl=a,(r=a.parents().toArray().reverse()).push(a),s){for((o=s.parents().toArray().reverse()).push(s),u=0;u<o.length&&r[u]===o[u];u++);for(n=o.length-1;n>=u;n--)(s=o[n]).fire("mouseleave",{target:s.getEl()})}for(n=u;n<r.length;n++)(a=r[n]).fire("mouseenter",{target:a.getEl()})}}function c(t){t.preventDefault(),"mousewheel"===t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}if(o=e._nativeEvents){for((r=e.parents().toArray()).unshift(e),t=0,n=r.length;!i&&t<n;t++)i=r[t]._eventsRoot;for(i||(i=r[r.length-1]||e),e._eventsRoot=i,n=t,t=0;t<n;t++)r[t]._eventsRoot=i;var f=i._delegates;for(a in f||(f=i._delegates={}),o){if(!o)return!1;"wheel"!==a||$e?("mouseenter"===a||"mouseleave"===a?i._hasMouseEnter||(ce(i.getEl()).on("mouseleave",u).on("mouseover",l),i._hasMouseEnter=1):f[a]||(ce(i.getEl()).on(a,s),f[a]=!0),o[a]=!1):Ue?ce(e.getEl()).on("mousewheel",c):ce(e.getEl()).on("DOMMouseScroll",c)}}}r.each("text title visible disabled active value".split(" "),function(e){Ve[e]=function(t){return 0===arguments.length?this.state.get(e):(void 0!==t&&this.state.set(e,t),this)}});var Ke=He=ye.extend(Ve),Je=function(e){return!!e.getAttribute("data-mce-tabstop")};function Ge(e){var t,n,r=e.root;function i(e){return e&&1===e.nodeType}try{t=document.activeElement}catch(e){t=document.body}function o(e){return i(e=e||t)?e.getAttribute("role"):null}function a(e){for(var n,r=e||t;r=r.parentNode;)if(n=o(r))return n}function s(e){var n=t;if(i(n))return n.getAttribute("aria-"+e)}function u(e){var t=e.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function l(e){var t=[];return function e(n){if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled){(function(e){return!(!u(e)||e.hidden)||!!Je(e)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(o(e))})(n)&&t.push(n);for(var r=0;r<n.childNodes.length;r++)e(n.childNodes[r])}}(e||r.getEl()),t}function c(e){var t,r;(r=(e=e||n).parents().toArray()).unshift(e);for(var i=0;i<r.length&&!(t=r[i]).settings.ariaRoot;i++);return t}function f(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,n){var r=-1,i=c();n=n||l(i.getEl());for(var o=0;o<n.length;o++)n[o]===t&&(r=o);r+=e,i.lastAriaIndex=f(r,n)}function h(){"tablist"===a()?d(-1,l(t.parentNode)):n.parent().submenu?v():d(-1)}function p(){var e=o(),n=a();"tablist"===n?d(1,l(t.parentNode)):"menuitem"===e&&"menu"===n&&s("haspopup")?b():d(1)}function m(){d(-1)}function g(){var e=o(),t=a();"menuitem"===e&&"menubar"===t?b():"button"===e&&s("haspopup")?b({key:"down"}):d(1)}function v(){n.fire("cancel")}function b(e){e=e||{},n.fire("click",{target:t,aria:e})}return n=r.getParentCtrl(t),r.on("keydown",function(e){function r(e,n){u(t)||Je(t)||"slider"!==o(t)&&!1!==n(e)&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:r(e,h);break;case 39:r(e,p);break;case 38:r(e,m);break;case 40:r(e,g);break;case 27:v();break;case 14:case 13:case 32:r(e,b);break;case 9:!function(e){if("tablist"===a()){var t=l(n.getEl("body"))[0];t&&t.focus()}else d(e.shiftKey?-1:1)}(e),e.preventDefault()}}),r.on("focusin",function(e){t=e.target,n=e.control}),{focusFirst:function(e){var t=c(e),n=l(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?f(t.lastAriaIndex,n):f(0,n)}}}var Qe={},Ze=Ke.extend({init:function(e){var t=this;t._super(e),(e=t.settings).fixed&&t.state.set("fixed",!0),t._items=new Ie,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new Se(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())}),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=f.create((e.layout||"")+"layout"),t.settings.items?t.add(t.settings.items):t.add(t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return(e=Qe[e]=Qe[e]||new Oe(e)).find(this)},add:function(e){return this.items().add(this.create(e)).parent(this),this},focus:function(e){var t,n,r;if(!e||!(n=this.keyboardNav||this.parents().eq(-1)[0].keyboardNav))return r=this.find("*"),this.statusbar&&r.add(this.statusbar.items()),r.each(function(e){if(e.settings.autofocus)return t=null,!1;e.canFocus&&(t=t||e)}),t&&t.focus(),this;n.focusFirst(this)},replace:function(e,t){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===e){r[i]=t;break}i>=0&&((n=t.getEl())&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(e){var t,n=this,i=[];return r.isArray(e)||(e=[e]),r.each(e,function(e){e&&(e instanceof Ke||("string"==typeof e&&(e={type:e}),t=r.extend({},n.settings.defaults,e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=f.create(t)),i.push(e))}),i},renderNew:function(){var e=this;return e.items().each(function(t,n){var r;t.parent(e),t.state.get("rendered")||((r=e.getEl("body")).hasChildNodes()&&n<=r.childNodes.length-1?ce(r.childNodes[n]).before(t.renderHtml()):ce(r).append(t.renderHtml()),t.postRender(),We.add(t))}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){return this.items().set(this.create(e).concat(this.items().toArray())),this.renderNew()},insert:function(e,t,n){var r,i,o;return e=this.create(e),r=this.items(),!n&&t<r.length-1&&(t+=1),t>=0&&t<r.length&&(i=r.slice(0,t).toArray(),o=r.slice(t).toArray(),r.set(i.concat(e,o))),this.renderNew()},fromJSON:function(e){for(var t in e)this.find("#"+t).value(e[t]);return this},toJSON:function(){var e={};return this.find("*").each(function(t){var n=t.name(),r=t.value();n&&void 0!==r&&(e[n]=r)}),e},renderHtml:function(){var e=this._layout,t=this.settings.role;return this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"'+(t?' role="'+this.settings.role+'"':"")+'><div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"},postRender:function(){var e;return this.items().exec("postRender"),this._super(),this._layout.postRender(this),this.state.set("rendered",!0),this.settings.style&&this.$el.css(this.settings.style),this.settings.border&&(e=this.borderBox,this.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),this.parent()||(this.keyboardNav=Ge({root:this})),this},initLayoutRect:function(){var e=this._super();return this._layout.recalc(this),e},recalc:function(){var e=this._layoutRect,t=this._lastRect;if(!t||t.w!==e.w||t.h!==e.h)return this._layout.recalc(this),e=this.layoutRect(),this._lastRect={x:e.x,y:e.y,w:e.w,h:e.h},!0},reflow:function(){var e;if(We.remove(this),this.visible()){for(Ke.repaintControls=[],Ke.repaintControls.map={},this.recalc(),e=Ke.repaintControls.length;e--;)Ke.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),Ke.repaintControls=[]}return this}});function et(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function tt(e,t){var n,r,i,o,a,s,u,l=t.document||document;t=t||{};var c=l.getElementById(t.handle||e);i=function(e){var i,f,d=function(e){var t,n,r,i,o,a,s,u,l=Math.max;return t=e.documentElement,n=e.body,r=l(t.scrollWidth,n.scrollWidth),i=l(t.clientWidth,n.clientWidth),o=l(t.offsetWidth,n.offsetWidth),a=l(t.scrollHeight,n.scrollHeight),s=l(t.clientHeight,n.clientHeight),u=l(t.offsetHeight,n.offsetHeight),{width:r<o?i:r,height:a<u?s:a}}(l);et(e),e.preventDefault(),r=e.button,i=c,s=e.screenX,u=e.screenY,f=window.getComputedStyle?window.getComputedStyle(i,null).getPropertyValue("cursor"):i.runtimeStyle.cursor,n=ce("<div></div>").css({position:"absolute",top:0,left:0,width:d.width,height:d.height,zIndex:2147483647,opacity:1e-4,cursor:f}).appendTo(l.body),ce(l).on("mousemove touchmove",a).on("mouseup touchend",o),t.start(e)},a=function(e){if(et(e),e.button!==r)return o(e);e.deltaX=e.screenX-s,e.deltaY=e.screenY-u,e.preventDefault(),t.drag(e)},o=function(e){et(e),ce(l).off("mousemove touchmove",a).off("mouseup touchend",o),n.remove(),t.stop&&t.stop(e)},this.destroy=function(){ce(c).off()},ce(c).on("mousedown touchstart",i)}var nt,rt,it,ot,at={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var e=this,t=2;function n(){var n,r,i;function o(i,o,a,s,u,l){var c,f,d,h,p,m,g,v;if(f=e.getEl("scroll"+i)){if(g=o.toLowerCase(),v=a.toLowerCase(),ce(e.getEl("absend")).css(g,e.layoutRect()[s]-1),!u)return void ce(f).css("display","none");ce(f).css("display","block"),c=e.getEl("body"),d=e.getEl("scroll"+i+"t"),h=c["client"+a]-2*t,p=(h-=n&&r?f["client"+l]:0)/c["scroll"+a],(m={})[g]=c["offset"+o]+t,m[v]=h,ce(f).css(m),(m={})[g]=c["scroll"+o]*p,m[v]=h*p,ce(d).css(m)}}i=e.getEl("body"),n=i.scrollWidth>i.clientWidth,r=i.scrollHeight>i.clientHeight,o("h","Left","Width","contentW",n,"Height"),o("v","Top","Height","contentH",r,"Width")}e.settings.autoScroll&&(e._hasScroll||(e._hasScroll=!0,function(){function n(n,r,i,o,a){var s,u=e._id+"-scroll"+n,l=e.classPrefix;ce(e.getEl()).append('<div id="'+u+'" class="'+l+"scrollbar "+l+"scrollbar-"+n+'"><div id="'+u+'t" class="'+l+'scrollbar-thumb"></div></div>'),e.draghelper=new tt(u+"t",{start:function(){s=e.getEl("body")["scroll"+r],ce("#"+u).addClass(l+"active")},drag:function(u){var l,c,f,d,h=e.layoutRect();c=h.contentW>h.innerW,f=h.contentH>h.innerH,d=e.getEl("body")["client"+i]-2*t,l=(d-=c&&f?e.getEl("scroll"+n)["client"+a]:0)/e.getEl("body")["scroll"+i],e.getEl("body")["scroll"+r]=s+u["delta"+o]/l},stop:function(){ce("#"+u).removeClass(l+"active")}})}e.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}(),e.on("wheel",function(t){var r=e.getEl("body");r.scrollLeft+=10*(t.deltaX||0),r.scrollTop+=10*t.deltaY,n()}),ce(e.getEl("body")).on("scroll",n)),n())}},st=Ze.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[at],renderHtml:function(){var e=this._layout,t=this.settings.html;return this.preRender(),e.preRender(this),void 0===t?t='<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+e.renderHtml(this)+"</div>":("function"==typeof t&&(t=t.call(this)),this._hasBody=!1),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1" role="group">'+(this._preBodyHtml||"")+t+"</div>"}}),ut={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){if(e<=1||t<=1){var n=de.getWindowSize();e=e<=1?e*n.w:e,t=t<=1?t*n.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this.layoutRect();return this.resizeTo(n.w+e,n.h+t)}},lt=[],ct=[];function ft(e,t){for(;e;){if(e===t)return!0;e=e.parent()}}function dt(e){var t=de.getViewPort().y;function n(t,n){for(var r,i=0;i<lt.length;i++)if(lt[i]!==e)for(r=lt[i].parent();r&&(r=r.parent());)r===e&&lt[i].fixed(t).moveBy(0,n).repaint()}e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>t&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),n(!1,e._autoFixY-t)):(e._autoFixY=e.layoutRect().y,e._autoFixY<t&&(e.fixed(!0).layoutRect({y:0}).repaint(),n(!0,t-e._autoFixY))))}function ht(e,t){var n,r,i=pt.zIndex||65535;if(e)ct.push(t);else for(n=ct.length;n--;)ct[n]===t&&ct.splice(n,1);if(ct.length)for(n=0;n<ct.length;n++)ct[n].modal&&(i++,r=ct[n]),ct[n].getEl().style.zIndex=i,ct[n].zIndex=i,i++;var o=ce("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];r?ce(o).css("z-index",r.zIndex-1):o&&(o.parentNode.removeChild(o),ot=!1),pt.currentZIndex=i}var pt=st.extend({Mixins:[be,ut],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.classes.add("floatpanel"),e.autohide&&(nt||(nt=function(e){2!==e.button&&function(e){for(var t=lt.length;t--;){var n=lt[t],r=n.getParentCtrl(e.target);if(n.settings.autohide){if(r&&(ft(r,n)||n.parent()===r))continue;(e=n.fire("autohide",{target:e.target})).isDefaultPrevented()||n.hide()}}}(e)},ce(document).on("click touchstart",nt)),function(){if(!it){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;it=function(){document.all&&t===e.clientWidth&&n===e.clientHeight||(t=e.clientWidth,n=e.clientHeight,pt.hideAll())},ce(window).on("resize",it)}}(),lt.push(t)),e.autofix&&(rt||(rt=function(){var e;for(e=lt.length;e--;)dt(lt[e])},ce(window).on("scroll",rt)),t.on("move",function(){dt(this)})),t.on("postrender show",function(e){if(e.control===t){var n,r=t.classPrefix;t.modal&&!ot&&((n=ce("#"+r+"modal-block",t.getContainerElm()))[0]||(n=ce('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(t.getContainerElm())),b.setTimeout(function(){n.addClass(r+"in"),ce(t.getEl()).addClass(r+"in")}),ot=!0),ht(!0,t)}}),t.on("show",function(){t.parents().each(function(e){if(e.state.get("fixed"))return t.fixed(!0),!1})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.classes.add("popover").add("bottom").add(t.isRtl()?"end":"start")),t.aria("label",e.ariaLabel),t.aria("labelledby",t._id),t.aria("describedby",t.describedBy||t._id+"-none")},fixed:function(e){if(this.state.get("fixed")!==e){if(this.state.get("rendered")){var t=de.getViewPort();e?this.layoutRect().y-=t.y:this.layoutRect().y+=t.y}this.classes.toggle("fixed",e),this.state.set("fixed",e)}return this},show:function(){var e,t=this._super();for(e=lt.length;e--&&lt[e]!==this;);return-1===e&&lt.push(this),t},hide:function(){return mt(this),ht(!1,this),this._super()},hideAll:function(){pt.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),ht(!1,this)),this},remove:function(){mt(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function mt(e){var t;for(t=lt.length;t--;)lt[t]===e&&lt.splice(t,1);for(t=ct.length;t--;)ct[t]===e&&ct.splice(t,1)}pt.hideAll=function(){for(var e=lt.length;e--;){var t=lt[e];t&&t.settings.autohide&&(t.hide(),lt.splice(e,1))}};var gt=function(e,t,n){var r,o,s=c.DOM,l=function(e){return e.getParam("fixed_toolbar_container")}(e);l&&(o=s.select(l)[0]);var d=function(){if(r&&r.moveRel&&r.visible()&&!r._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),i=0,o=0;if(t){var a=s.getPos(n),u=s.getPos(t);i=Math.max(0,u.x-a.x),o=Math.max(0,u.y-a.y)}r.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(i,o)}},h=function(){r&&(r.show(),d(),s.addClass(e.getBody(),"mce-edit-focus"))},m=function(){r&&(r.hide(),pt.hideAll(),s.removeClass(e.getBody(),"mce-edit-focus"))},v=function(){r?r.visible()||h():(r=t.panel=f.create({type:o?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:function(e,t){return!(!o||t.settings.ui_container)}(0,e),border:1,items:[!1===i(e)?null:{type:"menubar",border:"0 0 1 0",items:Q(e)},O(e,a(e))]}),N.setUiContainer(e,r),p(e),o?r.renderTo(o).reflow():r.renderTo().reflow(),g(e,r),h(),M(e),e.on("nodeChange",d),e.on("ResizeWindow",d),e.on("activate",h),e.on("deactivate",m),e.nodeChanged())};return e.settings.content_editable=!0,e.on("focus",function(){!1===u(e)&&n.skinUiCss?s.styleSheetLoader.load(n.skinUiCss,v,v):v()}),e.on("blur hide",m),e.on("remove",function(){r&&(r.remove(),r=null)}),!1===u(e)&&n.skinUiCss?s.styleSheetLoader.load(n.skinUiCss,ae(e)):ae(e)(),{}};function vt(e,t){var n,r,i=this,o=Ke.classPrefix;i.show=function(a,s){function u(){n&&(ce(e).append('<div class="'+o+"throbber"+(t?" "+o+"throbber-inline":"")+'"></div>'),s&&s())}return i.hide(),n=!0,a?r=b.setTimeout(u,a):u(),i},i.hide=function(){var t=e.lastChild;return b.clearTimeout(r),t&&-1!==t.className.indexOf("throbber")&&t.parentNode.removeChild(t),n=!1,i}}var bt=function(e,t,r){var i=function(e){var t=e.settings,r=t.skin,i=t.skin_url;if(!1!==r){var o=r||"lightgray";i=i?e.documentBaseURI.toAbsolute(i):n.baseURL+"/skins/"+o}return i}(e);return i&&(r.skinUiCss=i+"/skin.min.css",e.contentCSS.push(i+"/content"+(e.inline?".inline":"")+".min.css")),function(e,t){var n;e.on("ProgressState",function(e){n=n||new vt(t.panel.getEl("body")),e.state?n.show(e.time):n.hide()})}(e,t),function(e){return e.getParam("inline",!1,"boolean")}(e)?gt(e,t,r):le(e,t,r)},yt=Ke.extend({Mixins:[be],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'" role="presentation"><div class="'+e+'tooltip-arrow"></div><div class="'+e+'tooltip-inner">'+this.encode(this.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e,t;e=this.getEl().style,t=this._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}}),wt=Ke.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&!1!==wt.tooltips&&(t.on("mouseenter",function(n){var r=t.tooltip().moveTo(-65535);if(n.control===t){var i=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"===i),r.classes.toggle("tooltip-nw","bc-tl"===i),r.classes.toggle("tooltip-ne","bc-tr"===i),r.moveRel(t.getEl(),i)}else r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().remove(),t._tooltip=null})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new yt({type:"tooltip"}),N.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this.settings;this._super(),this.parent()||!e.width&&!e.height||(this.initLayoutRect(),this.repaint()),e.autofocus&&this.focus()},bindStates:function(){var e=this;function t(t){e.aria("disabled",t),e.classes.toggle("disabled",t)}function n(t){e.aria("pressed",t),e.classes.toggle("active",t)}return e.state.on("change:disabled",function(e){t(e.value)}),e.state.on("change:active",function(e){n(e.value)}),e.state.get("disabled")&&t(!0),e.state.get("active")&&n(!0),e._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),xt=wt.extend({Defaults:{value:0},init:function(e){this._super(e),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div class="'+t+'bar-container"><div class="'+t+'bar"></div></div><div class="'+t+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var e=this;function t(t){t=e.settings.filter(t),e.getEl().lastChild.innerHTML=t+"%",e.getEl().firstChild.firstChild.style.width=t+"%"}return e.state.on("change:value",function(e){t(e.value)}),t(e.state.get("value")),e._super()}}),Ct=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")},_t=Ke.extend({Mixins:[be],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new xt),t.on("click",function(e){-1!==e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e,t=this.classPrefix,n="",r="",i="";return this.icon&&(n='<i class="'+t+"ico "+t+"i-"+this.icon+'"></i>'),e=' style="max-width: '+this.maxWidth+"px;"+(this.color?"background-color: "+this.color+';"':'"'),this.closeButton&&(r='<button type="button" class="'+t+'close" aria-hidden="true">Ã</button>'),this.progressBar&&(i=this.progressBar.renderHtml()),'<div id="'+this._id+'" class="'+this.classes+'"'+e+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+this.state.get("text")+"</div>"+i+r+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return b.setTimeout(function(){e.$el.addClass(e.classPrefix+"in"),Ct(e,e.state.get("text"))},100),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().firstChild.innerHTML=t.value,Ct(e,t.value)}),e.progressBar&&(e.progressBar.bindStates(),e.progressBar.state.on("change:value",function(t){Ct(e,e.state.get("text"))})),e._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var e,t;e=this.getEl().style,t=this._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=65534}});var St=[],Tt="";function kt(e){var t,n=ce("meta[name=viewport]")[0];!1!==re.overrideViewPort&&(n||((n=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),(t=n.getAttribute("content"))&&void 0!==Tt&&(Tt=t),n.setAttribute("content",e?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Tt))}var Et=pt.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e),t.isRtl()&&t.classes.add("rtl"),t.classes.add("window"),t.bodyClasses.add("window-body"),t.state.set("fixed",!0),e.buttons&&(t.statusbar=new st({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t)),t.on("click",function(e){var n=t.classPrefix+"close";(de.hasClass(e.target,n)||de.hasClass(e.target.parentNode,n))&&t.close()}),t.on("cancel",function(){t.close()}),t.on("move",function(e){e.control===t&&pt.hideAll()}),t.aria("describedby",t.describedBy||t._id+"-none"),t.aria("label",e.title),t._fullscreen=!1},recalc:function(){var e,t,n,r,i=this.statusbar;this._fullscreen&&(this.layoutRect(de.getWindowSize()),this.layoutRect().contentH=this.layoutRect().innerH),this._super(),e=this.layoutRect(),this.settings.title&&!this._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),this.layoutRect({w:t,x:n}),r=!0),i&&(i.layoutRect({w:this.layoutRect().innerW}).recalc(),(t=i.layoutRect().minW+e.deltaW)>e.w&&(n=e.x-Math.max(0,t-e.w),this.layoutRect({w:t,x:n}),r=!0)),r&&this.recalc()},initLayoutRect:function(){var e,t=this._super(),n=0;if(this.settings.title&&!this._fullscreen){e=this.getEl("head");var r=de.getSize(e);t.headerW=r.width,t.headerH=r.height,n+=t.headerH}this.statusbar&&(n+=this.statusbar.layoutRect().h),t.deltaH+=n,t.minH+=n,t.h+=n;var i=de.getWindowSize();return t.x=this.settings.x||Math.max(0,i.w/2-t.w/2),t.y=this.settings.y||Math.max(0,i.h/2-t.h/2),t},renderHtml:function(){var e=this._layout,t=this._id,n=this.classPrefix,r=this.settings,i="",o="",a=r.html;return this.preRender(),e.preRender(this),r.title&&(i='<div id="'+t+'-head" class="'+n+'window-head"><div id="'+t+'-title" class="'+n+'title">'+this.encode(r.title)+'</div><div id="'+t+'-dragh" class="'+n+'dragh"></div><button type="button" class="'+n+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),r.url&&(a='<iframe src="'+r.url+'" tabindex="-1"></iframe>'),void 0===a&&(a=e.renderHtml(this)),this.statusbar&&(o=this.statusbar.renderHtml()),'<div id="'+t+'" class="'+this.classes+'" hidefocus="1"><div class="'+this.classPrefix+'reset" role="application">'+i+'<div id="'+t+'-body" class="'+this.bodyClasses+'">'+a+"</div>"+o+"</div></div>"},fullscreen:function(e){var t,n,r=this,i=document.documentElement,o=r.classPrefix;if(e!==r._fullscreen)if(ce(window).on("resize",function(){var e;if(r._fullscreen)if(t)r._timer||(r._timer=b.setTimeout(function(){var e=de.getWindowSize();r.moveTo(0,0).resizeTo(e.w,e.h),r._timer=0},50));else{e=(new Date).getTime();var n=de.getWindowSize();r.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-e>50&&(t=!0)}}),n=r.layoutRect(),r._fullscreen=e,e){r._initial={x:n.x,y:n.y,w:n.w,h:n.h},r.borderBox=xe("0"),r.getEl("head").style.display="none",n.deltaH-=n.headerH+2,ce([i,document.body]).addClass(o+"fullscreen"),r.classes.add("fullscreen");var a=de.getWindowSize();r.moveTo(0,0).resizeTo(a.w,a.h)}else r.borderBox=xe(r.settings.border),r.getEl("head").style.display="",n.deltaH+=n.headerH,ce([i,document.body]).removeClass(o+"fullscreen"),r.classes.remove("fullscreen"),r.moveTo(r._initial.x,r._initial.y).resizeTo(r._initial.w,r._initial.h);return r.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.classes.add("in"),t.fire("open")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new tt(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()}),St.push(t),kt(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e;for(this.dragHelper.destroy(),this._super(),this.statusbar&&this.statusbar.remove(),function(e,t){(function(){for(var e=0;e<St.length;e++)if(St[e]._fullscreen)return!0;return!1})()&&!1===t&&ce([document.documentElement,document.body]).removeClass(e+"fullscreen")}(this.classPrefix,!1),e=St.length;e--;)St[e]===this&&St.splice(e,1);kt(St.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});!function(){if(!re.desktop){var e={w:window.innerWidth,h:window.innerHeight};b.setInterval(function(){var t=window.innerWidth,n=window.innerHeight;e.w===t&&e.h===n||(e={w:t,h:n},ce(window).trigger("resize"))},100)}ce(window).on("resize",function(){var e,t,n=de.getWindowSize();for(e=0;e<St.length;e++)t=St[e].layoutRect(),St[e].moveTo(St[e].settings.x||Math.max(0,n.w/2-t.w/2),St[e].settings.y||Math.max(0,n.h/2-t.h/2))})}();var Nt=Et.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(e){var t,n=e.callback||function(){};function r(e,t,r){return{type:"button",text:e,subtype:r?"primary":"",onClick:function(e){e.control.parents()[1].close(),n(t)}}}switch(e.buttons){case Nt.OK_CANCEL:t=[r("Ok",!0,!0),r("Cancel",!1)];break;case Nt.YES_NO:case Nt.YES_NO_CANCEL:t=[r("Yes",1,!0),r("No",0)],e.buttons===Nt.YES_NO_CANCEL&&t.push(r("Cancel",-1));break;default:t=[r("Ok",!0,!0)]}return new Et({padding:20,x:e.x,y:e.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:t,title:e.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:e.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:e.onClose,onCancel:function(){n(!1)}}).renderTo(document.body).reflow()},alert:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,Nt.msgBox(e)},confirm:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,e.buttons=Nt.OK_CANCEL,Nt.msgBox(e)}}}),At=function(e){return{renderUI:function(t){return bt(e,this,t)},resizeTo:function(t,n){return ne(e,t,n)},resizeBy:function(t,n){return function(e,t,n){var r=e.getContentAreaContainer();te(e,r.clientWidth+t,r.clientHeight+n)}(e,t,n)},getNotificationManagerImpl:function(){return function(e){var t=function(e){return e.inline?e.getElement():e.getContentAreaContainer()};return{open:function(n,i){var o,a=r.extend(n,{maxWidth:(o=t(e),de.getSize(o).width)}),s=new _t(a);return s.args=a,a.timeout>0&&(s.timer=setTimeout(function(){s.close(),i()},a.timeout)),s.on("close",function(){i()}),s.renderTo(),s},close:function(e){e.close()},reposition:function(n){U(n,function(e){e.moveTo(0,0)}),function(n){if(n.length>0){var r=n.slice(0,1)[0],i=t(e);r.moveRel(i,"tc-tc"),U(n,function(e,t){t>0&&e.moveRel(n[t-1].getEl(),"bc-tc")})}}(n)},getArgs:function(e){return e.args}}}(e)},getWindowManagerImpl:function(){return{open:function(e,t,n){var r;return e.title=e.title||" ",e.url=e.url||e.file,e.url&&(e.width=parseInt(e.width||320,10),e.height=parseInt(e.height||240,10)),e.body&&(e.items={defaults:e.defaults,type:e.bodyType||"form",items:e.body,data:e.data,callbacks:e.commands}),e.url||e.buttons||(e.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),(r=new Et(e)).on("close",function(){n(r)}),e.data&&r.on("postRender",function(){this.find("*").each(function(t){var n=t.name();n in e.data&&t.value(e.data[n])})}),r.features=e||{},r.params=t||{},r=r.renderTo(document.body).reflow()},alert:function(e,t,n){var r;return(r=Nt.alert(e,function(){t()})).on("close",function(){n(r)}),r},confirm:function(e,t,n){var r;return(r=Nt.confirm(e,function(e){t(e)})).on("close",function(){n(r)}),r},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}}},Rt=ye.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=r.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,r,i,o=this.settings;t=o.firstControlClass,n=o.lastControlClass,e.each(function(e){e.classes.remove(t).remove(n).add(o.controlClass),e.visible()&&(r||(r=e),i=e)}),r&&r.classes.add(t),i&&i.classes.add(n)},renderHtml:function(e){var t="";return this.applyClasses(e.items()),e.items().each(function(e){t+=e.renderHtml()}),t},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),Ot=Rt.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),Dt=wt.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){n.fire("click",e),e.preventDefault()}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&((e=t.style).width=e.height="100%"),this._super()},renderHtml:function(){var e,t,n=this._id,r=this.classPrefix,i=this.state.get("icon"),o=this.state.get("text"),a="",s=this.settings;return(e=s.image)?(i="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o&&(this.classes.add("btn-has-text"),a='<span class="'+r+'txt">'+this.encode(o)+"</span>"),i=i?r+"ico "+r+"i-"+i:"",t="boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"",'<div id="'+n+'" class="'+this.classes+'" tabindex="-1"'+t+'><button id="'+n+'-button" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+e+"></i>":"")+a+"</button></div>"},bindStates:function(){var e=this,t=e.$,n=e.classPrefix+"txt";function r(r){var i=t("span."+n,e.getEl());r?(i[0]||(t("button:first",e.getEl()).append('<span class="'+n+'"></span>'),i=t("span."+n,e.getEl())),i.html(e.encode(r))):i.remove(),e.classes.toggle("btn-has-text",!!r)}return e.state.on("change:text",function(e){r(e.value)}),e.state.on("change:icon",function(t){var n=t.value,i=e.classPrefix;e.settings.icon=n,n=n?i+"ico "+i+"i-"+e.settings.icon:"";var o=e.getEl().firstChild,a=o.getElementsByTagName("i")[0];n?(a&&a===o.firstChild||(a=document.createElement("i"),o.insertBefore(a,o.firstChild)),a.className=n):a&&o.removeChild(a),r(e.state.get("text"))}),e._super()}}),Pt=Dt.extend({init:function(e){e=r.extend({text:"Browse...",multiple:!1,accept:null},e),this._super(e),this.classes.add("browsebutton"),e.multiple&&this.classes.add("multiple")},postRender:function(){var e=this,t=de.create("input",{type:"file",id:e._id+"-browse",accept:e.settings.accept});e._super(),ce(t).on("change",function(t){var n=t.target.files;e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},t.preventDefault(),n.length&&e.fire("change",t)}),ce(t).on("click",function(e){e.stopPropagation()}),ce(e.getEl("button")).on("click",function(e){e.stopPropagation(),t.click()}),e.getEl().appendChild(t)},remove:function(){ce(this.getEl("button")).off(),ce(this.getEl("input")).off(),this._super()}}),It=Ze.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this._layout;return this.classes.add("btn-group"),this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"}}),Bt=wt.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'" unselectable="on" aria-labelledby="'+e+'-al" tabindex="-1"><i class="'+t+"ico "+t+'i-checkbox"></i><span id="'+e+'-al" class="'+t+'label">'+this.encode(this.state.get("text"))+"</span></div>"},bindStates:function(){var e=this;function t(t){e.classes.toggle("checked",t),e.aria("checked",t)}return e.state.on("change:text",function(t){e.getEl("al").firstChild.data=e.translate(t.value)}),e.state.on("change:checked change:value",function(n){e.fire("change"),t(n.value)}),e.state.on("change:icon",function(t){var n=t.value,r=e.classPrefix;if(void 0===n)return e.settings.icon;e.settings.icon=n,n=n?r+"ico "+r+"i-"+e.settings.icon:"";var i=e.getEl().firstChild,o=i.getElementsByTagName("i")[0];n?(o&&o===i.firstChild||(o=document.createElement("i"),i.insertBefore(o,i.firstChild)),o.className=n):o&&i.removeChild(o)}),e.state.get("checked")&&t(!0),e._super()}}),Mt=tinymce.util.Tools.resolve("tinymce.util.VK"),Lt=wt.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){var r=n.target,i=t.getEl();if(ce.contains(i,r)||r===i)for(;r&&r!==i;)r.id&&-1!==r.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode}),t.on("keydown",function(e){var n;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){if("INPUT"===e.target.nodeName){var n=t.state.get("value"),r=e.target.value;r!==n&&(t.state.set("value",r),t.fire("autocomplete",e))}}),t.on("mouseover",function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&-1!==e.target.className.indexOf(t.classPrefix+"status")){var r=t.statusMessage()||"Ok",i=n.text(r).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===i),n.classes.toggle("tooltip-nw","bc-tl"===i),n.classes.toggle("tooltip-ne","bc-tr"===i),n.moveRel(e.target,i)}})},statusLevel:function(e){return arguments.length>0&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return arguments.length>0&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e,t=this,n=t.settings;t.menu||((e=n.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=f.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control===t.menu&&t.focus()}),t.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()===t.value())})}).fire("show"),t.menu.on("select",function(e){t.value(e.control.value())}),t.on("focusin",function(e){"INPUT"===e.target.tagName.toUpperCase()&&t.menu.hide()}),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,n=this.getEl(),r=this.getEl("open"),i=this.layoutRect(),o=0,a=n.firstChild;this.statusLevel()&&"none"!==this.statusLevel()&&(o=parseInt(de.getRuntimeStyle(a,"padding-right"),10)-parseInt(de.getRuntimeStyle(a,"padding-left"),10)),e=r?i.w-de.getSize(r).width-10:i.w-10;var s=document;return s.all&&(!s.documentMode||s.documentMode<=8)&&(t=this.layoutRect().h-2+"px"),ce(a).css({width:e-o,lineHeight:t}),this._super(),this},postRender:function(){var e=this;return ce(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e,t,n,r=this._id,i=this.settings,o=this.classPrefix,a=this.state.get("value")||"",s="",u="";return"spellcheck"in i&&(u+=' spellcheck="'+i.spellcheck+'"'),i.maxLength&&(u+=' maxlength="'+i.maxLength+'"'),i.size&&(u+=' size="'+i.size+'"'),i.subtype&&(u+=' type="'+i.subtype+'"'),n='<i id="'+r+'-status" class="mce-status mce-ico" style="display: none"></i>',this.disabled()&&(u+=' disabled="disabled"'),(e=i.icon)&&"caret"!==e&&(e=o+"ico "+o+"i-"+i.icon),t=this.state.get("text"),(e||t)&&(s='<div id="'+r+'-open" class="'+o+"btn "+o+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+o+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",this.classes.add("has-open")),'<div id="'+r+'" class="'+this.classes+'"><input id="'+r+'-inp" class="'+o+'textbox" value="'+this.encode(a,!1)+'" hidefocus="1"'+u+' placeholder="'+this.encode(i.placeholder)+'" />'+n+s+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,t){var n=this;if(0!==e.length){n.menu?n.menu.items().remove():n.menu=f.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),r.each(e,function(e){var r,i;n.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:(r=e.value,i=e.title,function(){n.fire("selectitem",{title:i,value:r})})})}),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()});var i=n.layoutRect().w;n.menu.layoutRect({w:i,minW:0,maxW:i}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else n.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",function(t){e.getEl("inp").value!==t.value&&(e.getEl("inp").value=t.value)}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e.state.on("change:statusLevel",function(t){var n=e.getEl("status"),r=e.classPrefix,i=t.value;de.css(n,"display","none"===i?"none":""),de.toggleClass(n,r+"i-checkmark","ok"===i),de.toggleClass(n,r+"i-warning","warn"===i),de.toggleClass(n,r+"i-error","error"===i),e.classes.toggle("has-status","none"!==i),e.repaint()}),de.on(e.getEl("status"),"mouseleave",function(){e.tooltip().hide()}),e.on("cancel",function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())});var t=function(e,t){t&&t.items().length>0&&t.items().eq(e)[0].focus()};return e.on("keydown",function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===Mt.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):r===Mt.UP&&(n.preventDefault(),t(-1,e.menu)))}),e._super()},remove:function(){ce(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),Ft=Lt.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.state.get("rendered")&&e.repaintColor(t.value)}),e._super()}}),Ht=Dt.extend({showPanel:function(){var e=this,t=e.settings;if(e.classes.add("opened"),e.panel)e.panel.show();else{var n=t.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,e.panel=new pt(n).on("hide",function(){e.classes.remove("opened")}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}var r=e.panel.testMoveRel(e.getEl(),t.popoverAlign||(e.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));e.panel.classes.toggle("start","l"===r.substr(-1)),e.panel.classes.toggle("end","r"===r.substr(-1));var i="t"===r.substr(0,1);e.panel.classes.toggle("bottom",!i),e.panel.classes.toggle("top",i),e.panel.moveRel(e.getEl(),r)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),zt=c.DOM,jt=Ht.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this._id,t=this.classPrefix,n=this.state.get("text"),r=this.settings.icon?t+"ico "+t+"i-"+this.settings.icon:"",i=this.settings.image?" style=\"background-image: url('"+this.settings.image+"')\"":"",o="";return n&&(this.classes.add("btn-has-text"),o='<span class="'+t+'txt">'+this.encode(n)+"</span>"),'<div id="'+e+'" class="'+this.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+e+'-preview" class="'+t+'preview"></span>'+o+'</button><button type="button" class="'+t+'open" hidefocus="1" tabindex="-1"> <i class="'+t+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(n){n.aria&&"down"===n.aria.key||n.control!==e||zt.getParent(n.target,"."+e.classPrefix+"open")||(n.stopImmediatePropagation(),t.call(e,n))}),delete e.settings.onclick,e._super()}}),Wt=tinymce.util.Tools.resolve("tinymce.util.Color"),Ut=wt.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var e,t,n,r,i,o=this,a=o.color();function s(e,t){var n,r,i=de.getPos(e);return n=t.pageX-i.x,r=t.pageY-i.y,{x:n=Math.max(0,Math.min(n/e.clientWidth,1)),y:r=Math.max(0,Math.min(r/e.clientHeight,1))}}function u(e,t){var a=(360-e.h)/360;de.css(n,{top:100*a+"%"}),t||de.css(i,{left:e.s+"%",top:100-e.v+"%"}),r.style.background=Wt({s:100,v:100,h:e.h}).toHex(),o.color().parse({s:e.s,v:e.v,h:e.h})}function l(t){var n;n=s(r,t),e.s=100*n.x,e.v=100*(1-n.y),u(e),o.fire("change")}function c(n){var r;r=s(t,n),(e=a.toHsv()).h=360*(1-r.y),u(e,!0),o.fire("change")}t=o.getEl("h"),n=o.getEl("hp"),r=o.getEl("sv"),i=o.getEl("svp"),o._repaint=function(){u(e=a.toHsv())},o._super(),o._svdraghelper=new tt(o._id+"-sv",{start:l,drag:l}),o._hdraghelper=new tt(o._id+"-h",{start:c,drag:c}),o._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){if(!arguments.length)return this.color().toHex();this.color().parse(e),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=Wt()),this._color},renderHtml:function(){var e,t=this._id,n=this.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return e='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,'+r+");background: linear-gradient(to bottom,"+r+');">'+function(){var e,t,i,o,a="";for(i="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",e=0,t=(o=r.split(",")).length-1;e<t;e++)a+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/t+"%;"+i+o[e]+",endColorstr="+o[e+1]+");-ms-"+i+o[e]+",endColorstr="+o[e+1]+')"></div>';return a}()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"></div></div>','<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+t+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"></div></div></div></div></div>'+e+"</div>"}}),$t=wt.extend({init:function(e){e=r.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),this._super(e),this.classes.add("dropzone"),e.multiple&&this.classes.add("multiple")},renderHtml:function(){var e,t,n=this.settings;return e={id:this._id,hidefocus:"1"},t=de.create("div",e,"<span>"+this.translate(n.text)+"</span>"),n.height&&de.css(t,"height",n.height+"px"),n.width&&de.css(t,"width",n.width+"px"),t.className=this.classes,t.outerHTML},postRender:function(){var e=this,t=function(t){t.preventDefault(),e.classes.toggle("dragenter"),e.getEl().className=e.classes};e._super(),e.$el.on("dragover",function(e){e.preventDefault()}),e.$el.on("dragenter",t),e.$el.on("dragleave",t),e.$el.on("drop",function(t){if(t.preventDefault(),!e.state.get("disabled")){var n=function(t){var n=e.settings.accept;if("string"!=typeof n)return t;var i=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return r.grep(t,function(e){return i.test(e.name)})}(t.dataTransfer.files);e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},n.length&&e.fire("change",t)}})},remove:function(){this.$el.off(),this._super()}}),qt=wt.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="Â»"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){var n;(n=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t,n,r=e||[],i="",o=this.classPrefix;for(t=0,n=r.length;t<n;t++)i+=(t>0?'<div class="'+o+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+o+"path-item"+(t===n-1?" "+o+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+this._id+"-"+t+'" aria-level="'+(t+1)+'">'+r[t].name+"</div>";return i||(i='<div class="'+o+'path-item">Â </div>'),i}}),Vt=qt.extend({postRender:function(){var e=this,t=e.settings.editor;function n(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}return!1!==t.settings.elementpath&&(e.on("select",function(e){t.focus(),t.selection.select(this.row()[e.index].element),t.nodeChanged()}),t.on("nodeChange",function(r){for(var i=[],o=r.parents,a=o.length;a--;)if(1===o[a].nodeType&&!n(o[a])){var s=t.fire("ResolveName",{name:o[a].nodeName.toLowerCase(),target:o[a]});if(s.isDefaultPrevented()||i.push({name:s.name,element:o[a]}),s.isPropagationStopped())break}e.row(i)})),e._super()}}),Xt=Ze.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this._layout,t=this.classPrefix;return this.classes.add("formitem"),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<div id="'+this._id+'-title" class="'+t+'title">'+this.settings.title+"</div>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"}}),Yt=Ze.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,t=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),t.each(function(t){var n,i=t.settings.label;i&&((n=new Xt(r.extend({items:{type:"label",id:t._id+"-l",text:i,flex:0,forId:t._id,disabled:t.disabled()}},e.settings.formItemDefaults))).type="formitem",t.aria("labelledby",t._id+"-l"),void 0===t.settings.flex&&(t.settings.flex=1),e.replace(t,n),n.add(t))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var e=this;function t(){var t,n,r=0,i=[];if(!1!==e.settings.labelGapCalc)for(("children"===e.settings.labelGapCalc?e.find("formitem"):e.items()).filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;r=n>r?n:r,i.push(t)}),n=e.settings.labelGap||0,t=i.length;t--;)i[t].settings.minWidth=r+n}e._super(),e.on("show",t),t()}}),Kt=Yt.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this._layout,t=this.classPrefix;return this.preRender(),e.preRender(this),'<fieldset id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<legend id="'+this._id+'-title" class="'+t+'fieldset-title">'+this.settings.title+"</legend>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+e.renderHtml(this)+"</div></fieldset>"}}),Jt=0,Gt=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:w(e)}},Qt=Gt,Zt=function(e){var t,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n||(n=!0,t=e.apply(null,r)),t}},en={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},tn=function(e){return function(t){return function(e){return e.dom().nodeType}(t)===e}},nn=(tn(en.ELEMENT),tn(en.TEXT),tn(en.DOCUMENT),Zt(function(){return nn(Qt(document))}),function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return Qt(t)}),rn=("undefined"!=typeof window?window:Function("return this;")(),function(){return on(0,0)}),on=function(e,t){return{major:e,minor:t}},an={nu:on,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?rn():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return on(r(1),r(2))}(e,n)},unknown:rn},sn=function(e,t){return function(){return t===e}},un=function(e){var t=e.current;return{current:t,version:e.version,isEdge:sn("Edge",t),isChrome:sn("Chrome",t),isIE:sn("IE",t),isOpera:sn("Opera",t),isFirefox:sn("Firefox",t),isSafari:sn("Safari",t)}},ln=function(){return un({current:void 0,version:an.unknown()})},cn=un,fn=(w("Edge"),w("Chrome"),w("IE"),w("Opera"),w("Firefox"),w("Safari"),function(e,t){return function(){return t===e}}),dn=function(e){var t=e.current;return{current:t,version:e.version,isWindows:fn("Windows",t),isiOS:fn("iOS",t),isAndroid:fn("Android",t),isOSX:fn("OSX",t),isLinux:fn("Linux",t),isSolaris:fn("Solaris",t),isFreeBSD:fn("FreeBSD",t)}},hn=function(){return dn({current:void 0,version:an.unknown()})},pn=dn,mn=(w("Windows"),w("iOS"),w("Android"),w("Linux"),w("OSX"),w("Solaris"),w("FreeBSD"),function(e,t){var n=String(t).toLowerCase();return function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return k.some(i)}return k.none()}(e,function(e){return e.search(n)})}),gn=function(e,t){return-1!==e.indexOf(t)},vn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,bn=function(e){return function(t){return gn(t,e)}},yn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return gn(e,"edge/")&&gn(e,"chrome")&&gn(e,"safari")&&gn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,vn],search:function(e){return gn(e,"chrome")&&!gn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return gn(e,"msie")||gn(e,"trident")}},{name:"Opera",versionRegexes:[vn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:bn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:bn("firefox")},{name:"Safari",versionRegexes:[vn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(gn(e,"safari")||gn(e,"mobile/"))&&gn(e,"applewebkit")}}],wn=[{name:"Windows",search:bn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return gn(e,"iphone")||gn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:bn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:bn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:bn("linux"),versionRegexes:[]},{name:"Solaris",search:bn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:bn("freebsd"),versionRegexes:[]}],xn={browsers:w(yn),oses:w(wn)},Cn=function(e){var t=xn.browsers(),n=xn.oses(),r=function(e,t){return mn(e,t).map(function(e){var n=an.detect(e.versionRegexes,t);return{current:e.name,version:n}})}(t,e).fold(ln,cn),i=function(e,t){return mn(e,t).map(function(e){var n=an.detect(e.versionRegexes,t);return{current:e.name,version:n}})}(n,e).fold(hn,pn);return{browser:r,os:i,deviceType:function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!r,o=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||o||a&&!0===/mobile/i.test(n),u=e.isiOS()||e.isAndroid(),l=u&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:w(r),isiPhone:w(i),isTablet:w(s),isPhone:w(l),isTouch:w(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:w(c)}}(i,r,e)}},_n=Zt(function(){var e=navigator.userAgent;return Cn(e)}),Sn=en.ELEMENT,Tn=en.DOCUMENT,kn=function(e){return e.nodeType!==Sn&&e.nodeType!==Tn||0===e.childElementCount},En=function(e,t){var n=void 0===t?document:t.dom();return kn(n)?[]:W(n.querySelectorAll(e),Qt)},Nn=function(e,t){var n=void 0===t?document:t.dom();return kn(n)?k.none():k.from(n.querySelector(e)).map(Qt)},An=(_n().browser.isIE(),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),function(e,t){return En(t,e)}),Rn=r.trim,On=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Dn=On("true"),Pn=On("false"),In=function(e,t,n,r,i){return{type:e,title:t,url:n,level:r,attach:i}},Bn=function(e){return e.innerText||e.textContent},Mn=function(e){return function(e){return e&&"A"===e.nodeName&&(e.id||e.name)}(e)&&Fn(e)},Ln=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},Fn=function(e){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return Dn(e)}return!1}(e)&&!Pn(e)},Hn=function(e){return Ln(e)&&Fn(e)},zn=function(e){var t=function(e){return e.id?e.id:(t=(new Date).getTime(),"h_"+Math.floor(1e9*Math.random())+ ++Jt+String(t));var t}(e);return In("header",Bn(e),"#"+t,function(e){return Ln(e)?parseInt(e.nodeName.substr(1),10):0}(e),function(){e.id=t})},jn=function(e){var t=e.id||e.name,n=Bn(e);return In("anchor",n||"#"+t,"#"+t,0,y)},Wn=function(e){return Rn(e.title).length>0},Un=function(e){var t=function(e){var t;return t="h1,h2,h3,h4,h5,h6,a:not([href])",W(An(Qt(e),t),function(e){return e.dom()})}(e);return $(W($(t,Hn),zn).concat(W($(t,Mn),jn)),Wn)},$n={},qn=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},Vn=function(e,t){return{title:e,value:{title:e,url:t,attach:y}}},Xn=function(e,t,n){var r=t in e?e[t]:n;return!1===r?null:r},Yn=function(e,t,n,i){var o,a,s,u={title:"-"},l=function(e){var i=e.hasOwnProperty(n)?e[n]:[],o=$(i,function(e){return function(e,t){return!j(t,function(t){return t.url===e})}(e,t)});return r.map(o,function(e){return{title:e,value:{title:e,url:e,attach:y}}})},c=function(e){return function(e){return r.map(e,qn)}($(t,function(t){return t.type===e}))};return!1===i.typeahead_urls?[]:"file"===n?(o=[Kn(e,l($n)),Kn(e,c("header")),Kn(e,function(){var e=c("anchor"),t=Xn(i,"anchor_top","#top"),n=Xn(i,"anchor_bottom","#bottom");return null!==t&&e.unshift(Vn("<top>",t)),null!==n&&e.push(Vn("<bottom>",n)),e}())],a=function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(u,t)},s=[],U(o,function(e){s=a(s,e)}),s):Kn(e,l($n))},Kn=function(e,t){var n=e.toLowerCase(),i=r.grep(t,function(e){return-1!==e.title.toLowerCase().indexOf(n)});return 1===i.length&&i[0].title===e?[]:i},Jn=Lt.extend({Statics:{clearHistory:function(){$n={}}},init:function(e){var t,i,o,a=this,s=window.tinymce?window.tinymce.activeEditor:n.activeEditor,u=s.settings,l=e.filetype;e.spellcheck=!1,(o=u.file_picker_types||u.file_browser_callback_types)&&(o=r.makeMap(o,/[, ]/)),o&&!o[l]||(!(i=u.file_picker_callback)||o&&!o[l]?!(i=u.file_browser_callback)||o&&!o[l]||(t=function(){i(a.getEl("inp").id,a.value(),l,window)}):t=function(){var e=a.fire("beforecall").meta;e=r.extend({filetype:l},e),i.call(s,function(e,t){a.value(e).fire("change",{meta:t})},a.value(),e)}),t&&(e.icon="browse",e.onaction=t),a._super(e),a.classes.add("filepicker"),function(e,t,n,r){var i=function(i){var o=Un(n),a=Yn(i,o,r,t);e.showAutoComplete(a,i)};e.on("autocomplete",function(){i(e.value())}),e.on("selectitem",function(t){var n=t.value;e.value(n.url);var i=function(e){var t=n.title;return t.raw?t.raw:t}();"image"===r?e.fire("change",{meta:{alt:i,attach:n.attach}}):e.fire("change",{meta:{text:i,attach:n.attach}}),e.focus()}),e.on("click",function(t){0===e.value().length&&"INPUT"===t.target.nodeName&&i("")}),e.on("PostRender",function(){e.getRoot().on("submit",function(t){t.isDefaultPrevented()||function(e,t){var n,r,i,o=$n[t];/^https?/.test(e)&&(o?(n=o,r=e,i=z(n,r),-1===i?k.none():k.some(i)).isNone()&&($n[t]=o.slice(0,5).concat(e)):$n[t]=[e])}(e.value(),r)})})}(a,u,s.getBody(),l),function(e,t,n){var r=t.filepicker_validator_handler;r&&e.state.on("change:value",function(t){var i;0!==(i=t.value).length?r({url:i,type:n},function(t){var n=function(e){var t=e.status,n=e.message;return"valid"===t?{status:"ok",message:n}:"unknown"===t?{status:"warn",message:n}:"invalid"===t?{status:"warn",message:n}:{status:"none",message:""}}(t);e.statusMessage(n.message),e.statusLevel(n.status)}):e.statusLevel("none")})}(a,u,l)}}),Gn=Ot.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}}),Qn=Ot.extend({recalc:function(e){var t,n,r,i,o,a,s,u,l,c,f,d,h,p,m,g,v,b,y,w,x,C,_,S,T,k,E,N,A,R,O,D,P,I,B,M,L,F=[],H=Math.max,z=Math.min;for(r=e.items().filter(":visible"),i=e.layoutRect(),o=e.paddingBox,a=e.settings,d=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,u=e.isRtl()?a.pack||"end":a.pack,l=a.spacing||0,"row-reversed"!==d&&"column-reverse"!==d||(r=r.set(r.toArray().reverse()),d=d.split("-")[0]),"column"===d?(S="y",C="h",_="minH",T="maxH",E="innerH",k="top",N="deltaH",A="contentH",I="left",D="w",R="x",O="innerW",P="minW",B="right",M="deltaW",L="contentW"):(S="x",C="w",_="minW",T="maxW",E="innerW",k="left",N="deltaW",A="contentW",I="top",D="h",R="y",O="innerH",P="minH",B="bottom",M="deltaH",L="contentH"),f=i[E]-o[k]-o[k],x=c=0,t=0,n=r.length;t<n;t++)p=(h=r[t]).layoutRect(),m=h.settings.flex,f-=t<n-1?l:0,m>0&&(c+=m,p[T]&&F.push(h),p.flex=m),f-=p[_],(g=o[I]+p[P]+o[B])>x&&(x=g);if((y={})[_]=f<0?i[_]-f+i[N]:i[E]-f+i[N],y[P]=x+i[M],y[A]=i[E]-f,y[L]=x,y.minW=z(y.minW,i.maxW),y.minH=z(y.minH,i.maxH),y.minW=H(y.minW,i.startMinWidth),y.minH=H(y.minH,i.startMinHeight),!i.autoResize||y.minW===i.minW&&y.minH===i.minH){for(b=f/c,t=0,n=F.length;t<n;t++)v=(p=(h=F[t]).layoutRect())[T],(g=p[_]+p.flex*b)>v?(f-=p[T]-p[_],c-=p.flex,p.flex=0,p.maxFlexSize=v):p.maxFlexSize=0;for(b=f/c,w=o[k],y={},0===c&&("end"===u?w=f+o[k]:"center"===u?(w=Math.round(i[E]/2-(i[E]-f)/2)+o[k])<0&&(w=o[k]):"justify"===u&&(w=o[k],l=Math.floor(f/(r.length-1)))),y[R]=o[I],t=0,n=r.length;t<n;t++)g=(p=(h=r[t]).layoutRect()).maxFlexSize||p[_],"center"===s?y[R]=Math.round(i[O]/2-p[D]/2):"stretch"===s?(y[D]=H(p[P]||0,i[O]-o[I]-o[B]),y[R]=o[I]):"end"===s&&(y[R]=i[O]-p[D]-o.top),p.flex>0&&(g+=p.flex*b),y[C]=g,y[S]=w,h.layoutRect(y),h.recalc&&h.recalc(),w+=g+l}else if(y.w=y.minW,y.h=y.minH,e.layoutRect(y),this.recalc(e),null===e._lastRect){var j=e.parent();j&&(j._lastRect=null,j.recalc())}}}),Zn=Rt.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}}),er=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},tr=function(e,t,n){var r=function(e){n(e,t)};e.formatter?e.formatter.formatChanged(t,r):e.on("init",function(){e.formatter.formatChanged(t,r)})},nr=function(e,t){return function(n){tr(e,t,function(e){n.control.active(e)})}},rr=function(e){return e?e.split(",")[0]:""},ir=function(e){e.addButton("fontselect",function(){var t=function(e){var t=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return r.map(t,function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}})}(e);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:function(e,t){return function(){var n=this;n.state.set("value",null),e.on("init nodeChange",function(i){var o=e.queryCommandValue("FontName"),a=function(e,t){var n,i=o?o.toLowerCase():"";return r.each(e,function(e){e.value.toLowerCase()===i&&(n=e.value)}),r.each(e,function(e){n||rr(e.value).toLowerCase()!==rr(i).toLowerCase()||(n=e.value)}),n}(t);n.value(a||null),!a&&o&&n.text(rr(o))})}}(e,t),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}})},or=function(e,t){return/[0-9.]+px$/.test(e)?function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(72*parseInt(e,10)/96,t||0)+"pt":e},ar=function(e,t,n){var i;return r.each(e,function(e){e.value===n?i=n:e.value===t&&(i=t)}),i},sr=function(e){!function(e){e.addButton("fontsizeselect",function(){var t=function(e){var t=e.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return r.map(t.split(" "),function(e){var t=e,n=e,r=e.split("=");return r.length>1&&(t=r[0],n=r[1]),{text:t,value:n}})}(e);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:function(e,t){return function(){var n=this;e.on("init nodeChange",function(r){var i,o,a,s;if(i=e.queryCommandValue("FontSize"))for(a=3;!s&&a>=0;a--)o=or(i,a),s=ar(t,o,i);n.value(s||null),s||n.text(o)})}}(e,t),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}})}(e)},ur=function(e,t){var n=t.length;return r.each(t,function(t){t.menu&&(t.hidden=0===ur(e,t.menu));var r=t.format;r&&(t.hidden=!e.formatter.canApply(r)),t.hidden&&n--}),n},lr=function(e,t){var n=t.items().length;return t.items().each(function(t){t.menu&&t.visible(lr(e,t.menu)>0),!t.menu&&t.settings.menu&&t.visible(ur(e,t.settings.menu)>0);var r=t.settings.format;r&&t.visible(e.formatter.canApply(r)),t.visible()||n--}),n},cr=function(e){var t=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");e.addMenuItem("blockformats",{text:"Blocks",menu:function(e,t){return r.map(t,function(t){return{text:t[0],onclick:er(e,t[1]),textStyle:function(){return e.formatter.getCssText(t[1])}}})}(e,t)}),e.addButton("formatselect",function(e,t){return function(){var n=[];return r.each(t,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:t[0][0],values:n,fixedWidth:!0,onselect:function(t){if(t.control){var n=t.control.value();er(e,n)()}},onPostRender:function(e,t,n){return function(){var n=this;e.on("nodeChange",function(i){var o=e.formatter,a=null;r.each(i.parents,function(e){if(r.each(t,function(t){if(o.matchNode(e,t.value)&&(a=t.value),a)return!1}),a)return!1}),n.value(a)})}}(e,n)}}}(e,t))},fr=function(e,t){var n,i;if("string"==typeof t)i=t.split(" ");else if(r.isArray(t))return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);X.apply(t,e[n])}return t}(r.map(t,function(t){return fr(e,t)}));return n=r.grep(i,function(t){return"|"===t||t in e.menuItems}),r.map(n,function(t){return"|"===t?{text:"-"}:e.menuItems[t]})},dr=function(e){return e&&"-"===e.text},hr=function(e){var t=e.settings.insert_button_items;return function(e){var t=$(e,function(e,t,n){return!dr(e)||!dr(n[t-1])});return $(t,function(e,t,n){return!dr(e)||t>0&&t<n.length-1})}(t?fr(e,t):function(e,t){var n=[{text:"-"}],i=r.grep(e.menuItems,function(e){return"insert"===e.context});return r.each(i,function(e){"before"===e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"===e.separator&&n.push({text:"|"})}),n}(e))},pr=function(e){(function(e){!function(e){r.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{active:!1,tooltip:t,onPostRender:nr(e,n),onclick:er(e,n)})})}(e),function(e){r.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})})}(e),function(e){r.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:nr(e,n)})})}(e)})(e),function(e){r.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:er(e,"code")})}(e)},mr=function(e,t){return function(){var n=this,r=function(){var n="redo"===t?"hasRedo":"hasUndo";return!!e.undoManager&&e.undoManager[n]()};n.disabled(!r()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){n.disabled(e.readonly||!r())})}},gr={setup:function(e){!function(e){e.rtl&&(Ke.rtl=!0)}(e),function(e){e.on("mousedown",function(){pt.hideAll()})}(e),function(e){e.settings.ui_container&&(re.container=function(e,t){return Nn(t,e)}(Qt(document.body),e.settings.ui_container).fold(w(null),function(e){return e.dom()}))}(e),wt.tooltips=!re.iOS,Ke.translate=function(e){return n.translate(e)},cr(e),function(e){var t=["alignleft","aligncenter","alignright","alignjustify"],n=[{text:"Left",icon:"alignleft",onclick:er(e,"alignleft")},{text:"Center",icon:"aligncenter",onclick:er(e,"aligncenter")},{text:"Right",icon:"alignright",onclick:er(e,"alignright")},{text:"Justify",icon:"alignjustify",onclick:er(e,"alignjustify")}];e.addMenuItem("align",{text:"Align",menu:n}),e.addButton("align",{type:"menubutton",icon:"alignleft",menu:n,onShowMenu:function(n){var i=n.control.menu;r.each(t,function(t,n){i.items().eq(n).each(function(n){return n.active(e.formatter.match(t))})})},onPostRender:function(n){var i=n.control;r.each(t,function(t,n){tr(e,t,function(e){i.icon("alignleft"),e&&i.icon(t)})})}}),r.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:nr(e,n)})})}(e),pr(e),function(e){!function(e){e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:mr(e,"undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:mr(e,"redo"),cmd:"redo"})}(e),function(e){e.addButton("undo",{tooltip:"Undo",onPostRender:mr(e,"undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:mr(e,"redo"),cmd:"redo"})}(e)}(e),sr(e),function(e){ir(e)}(e),function(e){var t=function(e){var t=0,n=[],i=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],o=function(e){var i=[];if(e)return r.each(e,function(e){var r={text:e.title,icon:e.icon};if(e.items)r.menu=o(e.items);else{var a=e.format||"custom"+t++;e.format||(e.name=a,n.push(e)),r.format=a,r.cmd=e.cmd}i.push(r)}),i};return e.on("init",function(){r.each(n,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:e.settings.style_formats_merge?e.settings.style_formats?o(i.concat(e.settings.style_formats)):o(i):o(e.settings.style_formats||i),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,r;(n=t.settings.format)&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),(r=t.settings.cmd)&&t.active(e.queryCommandState(r))})},onclick:function(){this.settings.format&&er(e,this.settings.format)(),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}(e);!function(e,t){e.addMenuItem("formats",{text:"Formats",menu:t})}(e,t),function(e,t){e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t,onShowMenu:function(){e.settings.style_formats_autohide&&lr(e,this.menu)}})}(e,t)}(e),function(e){!function(e){e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:function(e){return function(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}}(e),cmd:"mceToggleVisualAid"})}(e)}(e),function(e){!function(e){e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(hr(e)),this.menu.renderNew()}})}(e)}(e)}},vr=Ot.extend({recalc:function(e){var t,n,r,i,o,a,s,u,l,c,f,d,h,p,m,g,v,b,y,w,x,C,_,S,T,k,E,N,A=[],R=[];t=e.settings,i=e.items().filter(":visible"),o=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(i.length)),n=Math.ceil(i.length/r),b=t.spacingH||t.spacing||0,y=t.spacingV||t.spacing||0,w=t.alignH||t.align,x=t.alignV||t.align,g=e.paddingBox,N="reverseRows"in t?t.reverseRows:e.isRtl(),w&&"string"==typeof w&&(w=[w]),x&&"string"==typeof x&&(x=[x]);for(f=0;f<r;f++)A.push(0);for(d=0;d<n;d++)R.push(0);for(d=0;d<n;d++)for(f=0;f<r&&(c=i[d*r+f]);f++)S=(l=c.layoutRect()).minW,T=l.minH,A[f]=S>A[f]?S:A[f],R[d]=T>R[d]?T:R[d];for(k=o.innerW-g.left-g.right,C=0,f=0;f<r;f++)C+=A[f]+(f>0?b:0),k-=(f>0?b:0)+A[f];for(E=o.innerH-g.top-g.bottom,_=0,d=0;d<n;d++)_+=R[d]+(d>0?y:0),E-=(d>0?y:0)+R[d];if(C+=g.left+g.right,_+=g.top+g.bottom,(u={}).minW=C+(o.w-o.innerW),u.minH=_+(o.h-o.innerH),u.contentW=u.minW-o.deltaW,u.contentH=u.minH-o.deltaH,u.minW=Math.min(u.minW,o.maxW),u.minH=Math.min(u.minH,o.maxH),u.minW=Math.max(u.minW,o.startMinWidth),u.minH=Math.max(u.minH,o.startMinHeight),!o.autoResize||u.minW===o.minW&&u.minH===o.minH){var O;o.autoResize&&((u=e.layoutRect(u)).contentW=u.minW-o.deltaW,u.contentH=u.minH-o.deltaH),O="start"===t.packV?0:E>0?Math.floor(E/n):0;var D=0,P=t.flexWidths;if(P)for(f=0;f<P.length;f++)D+=P[f];else D=r;var I=k/D;for(f=0;f<r;f++)A[f]+=P?P[f]*I:I;for(p=g.top,d=0;d<n;d++){for(h=g.left,s=R[d]+O,f=0;f<r&&(c=i[N?d*r+r-1-f:d*r+f]);f++)m=c.settings,l=c.layoutRect(),a=Math.max(A[f],l.startMinWidth),l.x=h,l.y=p,"center"===(v=m.alignH||(w?w[f]||w[0]:null))?l.x=h+a/2-l.w/2:"right"===v?l.x=h+a-l.w:"stretch"===v&&(l.w=a),"center"===(v=m.alignV||(x?x[f]||x[0]:null))?l.y=p+s/2-l.h/2:"bottom"===v?l.y=p+s-l.h:"stretch"===v&&(l.h=s),c.layoutRect(l),h+=a+b,c.recalc&&c.recalc();p+=s+y}}else if(u.w=u.minW,u.h=u.minH,e.layoutRect(u),this.recalc(e),null===e._lastRect){var B=e.parent();B&&(B._lastRect=null,B.recalc())}}}),br=wt.extend({renderHtml:function(){return this.classes.add("iframe"),this.canFocus=!1,'<iframe id="'+this._id+'" class="'+this.classes+'" tabindex="-1" src="'+(this.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):b.setTimeout(function(){n.html(e)}),this}}),yr=wt.extend({init:function(e){this._super(e),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+this.encode(this.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+e+"ico "+e+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e.state.on("change:help",function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),wr=wt.extend({init:function(e){this._super(e),this.classes.add("widget").add("label"),this.canFocus=!1,e.multiline&&this.classes.add("autoscroll"),e.strong&&this.classes.add("strong")},initLayoutRect:function(){var e=this._super();return this.settings.multiline&&(de.getSize(this.getEl()).width>e.maxW&&(e.minW=e.maxW,this.classes.add("multiline")),this.getEl().style.width=e.minW+"px",e.startMinH=e.h=e.minH=Math.min(e.maxH,de.getSize(this.getEl()).height)),e},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this.settings.forId,r=this.settings.html?this.settings.html:this.encode(this.state.get("text"));return!n&&(t=this.settings.forName)&&(e=this.getRoot().find("#"+t)[0])&&(n=e._id),n?'<label id="'+this._id+'" class="'+this.classes+'"'+(n?' for="'+n+'"':"")+">"+r+"</label>":'<span id="'+this._id+'" class="'+this.classes+'">'+r+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),xr=Ze.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){this._super(e),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(e){e.classes.add("toolbar-item")}),this._super()}}),Cr=xr.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),_r=Dt.extend({init:function(e){this._renderOpen=!0,this._super(e),e=this.settings,this.classes.add("menubtn"),e.fixedWidth&&this.classes.add("fixed-width"),this.aria("haspopup",!0),this.state.set("menu",e.menu||this.render())},showMenu:function(e){var t,n=this;if(n.menu&&n.menu.visible()&&!1!==e)return n.hideMenu();n.menu||(t=n.state.get("menu")||[],n.classes.add("opened"),t.length?t={type:"menu",animate:!0,items:t}:(t.type=t.type||"menu",t.animate=!0),t.renderTo?n.menu=t.parent(n).show().renderTo():n.menu=f.create(t).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){"hide"===e.type&&e.control.parent()===n&&n.classes.remove("opened-under"),e.control===n.menu&&(n.activeMenu("show"===e.type),n.classes.toggle("opened","show"===e.type)),n.aria("expanded","show"===e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);var r=n.menu.layoutRect(),i=n.$el.offset().top+n.layoutRect().h;i>r.y&&i<r.y+r.h&&n.classes.add("opened-under"),n.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e,t=this._id,n=this.classPrefix,r=this.settings.icon,i=this.state.get("text"),o="";return(e=this.settings.image)?(r="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",i&&(this.classes.add("btn-has-text"),o='<span class="'+n+'txt">'+this.encode(i)+"</span>"),r=this.settings.icon?n+"ico "+n+"i-"+r:"",this.aria("role",this.parent()instanceof Cr?"menuitem":"button"),'<div id="'+t+'" class="'+this.classes+'" tabindex="-1" aria-labelledby="'+t+'"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+e+"></i>":"")+o+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())}),e.on("mouseenter",function(t){var n,r=t.control,i=e.parent();r&&i&&r instanceof _r&&r.parent()===i&&(i.items().filter("MenuButton").each(function(e){e.hideMenu&&e!==r&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(r.focus(),r.showMenu()))}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Sr=pt.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var t=e.items,n=t.length;n--;)t[n]=r.extend({},e.itemDefaults,t[n]);this._super(e),this.classes.add("menu"),e.animate&&11!==re.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var e,t=this;function n(){t.throbber&&(t.throbber.hide(),t.throbber=null)}t.settings.itemsFactory&&(t.throbber||(t.throbber=new vt(t.getEl("body"),!0),0===t.items().length?(t.throbber.show(),t.fire("loading")):t.throbber.show(100,function(){t.items().remove(),t.fire("loading")}),t.on("hide close",n)),t.requestTime=e=(new Date).getTime(),t.settings.itemsFactory(function(r){0!==r.length?t.requestTime===e&&(t.getEl().style.width="",t.getEl("body").style.width="",n(),t.items().remove(),t.getEl("body").innerHTML="",t.add(r),t.renderNew(),t.fire("loaded")):t.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return e._hasIcons=!0,!1}),e.settings.itemsFactory&&e.on("postrender",function(){e.settings.itemsFactory&&e.load()}),e.on("show hide",function(t){t.control===e&&("show"===t.type?b.setTimeout(function(){e.classes.add("in")},0):e.classes.remove("in"))}),e._super()}}),Tr=_r.extend({init:function(e){var t,n,r,i,o=this;o._super(e),e=o.settings,o._values=t=e.values,t&&(void 0!==e.value&&function t(i){for(var a=0;a<i.length;a++){if(n=i[a].selected||e.value===i[a].value)return r=r||i[a].text,o.state.set("value",i[a].value),!0;if(i[a].menu&&t(i[a].menu))return!0}}(t),!n&&t.length>0&&(r=t[0].text,o.state.set("value",t[0].value)),o.state.set("menu",t)),o.state.set("text",e.text||r),o.classes.add("listbox"),o.on("select",function(t){var n=t.control;i&&(t.lastControl=i),e.multiple?n.active(!n.active()):o.value(t.control.value()),i=n})},value:function(e){return 0===arguments.length?this.state.get("value"):void 0===e?this:(this.settings.values&&!function t(n){return j(n,function(n){return n.menu?t(n.menu):n.value===e})}(this.settings.values)?null===e&&this.state.set("value",null):this.state.set("value",e),this)},bindStates:function(){var e=this;return e.on("show",function(t){var n,r;n=t.control,r=e.value(),n instanceof Sr&&n.items().each(function(e){e.hasMenus()||e.active(e.value()===r)})}),e.state.on("change:value",function(t){var n=function e(t,n){var r;if(t)for(var i=0;i<t.length;i++){if(t[i].value===n)return t[i];if(t[i].menu&&(r=e(t[i].menu,n)))return r}}(e.state.get("menu"),t.value);n?e.text(n.text):e.text(e.settings.text)}),e._super()}}),kr=wt.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t;this._super(e),e=this.settings,this.classes.add("menu-item"),e.menu&&this.classes.add("menu-item-expand"),e.preview&&this.classes.add("menu-item-preview"),"-"!==(t=this.state.get("text"))&&"|"!==t||(this.classes.add("menu-item-sep"),this.aria("role","separator"),this.state.set("text","-")),e.selectable&&(this.aria("role","menuitemcheckbox"),this.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||this.classes.add("menu-item-normal"),this.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&this.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,t=this,n=t.settings,r=t.parent();if(r.items().each(function(e){e!==t&&e.hideMenu()}),n.menu){(e=t.menu)?e.show():((e=n.menu).length?e={type:"menu",items:e}:e.type=e.type||"menu",r.settings.itemDefaults&&(e.itemDefaults=r.settings.itemDefaults),(e=t.menu=f.create(e).parent(t).renderTo()).reflow(),e.on("cancel",function(n){n.stopPropagation(),t.focus(),e.hide()}),e.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(n){n.control===e&&t.classes.remove("selected")}),e.submenu=!0),e._parentMenu=r,e.classes.add("menu-sub");var i=e.testMoveRel(t.getEl(),t.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(t.getEl(),i),e.rel=i,i="menu-sub-"+i,e.classes.remove(e._lastRel).add(i),e._lastRel=i,t.classes.add("selected"),t.aria("expanded",!0)}},hideMenu:function(){return this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide(),this.aria("expanded",!1)),this},renderHtml:function(){var e,t=this._id,n=this.settings,r=this.classPrefix,i=this.state.get("text"),o=this.settings.icon,a="",s=n.shortcut,u=this.encode(n.url);function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(e){var t=n.match||"";return t?e.replace(new RegExp(l(t),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function f(e){return e.replace(new RegExp(l("!mce~match["),"g"),"<b>").replace(new RegExp(l("]mce~match!"),"g"),"</b>")}return o&&this.parent().classes.add("menu-has-icons"),n.image&&(a=" style=\"background-image: url('"+n.image+"')\""),s&&(s=function(e){var t,n,r;for(r=re.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)(n=r[e[t].toLowerCase()])&&(e[t]=n);return e.join("+")}(s)),o=r+"ico "+r+"i-"+(this.settings.icon||"none"),e="-"!==i?'<i class="'+o+'"'+a+"></i>Â ":"",i=f(this.encode(c(i))),u=f(this.encode(c(u))),'<div id="'+t+'" class="'+this.classes+'" tabindex="-1">'+e+("-"!==i?'<span id="'+t+'-text" class="'+r+'text">'+i+"</span>":"")+(s?'<div id="'+t+'-shortcut" class="'+r+'menu-shortcut">'+s+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+(u?'<div class="'+r+'menu-item-link">'+u+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=e.getEl("text");r&&(r.setAttribute("style",n),e._textStyle=n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),b.requestAnimationFrame(function(){e.parent().hideAll()})))}),e._super(),e},hover:function(){return this.parent().items().each(function(e){e.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(e){return function(e,t){var n=e._textStyle;if(n){var r=e.getEl("text");r.setAttribute("style",n),t&&(r.style.color="",r.style.backgroundColor="")}}(this,e),void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Er=Bt.extend({Defaults:{classes:"radio",role:"radio"}}),Nr=wt.extend({renderHtml:function(){var e=this.classPrefix;return this.classes.add("resizehandle"),"both"===this.settings.direction&&this.classes.add("resizehandle-both"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><i class="'+e+"ico "+e+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new tt(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!==e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function Ar(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}var Rr=wt.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,t="";return e=Ar(this._options),this.size&&(t=' size = "'+this.size+'"'),'<select id="'+this._id+'" class="'+this.classes+'"'+t+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(t){e.getEl().innerHTML=Ar(t.value)}),e._super()}});function Or(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function Dr(e,t,n){e.setAttribute("aria-"+t,n)}function Pr(e,t){var n,r,i,o,a;"v"===e.settings.orientation?(i="top",r="height",n="h"):(i="left",r="width",n="w"),a=e.getEl("handle"),o=((e.layoutRect()[n]||100)-de.getSize(a)[r])*((t-e._minValue)/(e._maxValue-e._minValue))+"px",a.style[i]=o,a.style.height=e.layoutRect().h+"px",Dr(a,"valuenow",t),Dr(a,"valuetext",""+e.settings.previewFilter(t)),Dr(a,"valuemin",e._minValue),Dr(a,"valuemax",e._maxValue)}var Ir=wt.extend({init:function(e){e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),this._super(e),this.classes.add("slider"),"v"===e.orientation&&this.classes.add("vertical"),this._minValue=H(e.minValue)?e.minValue:0,this._maxValue=H(e.maxValue)?e.maxValue:100,this._initValue=this.state.get("value")},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-handle" class="'+t+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,t,n,r,i,o,a=this;e=a._minValue,t=a._maxValue,"v"===a.settings.orientation?(n="screenY",r="top",i="height",o="h"):(n="screenX",r="left",i="width",o="w"),a._super(),function(e,t){function n(n){var r,i;r=a.value(),r=Or(r=function(e,t,n){return n*(t-e)-e}(e,t,(r+(i=e))/(t-i)+.05*n),e,t),a.value(r),a.fire("dragstart",{value:r}),a.fire("drag",{value:r}),a.fire("dragend",{value:r})}a.on("keydown",function(e){switch(e.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}})}(e,t),function(e,t,s){var u,l,c,f,d;a._dragHelper=new tt(a._id,{handle:a._id+"-handle",start:function(e){u=e[n],l=parseInt(a.getEl("handle").style[r],10),c=(a.layoutRect()[o]||100)-de.getSize(s)[i],a.fire("dragstart",{value:d})},drag:function(i){var o=i[n]-u;f=Or(l+o,0,c),s.style[r]=f+"px",d=e+f/c*(t-e),a.value(d),a.tooltip().text(""+a.settings.previewFilter(d)).show().moveRel(s,"bc tc"),a.fire("drag",{value:d})},stop:function(){a.tooltip().hide(),a.fire("dragend",{value:d})}})}(e,t,a.getEl("handle"))},repaint:function(){this._super(),Pr(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){Pr(e,t.value)}),e._super()}}),Br=wt.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),Mr=_r.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t,n=this.getEl(),r=this.layoutRect();return this._super(),e=n.firstChild,t=n.lastChild,ce(e).css({width:r.w-de.getSize(t).width,height:r.h-2}),ce(t).css({height:r.h-2}),this},activeMenu:function(e){ce(this.getEl().lastChild).toggleClass(this.classPrefix+"active",e)},renderHtml:function(){var e,t,n=this._id,r=this.classPrefix,i=this.state.get("icon"),o=this.state.get("text"),a=this.settings,s="";return(e=a.image)?(i="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",i=a.icon?r+"ico "+r+"i-"+i:"",o&&(this.classes.add("btn-has-text"),s='<span class="'+r+'txt">'+this.encode(o)+"</span>"),t="boolean"==typeof a.active?' aria-pressed="'+a.active+'"':"",'<div id="'+n+'" class="'+this.classes+'" role="button"'+t+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+e+"></i>":"")+s+'</button><button type="button" class="'+r+'open" hidefocus="1" tabindex="-1">'+(this._menuBtnText?(i?"Â ":"")+this._menuBtnText:"")+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this.settings.onclick;return this.on("click",function(t){var n=t.target;if(t.control===this)for(;n;){if(t.aria&&"down"!==t.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return t.stopImmediatePropagation(),void(e&&e.call(this,t));n=n.parentNode}}),delete this.settings.onclick,this._super()}}),Lr=Zn.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),Fr=st.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var t;this.activeTabId&&(t=this.getEl(this.activeTabId),ce(t).removeClass(this.classPrefix+"active"),t.setAttribute("aria-selected","false")),this.activeTabId="t"+e,(t=this.getEl("t"+e)).setAttribute("aria-selected","true"),ce(t).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!==n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,i){var o=e._id+"-t"+i;t.aria("role","tabpanel"),t.aria("labelledby",o),n+='<div id="'+o+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(n&&n.id===e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]===t.target&&e.activateTab(r)})},initLayoutRect:function(){var e,t,n;t=(t=de.getSize(this.getEl("head")).width)<0?0:t,n=0,this.items().each(function(e){t=Math.max(t,e.layoutRect().minW),n=Math.max(n,e.layoutRect().minH)}),this.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=n,e.layoutRect({x:0,y:0,w:t,h:n})});var r=de.getSize(this.getEl("head")).height;return this.settings.minWidth=t,this.settings.minHeight=n+r,(e=this._super()).deltaH+=r,e.innerH=e.h-e.deltaH,e}}),Hr=wt.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){t.state.set("value",e.target.value)}))},repaint:function(){var e,t,n,r,i,o=0;e=this.getEl().style,t=this._layoutRect,i=this._lastRepaintRect||{};var a=document;return!this.settings.multiline&&a.all&&(!a.documentMode||a.documentMode<=8)&&(e.lineHeight=t.h-o+"px"),r=(n=this.borderBox).left+n.right+8,o=n.top+n.bottom+(this.settings.multiline?8:0),t.x!==i.x&&(e.left=t.x+"px",i.x=t.x),t.y!==i.y&&(e.top=t.y+"px",i.y=t.y),t.w!==i.w&&(e.width=t.w-r+"px",i.w=t.w),t.h!==i.h&&(e.height=t.h-o+"px",i.h=t.h),this._lastRepaintRect=i,this.fire("repaint",{},!1),this},renderHtml:function(){var e,t,n=this.settings;return e={id:this._id,hidefocus:"1"},r.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(t){e[t]=n[t]}),this.disabled()&&(e.disabled="disabled"),n.subtype&&(e.type=n.subtype),(t=de.create(n.multiline?"textarea":"input",e)).value=this.state.get("value"),t.className=this.classes.toString(),t.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!==t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}}),zr=function(){return{Selector:Oe,Collection:Ie,ReflowQueue:We,Control:Ke,Factory:f,KeyboardNavigation:Ge,Container:Ze,DragHelper:tt,Scrollable:at,Panel:st,Movable:be,Resizable:ut,FloatPanel:pt,Window:Et,MessageBox:Nt,Tooltip:yt,Widget:wt,Progress:xt,Notification:_t,Layout:Rt,AbsoluteLayout:Ot,Button:Dt,ButtonGroup:It,Checkbox:Bt,ComboBox:Lt,ColorBox:Ft,PanelButton:Ht,ColorButton:jt,ColorPicker:Ut,Path:qt,ElementPath:Vt,FormItem:Xt,Form:Yt,FieldSet:Kt,FilePicker:Jn,FitLayout:Gn,FlexLayout:Qn,FlowLayout:Zn,FormatControls:gr,GridLayout:vr,Iframe:br,InfoBox:yr,Label:wr,Toolbar:xr,MenuBar:Cr,MenuButton:_r,MenuItem:kr,Throbber:vt,Menu:Sr,ListBox:Tr,Radio:Er,ResizeHandle:Nr,SelectBox:Rr,Slider:Ir,Spacer:Br,SplitButton:Mr,StackLayout:Lr,TabPanel:Fr,TextBox:Hr,DropZone:$t,BrowseButton:Pt}};r.each(zr(),function(e,t){f.add(t,e)}),function(e){e.ui?r.each(zr(),function(t,n){e.ui[n]=t}):e.ui=zr()}(window.tinymce?window.tinymce:{}),t.add("modern",function(e){return gr.setup(e),At(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e,t,n){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r,!1,!1===n?null:{"list-style-type":n})},r=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},i=function(e){return t.map(e,function(e){return{text:function(e){return e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})}(e),data:"default"===e?"":e}})},o=function(e,n){return function(i){var o=i.control;e.on("NodeChange",function(i){var a=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(i.parents,r),s=-1!==a?i.parents.slice(0,a):i.parents,u=t.grep(s,function(e){return function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)&&function(e,t){return e.$.contains(e.getBody(),t)}(e,t)}}(e));o.active(u.length>0&&u[0].nodeName===n)})}},a=function(e,t,r,a,s,u){e.addButton(t,{active:!1,type:"splitbutton",tooltip:r,menu:i(u),onPostRender:o(e,s),onshow:function(e){return function(t){var n=function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul");return e.dom.getStyle(t,"listStyleType")||""}(e);t.control.items().each(function(e){e.active(e.settings.data===n)})}}(e),onselect:function(t){n(e,s,t.control.settings.data)},onclick:function(){e.execCommand(a)}})},s=function(e,t,n,r,i,s){s.length>0?a(e,t,n,r,i,s):function(e,t,n,r,i,a){e.addButton(t,{active:!1,type:"button",tooltip:n,onPostRender:o(e,i),onclick:function(){e.execCommand(r)}})}(e,t,n,r,i)};e.add("advlist",function(e){(function(e,n){var r=e.settings.plugins?e.settings.plugins:"";return-1!==t.inArray(r.split(/[ ,]/),"lists")})(e)&&(function(e){s(e,"numlist","Numbered list","InsertOrderedList","OL",function(e){var t=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]}(e)),s(e,"bullist","Bullet list","InsertUnorderedList","UL",function(e){var t=e.getParam("advlist_bullet_styles","default,circle,disc,square");return t?t.split(/[ ,]/):[]}(e))}(e),function(e){e.addCommand("ApplyUnorderedListStyle",function(t,r){n(e,"UL",r["list-style-type"])}),e.addCommand("ApplyOrderedListStyle",function(t,r){n(e,"OL",r["list-style-type"])})}(e))})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;t>n&&(t=n)}return t},r=function(e,t,r){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,n(t,r)):e.setStartBefore(t)},i=function(e,t,r){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,n(t,r)):e.setEndAfter(t)},o=function(e,t,n){var o,a,s,u,l,c,f,d,h,p,m=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)}(e),g=function(e){return e.getParam("default_link_target","")}(e);if("A"!==e.selection.getNode().tagName){if((o=e.selection.getRng(!0).cloneRange()).startOffset<5){if(!(d=o.endContainer.previousSibling)){if(!o.endContainer.firstChild||!o.endContainer.firstChild.nextSibling)return;d=o.endContainer.firstChild.nextSibling}if(h=d.length,r(o,d,h),i(o,d,h),o.endOffset<5)return;a=o.endOffset,u=d}else{if(3!==(u=o.endContainer).nodeType&&u.firstChild){for(;3!==u.nodeType&&u.firstChild;)u=u.firstChild;3===u.nodeType&&(r(o,u,0),i(o,u,u.nodeValue.length))}a=1===o.endOffset?2:o.endOffset-1-t}s=a;do{r(o,u,a>=2?a-2:0),i(o,u,a>=1?a-1:0),a-=1,p=o.toString()}while(" "!==p&&""!==p&&160!==p.charCodeAt(0)&&a-2>=0&&p!==n);!function(e,t){return e===n||" "===e||160===e.charCodeAt(0)}(o.toString())?0===o.startOffset?(r(o,u,0),i(o,u,s)):(r(o,u,a),i(o,u,s)):(r(o,u,a),i(o,u,s),a+=1),"."===(c=o.toString()).charAt(c.length-1)&&i(o,u,s-1),(f=(c=o.toString().trim()).match(m))&&("www."===f[1]?f[1]="http://www.":/@$/.test(f[1])&&!/^mailto:/.test(f[1])&&(f[1]="mailto:"+f[1]),l=e.selection.getBookmark(),e.selection.setRng(o),e.execCommand("createlink",!1,f[1]+f[2]),g&&e.dom.setAttrib(e.selection.getNode(),"target",g),e.selection.moveToBookmark(l),e.nodeChanged())}};e.add("autolink",function(e){!function(e){var n;e.on("keydown",function(t){if(13===t.keyCode)return function(e){o(e,-1,"")}(e)}),t.ie?e.on("focus",function(){if(!n){n=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(e.on("keypress",function(t){if(41===t.keyCode)return function(e){o(e,-1,"(")}(e)}),e.on("keyup",function(t){if(32===t.keyCode)return function(e){o(e,0,"")}(e)}))}(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),n=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),r=tinymce.util.Tools.resolve("tinymce.util.VK"),i=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),s=function(e){return e&&"BR"===e.nodeName},u=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},l=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},c=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},f=s,d=function(e){return e.parentNode.firstChild===e},h=function(e){return e.parentNode.lastChild===e},p=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},m=function(e,t){return e&&e.nodeName in t},g=function(e,t){return!!s(t)&&!(!e.isBlock(t.nextSibling)||s(t.previousSibling))},v=function(e,t,n){var r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},b=function(e,t){return e.isChildOf(t,e.getRoot())},y=function(e,n){var r=t.getNode(e,n);return l(e)&&function(e){return e&&3===e.nodeType}(r)?{container:r,offset:n>=e.childNodes.length?r.data.length:0}:{container:e,offset:n}},w=function(e){var t=e.cloneRange(),n=y(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=y(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},x=a.DOM,C=function(e){var t={},n=function(n){var r,i,o;i=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"],1===i.nodeType&&(r=x.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(o=Math.min(o,i.childNodes.length-1),n?i.insertBefore(r,i.childNodes[o]):x.insertAfter(r,i.childNodes[o])):i.appendChild(r),i=r,o=0),t[n?"startContainer":"endContainer"]=i,t[n?"startOffset":"endOffset"]=o};return n(!0),e.collapsed||n(),t},_=function(e){function t(t){var n,r,i;n=i=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,x.remove(i),!n.hasChildNodes()&&x.isBlock(n)&&n.appendChild(x.create("br"))),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r)}t(!0),t();var n=x.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),w(n)},S=a.DOM,T=function(e,t){o.each(o.grep(e.select("ol,ul",t)),function(t){!function(e,t){var n,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(t),v(e,r)&&S.remove(r)):S.setStyle(r,"listStyleType","none")),u(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)}(e,t)})},k=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),E=function(e){var t=e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",N(e,t))},N=function(e,t){var n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},A={getParentList:E,getSelectedSubLists:function(e){var t=E(e),n=e.selection.getSelectedBlocks();return function(e,t){return e&&1===t.length&&t[0]===e}(t,n)?function(e){return o.grep(e.querySelectorAll("ol,ul,dl"),function(e){return u(e)})}(t):o.grep(n,function(e){return u(e)&&t!==e})},getSelectedListItems:function(e){var t=e.selection.getSelectedBlocks();return o.grep(function(e,t){var n=o.map(t,function(t){return e.dom.getParent(t,"li,dd,dt",N(e,t))||t});return k.unique(n)}(e,t),function(e){return l(e)})},getClosestListRootElm:N},R=tinymce.util.Tools.resolve("tinymce.Env"),O=a.DOM,D=function(e,t,n){var r,i,o,a=O.createFragment(),s=e.schema.getBlockElements();if(e.settings.forced_root_block&&(n=n||e.settings.forced_root_block),n&&((i=O.create(n)).tagName===e.settings.forced_root_block&&O.setAttribs(i,e.settings.forced_root_block_attrs),m(t.firstChild,s)||a.appendChild(i)),t)for(;r=t.firstChild;){var u=r.nodeName;o||"SPAN"===u&&"bookmark"===r.getAttribute("data-mce-type")||(o=!0),m(r,s)?(a.appendChild(r),i=null):n?(i||(i=O.create(n),a.appendChild(i)),i.appendChild(r)):a.appendChild(r)}return e.settings.forced_root_block?o||R.ie&&!(R.ie>10)||i.appendChild(O.create("br",{"data-mce-bogus":"1"})):a.appendChild(O.create("br")),a},P=a.DOM,I=function(e,t,n,r){var i,a,s,u,l;for(s=P.select('span[data-mce-type="bookmark"]',t),r=r||D(e,n),(i=P.createRng()).setStartAfter(n),i.setEndAfter(t),u=(a=i.extractContents()).firstChild;u;u=u.firstChild)if("LI"===u.nodeName&&e.dom.isEmpty(u)){P.remove(u);break}e.dom.isEmpty(a)||P.insertAfter(a,t),P.insertAfter(r,t),v(e.dom,n.parentNode)&&(l=n.parentNode,o.each(s,function(e){l.parentNode.insertBefore(e,n.parentNode)}),P.remove(l)),P.remove(n),v(e.dom,t)&&P.remove(t)},B=a.DOM,M=function(e,t){v(e,t)&&B.remove(t)},L=function(e,t){var n,r,i=t.parentNode;return i?(n=i.parentNode,!(i!==e.getBody()&&("DD"===t.nodeName?(B.rename(t,"DT"),0):d(t)&&h(t)?("LI"===n.nodeName?(B.insertAfter(t,n),M(e.dom,n),B.remove(i)):u(n)?B.remove(i,!0):(n.insertBefore(D(e,t),i),B.remove(i)),0):d(t)?("LI"===n.nodeName?(B.insertAfter(t,n),t.appendChild(i),M(e.dom,n)):u(n)?n.insertBefore(t,i):(n.insertBefore(D(e,t),i),B.remove(t)),0):h(t)?("LI"===n.nodeName?B.insertAfter(t,n):u(n)?B.insertAfter(t,i):(B.insertAfter(D(e,t),i),B.remove(t)),0):("LI"===n.nodeName?(i=n,r=D(e,t,"LI")):r=u(n)?D(e,t,"LI"):D(e,t),I(e,i,t,r),T(e.dom,i.parentNode),0)))):(M(e.dom,t),!0)},F=L,H=function(e){var t=A.getSelectedListItems(e);if(t.length){var n=C(e.selection.getRng()),r=void 0,i=void 0,o=A.getClosestListRootElm(e,e.selection.getStart(!0));for(r=t.length;r--;)for(var a=t[r].parentNode;a&&a!==o;){for(i=t.length;i--;)if(t[i]===a){t.splice(r,1);break}a=a.parentNode}for(r=0;r<t.length&&(L(e,t[r])||0!==r);r++);return e.selection.setRng(_(n)),e.nodeChanged(),!0}},z=function(e,t){o.each(t,function(t,n){e.setAttribute(n,t)})},j=function(e,t,n){!function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)}(e,t,n),function(e,t,n){z(t,n["list-attributes"]),o.each(e.select("li",t),function(e){z(e,n["list-item-attributes"])})}(e,t,n)},W=function(e,t,n,r){var i,o;for(i=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1===i.nodeType&&(i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i),!n&&f(i.nextSibling)&&(i=i.nextSibling);i.parentNode!==r;){if(p(e,i))return i;if(/^(TD|TH)$/.test(i.parentNode.nodeName))return i;i=i.parentNode}return i},U=function(e,t,n){void 0===n&&(n={});var r,a=e.selection.getRng(!0),s="LI",l=A.getClosestListRootElm(e,e.selection.getStart(!0)),c=e.dom;"false"!==c.getContentEditable(e.selection.getNode())&&("DL"===(t=t.toUpperCase())&&(s="DT"),r=C(a),o.each(function(e,t,n){for(var r,a=[],s=e.dom,u=W(e,t,!0,n),l=W(e,t,!1,n),c=[],d=u;d&&(c.push(d),d!==l);d=d.nextSibling);return o.each(c,function(t){if(p(e,t))return a.push(t),void(r=null);if(s.isBlock(t)||f(t))return f(t)&&s.remove(t),void(r=null);var o=t.nextSibling;i.isBookmarkNode(t)&&(p(e,o)||!o&&t.parentNode===n)?r=null:(r||(r=s.create("p"),t.parentNode.insertBefore(r,t),a.push(r)),r.appendChild(t))}),a}(e,a,l),function(r){var i,a;(a=r.previousSibling)&&u(a)&&a.nodeName===t&&function(e,t,n){var r=c.getStyle(t,"list-style-type"),i=n?n["list-style-type"]:"";return r===(null===i?"":i)}(0,a,n)?(i=a,r=c.rename(r,s),a.appendChild(r)):(i=c.create(t),r.parentNode.insertBefore(i,r),i.appendChild(r),r=c.rename(r,s)),function(e,t,n){o.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],function(n){var r;return e.setStyle(t,((r={})[n]="",r))})}(c,r),j(c,i,n),V(e.dom,i)}),e.selection.setRng(_(r)))},$=function(e){var t=C(e.selection.getRng(!0)),n=A.getClosestListRootElm(e,e.selection.getStart(!0)),r=A.getSelectedListItems(e),i=o.grep(r,function(t){return e.dom.isEmpty(t)});r=o.grep(r,function(t){return!e.dom.isEmpty(t)}),o.each(i,function(t){v(e.dom,t)&&F(e,t)}),o.each(r,function(t){var r,i;if(t.parentNode!==e.getBody()){for(r=t;r&&r!==n;r=r.parentNode)u(r)&&(i=r);I(e,i,t),T(e.dom,i.parentNode)}}),e.selection.setRng(_(t))},q=function(e,t,n){return function(e,t){return e&&t&&u(e)&&e.nodeName===t.nodeName}(t,n)&&function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)}(e,t,n)&&(r=n,t.className===r.className);var r},V=function(e,t){var n,r;if(n=t.nextSibling,q(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,q(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},X=function(e){return"list-style-type"in e},Y={toggleList:function(e,t,n){var r=A.getParentList(e),i=A.getSelectedSubLists(e);n=n||{},r&&i.length>0?function(e,t,n,r,i){if(t.nodeName!==r||X(i)){var a=C(e.selection.getRng(!0));o.each([t].concat(n),function(t){!function(e,t,n,r){if(t.nodeName!==n){var i=e.rename(t,n);j(e,i,r)}else j(e,t,r)}(e.dom,t,r,i)}),e.selection.setRng(_(a))}else $(e)}(e,r,i,t,n):function(e,t,n,r){if(t!==e.getBody())if(t)if(t.nodeName!==n||X(r)){var i=C(e.selection.getRng(!0));j(e.dom,t,r),V(e.dom,e.dom.rename(t,n)),e.selection.setRng(_(i))}else $(e);else U(e,n,r)}(e,r,t,n)},removeList:$,mergeWithAdjacentLists:V},K=function(e,r,i,o){var a,s,u=r.startContainer,l=r.startOffset;if(3===u.nodeType&&(i?l<u.data.length:l>0))return u;for(a=e.schema.getNonEmptyElements(),1===u.nodeType&&(u=t.getNode(u,l)),s=new n(u,o),i&&g(e.dom,u)&&s.next();u=s[i?"next":"prev2"]();){if("LI"===u.nodeName&&!u.hasChildNodes())return u;if(a[u.nodeName])return u;if(3===u.nodeType&&u.data.length>0)return u}},J=function(e,t){var n=t.childNodes;return 1===n.length&&!u(n[0])&&e.isBlock(n[0])},G=function(e,t,n){var r,i,o=t.parentNode;b(e,t)&&b(e,n)&&(u(n.lastChild)&&(i=n.lastChild),o===n.lastChild&&f(o.previousSibling)&&e.remove(o.previousSibling),(r=n.lastChild)&&f(r)&&t.hasChildNodes()&&e.remove(r),v(e,n,!0)&&e.$(n).empty(),function(e,t,n){var r,i;if(i=J(e,n)?n.firstChild:n,function(e,t){J(e,t)&&e.remove(t.firstChild,!0)}(e,t),!v(e,t,!0))for(;r=t.firstChild;)i.appendChild(r)}(e,t,n),i&&n.appendChild(i),e.remove(t),v(e,o)&&o!==e.getRoot()&&e.remove(o))},Q=function(e,t){var n,r,i,o=e.dom,a=e.selection,s=a.getStart(),u=A.getClosestListRootElm(e,s),l=o.getParent(a.getStart(),"LI",u);if(l){if((n=l.parentNode)===e.getBody()&&v(o,n))return!0;if(r=w(a.getRng(!0)),(i=o.getParent(K(e,r,t,u),"LI",u))&&i!==l)return t?function(e,t,n,r){var i=e.dom;if(i.isEmpty(r))!function(e,t,n){e.dom.$(n).empty(),G(e.dom,t,n),e.selection.setCursorLocation(n)}(e,n,r);else{var o=C(t);G(i,n,r),e.selection.setRng(_(o))}}(e,r,i,l):function(e,t,n,r){var i=C(t);G(e.dom,n,r);var o=_(i);e.selection.setRng(o)}(e,r,l,i),!0;if(!i&&!t)return Y.removeList(e),!0}return!1},Z=function(e,t){return e.selection.isCollapsed()?function(e,t){return Q(e,t)||function(e,t){var n=e.dom,r=e.selection.getStart(),i=A.getClosestListRootElm(e,r),o=n.getParent(r,n.isBlock,i);if(o&&n.isEmpty(o)){var a=w(e.selection.getRng(!0)),s=n.getParent(K(e,a,t,i),"LI",i);if(s)return e.undoManager.transact(function(){!function(e,t,n){var r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)}(n,o,i),Y.mergeWithAdjacentLists(n,s.parentNode),e.selection.select(s,!0),e.selection.collapse(t)}),!0}return!1}(e,t)}(e,t):function(e){var t=e.selection.getStart(),n=A.getClosestListRootElm(e,t);return!!(e.dom.getParent(t,"LI,DT,DD",n)||A.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),T(e.dom,e.getBody())}),!0)}(e)},ee=Z,te=a.DOM,ne=function(e,t){var n;if(u(e)){for(;n=e.firstChild;)t.appendChild(n);te.remove(e)}},re=function(e){var t,n,r,i,o=A.getSelectedListItems(e);if(o.length){for(var a=C(e.selection.getRng(!0)),s=0;s<o.length&&(n=void 0,r=void 0,i=void 0,("DT"===(t=o[s]).nodeName?(te.rename(t,"DD"),1):(n=t.previousSibling)&&u(n)?(n.appendChild(t),1):n&&"LI"===n.nodeName&&u(n.lastChild)?(n.lastChild.appendChild(t),ne(t.lastChild,n.lastChild),1):(n=t.nextSibling)&&u(n)?(n.insertBefore(t,n.firstChild),1):(n=t.previousSibling)&&"LI"===n.nodeName&&(r=te.create(t.parentNode.nodeName),(i=te.getStyle(t.parentNode,"listStyleType"))&&te.setStyle(r,"listStyleType",i),n.appendChild(r),r.appendChild(t),ne(t.lastChild,r),1))||0!==s);s++);return e.selection.setRng(_(a)),e.nodeChanged(),!0}},ie=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},oe=function(e){(function(e){return e.getParam("lists_indent_on_tab",!0)})(e)&&function(e){e.on("keydown",function(t){t.keyCode!==r.TAB||r.metaKeyPressed(t)||e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?H(e):re(e))})}(e),function(e){e.on("keydown",function(t){t.keyCode===r.BACKSPACE?Z(e,!1)&&t.preventDefault():t.keyCode===r.DELETE&&Z(e,!0)&&t.preventDefault()})}(e)},ae=function(e,t){return function(n){var r=n.control;e.on("NodeChange",function(e){var n=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(e.parents,c),i=-1!==n?e.parents.slice(0,n):e.parents,a=o.grep(i,u);r.active(a.length>0&&a[0].nodeName===t)})}};e.add("lists",function(e){return oe(e),function(e){(function(e,t){var n=e.settings.plugins?e.settings.plugins:"";return-1!==o.inArray(n.split(/[ ,]/),"advlist")})(e)||(e.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:ae(e,"OL")}),e.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:ae(e,"UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(e){return function(t){var n=t.control;e.on("nodechange",function(){var t=A.getSelectedListItems(e),r=t.length>0&&d(t[0]);n.disabled(r)})}}(e)})}(e),function(e){e.on("BeforeExecCommand",function(t){var n,r=t.command.toLowerCase();if("indent"===r?re(e)&&(n=!0):"outdent"===r&&H(e)&&(n=!0),n)return e.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0}),e.addCommand("InsertUnorderedList",function(t,n){Y.toggleList(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){Y.toggleList(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){Y.toggleList(e,"DL",n)}),e.addQueryStateHandler("InsertUnorderedList",ie(e,"UL")),e.addQueryStateHandler("InsertOrderedList",ie(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",ie(e,"DL"))}(e),function(e){return{backspaceDelete:function(t){ee(e,t)}}}(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.VK"),n=function(e){return e.target_list},r=function(e){return e.rel_list},i=function(e){return e.link_class_list},o=n,a=function(e){return!1!==n(e)},s=r,u=function(e){return void 0!==r(e)},l=i,c=function(e){return void 0!==i(e)},f=function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target},d=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),h=tinymce.util.Tools.resolve("tinymce.Env"),p=tinymce.util.Tools.resolve("tinymce.util.Tools"),m=function(e,t){var n=["noopener"],r=e?e.split(/\s+/):[],i=function(e){return e.filter(function(e){return-1===p.inArray(n,e)})};return(r=t?function(e){return(e=i(e)).length?e.concat(n):n}(r):i(r)).length?function(e){return p.trim(e.sort().join(" "))}(r):null},g=function(e,t){return t=t||e.selection.getNode(),b(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},v=function(e){return e&&"A"===e.nodeName&&e.href},b=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},y=function(e,t){return function(n){e.undoManager.transact(function(){var r=e.selection.getNode(),i=g(e,r),o={href:n.href,target:n.target?n.target:null,rel:n.rel?n.rel:null,class:n.class?n.class:null,title:n.title?n.title:null};u(e.settings)||!1!==f(e.settings)||(o.rel=m(o.rel,"_blank"===o.target)),n.href===t.href&&(t.attach(),t={}),i?(e.focus(),n.hasOwnProperty("text")&&("innerText"in i?i.innerText=n.text:i.textContent=n.text),e.dom.setAttribs(i,o),e.selection.select(i),e.undoManager.add()):b(r)?function(e,t,n){var r,i;(i=e.dom.select("img",t)[0])&&(r=e.dom.create("a",n),i.parentNode.insertBefore(r,i),r.appendChild(i))}(e,r,o):n.hasOwnProperty("text")?e.insertContent(e.dom.createHTML("a",o,e.dom.encode(n.text))):e.execCommand("mceInsertLink",!1,o)})}},w=function(e){return function(){e.undoManager.transact(function(){var t=e.selection.getNode();b(t)?function(e,t){var n,r;(r=e.dom.select("img",t)[0])&&(n=e.dom.getParents(r,"a[href]",t)[0])&&(n.parentNode.insertBefore(r,n),e.dom.remove(n))}(e,t):e.execCommand("unlink")})}},x=v,C=function(e){return p.grep(e,v).length>0},_=g,S=m,T=tinymce.util.Tools.resolve("tinymce.util.Delay"),k=tinymce.util.Tools.resolve("tinymce.util.XHR"),E={},N=function(e,t,n){var r=function(e,n){return n=n||[],p.each(e,function(e){var i={text:e.text||e.title};e.menu?i.menu=r(e.menu):(i.value=e.value,t&&t(i)),n.push(i)}),n};return r(e,n||[])},A=function(e,t,n){var r=e.selection.getRng();T.setEditorTimeout(e,function(){e.windowManager.confirm(t,function(t){e.selection.setRng(r),n(t)})})},R=function(e,t){var n,r,i,d,h,m,g,v,b,x,C,T={},k=e.selection,R=e.dom,O=function(e){var t=i.find("#text");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),i.find("#href").value(e.control.value())},D=function(){r||!d||T.text||this.parent().parent().find("#text")[0].value(this.value())};d=function(e){return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1===e.indexOf("href=")))}(k.getContent()),n=_(e),T.text=r=function(e,t){return function(e){return e.replace(/\uFEFF/g,"")}(t?t.innerText||t.textContent:e.getContent({format:"text"}))}(e.selection,n),T.href=n?R.getAttrib(n,"href"):"",n?T.target=R.getAttrib(n,"target"):function(e){return"string"==typeof e.default_link_target}(e.settings)&&(T.target=function(e){return e.default_link_target}(e.settings)),(C=R.getAttrib(n,"rel"))&&(T.rel=C),(C=R.getAttrib(n,"class"))&&(T.class=C),(C=R.getAttrib(n,"title"))&&(T.title=C),d&&(h={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){T.text=this.value()}}),t&&(m={type:"listbox",label:"Link list",values:N(t,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:O,value:e.convertURL(T.href,"href"),onPostRender:function(){m=this}}),a(e.settings)&&(void 0===o(e.settings)&&function(e,t){e.settings.target_list=t}(e,[{text:"None",value:""},{text:"New window",value:"_blank"}]),v={name:"target",type:"listbox",label:"Target",values:N(o(e.settings))}),u(e.settings)&&(g={name:"rel",type:"listbox",label:"Rel",values:N(s(e.settings),function(t){!1===f(e.settings)&&(t.value=S(t.value,"_blank"===T.target))})}),c(e.settings)&&(b={name:"class",type:"listbox",label:"Class",values:N(l(e.settings),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})})}),function(e){return!1!==e.link_title}(e.settings)&&(x={name:"title",type:"textbox",label:"Title",value:T.title}),i=e.windowManager.open({title:"Insert link",data:T,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(t){var n=t.meta||{};m&&m.value(e.convertURL(this.value(),"href")),p.each(t.meta,function(e,t){var n=i.find("#"+t);"text"===t?0===r.length&&(n.value(e),T.text=e):n.value(e)}),n.attach&&(E={href:this.value(),attach:n.attach}),n.text||D.call(this)},onkeyup:D,onpaste:D,onbeforecall:function(e){e.meta=i.toJSON()}},h,x,function(t){var n=[];if(p.each(e.dom.select("a:not([href])"),function(e){var r=e.name||e.id;r&&n.push({text:r,value:"#"+r,selected:-1!==t.indexOf("#"+r)})}),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:O}}(T.href),m,g,v,b],onSubmit:function(t){var n=function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets}(e.settings),i=y(e,E),o=w(e),a=p.extend({},T,t.data),s=a.href;s?(d&&a.text!==r||delete a.text,s.indexOf("@")>0&&-1===s.indexOf("//")&&-1===s.indexOf("mailto:")?A(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(a.href="mailto:"+s),i(a)}):!0===n&&!/^\w+:/i.test(s)||!1===n&&/^\s*www[\.|\d\.]/i.test(s)?A(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(a.href="http://"+s),i(a)}):i(a)):o()}})},O=function(e,t){return e.dom.getParent(t,"a[href]")},D=function(e){return O(e,e.selection.getStart())},P=function(e,t){if(t){var n=function(e){return e.getAttribute("data-mce-href")||e.getAttribute("href")}(t);if(/^#/.test(n)){var r=e.$(n);r.length&&e.selection.scrollIntoView(r[0],!0)}else!function(e){if(!h.ie||h.ie>10){var t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(e,t){document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)}(t,n)}else{var r=window.open("","_blank");if(r){r.opener=null;var i=r.document;i.open(),i.write('<meta http-equiv="refresh" content="0; url='+d.DOM.encode(e)+'">'),i.close()}}}(t.href)}},I=function(e){return function(){!function(e){!function(e,t){var n=function(e){return e.link_list}(e.settings);"string"==typeof n?k.send({url:n,success:function(n){t(e,JSON.parse(n))}}):"function"==typeof n?n(function(n){t(e,n)}):t(e,n)}(e,R)}(e)}},B=function(e){return function(){P(e,D(e))}},M=function(e){return function(){var t=this;e.on("nodechange",function(n){t.active(!e.readonly&&!!_(e,n.element))})}},L=function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:B(e),onPostRender:function(e){return function(){var t=this,n=function(e){C(e.parents)?t.show():t.hide()};C(e.dom.getParents(e.selection.getStart()))||t.hide(),e.on("nodechange",n),t.on("remove",function(){e.off("nodechange",n)})}}(e),prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:I(e),stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:w(e),stateSelector:"a[href]"})},F=function(e){e.addContextToolbar&&e.addContextToolbar(function(e){return function(t){var n,r,i;return!!(function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar}(e.settings)&&!function(e){var t=e.plugins.contextmenu;return!!t&&t.isContextMenuVisible()}(e)&&x(t)&&3===(i=(r=(n=e.selection).getRng()).startContainer).nodeType&&n.isCollapsed()&&r.startOffset>0&&r.startOffset<i.data.length)}}(e),"openlink | link unlink")};e.add("link",function(e){(function(e){e.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:I(e),onpostrender:M(e)}),e.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:w(e),onpostrender:M(e)}),e.addContextToolbar&&e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:B(e)})})(e),L(e),F(e),function(e){e.on("click",function(n){var r=O(e,n.target);r&&t.metaKeyPressed(n)&&(n.preventDefault(),P(e,r))}),e.on("keydown",function(t){var n=D(e);n&&13===t.keyCode&&function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey}(t)&&(t.preventDefault(),P(e,n))})}(e),function(e){e.addCommand("mceLink",I(e))}(e),function(e){e.addShortcut("Meta+K","",I(e))}(e)})}()},function(e,t){!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n={hasDimensions:function(e){return!1!==e.settings.image_dimensions},hasAdvTab:function(e){return!0===e.settings.image_advtab},getPrependUrl:function(e){return e.getParam("image_prepend_url","")},getClassList:function(e){return e.getParam("image_class_list")},hasDescription:function(e){return!1!==e.settings.image_description},hasImageTitle:function(e){return!0===e.settings.image_title},hasImageCaption:function(e){return!0===e.settings.image_caption},getImageList:function(e){return e.getParam("image_list",!1)},hasUploadUrl:function(e){return e.getParam("images_upload_url",!1)},hasUploadHandler:function(e){return e.getParam("images_upload_handler",!1)},getUploadUrl:function(e){return e.getParam("images_upload_url")},getUploadHandler:function(e){return e.getParam("images_upload_handler")},getUploadBasePath:function(e){return e.getParam("images_upload_base_path")},getUploadCredentials:function(e){return e.getParam("images_upload_credentials")}},r="undefined"!=typeof window?window:Function("return this;")(),i={getOrDie:function(e,t){var n=function(e,t){return function(e,t){return function(e,t){for(var n=void 0!==t&&null!==t?t:r,i=0;i<e.length&&void 0!==n&&null!==n;++i)n=n[e[i]];return n}(e.split("."),t)}(e,t)}(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n}},o=tinymce.util.Tools.resolve("tinymce.util.Promise"),a=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=tinymce.util.Tools.resolve("tinymce.util.XHR"),u=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},l={getImageSize:function(e,t){var n=document.createElement("img");function r(e,r){n.parentNode&&n.parentNode.removeChild(n),t({width:e,height:r})}n.onload=function(){r(u(n.width,n.clientWidth),u(n.height,n.clientHeight))},n.onerror=function(){r(0,0)};var i=n.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left="0px",i.width=i.height="auto",document.body.appendChild(n),n.src=e},buildListItems:function(e,t,n){return function e(n,r){return r=r||[],a.each(n,function(n){var i={text:n.text||n.title};n.menu?i.menu=e(n.menu):(i.value=n.value,t(i)),r.push(i)}),r}(e,n||[])},removePixelSuffix:function(e){return e&&(e=e.replace(/px$/,"")),e},addPixelSuffix:function(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e},mergeMargins:function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},createImageList:function(e,t){var r=n.getImageList(e);"string"==typeof r?s.send({url:r,success:function(e){t(JSON.parse(e))}}):"function"==typeof r?r(t):t(r)},waitLoadImage:function(e,t,r){function i(){r.onload=r.onerror=null,e.selection&&(e.selection.select(r),e.nodeChanged())}r.onload=function(){t.width||t.height||!n.hasDimensions(e)||e.dom.setAttribs(r,{width:r.clientWidth,height:r.clientHeight}),i()},r.onerror=i},blobToDataUri:function(e){return new o(function(t,n){var r=new(i.getOrDie("FileReader"));r.onload=function(){t(r.result)},r.onerror=function(){n(r.error.message)},r.readAsDataURL(e)})}},c=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f=Object.prototype.hasOwnProperty,d=(e=function(e,t){return t},function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},i=0;i<t.length;i++){var o=t[i];for(var a in o)f.call(o,a)&&(r[a]=e(r[a],o[a]))}return r}),h=c.DOM,p=function(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?l.removePixelSuffix(e.style.marginLeft):""},m=function(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?l.removePixelSuffix(e.style.marginTop):""},g=function(e){return e.style.borderWidth?l.removePixelSuffix(e.style.borderWidth):""},v=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):""},b=function(e,t){return e.style[t]?e.style[t]:""},y=function(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName},w=function(e,t,n){e.setAttribute(t,n)},x=function(e,t){var n=e.getAttribute("style"),r=t(null!==n?n:"");r.length>0?(e.setAttribute("style",r),e.setAttribute("data-mce-style",r)):e.removeAttribute("style")},C=function(e,t){return function(e,n,r){e.style[n]?(e.style[n]=l.addPixelSuffix(r),x(e,t)):w(e,n,r)}},_=function(e,t){return e.style[t]?l.removePixelSuffix(e.style[t]):v(e,t)},S=function(e,t){var n=l.addPixelSuffix(t);e.style.marginLeft=n,e.style.marginRight=n},T=function(e,t){var n=l.addPixelSuffix(t);e.style.marginTop=n,e.style.marginBottom=n},k=function(e,t){var n=l.addPixelSuffix(t);e.style.borderWidth=n},E=function(e,t){e.style.borderStyle=t},N=function(e){return"FIGURE"===e.nodeName},A=function(e,t){return{src:v(t,"src"),alt:v(t,"alt"),title:v(t,"title"),width:_(t,"width"),height:_(t,"height"),class:v(t,"class"),style:e(v(t,"style")),caption:y(t),hspace:p(t),vspace:m(t),border:g(t),borderStyle:b(t,"borderStyle")}},R=function(e,t,n,r,i){n[r]!==t[r]&&i(e,r,n[r])},O=function(e,t){return function(n,r,i){e(n,i),x(n,t)}},D=function(e,t,n){var r=A(e,n);R(n,r,t,"caption",function(e,t,n){return function(e){y(e)?function(e){var t=e.parentNode;h.insertAfter(e,t),h.remove(t)}(e):function(e){var t=h.create("figure",{class:"image"});h.insertAfter(t,e),t.appendChild(e),t.appendChild(h.create("figcaption",{contentEditable:!0},"Caption")),t.contentEditable="false"}(e)}(e)}),R(n,r,t,"src",w),R(n,r,t,"alt",w),R(n,r,t,"title",w),R(n,r,t,"width",C(0,e)),R(n,r,t,"height",C(0,e)),R(n,r,t,"class",w),R(n,r,t,"style",O(function(e,t){return w(e,"style",t)},e)),R(n,r,t,"hspace",O(S,e)),R(n,r,t,"vspace",O(T,e)),R(n,r,t,"border",O(k,e)),R(n,r,t,"borderStyle",O(E,e))},P=function(e,t){var n=e.dom.styles.parse(t),r=l.mergeMargins(n),i=e.dom.styles.parse(e.dom.styles.serialize(r));return e.dom.styles.serialize(i)},I=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t},B=function(e,t){var n=e.dom,r=n.getParent(t.parentNode,function(t){return e.schema.getTextBlockElements()[t.nodeName]});return r?n.split(r,t):t},M=function(e){var t=I(e);return t?A(function(t){return P(e,t)},t):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}},L=function(e,t){var n=I(e);n?t.src?function(e,t){var n=I(e);if(D(function(t){return P(e,t)},t,n),function(e,t){e.dom.setAttrib(t,"src",t.getAttribute("src"))}(e,n),N(n.parentNode)){var r=n.parentNode;B(e,r),e.selection.select(n.parentNode)}else e.selection.select(n),l.waitLoadImage(e,t,n)}(e,t):function(e,t){if(t){var n=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(n),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}}(e,n):t.src&&function(e,t){var n=function(e,t){var n=document.createElement("img");if(D(e,d(t,{caption:!1}),n),w(n,"alt",t.alt),t.caption){var r=h.create("figure",{class:"image"});return r.appendChild(n),r.appendChild(h.create("figcaption",{contentEditable:!0},"Caption")),r.contentEditable="false",r}return n}(function(t){return P(e,t)},t);e.dom.setAttrib(n,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(n.outerHTML);var r=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(r,"data-mce-id",null),N(r)){var i=B(e,r);e.selection.select(i)}else e.selection.select(r)}(e,t)},F=function(e,t){t.find("#style").each(function(n){var r=function(e,t){var n=document.createElement("img");return w(n,"style",t.style),(p(n)||""!==t.hspace)&&S(n,t.hspace),(m(n)||""!==t.vspace)&&T(n,t.vspace),(g(n)||""!==t.border)&&k(n,t.border),(b(n,"borderStyle")||""!==t.borderStyle)&&E(n,t.borderStyle),e(n.getAttribute("style"))}(function(t){return P(e,t)},d({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""},t.toJSON()));n.value(r)})},H={makeTab:function(e){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:function(e){return function(t){var r=e.dom,i=t.control.rootControl;if(n.hasAdvTab(e)){var o=i.toJSON(),a=r.parseStyle(o.style);i.find("#vspace").value(""),i.find("#hspace").value(""),((a=l.mergeMargins(a))["margin-top"]&&a["margin-bottom"]||a["margin-right"]&&a["margin-left"])&&(a["margin-top"]===a["margin-bottom"]?i.find("#vspace").value(l.removePixelSuffix(a["margin-top"])):i.find("#vspace").value(""),a["margin-right"]===a["margin-left"]?i.find("#hspace").value(l.removePixelSuffix(a["margin-right"])):i.find("#hspace").value("")),a["border-width"]?i.find("#border").value(l.removePixelSuffix(a["border-width"])):i.find("#border").value(""),a["border-style"]?i.find("#borderStyle").value(a["border-style"]):i.find("#borderStyle").value(""),i.find("#style").value(r.serializeStyle(r.parseStyle(r.serializeStyle(a))))}}}(e)},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(t){F(e,t.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(t){F(e,t.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}}},z=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},j=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],i=e.find("#constrain")[0];n&&r&&i&&t(n,r,i.checked())},W=function(e,t,n){var r=e.state.get("oldVal"),i=t.state.get("oldVal"),o=e.value(),a=t.value();n&&r&&i&&o&&a&&(o!==r?(a=Math.round(o/r*a),isNaN(a)||t.value(a)):(o=Math.round(a/i*o),isNaN(o)||e.value(o))),z(e,t)},U=function(e){j(e,W)},$={createUi:function(){var e=function(e){U(e.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},syncSize:function(e){j(e,z)},updateSize:U},q=function(e){e.meta=e.control.rootControl.toJSON()},V=function(e,t){var r=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(t){!function(e,t){var r,i,o,s=e.meta||{},u=e.control,c=u.rootControl,f=c.find("#image-list")[0];f&&f.value(t.convertURL(u.value(),"src")),a.each(s,function(e,t){c.find("#"+t).value(e)}),s.width||s.height||(r=t.convertURL(u.value(),"src"),i=n.getPrependUrl(t),o=new RegExp("^(?:[a-z]+:)?//","i"),i&&!o.test(r)&&r.substring(0,i.length)!==i&&(r=i+r),u.value(r),l.getImageSize(t.documentBaseURI.toAbsolute(u.value()),function(e){e.width&&e.height&&n.hasDimensions(t)&&(c.find("#width").value(e.width),c.find("#height").value(e.height),$.syncSize(c))}))}(t,e)},onbeforecall:q},t];return n.hasDescription(e)&&r.push({name:"alt",type:"textbox",label:"Image description"}),n.hasImageTitle(e)&&r.push({name:"title",type:"textbox",label:"Image Title"}),n.hasDimensions(e)&&r.push($.createUi()),n.getClassList(e)&&r.push({name:"class",type:"listbox",label:"Class",values:l.buildListItems(n.getClassList(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})})})}),n.hasImageCaption(e)&&r.push({name:"caption",type:"checkbox",label:"Caption"}),r},X={makeTab:function(e,t){return{title:"General",type:"form",items:V(e,t)}},getGeneralItems:V},Y=function(){return i.getOrDie("URL")},K=tinymce.util.Tools.resolve("tinymce.ui.Factory"),J=function(){},G=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t};function Q(e){var t=function(t,n,r,o){var a,s;(a=new(i.getOrDie("XMLHttpRequest"))).open("POST",e.url),a.withCredentials=e.credentials,a.upload.onprogress=function(e){o(e.loaded/e.total*100)},a.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var t;a.status<200||a.status>=300?r("HTTP Error: "+a.status):(t=JSON.parse(a.responseText))&&"string"==typeof t.location?n(G(e.basePath,t.location)):r("Invalid JSON: "+a.responseText)},(s=new FormData).append("file",t.blob(),t.filename()),a.send(s)};return e=a.extend({credentials:!1,handler:t},e),{upload:function(n){return e.url||e.handler!==t?function(e,t){return new o(function(n,r){try{t(e,n,r,J)}catch(e){r(e.message)}})}(n,e.handler):o.reject("Upload url missing from the settings.")}}}var Z=function(e){return function(t){var r=K.get("Throbber"),i=t.control.rootControl,o=new r(i.getEl()),a=t.control.value(),s=function(e){return Y().createObjectURL(e)}(a),u=Q({url:n.getUploadUrl(e),basePath:n.getUploadBasePath(e),credentials:n.getUploadCredentials(e),handler:n.getUploadHandler(e)}),c=function(){var e;o.hide(),e=s,Y().revokeObjectURL(e)};return o.show(),l.blobToDataUri(a).then(function(t){var n=e.editorUpload.blobCache.create({blob:a,blobUri:s,name:a.name?a.name.replace(/\.[^\.]+$/,""):null,base64:t.split(",")[1]});return u.upload(n).then(function(e){var t=i.find("#src");return t.value(e),i.find("tabpanel")[0].activateTab(0),t.fire("change"),c(),e})}).catch(function(t){e.windowManager.alert(t),c()})}},ee={makeTab:function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:".jpg,.jpeg,.png,.gif",onchange:Z(e)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:".jpg,.jpeg,.png,.gif",height:100,onchange:Z(e)}]}}},te=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},ne=function(e,t){var n=t.control.getRoot();$.updateSize(n),e.undoManager.transact(function(){var t=d(M(e),n.toJSON());L(e,t)}),e.editorUpload.uploadImagesAuto()};function re(e){function t(t){var r,i,o=M(e);if(t&&(i={type:"listbox",label:"Image list",name:"image-list",values:l.buildListItems(t,function(t){t.value=e.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:o.src&&e.convertURL(o.src,"src"),onselect:function(e){var t=r.find("#alt");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),r.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){i=this}}),n.hasAdvTab(e)||n.hasUploadUrl(e)||n.hasUploadHandler(e)){var a=[X.makeTab(e,i)];n.hasAdvTab(e)&&a.push(H.makeTab(e)),(n.hasUploadUrl(e)||n.hasUploadHandler(e))&&a.push(ee.makeTab(e)),r=e.windowManager.open({title:"Insert/edit image",data:o,bodyType:"tabpanel",body:a,onSubmit:te(ne,e)})}else r=e.windowManager.open({title:"Insert/edit image",data:o,body:X.getGeneralItems(e,i),onSubmit:te(ne,e)});$.syncSize(r)}return{open:function(){l.createImageList(e,t)}}}var ie=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)},oe=function(e){return function(t){for(var n,r=t.length,i=function(t){t.attr("contenteditable",e?"true":null)};r--;)n=t[r],ie(n)&&(n.attr("contenteditable",e?"false":null),a.each(n.getAll("figcaption"),i))}};t.add("image",function(e){(function(e){e.on("preInit",function(){e.parser.addNodeFilter("figure",oe(!0)),e.serializer.addNodeFilter("figure",oe(!1))})})(e),function(e){e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:re(e).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),e.addMenuItem("image",{icon:"image",text:"Image",onclick:re(e).open,context:"insert",prependToContext:!0})}(e),function(e){e.addCommand("mceImage",re(e).open)}(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,t){var n=function(e,t){return e.fire("insertCustomChar",{chr:t})}(e,t).chr;e.execCommand("mceInsertContent",!1,n)},n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=n.isArray,i=function(e){return r(e)?[].concat((t=e,n.grep(t,function(e){return r(e)&&2===e.length}))):"function"==typeof e?e():[];var t},o=function(e){return function(e,t){var n=function(e){return e.settings.charmap}(e);n&&(t=i(n));var r=function(e){return e.settings.charmap_append}(e);return r?[].concat(t).concat(i(r)):t}(e,[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]])},a=function(e){for(;e;){if("TD"===e.nodeName)return e;e=e.parentNode}},s=function(e){var n,r={type:"container",html:function(e){var t,n,r,i=Math.min(e.length,25),o=Math.ceil(e.length/i);for(t='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<o;r++){for(t+="<tr>",n=0;n<i;n++){var a=r*i+n;if(a<e.length){var s=e[a],u=parseInt(s[0],10),l=s?String.fromCharCode(u):"&nbsp;";t+='<td title="'+s[1]+'"><div tabindex="-1" title="'+s[1]+'" role="button" data-chr="'+u+'">'+l+"</div></td>"}else t+="<td />"}t+="</tr>"}return t+"</tbody></table>"}(o(e)),onclick:function(r){var i=r.target;if(/^(TD|DIV)$/.test(i.nodeName)){var o=a(i).firstChild;if(o&&o.hasAttribute("data-chr")){var s=o.getAttribute("data-chr"),u=parseInt(s,10);isNaN(u)||t(e,String.fromCharCode(u)),r.ctrlKey||n.close()}}},onmouseover:function(e){var t=a(e.target);t&&t.firstChild?(n.find("#preview").text(t.firstChild.firstChild.data),n.find("#previewTitle").text(t.title)):(n.find("#preview").text(" "),n.find("#previewTitle").text(" "))}};n=e.windowManager.open({title:"Special character",spacing:10,padding:10,items:[r,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){n.close()}}]})};e.add("charmap",function(e){return function(e){e.addCommand("mceShowCharmap",function(){s(e)})}(e),function(e){e.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})}(e),function(e){return{getCharMap:function(){return o(e)},insertChar:function(n){t(e,n)}}}(e)})}()},function(e,t){!function(){"use strict";var e=function(e){return function(t){for(var n=0;n<t.length;n++)(r=t[n]).attr("href")||!r.attr("id")&&!r.attr("name")||r.firstChild||t[n].attr("contenteditable",e);var r}};tinymce.util.Tools.resolve("tinymce.PluginManager").add("anchor",function(t){(function(t){t.on("PreInit",function(){t.parser.addNodeFilter("a",e("false")),t.serializer.addNodeFilter("a",e(null))})})(t),function(e){e.addCommand("mceAnchor",function(){!function(e){var t=function(e){var t=e.selection.getNode();return"A"===t.tagName&&""===e.dom.getAttrib(t,"href")?t.id||t.name:""}(e);e.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:t},onsubmit:function(t){var n=t.data.id;(function(e,t){return function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)}(t)?(function(e,t){var n=e.selection.getNode();"A"===n.tagName&&""===e.dom.getAttrib(n,"href")?(n.removeAttribute("name"),n.id=t,e.undoManager.add()):(e.focus(),e.selection.collapse(!0),e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:t})))}(e,t),!1):(e.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!0)})(e,n)&&t.preventDefault()}})}(e)})}(t),function(e){e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})}(t)})}()},function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=function(e){return n.DOM.select(e.settings.ui_container)[0]},i=function(e,t){return{x:e,y:t}},o=function(e,t,n){return i(e.x+t,e.y+n)},a=function(e,t){if(e&&"static"!==n.DOM.getStyle(e,"position",!0)){var r=n.DOM.getPos(e),i=r.x-e.scrollLeft,a=r.y-e.scrollTop;return o(t,-i,-a)}return o(t,0,0)},s=tinymce.util.Tools.resolve("tinymce.ui.Factory"),u=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=function(e,t,l){e.on("contextmenu",function(c){(function(e,t){return c.ctrlKey&&!function(e){return e.settings.contextmenu_never_use_native}(e)})(e)||(c.preventDefault(),function(e,t,n,i){null===i.get()?i.set(function(e,t){var n,i,o=[];i=function(e){return e.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")}(e),u.each(i.split(/[ ,]/),function(t){var n=e.menuItems[t];"|"===t&&(n={text:t}),n&&(n.shortcut="",o.push(n))});for(var a=0;a<o.length;a++)"|"===o[a].text&&(0!==a&&a!==o.length-1||o.splice(a,1));return(n=s.create("menu",{items:o,context:"contextmenu",classes:"contextmenu"})).uiContainer=r(e),n.renderTo(r(e)),n.on("hide",function(e){e.control===this&&t.set(!1)}),e.on("remove",function(){n.remove(),n=null}),n}(e,n)):i.get().show(),i.get().moveTo(t.x,t.y),n.set(!0)}(e,function(e,t){if(e.inline)return a(r(e),function(e){return i(e.pageX,e.pageY)}(t));var s,u,l,c=(s=e.getContentAreaContainer(),u=function(e){return i(e.clientX,e.clientY)}(t),l=n.DOM.getPos(s),o(u,l.x,l.y));return a(r(e),c)}(e,c),t,l))})};t.add("contextmenu",function(t){var n=e(null),r=e(!1);return l(t,r,n),function(e){return{isContextMenuVisible:function(){return e.get()}}}(r)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){return e.getParam("pagebreak_split_block",!1)},r=function(){return'<img src="'+t.transparentSrc+'" class="mce-pagebreak" data-mce-resize="false" data-mce-placeholder />'},i=r,o=function(){return"mce-pagebreak"};e.add("pagebreak",function(e){(function(e){e.addCommand("mcePageBreak",function(){e.settings.pagebreak_split_block?e.insertContent("<p>"+i()+"</p>"):e.insertContent(i())})})(e),function(e){e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})}(e),function(e){var t=function(e){return e.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")}(e),i=new RegExp(t.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi");e.on("BeforeSetContent",function(e){e.content=e.content.replace(i,r())}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(r){for(var i,o,a=r.length;a--;)if((o=(i=r[a]).attr("class"))&&-1!==o.indexOf("mce-pagebreak")){var s=i.parent;if(e.schema.getBlockElements()[s.name]&&n(e)){s.type=3,s.value=t,s.raw=!0,i.remove();continue}i.type=3,i.value=t,i.raw=!0}})})}(e),function(e){e.on("ResolveName",function(t){"IMG"===t.target.nodeName&&e.dom.hasClass(t.target,o())&&(t.name="pagebreak")})}(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e){return e.getParam("media_scripts")},i=function(e){return e.getParam("media_live_embeds",!0)},o=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),s=function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]},u=function(e){return function(t){return t?t.style[e].replace(/px$/,""):""}},l=function(e){return function(t,n){t&&(t.style[e]=function(e){return/^[0-9.]+$/.test(e)?e+"px":e}(n))}},c={getMaxWidth:u("maxWidth"),getMaxHeight:u("maxHeight"),setMaxWidth:l("maxWidth"),setMaxHeight:l("maxHeight")},f=a.DOM,d=function(e){return f.getAttrib(e,"data-ephox-embed-iri")},h=function(e,t){return function(e){var t=f.createFragment(e);return""!==d(t.firstChild)}(t)?function(e){var t=f.createFragment(e).firstChild;return{type:"ephox-embed-iri",source1:d(t),source2:"",poster:"",width:c.getMaxWidth(t),height:c.getMaxHeight(t)}}(t):function(e,t){var r={};return o({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(t,i){if(r.source1||"param"!==t||(r.source1=i.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(r.type||(r.type=t),r=n.extend(i.map,r)),"script"===t){var o=s(e,i.map.src);if(!o)return;r={type:"script",source1:i.map.src,width:o.width,height:o.height}}"source"===t&&(r.source1?r.source2||(r.source2=i.map.src):r.source1=i.map.src),"img"!==t||r.poster||(r.poster=i.map.src)}}).parse(t),r.source1=r.source1||r.src||r.data,r.source2=r.source2||"",r.poster=r.poster||"",r}(e,t)},p=tinymce.util.Tools.resolve("tinymce.util.Promise"),m=function(e){return{mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()]||""},g=tinymce.util.Tools.resolve("tinymce.html.Writer"),v=tinymce.util.Tools.resolve("tinymce.html.Schema"),b=a.DOM,y=function(e,t){var n,r,i,o;for(n in t)if(i=""+t[n],e.map[n])for(r=e.length;r--;)(o=e[r]).name===n&&(i?(e.map[n]=i,o.value=i):(delete e.map[n],e.splice(r,1)));else i&&(e.push({name:n,value:i}),e.map[n]=i)},w=function(e,t,n){return function(e){var t=b.createFragment(e);return""!==b.getAttrib(t.firstChild,"data-ephox-embed-iri")}(e)?function(e,t){var n=b.createFragment(e).firstChild;return c.setMaxWidth(n,t.width),c.setMaxHeight(n,t.height),function(e){var t=g();return o(t).parse(e),t.getContent()}(n.outerHTML)}(e,t):function(e,t,n){var r,i=g(),a=0;return o({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){i.comment(e)},cdata:function(e){i.cdata(e)},text:function(e,t){i.text(e,t)},start:function(e,o,s){switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==t.height&&void 0!==t.width&&y(o,{width:t.width,height:t.height})}if(n)switch(e){case"video":y(o,{poster:t.poster,src:""}),t.source2&&y(o,{src:""});break;case"iframe":y(o,{src:t.source1});break;case"source":if(++a<=2&&(y(o,{src:t["source"+a],type:t["source"+a+"mime"]}),!t["source"+a]))return;break;case"img":if(!t.poster)return;r=!0}i.start(e,o,s)},end:function(e){if("video"===e&&n)for(var o=1;o<=2;o++)if(t["source"+o]){var s=[];s.map={},a<o&&(y(s,{src:t["source"+o],type:t["source"+o+"mime"]}),i.start("source",s,!0))}if(t.poster&&"object"===e&&n&&!r){var u=[];u.map={},y(u,{src:t.poster,width:t.width,height:t.height}),i.start("img",u,!0)}i.end(e)}},v({})).parse(e),i.getContent()}(e,t,n)},x=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],C={},_=function(e){return function(t){return function(e,t){var i=n.extend({},t);if(!i.source1&&(n.extend(i,h(r(e),i.embed)),!i.source1))return"";i.source2||(i.source2=""),i.poster||(i.poster=""),i.source1=e.convertURL(i.source1,"source"),i.source2=e.convertURL(i.source2,"source"),i.source1mime=m(i.source1),i.source2mime=m(i.source2),i.poster=e.convertURL(i.poster,"poster");var o=function(e){var t=x.filter(function(t){return t.regex.test(e)});return t.length>0?n.extend({},t[0],{url:function(e,t){for(var n=e.regex.exec(t),r=e.url,i=function(e){r=r.replace("$"+e,function(){return n[e]?n[e]:""})},o=0;o<n.length;o++)i(o);return r.replace(/\?$/,"")}(t[0],e)}):null}(i.source1);if(o&&(i.source1=o.url,i.type=o.type,i.allowFullscreen=o.allowFullscreen,i.width=i.width||o.w,i.height=i.height||o.h),i.embed)return w(i.embed,i,!0);var a=s(r(e),i.source1);a&&(i.type="script",i.width=a.width,i.height=a.height);var u=function(e){return e.getParam("audio_template_callback")}(e),l=function(e){return e.getParam("video_template_callback")}(e);return i.width=i.width||300,i.height=i.height||150,n.each(i,function(t,n){i[n]=e.dom.encode(t)}),"iframe"===i.type?function(e){var t=e.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source1+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"}(i):"application/x-shockwave-flash"===i.source1mime?function(e){var t='<object data="'+e.source1+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+"</object>"}(i):-1!==i.source1mime.indexOf("audio")?function(e,t){return u?u(e):'<audio controls="controls" src="'+e.source1+'">'+(e.source2?'\n<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</audio>"}(i):"script"===i.type?'<script src="'+i.source1+'"><\/script>':function(e,t){return l?l(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source1+'"'+(e.source1mime?' type="'+e.source1mime+'"':"")+" />\n"+(e.source2?'<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</video>"}(i)}(e,t)}},S=function(e,t){var n=function(e){return e.getParam("media_url_resolver")}(e);return n?function(e,t,n){return new p(function(r,i){var o=function(n){return n.html&&(C[e.source1]=n),r({url:e.source1,html:n.html?n.html:t(e)})};C[e.source1]?o(C[e.source1]):n({url:e.source1},o,i)})}(t,_(e),n):function(e,t){return new p(function(n){n({html:t(e),url:e.source1})})}(t,_(e))},T=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},k=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],i=e.find("#constrain")[0];n&&r&&i&&t(n,r,i.checked())},E=function(e,t,n){var r=e.state.get("oldVal"),i=t.state.get("oldVal"),o=e.value(),a=t.value();n&&r&&i&&o&&a&&(o!==r?(a=Math.round(o/r*a),isNaN(a)||t.value(a)):(o=Math.round(a/i*o),isNaN(o)||e.value(o))),T(e,t)},N=function(e){k(e,E)},A=N,R=t.ie&&t.ie<=8?"onChange":"onInput",O=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},D=function(e,t){return function(i){var o=i.html,a=e.find("#embed")[0],s=n.extend(h(r(t),o),{source1:i.url});e.fromJSON(s),a&&(a.value(o),A(e))}},P=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),function(e,t){var n,r,i=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(r=i.length-1;r>=0;r--)t[n]===i[r]&&i.splice(r,1);e.selection.select(i[0])}(e,n),e.nodeChanged()},I=function(e){var t,i,o=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){S(e,t.toJSON()).then(D(t,e)).catch(O(e))},1)},onchange:function(r){S(e,t.toJSON()).then(D(t,e)).catch(O(e)),function(e,t){n.each(t,function(t,n){e.find("#"+n).value(t)})}(t,r.meta)},onbeforecall:function(e){e.meta=t.toJSON()}}],a=[];if(function(e){return e.getParam("media_alt_source",!0)}(e)&&a.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),function(e){return e.getParam("media_poster",!0)}(e)&&a.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),function(e){return e.getParam("media_dimensions",!0)}(e)){var s=function(e){var t=function(){e(function(e){N(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}}(function(e){e(t),i=t.toJSON(),t.find("#embed").value(w(i.embed,i))});o.push(s)}i=function(e){var t=e.selection.getNode(),n=t.getAttribute("data-ephox-embed-iri");return n?{source1:n,"data-ephox-embed-iri":n,width:c.getMaxWidth(t),height:c.getMaxHeight(t)}:t.getAttribute("data-mce-object")?h(r(e),e.serializer.serialize(t,{selection:!0})):{}}(e);var u={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()}(e),multiline:!0,rows:5,label:"Source"};u[R]=function(){i=n.extend({},h(r(e),this.value())),this.parent().parent().fromJSON(i)};var l=[{title:"General",type:"form",items:o},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},u]}];a.length>0&&l.push({title:"Advanced",type:"form",items:a}),function(e){k(e,T)}(t=e.windowManager.open({title:"Insert/edit media",data:i,bodyType:"tabpanel",body:l,onSubmit:function(){A(t),function(e,t){var n=e.toJSON();n.embed=w(n.embed,n),n.embed&&function(e){return C.hasOwnProperty(e)}(n.source1)?P(t,n.embed):S(t,n).then(function(e){P(t,e.html)}).catch(O(t))}(t,e)}}))},B=tinymce.util.Tools.resolve("tinymce.html.Node"),M=function(e,t){if(!1===function(e){return e.getParam("media_filter_html",!0)}(e))return t;var n,r=g();return o({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){r.comment(e)},cdata:function(e){r.cdata(e)},text:function(e,t){r.text(e,t)},start:function(t,i,o){if(n=!0,"script"!==t&&"noscript"!==t){for(var a=0;a<i.length;a++){if(0===i[a].name.indexOf("on"))return;"style"===i[a].name&&(i[a].value=e.dom.serializeStyle(e.dom.parseStyle(i[a].value),t))}r.start(t,i,o),n=!1}},end:function(e){n||r.end(e)}},v({})).parse(t),r.getContent()},L=function(e,n){var r,i=n.name;return(r=new B("img",1)).shortEnded=!0,H(e,n,r),r.attr({width:n.attr("width")||"300",height:n.attr("height")||("audio"===i?"30":"150"),style:n.attr("style"),src:t.transparentSrc,"data-mce-object":i,class:"mce-object mce-object-"+i}),r},F=function(e,t){var n,r,i,o=t.name;return(n=new B("span",1)).attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":o,class:"mce-preview-object mce-object-"+o}),H(e,t,n),(r=new B(o,1)).attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),class:t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),(i=new B("span",1)).attr("class","mce-shim"),n.append(r),n.append(i),n},H=function(e,t,n){var r,i,o,a,s;for(a=(o=t.attributes).length;a--;)r=o[a].name,i=o[a].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(i=e.convertURL(i,r)),n.attr("data-mce-p-"+r,i));(s=t.firstChild&&t.firstChild.value)&&(n.attr("data-mce-html",escape(M(e,s))),n.firstChild=null)},z=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1},j=function(e){return function(n){for(var o,a,u=n.length;u--;)(o=n[u]).parent&&(o.parent.attr("data-mce-object")||("script"!==o.name||(a=s(r(e),o.attr("src"))))&&(a&&(a.width&&o.attr("width",a.width.toString()),a.height&&o.attr("height",a.height.toString())),"iframe"===o.name&&i(e)&&t.ceFalse?z(o)||o.replace(F(e,o)):z(o)||o.replace(L(e,o))))}};e.add("media",function(e){return function(e){e.addCommand("mceMedia",function(){I(e)})}(e),function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})}(e),function(e){e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)})}(e),function(e){e.on("preInit",function(){var t=e.schema.getSpecialElements();n.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var r=e.schema.getBoolAttrs();n.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){r[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",j(e)),e.serializer.addAttributeFilter("data-mce-object",function(t,n){for(var r,i,o,a,s,u,l,c,f=t.length;f--;)if((r=t[f]).parent){for(l=r.attr(n),i=new B(l,1),"audio"!==l&&"script"!==l&&((c=r.attr("class"))&&-1!==c.indexOf("mce-preview-object")?i.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):i.attr({width:r.attr("width"),height:r.attr("height")})),i.attr({style:r.attr("style")}),o=(a=r.attributes).length;o--;){var d=a[o].name;0===d.indexOf("data-mce-p-")&&i.attr(d.substr(11),a[o].value)}"script"===l&&i.attr("type","text/javascript"),(s=r.attr("data-mce-html"))&&((u=new B("#text",3)).raw=!0,u.value=M(e,unescape(s)),i.append(u)),r.replace(i)}})}),e.on("setContent",function(){e.$("span.mce-preview-object").each(function(t,n){var r=e.$(n);0===r.find("span.mce-shim",n).length&&r.append('<span class="mce-shim"></span>')})})}(e),function(e){e.on("click keyup",function(){var t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")}),e.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),e.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"))&&(t=unescape(t),n.setAttribute("data-mce-html",escape(w(t,{width:e.width,height:e.height}))))})}(e),function(e){return{showDialog:function(){I(e)}}}(e)})}()},function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");function r(e){return e&&1===e.nodeType&&"false"===e.contentEditable}var i=function(e,t,n,i,o){var a,s,u,l,c,f,d=[],h=0;function p(e,t){if(t=t||0,!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");var n=e.index;if(t>0){var r=e[t];if(!r)throw new Error("Invalid capture group");n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}if(u=t.ownerDocument,l=o.getBlockElements(),c=o.getWhiteSpaceElements(),f=o.getShortEndedElements(),s=function e(t){var n;if(3===t.nodeType)return t.data;if(c[t.nodeName]&&!l[t.nodeName])return"";if(n="",r(t))return"\n";if((l[t.nodeName]||f[t.nodeName])&&(n+="\n"),t=t.firstChild)do{n+=e(t)}while(t=t.nextSibling);return n}(t)){if(e.global)for(;a=e.exec(s);)d.push(p(a,i));else a=s.match(e),d.push(p(a,i));return d.length&&(h=d.length,function(e,t,n){var i,o,a,s,u=[],d=0,h=e,p=t.shift(),m=0;e:for(;;){if((l[h.nodeName]||f[h.nodeName]||r(h))&&d++,3===h.nodeType&&(!o&&h.length+d>=p[1]?(o=h,s=p[1]-d):i&&u.push(h),!i&&h.length+d>p[0]&&(i=h,a=p[0]-d),d+=h.length),i&&o){if(h=n({startNode:i,startNodeIndex:a,endNode:o,endNodeIndex:s,innerNodes:u,match:p[2],matchIndex:m}),d-=o.length-s,i=null,o=null,u=[],m++,!(p=t.shift()))break}else if(c[h.nodeName]&&!l[h.nodeName]||!h.firstChild){if(h.nextSibling){h=h.nextSibling;continue}}else if(!r(h)){h=h.firstChild;continue}for(;;){if(h.nextSibling){h=h.nextSibling;break}if(h.parentNode===e)break e;h=h.parentNode}}}(t,d,function(e){var t;if("function"!=typeof e){var n=e.nodeType?e:u.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(u.createTextNode(e)),r}}else t=e;return function(e){var n,r,i,o=e.startNode,a=e.endNode,s=e.matchIndex;if(o===a){var l=o;i=l.parentNode,e.startNodeIndex>0&&(n=u.createTextNode(l.data.substring(0,e.startNodeIndex)),i.insertBefore(n,l));var c=t(e.match[0],s);return i.insertBefore(c,l),e.endNodeIndex<l.length&&(r=u.createTextNode(l.data.substring(e.endNodeIndex)),i.insertBefore(r,l)),l.parentNode.removeChild(l),c}n=u.createTextNode(o.data.substring(0,e.startNodeIndex)),r=u.createTextNode(a.data.substring(e.endNodeIndex));for(var f=t(o.data.substring(e.startNodeIndex),s),d=[],h=0,p=e.innerNodes.length;h<p;++h){var m=e.innerNodes[h],g=t(m.data,s);m.parentNode.replaceChild(g,m),d.push(g)}var v=t(a.data.substring(0,e.endNodeIndex),s);return(i=o.parentNode).insertBefore(n,o),i.insertBefore(f,o),i.removeChild(o),(i=a.parentNode).insertBefore(v,a),i.insertBefore(r,a),i.removeChild(a),v}}(n))),h}},o=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},a=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},s=function(e,t){var r,i=[];if((r=n.toArray(e.getBody().getElementsByTagName("span"))).length)for(var a=0;a<r.length;a++){var s=o(r[a]);null!==s&&s.length&&s===t.toString()&&i.push(r[a])}return i},u=function(e,t,n){var r=t.get(),i=e.dom;(n=!1!==n)?r++:r--,i.removeClass(s(e,t.get()),"mce-match-marker-selected");var o=s(e,r);return o.length?(i.addClass(s(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(o[0]),r):-1},l=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},c=function(e,t){var n=u(e,t,!0);-1!==n&&t.set(n)},f=function(e,t){var n=u(e,t,!1);-1!==n&&t.set(n)},d=function(e){var t=o(e);return null!==t&&t.length>0},h=function(e,t,r){var i,s,u,l;for(s=n.toArray(e.getBody().getElementsByTagName("span")),i=0;i<s.length;i++){var c=o(s[i]);null!==c&&c.length&&(c===t.get().toString()&&(u||(u=s[i].firstChild),l=s[i].firstChild),a(s[i]))}if(u&&l){var f=e.dom.createRng();return f.setStart(u,0),f.setEnd(l,l.data.length),!1!==r&&e.selection.setRng(f),f}},p=function(e,t){return s(e,t.get()+1).length>0},m=function(e,t){return s(e,t.get()-1).length>0},g={done:h,find:function(e,t,n,r,o){n=(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"[^\\S\\r\\n]"),n=o?"\\b"+n+"\\b":n;var a=function(e,t,n){var r,o;return(o=e.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",r=e.getBody(),h(e,t,!1),i(n,r,o,!1,e.schema)}(e,t,new RegExp(n,r?"g":"gi"));return a&&(t.set(-1),t.set(u(e,t,!0))),a},next:c,prev:f,replace:function(e,t,r,i,s){var u,h,g,v,b,y,w=t.get();for(i=!1!==i,g=e.getBody(),h=n.grep(n.toArray(g.getElementsByTagName("span")),d),u=0;u<h.length;u++){var x=o(h[u]);if(v=b=parseInt(x,10),s||v===t.get()){for(r.length?(h[u].firstChild.nodeValue=r,a(h[u])):l(e.dom,h[u]);h[++u];){if((v=parseInt(o(h[u]),10))!==b){u--;break}l(e.dom,h[u])}i&&w--}else b>t.get()&&h[u].setAttribute("data-mce-index",b-1)}return t.set(w),i?(y=p(e,t),c(e,t)):(y=m(e,t),f(e,t)),!s&&y},hasNext:p,hasPrev:m},v=function(e,t){var r,i={};function o(){s.statusbar.find("#next").disabled(!1===g.hasNext(e,t)),s.statusbar.find("#prev").disabled(!1===g.hasPrev(e,t))}function a(){e.windowManager.alert("Could not find the specified string.",function(){s.find("#find")[0].focus()})}e.undoManager.add(),r=n.trim(e.selection.getContent({format:"text"}));var s=e.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){e.focus(),g.done(e,t),e.undoManager.add()},onSubmit:function(n){var r,u,l,c;return n.preventDefault(),u=s.find("#case").checked(),c=s.find("#words").checked(),(l=s.find("#find").value()).length?i.text===l&&i.caseState===u&&i.wholeWord===c?g.hasNext(e,t)?(g.next(e,t),void o()):void a():((r=g.find(e,t,l,u,c))||a(),s.statusbar.items().slice(1).disabled(0===r),o(),void(i={text:l,caseState:u,wholeWord:c})):(g.done(e,t,!1),void s.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){s.submit()}},{text:"Replace",disabled:!0,onclick:function(){g.replace(e,t,s.find("#replace").value())||(s.statusbar.items().slice(1).disabled(!0),t.set(-1),i={})}},{text:"Replace all",disabled:!0,onclick:function(){g.replace(e,t,s.find("#replace").value(),!0,!0),s.statusbar.items().slice(1).disabled(!0),i={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){g.prev(e,t),o()}},{text:"Next",name:"next",disabled:!0,onclick:function(){g.next(e,t),o()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:r},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})},b=function(e,t){return function(){v(e,t)}};t.add("searchreplace",function(t){var n=e(-1);return function(e,t){e.addCommand("SearchReplace",function(){v(e,t)})}(t,n),function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:b(e,t),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:b(e,t)}),e.shortcuts.add("Meta+F","",b(e,t))}(t,n),function(e,t){return{done:function(n){return g.done(e,t,n)},find:function(n,r,i){return g.find(e,t,n,r,i)},next:function(){return g.next(e,t)},prev:function(){return g.prev(e,t)},replace:function(n,r,i){return g.replace(e,t,n,r,i)}}}(t,n)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=function(e){return e.getParam("code_dialog_height",Math.min(t.DOM.getViewPort().h-200,500))},r=function(e){var t=function(e){return e.getParam("code_dialog_width",600)}(e),r=n(e);e.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:t,minHeight:r,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(t){!function(e,t){e.focus(),e.undoManager.transact(function(){e.setContent(t)}),e.selection.setCursorLocation(),e.nodeChanged()}(e,t.data.code)}}).find("#code").value(function(e){return e.getContent({source_view:!0})}(e))};e.add("code",function(e){return function(e){e.addCommand("mceCodeEditor",function(){r(e)})}(e),function(e){e.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){r(e)}}),e.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){r(e)}})}(e),{}})}()},function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return{isFullscreen:function(){return null!==e.get()}}},r=function(e,t){e.fire("FullscreenStateChanged",{state:t})},i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils").DOM,o=function(e,t){e.addCommand("mceFullScreen",function(){!function(e,t){var n,o,a,s,u,l,c=document.body,f=document.documentElement,d=t.get(),h=function(){var e,t,n,r;i.setStyle(a,"height",(n=window,r=document.body,r.offsetWidth&&(e=r.offsetWidth,t=r.offsetHeight),n.innerWidth&&n.innerHeight&&(e=n.innerWidth,t=n.innerHeight),{w:e,h:t}).h-(o.clientHeight-a.clientHeight))},p=function(){i.unbind(window,"resize",h)};if(n=(o=e.getContainer()).style,s=(a=e.getContentAreaContainer().firstChild).style,d)s.width=d.iframeWidth,s.height=d.iframeHeight,d.containerWidth&&(n.width=d.containerWidth),d.containerHeight&&(n.height=d.containerHeight),i.removeClass(c,"mce-fullscreen"),i.removeClass(f,"mce-fullscreen"),i.removeClass(o,"mce-fullscreen"),u=d.scrollPos,window.scrollTo(u.x,u.y),i.unbind(window,"resize",d.resizeHandler),e.off("remove",d.removeHandler),t.set(null),r(e,!1);else{var m={scrollPos:(l=i.getViewPort(),{x:l.x,y:l.y}),containerWidth:n.width,containerHeight:n.height,iframeWidth:s.width,iframeHeight:s.height,resizeHandler:h,removeHandler:p};s.width=s.height="100%",n.width=n.height="",i.addClass(c,"mce-fullscreen"),i.addClass(f,"mce-fullscreen"),i.addClass(o,"mce-fullscreen"),i.bind(window,"resize",h),e.on("remove",p),h(),t.set(m),r(e,!0)}}(e,t)})},a=function(e){return function(t){var n=t.control;e.on("FullscreenStateChanged",function(e){n.active(e.state)})}};t.add("fullscreen",function(t){var r=e(null);return t.settings.inline?n(r):(o(t,r),function(e){e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:a(e),context:"view"}),e.addButton("fullscreen",{active:!1,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:a(e)})}(t),t.addShortcut("Ctrl+Shift+F","","mceFullScreen"),n(r))})}()},function(e,t){!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},r=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},i=function(e){return function(){return e}},o=function(e){return e},a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},s=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,arguments)}},u=function(e){return e()},l=i(!1),c=i(!0),f=l,d=c,h=function(){return p},p=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r={fold:function(e,t){return e()},is:f,isSome:f,isNone:d,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:t,map:h,ap:h,each:function(){},bind:h,flatten:h,exists:f,forall:d,filter:h,equals:e,equals_:e,toArray:function(){return[]},toString:i("none()")};return Object.freeze&&Object.freeze(r),r}(),m=function(e){var t=function(){return e},n=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:d,isNone:f,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return m(t(e))},ap:function(t){return t.fold(h,function(t){return m(t(e))})},each:function(t){t(e)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(e)?i:p},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(f,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},g={some:m,none:h,from:function(e){return null===e||void 0===e?p:m(e)}},v=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},b=v("string"),y=v("array"),w=v("boolean"),x=v("function"),C=v("number"),_=void 0===(e=Array.prototype.indexOf)?function(e,t){return P(e,t)}:function(t,n){return e.call(t,n)},S=function(e,t){return _(e,t)>-1},T=function(e,t){return D(e,t).isSome()},k=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},E=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},N=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},A=function(e,t,n){return function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n])}(e,function(e){n=t(n,e)}),n},R=function(e,t,n){return E(e,function(e){n=t(n,e)}),n},O=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return g.some(i)}return g.none()},D=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return g.some(n);return g.none()},P=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},I=Array.prototype.push,B=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);I.apply(t,e[n])}return t},M=function(e,t){var n=k(e,t);return B(n)},L=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},F=Array.prototype.slice,H=function(e){var t=F.call(e,0);return t.reverse(),t},z=(x(Array.from)&&Array.from,Object.keys),j=function(e,t){for(var n=z(e),r=0,i=n.length;r<i;r++){var o=n[r];t(e[o],o,e)}},W=function(e,t){return U(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},U=function(e,t){var n={};return j(e,function(r,i){var o=t(r,i,e);n[o.k]=o.v}),n},$=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return E(e,function(e,n){r[e]=i(t[n])}),r}},q=function(e){return e.slice(0).sort()},V=function(e,t){throw new Error("All required keys ("+q(e).join(", ")+") were not specified. Specified keys were: "+q(t).join(", ")+".")},X=function(e){throw new Error("Unsupported keys for object: "+q(e).join(", "))},Y=function(e,t){if(!y(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");E(t,function(t){if(!b(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")})},K=function(e){var t=q(e);O(t,function(e,n){return n<t.length-1&&e===t[n+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})},J=function(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return Y("required",e),Y("optional",t),K(n),function(r){var o=z(r);L(e,function(e){return S(o,e)})||V(e,o);var a=N(o,function(e){return!S(n,e)});a.length>0&&X(a);var s={};return E(e,function(e){s[e]=i(r[e])}),E(t,function(e){s[e]=i(Object.prototype.hasOwnProperty.call(r,e)?g.some(r[e]):g.none())}),s}},G=$("width","height"),Q=$("rows","columns"),Z=$("row","column"),ee=$("x","y"),te=$("element","rowspan","colspan"),ne=$("element","rowspan","colspan","isNew"),re={dimensions:G,grid:Q,address:Z,coords:ee,extended:$("element","rowspan","colspan","row","column"),detail:te,detailnew:ne,rowdata:$("element","cells","section"),elementnew:$("element","isNew"),rowdatanew:$("element","cells","section","isNew"),rowcells:$("cells","section"),rowdetails:$("details","section"),bounds:$("startRow","startCol","finishRow","finishCol")},ie=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:i(e)}},oe={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return ie(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return ie(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return ie(n)},fromDom:ie,fromPoint:function(e,t,n){var r=e.dom();return g.from(r.elementFromPoint(t,n)).map(ie)}},ae={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},se=ae.ELEMENT,ue=ae.DOCUMENT,le=function(e){return e.nodeType!==se&&e.nodeType!==ue||0===e.childElementCount},ce={all:function(e,t){var n=void 0===t?document:t.dom();return le(n)?[]:k(n.querySelectorAll(e),oe.fromDom)},is:function(e,t){var n=e.dom();if(n.nodeType!==se)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},one:function(e,t){var n=void 0===t?document:t.dom();return le(n)?g.none():g.from(n.querySelector(e)).map(oe.fromDom)}},fe=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},i=t(e);do{i=i.bind(r)}while(i.isSome());return n},de="undefined"!=typeof window?window:Function("return this;")(),he=function(e,t){var n=function(e,t){return function(e,t){return function(e,t){for(var n=void 0!==t&&null!==t?t:de,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n}(e.split("."),t)}(e,t)}(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},pe=function(e,t){return function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(e,t,he("Node").DOCUMENT_POSITION_CONTAINED_BY)},me=function(e){var t,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n||(n=!0,t=e.apply(null,r)),t}},ge=function(){return ve(0,0)},ve=function(e,t){return{major:e,minor:t}},be=function(e,t){var n=String(t).toLowerCase();return 0===e.length?ge():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return ve(r(1),r(2))}(e,n)},ye=ge,we=function(e,t){return function(){return t===e}},xe=function(e){var t=e.current;return{current:t,version:e.version,isEdge:we("Edge",t),isChrome:we("Chrome",t),isIE:we("IE",t),isOpera:we("Opera",t),isFirefox:we("Firefox",t),isSafari:we("Safari",t)}},Ce=function(){return xe({current:void 0,version:ye()})},_e=xe,Se=(i("Edge"),i("Chrome"),i("IE"),i("Opera"),i("Firefox"),i("Safari"),function(e,t){return function(){return t===e}}),Te=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Se("Windows",t),isiOS:Se("iOS",t),isAndroid:Se("Android",t),isOSX:Se("OSX",t),isLinux:Se("Linux",t),isSolaris:Se("Solaris",t),isFreeBSD:Se("FreeBSD",t)}},ke=function(){return Te({current:void 0,version:ye()})},Ee=Te,Ne=(i("Windows"),i("iOS"),i("Android"),i("Linux"),i("OSX"),i("Solaris"),i("FreeBSD"),function(e,t){var n=String(t).toLowerCase();return O(e,function(e){return e.search(n)})}),Ae=function(e,t){return-1!==e.indexOf(t)},Re=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Oe=function(e){return function(t){return Ae(t,e)}},De=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Ae(e,"edge/")&&Ae(e,"chrome")&&Ae(e,"safari")&&Ae(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Re],search:function(e){return Ae(e,"chrome")&&!Ae(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Ae(e,"msie")||Ae(e,"trident")}},{name:"Opera",versionRegexes:[Re,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Oe("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Oe("firefox")},{name:"Safari",versionRegexes:[Re,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Ae(e,"safari")||Ae(e,"mobile/"))&&Ae(e,"applewebkit")}}],Pe=[{name:"Windows",search:Oe("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Ae(e,"iphone")||Ae(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Oe("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Oe("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Oe("linux"),versionRegexes:[]},{name:"Solaris",search:Oe("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Oe("freebsd"),versionRegexes:[]}],Ie={browsers:i(De),oses:i(Pe)},Be=function(e){var t=Ie.browsers(),n=Ie.oses(),r=function(e,t){return Ne(e,t).map(function(e){var n=be(e.versionRegexes,t);return{current:e.name,version:n}})}(t,e).fold(Ce,_e),o=function(e,t){return Ne(e,t).map(function(e){var n=be(e.versionRegexes,t);return{current:e.name,version:n}})}(n,e).fold(ke,Ee);return{browser:r,os:o,deviceType:function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,a=e.isAndroid()&&3===e.version.major,s=e.isAndroid()&&4===e.version.major,u=r||a||s&&!0===/mobile/i.test(n),l=e.isiOS()||e.isAndroid(),c=l&&!u,f=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:i(r),isiPhone:i(o),isTablet:i(u),isPhone:i(c),isTouch:i(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:i(f)}}(o,r,e)}},Me={detect:me(function(){var e=navigator.userAgent;return Be(e)})},Le=function(e,t){return e.dom()===t.dom()},Fe=Me.detect().browser.isIE()?function(e,t){return pe(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},He={eq:Le,isEqualNode:function(e,t){return e.dom().isEqualNode(t.dom())},member:function(e,t){return T(t,a(Le,e))},contains:Fe,is:ce.is},ze=function(e){var t=e.dom();return g.from(t.parentNode).map(oe.fromDom)},je=function(e){var t=e.dom();return g.from(t.previousSibling).map(oe.fromDom)},We=function(e){var t=e.dom();return g.from(t.nextSibling).map(oe.fromDom)},Ue=function(e){var t=e.dom();return k(t.childNodes,oe.fromDom)},$e=function(e,t){var n=e.dom().childNodes;return g.from(n[t]).map(oe.fromDom)},qe=$("element","offset"),Ve={owner:function(e){return oe.fromDom(e.dom().ownerDocument)},defaultView:function(e){var t=e.dom().ownerDocument.defaultView;return oe.fromDom(t)},documentElement:function(e){return oe.fromDom(e.dom().ownerDocument.documentElement)},parent:ze,findIndex:function(e){return ze(e).bind(function(t){var n=Ue(t);return D(n,function(t){return He.eq(e,t)})})},parents:function(e,t){for(var n=x(t)?t:i(!1),r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var a=r.parentNode,s=oe.fromDom(a);if(o.push(s),!0===n(s))break;r=a}return o},siblings:function(e){return ze(e).map(Ue).map(function(t){return N(t,function(t){return!He.eq(e,t)})}).getOr([])},prevSibling:je,offsetParent:function(e){var t=e.dom();return g.from(t.offsetParent).map(oe.fromDom)},prevSiblings:function(e){return H(fe(e,je))},nextSibling:We,nextSiblings:function(e){return fe(e,We)},children:Ue,child:$e,firstChild:function(e){return $e(e,0)},lastChild:function(e){return $e(e,e.dom().childNodes.length-1)},childNodesCount:function(e){return e.dom().childNodes.length},hasChildNodes:function(e){return e.dom().hasChildNodes()},leaf:function(e,t){var n=Ue(e);return n.length>0&&t<n.length?qe(n[t],0):qe(e,t)}},Xe=function(e,t,n){return M(Ve.children(e),function(e){return ce.is(e,t)?n(e)?[e]:[]:Xe(e,t,n)})},Ye={firstLayer:function(e,t){return Xe(e,t,i(!0))},filterFirstLayer:Xe},Ke=function(e){return e.dom().nodeName.toLowerCase()},Je=function(e){return e.dom().nodeType},Ge=function(e){return function(t){return Je(t)===e}},Qe=Ge(ae.ELEMENT),Ze=Ge(ae.TEXT),et=Ge(ae.DOCUMENT),tt={name:Ke,type:Je,value:function(e){return e.dom().nodeValue},isElement:Qe,isText:Ze,isDocument:et,isComment:function(e){return Je(e)===ae.COMMENT||"#comment"===Ke(e)}},nt=function(e,t,n){if(!(b(n)||w(n)||C(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},rt=function(e,t,n){nt(e.dom(),t,n)},it=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},ot=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},at={clone:function(e){return R(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:rt,setAll:function(e,t){var n=e.dom();j(t,function(e,t){nt(n,t,e)})},get:it,has:ot,remove:function(e,t){e.dom().removeAttribute(t)},hasNone:function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},transfer:function(e,t,n){tt.isElement(e)&&tt.isElement(t)&&E(n,function(n){!function(e,t,n){ot(e,n)&&!ot(t,n)&&rt(t,n,it(e,n))}(e,t,n)})}},st=me(function(){return ut(oe.fromDom(document))}),ut=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return oe.fromDom(t)},lt={body:st,getBody:ut,inBody:function(e){var t=tt.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)}},ct=function(e,t){var n=[];return E(Ve.children(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(ct(e,t))}),n},ft={all:function(e){return ct(lt.body(),e)},ancestors:function(e,t,n){return N(Ve.parents(e,n),t)},siblings:function(e,t){return N(Ve.siblings(e),t)},children:function(e,t){return N(Ve.children(e),t)},descendants:ct},dt={all:function(e){return ce.all(e)},ancestors:function(e,t,n){return ft.ancestors(e,function(e){return ce.is(e,t)},n)},siblings:function(e,t){return ft.siblings(e,function(e){return ce.is(e,t)})},children:function(e,t){return ft.children(e,function(e){return ce.is(e,t)})},descendants:function(e,t){return ce.all(t,e)}};function ht(e,t,n,r,i){return e(n,r)?g.some(n):x(i)&&i(n)?g.none():t(n,r,i)}var pt=function(e,t,n){for(var r=e.dom(),o=x(n)?n:i(!1);r.parentNode;){r=r.parentNode;var a=oe.fromDom(r);if(t(a))return g.some(a);if(o(a))break}return g.none()},mt=function(e,t){return O(e.dom().childNodes,r(t,oe.fromDom)).map(oe.fromDom)},gt=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){if(t(oe.fromDom(e.childNodes[r])))return g.some(oe.fromDom(e.childNodes[r]));var i=n(e.childNodes[r]);if(i.isSome())return i}return g.none()};return n(e.dom())},vt={first:function(e){return gt(lt.body(),e)},ancestor:pt,closest:function(e,t,n){return ht(function(e){return t(e)},pt,e,t,n)},sibling:function(e,t){var n=e.dom();return n.parentNode?mt(oe.fromDom(n.parentNode),function(n){return!He.eq(e,n)&&t(n)}):g.none()},child:mt,descendant:gt},bt=function(e,t,n){return vt.ancestor(e,function(e){return ce.is(e,t)},n)},yt={first:function(e){return ce.one(e)},ancestor:bt,sibling:function(e,t){return vt.sibling(e,function(e){return ce.is(e,t)})},child:function(e,t){return vt.child(e,function(e){return ce.is(e,t)})},descendant:function(e,t){return ce.one(t,e)},closest:function(e,t,n){return ht(ce.is,bt,e,t,n)}},wt=function(e,t,n){var r=void 0!==n?n:i(!1);return r(t)?g.none():S(e,tt.name(t))?g.some(t):yt.ancestor(t,e.join(","),function(e){return ce.is(e,"table")||r(e)})},xt=function(e,t){return Ve.parent(t).map(function(t){return dt.children(t,e)})},Ct=function(e,t){return wt(["td","th"],e,t)},_t=function(e){return Ye.firstLayer(e,"th,td")},St=(a(xt,"th,td"),function(e,t){return yt.closest(e,"table",t)}),Tt=function(e){return Ye.firstLayer(e,"tr")},kt=(a(xt,"tr"),function(e){var t=Tt(e);return k(t,function(e){var t=e,n=Ve.parent(t).map(function(e){var t=tt.name(e);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"}).getOr("tbody"),r=k(_t(e),function(e){var t=at.has(e,"rowspan")?parseInt(at.get(e,"rowspan"),10):1,n=at.has(e,"colspan")?parseInt(at.get(e,"colspan"),10):1;return re.detail(e,t,n)});return re.rowdata(t,r,n)})}),Et=function(e,t){return e+","+t},Nt=function(e,t){var n=M(e.all(),function(e){return e.cells()});return N(n,t)},At=function(e){var t={},n=[],r=e.length,o=0;E(e,function(e,r){var i=[];E(e.cells(),function(e,n){for(var a=0;void 0!==t[Et(r,a)];)a++;for(var s=re.extended(e.element(),e.rowspan(),e.colspan(),r,a),u=0;u<e.colspan();u++)for(var l=0;l<e.rowspan();l++){var c=a+u,f=Et(r+l,c);t[f]=s,o=Math.max(o,c+1)}i.push(s)}),n.push(re.rowdata(e.element(),i,e.section()))});var a=re.grid(r,o);return{grid:i(a),access:i(t),all:i(n)}},Rt=function(e,t,n){var r=e.access()[Et(t,n)];return void 0!==r?g.some(r):g.none()},Ot=function(e,t,n){var r=Nt(e,function(e){return n(t,e.element())});return r.length>0?g.some(r[0]):g.none()},Dt=Nt,Pt=function(e){var t=k(e.all(),function(e){return e.cells()});return B(t)},It={isSupported:function(e){return void 0!==e.style}},Bt=function(e,t,n){if(!b(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);It.isSupported(e)&&e.style.setProperty(t,n)},Mt=function(e,t){It.isSupported(e)&&e.style.removeProperty(t)},Lt=function(e,t,n){var r=e.dom();Bt(r,t,n)},Ft=function(e,t){return It.isSupported(e)?e.style.getPropertyValue(t):""},Ht=function(e,t){var n=e.dom(),r=Ft(n,t);return g.from(r).filter(function(e){return e.length>0})},zt={copy:function(e,t){var n=e.dom(),r=t.dom();It.isSupported(n)&&It.isSupported(r)&&(r.style.cssText=n.style.cssText)},set:Lt,preserve:function(e,t){var n=at.get(e,"style"),r=t(e);return(void 0===n?at.remove:at.set)(e,"style",n),r},setAll:function(e,t){var n=e.dom();j(t,function(e,t){Bt(n,t,e)})},setOptions:function(e,t){var n=e.dom();j(t,function(e,t){e.fold(function(){Mt(n,t)},function(e){Bt(n,t,e)})})},remove:function(e,t){var n=e.dom();Mt(n,t),at.has(e,"style")&&""===at.get(e,"style").replace(/^\s+|\s+$/g,"")&&at.remove(e,"style")},get:function(e,t){var n=e.dom(),r=window.getComputedStyle(n).getPropertyValue(t),i=""!==r||lt.inBody(e)?r:Ft(n,t);return null===i?void 0:i},getRaw:Ht,getAllRaw:function(e){var t={},n=e.dom();if(It.isSupported(n))for(var r=0;r<n.style.length;r++){var i=n.style.item(r);t[i]=n.style[i]}return t},isValidValue:function(e,t,n){var r=oe.fromTag(e);return Lt(r,t,n),Ht(r,t).isSome()},reflow:function(e){return e.dom().offsetWidth},transfer:function(e,t,n){tt.isElement(e)&&tt.isElement(t)&&E(n,function(n){!function(e,t,n){Ht(e,n).each(function(e){Ht(t,n).isNone()&&Lt(t,n,e)})}(e,t,n)})}},jt=function(e,t){Ve.parent(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})},Wt=function(e,t){e.dom().appendChild(t.dom())},Ut={before:jt,after:function(e,t){Ve.nextSibling(e).fold(function(){Ve.parent(e).each(function(e){Wt(e,t)})},function(e){jt(e,t)})},prepend:function(e,t){Ve.firstChild(e).fold(function(){Wt(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})},append:Wt,appendAt:function(e,t,n){Ve.child(e,n).fold(function(){Wt(e,t)},function(e){jt(e,t)})},wrap:function(e,t){jt(e,t),Wt(t,e)}},$t={before:function(e,t){E(t,function(t){Ut.before(e,t)})},after:function(e,t){E(t,function(n,r){var i=0===r?e:t[r-1];Ut.after(i,n)})},prepend:function(e,t){E(t.slice().reverse(),function(t){Ut.prepend(e,t)})},append:function(e,t){E(t,function(t){Ut.append(e,t)})}},qt=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Vt={empty:function(e){e.dom().textContent="",E(Ve.children(e),function(e){qt(e)})},remove:qt,unwrap:function(e){var t=Ve.children(e);t.length>0&&$t.before(e,t),qt(e)}},Xt=$("minRow","minCol","maxRow","maxCol"),Yt=function(e,t,n){var r=e[n].element(),i=oe.fromTag("td");Ut.append(i,oe.fromTag("br")),(t?Ut.append:Ut.prepend)(r,i)},Kt=function(e,t){var n=function(e){return ce.is(e.element(),t)},r=kt(e),i=At(r),o=function(e,t){var n=e.grid().columns(),r=e.grid().rows(),i=n,o=0,a=0;return j(e.access(),function(e){if(t(e)){var n=e.row(),s=n+e.rowspan()-1,u=e.column(),l=u+e.colspan()-1;n<r?r=n:s>o&&(o=s),u<i?i=u:l>a&&(a=l)}}),Xt(r,i,o,a)}(i,n),a="th:not("+t+"),td:not("+t+")",s=Ye.filterFirstLayer(e,"th,td",function(e){return ce.is(e,a)});return E(s,Vt.remove),function(e,t,n,r){for(var i=t.grid().columns(),o=t.grid().rows(),a=0;a<o;a++)for(var s=!1,u=0;u<i;u++)a<n.minRow()||a>n.maxRow()||u<n.minCol()||u>n.maxCol()||(Rt(t,a,u).filter(r).isNone()?Yt(e,s,a):s=!0)}(r,i,o,n),function(e,t){var n=N(Ye.firstLayer(e,"tr"),function(e){return 0===e.dom().childElementCount});E(n,Vt.remove),t.minCol()!==t.maxCol()&&t.minRow()!==t.maxRow()||E(Ye.firstLayer(e,"th,td"),function(e){at.remove(e,"rowspan"),at.remove(e,"colspan")}),at.remove(e,"width"),at.remove(e,"height"),zt.remove(e,"width"),zt.remove(e,"height")}(e,o),e},Jt=function(e,t){return oe.fromDom(e.dom().cloneNode(t))},Gt=function(e){return Jt(e,!0)},Qt=function(e){return Jt(e,!1)},Zt=Gt,en=function(e,t){var n=function(e,t){var n=oe.fromTag(t),r=at.clone(e);return at.setAll(n,r),n}(e,t),r=Ve.children(Gt(e));return $t.append(n,r),n},tn=function(e,t){var n=function(t){return e(t)?g.from(t.dom().nodeValue):g.none()},r=Me.detect().browser,i=r.isIE()&&10===r.version.major?function(e){try{return n(e)}catch(e){return g.none()}}:n;return{get:function(t){if(!e(t))throw new Error("Can only get text value of a text node");return i(t).getOr("")},getOption:i,set:function(t,n){if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom().nodeValue=n}}}(tt.isText),nn={get:function(e){return tn.get(e)},getOption:function(e){return tn.getOption(e)},set:function(e,t){tn.set(e,t)}},rn=["img","br"],on=function(e){return"img"===tt.name(e)?1:nn.getOption(e).fold(function(){return Ve.children(e).length},function(e){return e.length})},an=function(e){var t;return t=e,nn.getOption(t).filter(function(e){return 0!==e.trim().length||e.indexOf("Â ")>-1}).isSome()||S(rn,tt.name(e))},sn=function(e){return vt.descendant(e,an)},un=function(e){return function(e,t){var n=function(e){for(var r=Ve.children(e),i=r.length-1;i>=0;i--){var o=r[i];if(t(o))return g.some(o);var a=n(o);if(a.isSome())return a}return g.none()};return n(e)}(e,an)},ln=function(){var e=oe.fromTag("td");return Ut.append(e,oe.fromTag("br")),e},cn=function(e,t,n){var r=en(e,t);return j(n,function(e,t){null===e?at.remove(r,t):at.set(r,t,e)}),r},fn=function(e){return e},dn=function(e){return function(){return oe.fromTag("tr",e.dom())}},hn=function(e,t,n){return{row:dn(t),cell:function(t){var r=Ve.owner(t.element()),i=oe.fromTag(tt.name(t.element()),r.dom()),o=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=o.length>0?function(e,t,n){return sn(e).map(function(r){var i=n.join(","),o=dt.ancestors(r,i,function(t){return He.eq(t,e)});return A(o,function(e,t){var n=Qt(t);return at.remove(n,"contenteditable"),Ut.append(e,n),n},t)}).getOr(t)}(t.element(),i,o):i;return Ut.append(a,oe.fromTag("br")),zt.copy(t.element(),i),zt.remove(i,"height"),1!==t.colspan()&&zt.remove(t.element(),"width"),e(t.element(),i),i},replace:cn,gap:ln}},pn=function(e){return{row:dn(e),cell:ln,replace:fn,gap:ln}},mn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function gn(){return{up:i({selector:yt.ancestor,closest:yt.closest,predicate:vt.ancestor,all:Ve.parents}),down:i({selector:dt.descendants,predicate:ft.descendants}),styles:i({get:zt.get,getRaw:zt.getRaw,set:zt.set,remove:zt.remove}),attrs:i({get:at.get,set:at.set,remove:at.remove,copyTo:function(e,t){var n=at.clone(e);at.setAll(t,n)}}),insert:i({before:Ut.before,after:Ut.after,afterAll:$t.after,append:Ut.append,appendAll:$t.append,prepend:Ut.prepend,wrap:Ut.wrap}),remove:i({unwrap:Vt.unwrap,remove:Vt.remove}),create:i({nu:oe.fromTag,clone:function(e){return oe.fromDom(e.dom().cloneNode(!1))},text:oe.fromText}),query:i({comparePosition:function(e,t){return e.dom().compareDocumentPosition(t.dom())},prevSibling:Ve.prevSibling,nextSibling:Ve.nextSibling}),property:i({children:Ve.children,name:tt.name,parent:Ve.parent,isText:tt.isText,isComment:tt.isComment,isElement:tt.isElement,getText:nn.get,setText:nn.set,isBoundary:function(e){return!!tt.isElement(e)&&("body"===tt.name(e)||S(mn,tt.name(e)))},isEmptyTag:function(e){return!!tt.isElement(e)&&S(["br","img","hr","input"],tt.name(e))}}),eq:He.eq,is:He.is}}$("left","right");var vn=function(e,t,n,r){var i=t(e,n);return A(r,function(n,r){var i=t(e,r);return bn(e,n,i)},i)},bn=function(e,t,n){return t.bind(function(t){return n.filter(a(e.eq,t))})},yn=function(e,t){return a(e.eq,t)},wn=function(e,t,n,r){var o=void 0!==r?r:i(!1),a=[t].concat(e.up().all(t)),s=[n].concat(e.up().all(n)),u=function(e){return D(e,o).fold(function(){return e},function(t){return e.slice(0,t+1)})},l=u(a),c=u(s),f=O(l,function(t){return T(c,yn(e,t))});return{firstpath:i(l),secondpath:i(c),shared:i(f)}},xn=wn,Cn=function(e,t,n){return function(e,t,n){return n.length>0?function(e,t,n,r){return vn(e,t,n[0],n.slice(1))}(e,t,n):g.none()}(e,t,n)},_n=gn(),Sn=function(e,t){return Cn(_n,function(t,n){return e(n)},t)},Tn=function(e,t,n){return function(e,t,n,r){return xn(e,t,n,r)}(_n,e,t,n)},kn=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()},En=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,i=t.row(),o=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&i<=e.finishRow()&&o>=e.startRow()},Nn=function(e,t,n){var r=Ot(e,t,He.eq),i=Ot(e,n,He.eq);return r.bind(function(e){return i.map(function(t){return n=e,r=t,re.bounds(Math.min(n.row(),r.row()),Math.min(n.column(),r.column()),Math.max(n.row()+n.rowspan()-1,r.row()+r.rowspan()-1),Math.max(n.column()+n.colspan()-1,r.column()+r.colspan()-1));var n,r})})},An=Nn,Rn=function(e,t,n){return Nn(e,t,n).bind(function(t){return function(e,t){for(var n=!0,r=a(kn,t),i=t.startRow();i<=t.finishRow();i++)for(var o=t.startCol();o<=t.finishCol();o++)n=n&&Rt(e,i,o).exists(r);return n?g.some(t):g.none()}(e,t)})},On=function(e,t,n){return An(e,t,n).map(function(t){var n=Dt(e,a(En,t));return k(n,function(e){return e.element()})})},Dn=function(e,t){return Ot(e,t,function(e,t){return He.contains(t,e)}).bind(function(e){return e.element()})},Pn=function(e){var t=kt(e);return At(t)},In=function(e,t,n){return St(e).bind(function(r){return function(e,t,n,r){return Ot(e,t,He.eq).bind(function(t){var i=n>0?t.row()+t.rowspan()-1:t.row(),o=r>0?t.column()+t.colspan()-1:t.column();return Rt(e,i+n,o+r).map(function(e){return e.element()})})}(Pn(r),e,t,n)})},Bn=function(e,t,n,r,i){var o=Pn(e),a=He.eq(e,n)?t:Dn(o,t),s=He.eq(e,i)?r:Dn(o,r);return On(o,a,s)},Mn=function(e,t){return yt.ancestor(e,"table")},Ln=J(["boxes","start","finish"],[]),Fn=function(e,t,n){var r=function(e){return function(t){return n(t)||He.eq(t,e)}};return He.eq(e,t)?g.some(Ln({boxes:g.some([e]),start:e,finish:t})):Mn(e).bind(function(i){return Mn(t).bind(function(o){if(He.eq(i,o))return g.some(Ln({boxes:function(e,t,n){var r=Pn(e);return On(r,t,n)}(i,e,t),start:e,finish:t}));if(He.contains(i,o)){var a=(s=dt.ancestors(t,"td,th",r(i))).length>0?s[s.length-1]:t;return g.some(Ln({boxes:Bn(i,e,i,t,o),start:e,finish:a}))}if(He.contains(o,i)){var s,u=(s=dt.ancestors(e,"td,th",r(o))).length>0?s[s.length-1]:e;return g.some(Ln({boxes:Bn(o,e,i,t,o),start:e,finish:u}))}return Tn(e,t).shared().bind(function(a){return yt.closest(a,"table",n).bind(function(n){var a=dt.ancestors(t,"td,th",r(n)),s=a.length>0?a[a.length-1]:t,u=dt.ancestors(e,"td,th",r(n)),l=u.length>0?u[u.length-1]:e;return g.some(Ln({boxes:Bn(n,e,i,t,o),start:l,finish:s}))})})})})},Hn=Fn,zn=function(e,t){var n=dt.descendants(e,t);return n.length>0?g.some(n):g.none()},jn=function(e,t,n,r,o){return function(e,t){return O(e,function(e){return ce.is(e,t)})}(e,o).bind(function(e){return In(e,t,n).bind(function(e){return function(e,t){return yt.ancestor(e,"table").bind(function(n){return yt.descendant(n,t).bind(function(t){return Fn(t,e).bind(function(e){return e.boxes().map(function(t){return{boxes:i(t),start:i(e.start()),finish:i(e.finish())}})})})})}(e,r)})})},Wn=function(e,t,n){return yt.descendant(e,t).bind(function(t){return yt.descendant(e,n).bind(function(e){return Sn(Mn,[t,e]).map(function(n){return{first:i(t),last:i(e),table:i(n)}})})})},Un=function(e,t,n){return Wn(e,t,n).bind(function(t){var n=function(t){return He.eq(e,t)},r=yt.ancestor(t.first(),"thead,tfoot,tbody,table",n),i=yt.ancestor(t.last(),"thead,tfoot,tbody,table",n);return r.bind(function(e){return i.bind(function(n){return He.eq(e,n)?function(e,t,n){var r=Pn(e);return Rn(r,t,n)}(t.table(),t.first(),t.last()):g.none()})})})},$n={selected:i("data-mce-selected"),selectedSelector:i("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:i("[data-mce-selected]"),firstSelected:i("data-mce-first-selected"),firstSelectedSelector:i("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:i("data-mce-last-selected"),lastSelectedSelector:i("td[data-mce-last-selected],th[data-mce-last-selected]")},qn=function(e){if(!y(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return E(e,function(r,i){var o=z(r);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!y(s))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),o=0;o<r.length;o++)r[o]=arguments[o];return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[i].apply(null,r)},match:function(e){var n=z(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!L(t,function(e){return S(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)},log:function(e){console.log(e,{constructors:t,constructor:a,params:r})}}}}),n},Vn=qn([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Xn={cata:function(e,t,n,r){return e.fold(t,n,r)},none:Vn.none,multiple:Vn.multiple,single:Vn.single},Yn=function(e,t){return Xn.cata(t.get(),i([]),o,i([e]))},Kn=Yn,Jn=function(e){return{element:i(e),mergable:g.none,unmergable:g.none,selection:i([e])}},Gn=$("element","clipboard","generators"),Qn={noMenu:Jn,forMenu:function(e,t,n){return{element:i(n),mergable:i(function(e,t){return Xn.cata(t.get(),g.none,function(t,n){return 0===t.length?g.none():Un(e,$n.firstSelectedSelector(),$n.lastSelectedSelector()).bind(function(e){return t.length>1?g.some({bounds:i(e),cells:i(t)}):g.none()})},g.none)}(t,e)),unmergable:i(function(e,t){var n=Yn(e,t);return n.length>0&&L(n,function(e){return at.has(e,"rowspan")&&parseInt(at.get(e,"rowspan"),10)>1||at.has(e,"colspan")&&parseInt(at.get(e,"colspan"),10)>1})?g.some(n):g.none()}(n,e)),selection:i(Kn(n,e))}},notCell:function(e){return Jn(e)},paste:Gn,pasteRows:function(e,t,n,r,o){return{element:i(n),mergable:g.none,unmergable:g.none,selection:i(Kn(n,e)),clipboard:i(r),generators:i(o)}}},Zn=function(e,t,r,i){e.on("BeforeGetContent",function(r){!0===r.selection&&Xn.cata(t.get(),n,function(t){r.preventDefault(),St(t[0]).map(Zt).map(function(e){return[Kt(e,$n.attributeSelector())]}).each(function(t){r.content=k(t,function(t){return function(e,t){return e.selection.serializer.serialize(t.dom(),{})}(e,t)}).join("")})},n)}),e.on("BeforeSetContent",function(t){!0===t.selection&&!0===t.paste&&g.from(e.dom.getParent(e.selection.getStart(),"th,td")).each(function(n){var o=oe.fromDom(n);St(o).bind(function(n){var a=N(function(e,t){var n=(t||document).createElement("div");return n.innerHTML=e,Ve.children(oe.fromDom(n))}(t.content),function(e){return"meta"!==tt.name(e)});if(1===a.length&&"table"===tt.name(a[0])){t.preventDefault();var s=oe.fromDom(e.getDoc()),u=pn(s),l=Qn.paste(o,a[0],u);r.pasteCells(n,l).each(function(t){e.selection.setRng(t),e.focus(),i.clear(n)})}})})})};function er(e,t){var n=function(n){var r=t(n);if(r<=0||null===r){var i=zt.get(n,e);return parseFloat(i)||0}return r},r=function(e,t){return R(t,function(t,n){var r=zt.get(e,n),i=void 0===r?0:parseInt(r,10);return isNaN(i)?t:t+i},0)};return{set:function(t,n){if(!C(n)&&!n.match(/^[0-9]+$/))throw e+".set accepts only positive integer values. Value was "+n;var r=t.dom();It.isSupported(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(e,t,n){var i=r(e,n);return t>i?t-i:0}}}var tr=er("height",function(e){var t=e.dom();return lt.inBody(e)?t.getBoundingClientRect().height:t.offsetHeight}),nr=function(e){return tr.get(e)},rr=function(e){return tr.getOuter(e)},ir=er("width",function(e){return e.dom().offsetWidth}),or=function(e){return ir.get(e)},ar=function(e){return ir.getOuter(e)},sr=Me.detect(),ur=function(e,t,n){return function(e,t){var n=parseFloat(e);return isNaN(n)?t:n}(zt.get(e,t),n)},lr=/(\d+(\.\d+)?)(\w|%)*/,cr=/(\d+(\.\d+)?)%/,fr=/(\d+(\.\d+)?)px|em/,dr=function(e,t){zt.set(e,"height",t+"px")},hr=function(e){var t=function(e){return zt.getRaw(e,"height").getOrThunk(function(){return function(e){return sr.browser.isIE()||sr.browser.isEdge()?function(e){var t=ur(e,"padding-top",0),n=ur(e,"padding-bottom",0),r=ur(e,"border-top-width",0),i=ur(e,"border-bottom-width",0),o=e.dom().getBoundingClientRect().height;return"border-box"===zt.get(e,"box-sizing")?o:o-t-n-(r+i)}(e):ur(e,"height",nr(e))}(e)+"px"})}(e);return t?function(e,t,n,r){var i,o=parseInt(e,10);return function(e,t,n){return!(e.length<t.length)&&e.substr(n,n+t.length)===t}(i=e,"%",i.length-"%".length)&&"table"!==tt.name(t)?function(e,t,n,r){var i=St(e).map(function(e){var r=n(e);return Math.floor(t/100*r)}).getOr(t);return r(e,i),i}(t,o,n,r):o}(t,e,nr,dr):nr(e)},pr=function(e){return zt.getRaw(e,"width").fold(function(){return g.from(at.get(e,"width"))},function(e){return g.some(e)})},mr=function(e,t){return e/t.pixelWidth()*100},gr={percentageBasedSizeRegex:i(cr),pixelBasedSizeRegex:i(fr),setPixelWidth:function(e,t){zt.set(e,"width",t+"px")},setPercentageWidth:function(e,t){zt.set(e,"width",t+"%")},setHeight:dr,getPixelWidth:function(e,t){return pr(e).fold(function(){return or(e)},function(n){return function(e,t,n){if(fr.test(t)){var r=fr.exec(t);return parseInt(r[1],10)}if(cr.test(t)){var i=cr.exec(t);return parseFloat(i[1])/100*n.pixelWidth()}return or(e)}(e,n,t)})},getPercentageWidth:function(e,t){return pr(e).fold(function(){var n=or(e);return mr(n,t)},function(n){return function(e,t,n){if(cr.test(t)){var r=cr.exec(t);return parseFloat(r[1])}var i=or(e);return mr(i,n)}(e,n,t)})},getGenericWidth:function(e){return pr(e).bind(function(e){if(lr.test(e)){var t=lr.exec(e);return g.some({width:i(t[1]),unit:i(t[3])})}return g.none()})},setGenericWidth:function(e,t,n){zt.set(e,"width",t+n)},getHeight:function(e){return function(e,t,n){return hr(e)/function(e,t){return at.has(e,t)?parseInt(at.get(e,t),10):1}(e,"rowspan")}(e)},getRawWidth:pr},vr=function(e,t){gr.getGenericWidth(e).each(function(n){var r=n.width()/2;gr.setGenericWidth(e,r,n.unit()),gr.setGenericWidth(t,r,n.unit())})},br=function(e,t){return{left:i(e),top:i(t),translate:function(n,r){return br(e+n,t+r)}}},yr=br,wr=function(e,t){return void 0!==e?e:void 0!==t?t:0},xr=function(e){var t=e.dom(),n=t.ownerDocument,r=n.body,i=oe.fromDom(n.documentElement);return r===t?yr(r.offsetLeft,r.offsetTop):function(e,t){var n=t||oe.fromDom(document.documentElement);return vt.ancestor(e,a(He.eq,n)).isSome()}(e,i)?function(e){var t=e.getBoundingClientRect();return yr(t.left,t.top)}(t):yr(0,0)},Cr=function(e){var t=e.dom().ownerDocument,n=t.body,r=function(e){var t=e.dom();return t===t.window&&e instanceof Window?e:tt.isDocument(e)?t.defaultView||t.parentWindow:null}(oe.fromDom(t)),i=t.documentElement,o=wr(r.pageYOffset,i.scrollTop),a=wr(r.pageXOffset,i.scrollLeft),s=wr(i.clientTop,n.clientTop),u=wr(i.clientLeft,n.clientLeft);return xr(e).translate(a-u,o-s)},_r=$("row","y"),Sr=$("col","x"),Tr=function(e){return Cr(e).left()+ar(e)},kr=function(e){return Cr(e).left()},Er=function(e,t){return Sr(e,kr(t))},Nr=function(e,t){return Sr(e,Tr(t))},Ar=function(e){return Cr(e).top()},Rr=function(e,t,n){if(0===n.length)return[];var r=k(n.slice(1),function(t,n){return t.map(function(t){return e(n,t)})}),i=n[n.length-1].map(function(e){return t(n.length-1,e)});return r.concat([i])},Or={delta:o,positions:a(Rr,function(e,t){return _r(e,Ar(t))},function(e,t){return _r(e,Ar(t)+rr(t))}),edge:Ar},Dr={delta:o,edge:kr,positions:a(Rr,Er,Nr)},Pr={height:Or,rtl:{delta:function(e,t){return-e},edge:Tr,positions:a(Rr,Nr,Er)},ltr:Dr},Ir={ltr:Pr.ltr,rtl:Pr.rtl};function Br(e){var t=function(t){return e(t).isRtl()?Ir.rtl:Ir.ltr};return{delta:function(e,n){return t(n).delta(e,n)},edge:function(e){return t(e).edge(e)},positions:function(e,n){return t(n).positions(e,n)}}}var Mr,Lr=function(e){var t=kt(e);return At(t).grid()},Fr=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Fr(n())}}},Hr=function(e,t){var n=N(t,function(t){return!S(e,t)});n.length>0&&X(n)},zr=function(e){return function(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");return Y("required",t),K(t),function(r){var i=z(r);L(t,function(e){return S(i,e)})||V(t,i),e(t,i);var o=N(t,function(e){return!n.validate(r[e],e)});return o.length>0&&function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+q(e).join(", ")+") were not.")}(o,n.label),r}}(Hr,e,{validate:x,label:"function"})},jr=function(e){var t=at.has(e,"colspan")?parseInt(at.get(e,"colspan"),10):1,n=at.has(e,"rowspan")?parseInt(at.get(e,"rowspan"),10):1;return{element:i(e),colspan:i(t),rowspan:i(n)}},Wr=zr(["cell","row","replace","gap"]),Ur=function(e,t){Wr(e);var n=Fr(g.none()),r=void 0!==t?t:jr,i=function(t){return function(t){return e.cell(t)}(r(t))},o=function(e){var t=i(e);return n.get().isNone()&&n.set(g.some(t)),a=g.some({item:e,replacement:t}),t},a=g.none();return{getOrInit:function(e,t){return a.fold(function(){return o(e)},function(n){return t(e,n.item)?n.replacement:o(e)})},cursor:n.get}},$r=function(e,t){return function(n){var r=Fr(g.none());Wr(n);var i=[],o=function(o){var a=n.replace(o,t,{scope:e});return i.push({item:o,sub:a}),r.get().isNone()&&r.set(g.some(a)),a};return{replaceOrInit:function(e,t){return function(e,t){return O(i,function(n){return t(n.item,e)})}(e,t).fold(function(){return o(e)},function(n){return t(e,n.item)?n.sub:o(e)})},cursor:r.get}}},qr=function(e){Wr(e);var t=Fr(g.none());return{combine:function(n){return t.get().isNone()&&t.set(g.some(n)),function(){var t=e.cell({element:i(n),colspan:i(1),rowspan:i(1)});return zt.remove(t,"width"),zt.remove(n,"width"),t}},cursor:t.get}},Vr=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Xr=function(e,t){var n=e.property().name(t);return S(Vr,n)},Yr=function(e,t){return S(["br","img","hr","input"],e.property().name(t))},Kr=gn(),Jr=function(e){return Xr(Kr,e)},Gr=function(e){return function(e,t){var n=e.property().name(t);return S(["ol","ul"],n)}(Kr,e)},Qr=function(e){var t,n=function(e){return"br"===tt.name(e)},r=function(e){return un(e).bind(function(t){var r,i=(r=t,Ve.nextSibling(r).map(function(e){return!!Jr(e)||(function(e){return Yr(Kr,e)}(e)?"img"!==tt.name(e):void 0)}).getOr(!1));return Ve.parent(t).map(function(r){return!0===i||(o=r,"li"===tt.name(o)||vt.ancestor(o,Gr).isSome())||n(t)||Jr(r)&&!He.eq(e,r)?[]:[oe.fromTag("br")];var o})}).getOr([])},i=0===(t=M(e,function(e){var t=Ve.children(e);return L(t,function(e){return n(e)||tt.isText(e)&&0===nn.get(e).trim().length})?[]:t.concat(r(e))})).length?[oe.fromTag("br")]:t;Vt.empty(e[0]),$t.append(e[0],i)},Zr=Object.prototype.hasOwnProperty,ei=(Mr=function(e,t){return t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var i=e[r];for(var o in i)Zr.call(i,o)&&(n[o]=Mr(n[o],i[o]))}return n}),ti=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},ni=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return g.none()},ri=function(e,t){return re.rowcells(t,e.section())},ii=function(e,t){return e.cells()[t]},oi=function(e,t,n){var r=e.cells(),i=r.slice(0,t),o=r.slice(t),a=i.concat([n]).concat(o);return ri(e,a)},ai=ri,si=function(e,t,n){e.cells()[t]=n},ui=ii,li=function(e,t){return ii(e,t).element()},ci=function(e,t){var n=e.cells(),r=k(n,t);return re.rowcells(r,e.section())},fi=function(e){return e.cells().length},di=function(e,t){if(0===e.length)return 0;var n=e[0];return D(e,function(e){return!t(n.element(),e.element())}).fold(function(){return e.length},function(e){return e})},hi=function(e,t,n,r){var o=function(e,t){return e[t]}(e,t).cells().slice(n),a=di(o,r),s=function(e,t){return k(e,function(e){return ui(e,t)})}(e,n).slice(t),u=di(s,r);return{colspan:i(a),rowspan:i(u)}},pi=function(e,t,n){for(var r=[],i=0;i<e.grid().rows();i++){for(var o=[],a=0;a<e.grid().columns();a++){var s=Rt(e,i,a).map(function(e){return re.elementnew(e.element(),n)}).getOrThunk(function(){return re.elementnew(t.gap(),!0)});o.push(s)}var u=re.rowcells(o,e.all()[i].section());r.push(u)}return r},mi=function(e,t,n,r){n===r?at.remove(e,t):at.set(e,t,n)},gi=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},vi=function(e,t){if(t<0||t>=e.length-1)return g.none();var n=e[t].fold(function(){var n=H(e.slice(0,t));return ni(n,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return g.some({value:e,delta:0})}),r=e[t+1].fold(function(){var n=e.slice(t+1);return ni(n,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return g.some({value:e,delta:1})});return n.bind(function(e){return r.map(function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n})})},bi=function(e,t,n){var r=e();return O(r,t).orThunk(function(){return g.from(r[0]).orThunk(n)}).map(function(e){return e.element()})},yi=function(e){var t=e.grid(),n=gi(0,t.columns()),r=gi(0,t.rows());return k(n,function(t){return bi(function(){return M(r,function(n){return Rt(e,n,t).filter(function(e){return e.column()===t}).fold(i([]),function(e){return[e]})})},function(e){return 1===e.colspan()},function(){return Rt(e,0,t)})})},wi=function(e){var t=e.grid(),n=gi(0,t.rows()),r=gi(0,t.columns());return k(n,function(t){return bi(function(){return M(r,function(n){return Rt(e,t,n).filter(function(e){return e.row()===t}).fold(i([]),function(e){return[e]})})},function(e){return 1===e.rowspan()},function(){return Rt(e,t,0)})})},xi=function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}},Ci={resolve:xi("ephox-snooker").resolve},_i=function(e,t){var n=at.get(e,t);return void 0===n||""===n?[]:n.split(" ")},Si=_i,Ti=function(e){return Si(e,"class")},ki=function(e,t){return function(e,t,n){var r=_i(e,t).concat([n]);return at.set(e,t,r.join(" ")),!0}(e,"class",t)},Ei=function(e,t){return function(e,t,n){var r=N(_i(e,t),function(e){return e!==n});return r.length>0?at.set(e,t,r.join(" ")):at.remove(e,t),!1}(e,"class",t)},Ni=Ti,Ai=ki,Ri=Ei,Oi=function(e){return void 0!==e.dom().classList},Di=function(e,t){return Oi(e)&&e.dom().classList.contains(t)},Pi={add:function(e,t){Oi(e)?e.dom().classList.add(t):Ai(e,t)},remove:function(e,t){Oi(e)?e.dom().classList.remove(t):Ri(e,t),function(e){0===(Oi(e)?e.dom().classList:Ni(e)).length&&at.remove(e,"class")}(e)},toggle:function(e,t){return Oi(e)?e.dom().classList.toggle(t):function(e,t){return S(Ti(e),t)?Ei(e,t):ki(e,t)}(e,t)},toggler:function(e,t){var n=Oi(e),r=e.dom().classList;return function(e,t,n){var r=n||!1,i=function(){t(),r=!0},o=function(){e(),r=!1};return{on:i,off:o,toggle:function(){(r?o:i)()},isOn:function(){return r}}}(function(){n?r.remove(t):Ri(e,t)},function(){n?r.add(t):Ai(e,t)},Di(e,t))},has:Di},Ii=Ci.resolve("resizer-bar"),Bi=Ci.resolve("resizer-rows"),Mi=Ci.resolve("resizer-cols"),Li=function(e){var t=dt.descendants(e.parent(),"."+Ii);E(t,Vt.remove)},Fi=function(e,t,n){var r=e.origin();E(t,function(t,i){t.each(function(t){var i=n(r,t);Pi.add(i,Ii),Ut.append(e.parent(),i)})})},Hi=function(e,t,n,r,i,o){var a=Cr(t);!function(e,t,n,r){Fi(e,t,function(e,t){var i=function(e,t,n,r,i){var o=oe.fromTag("div");return zt.setAll(o,{position:"absolute",left:t+"px",top:n-i/2+"px",height:i+"px",width:r+"px"}),at.setAll(o,{"data-row":e,role:"presentation"}),o}(t.row(),n.left()-e.left(),t.y()-e.top(),r,7);return Pi.add(i,Bi),i})}(e,n.length>0?i.positions(n,t):[],a,ar(t)),function(e,t,n,r){Fi(e,t,function(e,t){var i=function(e,t,n,r,i){var o=oe.fromTag("div");return zt.setAll(o,{position:"absolute",left:t-r/2+"px",top:n+"px",height:i+"px",width:r+"px"}),at.setAll(o,{"data-column":e,role:"presentation"}),o}(t.col(),t.x()-e.left(),n.top()-e.top(),7,r);return Pi.add(i,Mi),i})}(e,r.length>0?o.positions(r,t):[],a,rr(t))},zi=function(e,t){var n=dt.descendants(e.parent(),"."+Ii);E(n,t)},ji={refresh:function(e,t,n,r){Li(e);var i=kt(t),o=At(i),a=wi(o),s=yi(o);Hi(e,t,a,s,n,r)},hide:function(e){zi(e,function(e){zt.set(e,"display","none")})},show:function(e){zi(e,function(e){zt.set(e,"display","block")})},destroy:Li,isRowBar:function(e){return Pi.has(e,Bi)},isColBar:function(e){return Pi.has(e,Mi)}},Wi=function(e,t){return function(e,t){return k(e,function(e){var n=function(e){return ni(e,function(e){return Ve.parent(e.element()).map(function(e){var t=Ve.parent(e).isNone();return re.elementnew(e,t)})}).getOrThunk(function(){return re.elementnew(t.row(),!0)})}(e.details());return re.rowdatanew(n.element(),e.details(),e.section(),n.isNew())})}(function(e,t){var n=k(e,function(e,t){return k(e.cells(),function(e,t){return!1})});return k(e,function(r,i){var o=M(r.cells(),function(r,o){if(!1===n[i][o]){var a=hi(e,i,o,t);return function(e,t,r,i){for(var o=e;o<e+r;o++)for(var a=t;a<t+i;a++)n[o][a]=!0}(i,o,a.rowspan(),a.colspan()),[re.detailnew(r.element(),a.rowspan(),a.colspan(),r.isNew())]}return[]});return re.rowdetails(o,r.section())})}(e,He.eq),t)},Ui=function(e,t){var n=B(k(e.all(),function(e){return e.cells()}));return O(n,function(e){return He.eq(t,e.element())})},$i=function(e,t,n,r,o){return function(a,s,u,l,c){var f=kt(s),d=At(f);return t(d,u).map(function(t){var n=pi(d,l,!1),r=e(n,t,He.eq,o(l)),a=Wi(r.grid(),l);return{grid:i(a),cursor:r.cursor}}).fold(function(){return g.none()},function(e){var t=function(e,t){var n=[],r=[],o=function(t,i){t.length>0?function(t,i){var o=yt.child(e,i).getOrThunk(function(){var t=oe.fromTag(i,Ve.owner(e).dom());return Ut.append(e,t),t});Vt.empty(o);var a=k(t,function(e){e.isNew()&&n.push(e.element());var t=e.element();return Vt.empty(t),E(e.cells(),function(e){e.isNew()&&r.push(e.element()),mi(e.element(),"colspan",e.colspan(),1),mi(e.element(),"rowspan",e.rowspan(),1),Ut.append(t,e.element())}),t});$t.append(o,a)}(t,i):function(t){yt.child(e,t).each(Vt.remove)}(i)},a=[],s=[],u=[];return E(t,function(e){switch(e.section()){case"thead":a.push(e);break;case"tbody":s.push(e);break;case"tfoot":u.push(e)}}),o(a,"thead"),o(s,"tbody"),o(u,"tfoot"),{newRows:i(n),newCells:i(r)}}(s,e.grid());return n(s,e.grid(),c),r(s),ji.refresh(a,s,Pr.height,c),g.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}},qi=Wi,Vi=function(e,t){return Ct(t.element()).bind(function(t){return Ui(e,t)})},Xi=function(e,t){var n=k(t.selection(),function(t){return Ct(t).bind(function(t){return Ui(e,t)})}),r=ti(n);return r.length>0?g.some(r):g.none()},Yi=function(e,t){var n=k(t.selection(),function(t){return Ct(t).bind(function(t){return Ui(e,t)})}),r=ti(n);return r.length>0?g.some(ei({cells:r},{generators:t.generators,clipboard:t.clipboard})):g.none()},Ki=function(e){return{is:function(t){return e===t},isValue:c,isError:l,getOr:i(e),getOrThunk:i(e),getOrDie:i(e),or:function(t){return Ki(e)},orThunk:function(t){return Ki(e)},fold:function(t,n){return n(e)},map:function(t){return Ki(t(e))},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return g.some(e)}}},Ji=function(e){return{is:l,isValue:l,isError:c,getOr:o,getOrThunk:function(e){return e()},getOrDie:function(){return(t=String(e),function(){throw new Error(t)})();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return Ji(e)},each:n,bind:function(t){return Ji(e)},exists:l,forall:c,toOption:g.none}},Gi={value:Ki,error:Ji},Qi=function(e,t){return k(e,function(){return re.elementnew(t.cell(),!0)})},Zi=function(e,t,n){return k(e,function(e){return ai(e,e.cells().concat(Qi(gi(0,t),n)))})},eo=function(e,t,n){if(e.row()>=t.length||e.column()>fi(t[0]))return Gi.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var r=t.slice(e.row()),o=r[0].cells().slice(e.column()),a=fi(n[0]),s=n.length;return Gi.value({rowDelta:i(r.length-s),colDelta:i(o.length-a)})},to=function(e,t){var n=fi(e[0]),r=fi(t[0]);return{rowDelta:i(0),colDelta:i(n-r)}},no=function(e,t,n){var r=t.colDelta()<0?Zi:o;return(t.rowDelta()<0?function(e,t,n){return e.concat(function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n}(t,function(t){return ai(e[e.length-1],Qi(e[e.length-1].cells(),n))}))}:o)(r(e,Math.abs(t.colDelta()),n),Math.abs(t.rowDelta()),n)},ro=function(e,t,n,r){for(var i=!0,o=0;o<e.length;o++)for(var a=0;a<fi(e[0]);a++){var s=n(li(e[o],a),t);!0===s&&!1===i?si(e[o],a,re.elementnew(r(),!0)):!0===s&&(i=!1)}return e},io=function(e,t,n,r){var i=ui(e[t],n),o=a(r,i.element()),s=e[t];return e.length>1&&fi(s)>1&&(n>0&&o(li(s,n-1))||n<s.length-1&&o(li(s,n+1))||t>0&&o(li(e[t-1],n))||t<e.length-1&&o(li(e[t+1],n)))},oo=function(e,t,n,r,i){!function(e,t,n,r){if(t>0&&t<e.length){var i=function(e,t){return R(e,function(e,n){return T(e,function(e){return t(e.element(),n.element())})?e:e.concat([n])},[])}(e[t-1].cells(),n);E(i,function(i){for(var o=g.none(),a=t;a<e.length;a++)for(var s=0;s<fi(e[0]);s++){var u=e[a].cells()[s];n(u.element(),i.element())&&(o.isNone()&&(o=g.some(r())),o.each(function(t){si(e[a],s,re.elementnew(t,!0))}))}})}}(t,e,i,r.cell);var o=to(n,t),a=no(n,o,r),s=to(t,a),u=no(t,s,r);return u.slice(0,e).concat(a).concat(u.slice(e,u.length))},ao=function(e,t,n,r,i){var o=e.slice(0,t),a=e.slice(t),s=ci(e[n],function(n,o){return t>0&&t<e.length&&r(li(e[t-1],o),li(e[t],o))?ui(e[t],o):re.elementnew(i(n.element(),r),!0)});return o.concat([s]).concat(a)},so=function(e,t,n,r,i){return k(e,function(e){var o=t>0&&t<fi(e)&&r(li(e,t-1),li(e,t))?ui(e,t):re.elementnew(i(li(e,n),r),!0);return oi(e,t,o)})},uo=function(e,t,n,r){return k(e,function(e){return ci(e,function(e){return function(e){return T(t,function(t){return n(e.element(),t.element())})}(e)?re.elementnew(r(e.element(),n),!0):e})})},lo=function(e,t,n,r){return void 0!==li(e[t],n)&&t>0&&r(li(e[t-1],n),li(e[t],n))},co=function(e,t,n){return t>0&&n(li(e,t-1),li(e,t))},fo=function(e,t,n,r){var i=M(e,function(r,i){return lo(e,i,t,n)||co(r,t,n)?[]:[ui(r,t)]});return uo(e,i,n,r)},ho=function(e,t,n,r){var i=e[t],o=M(i.cells(),function(r,o){return lo(e,t,o,n)||co(i,o,n)?[]:[r]});return uo(e,o,n,r)},po=function(e){return{fold:e}},mo=function(){return po(function(e,t,n,r,i){return e()})},go=function(e,t,n,r){var o=e.slice(0),a=function(e,t){return 0===e.length?mo():1===e.length?function(e){return po(function(t,n,r,i,o){return n(e)})}(0):0===t?function(e,t){return po(function(n,r,i,o,a){return i(e,t)})}(0,1):t===e.length-1?function(e,t){return po(function(n,r,i,o,a){return a(e,t)})}(t-1,t):t>0&&t<e.length-1?function(e,t,n){return po(function(r,i,o,a,s){return a(e,t,n)})}(t-1,t,t+1):mo()}(e,t),s=function(e){return k(e,i(0))},u=i(s(o)),l=function(e,t){if(n>=0){var i=Math.max(r.minCellWidth(),o[t]-n);return s(o.slice(0,e)).concat([n,i-o[t]]).concat(s(o.slice(t+1)))}var a=Math.max(r.minCellWidth(),o[e]+n),u=o[e]-a;return s(o.slice(0,e)).concat([a-o[e],u]).concat(s(o.slice(t+1)))},c=l;return a.fold(u,function(e){return r.singleColumnWidth(o[e],n)},c,function(e,t,n){return l(t,n)},function(e,t){if(n>=0)return s(o.slice(0,t)).concat([n]);var i=Math.max(r.minCellWidth(),o[t]+n);return s(o.slice(0,t)).concat([i-o[t]])})},vo=function(e,t){return at.has(e,t)&&parseInt(at.get(e,t),10)>1},bo={hasColspan:function(e){return vo(e,"colspan")},hasRowspan:function(e){return vo(e,"rowspan")},minWidth:i(10),minHeight:i(10),getInt:function(e,t){return parseInt(zt.get(e,t),10)}},yo=function(e,t,n){return zt.getRaw(e,t).fold(function(){return n(e)+"px"},function(e){return e})},wo=function(e){return yo(e,"width",gr.getPixelWidth)},xo=function(e){return yo(e,"height",gr.getHeight)},Co=function(e,t,n,r,i){var o=yi(e),a=k(o,function(e){return e.map(t.edge)});return k(o,function(e,t){return e.filter(s(bo.hasColspan)).fold(function(){var e=vi(a,t);return r(e)},function(e){return n(e,i)})})},_o=function(e){return e.map(function(e){return e+"px"}).getOr("")},So=function(e,t,n,r){var i=wi(e),o=k(i,function(e){return e.map(t.edge)});return k(i,function(e,t){return e.filter(s(bo.hasRowspan)).fold(function(){var e=vi(o,t);return r(e)},function(e){return n(e)})})},To={getRawWidths:function(e,t){return Co(e,t,wo,_o)},getPixelWidths:function(e,t,n){return Co(e,t,gr.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)},getPercentageWidths:function(e,t,n){return Co(e,t,gr.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)},getPixelHeights:function(e,t){return So(e,t,gr.getHeight,function(e){return e.getOrThunk(bo.minHeight)})},getRawHeights:function(e,t){return So(e,t,xo,_o)}},ko=function(e,t,n){for(var r=0,i=e;i<t;i++)r+=void 0!==n[i]?n[i]:0;return r},Eo=function(e,t){var n=Pt(e);return k(n,function(e){var n=ko(e.column(),e.column()+e.colspan(),t);return{element:e.element,width:i(n),colspan:e.colspan}})},No=function(e,t){var n=Pt(e);return k(n,function(e){var n=ko(e.row(),e.row()+e.rowspan(),t);return{element:e.element,height:i(n),rowspan:e.rowspan}})},Ao=function(e,t){return k(e.all(),function(e,n){return{element:e.element,height:i(t[n])}})},Ro=function(e){var t=parseInt(e,10),n=o;return{width:i(t),pixelWidth:i(t),getWidths:To.getPixelWidths,getCellDelta:n,singleColumnWidth:function(e,t){return[Math.max(bo.minWidth(),e+t)-e]},minCellWidth:bo.minWidth,setElementWidth:gr.setPixelWidth,setTableWidth:function(e,t,n){var r=A(t,function(e,t){return e+t},0);gr.setPixelWidth(e,r)}}},Oo=function(e){return gr.getRawWidth(e).fold(function(){var t=or(e);return Ro(t)},function(t){return function(e,t){if(gr.percentageBasedSizeRegex().test(t))return function(e,t){var n=parseFloat(e),r=or(t);return{width:i(n),pixelWidth:i(r),getWidths:To.getPercentageWidths,getCellDelta:function(e){return e/r*100},singleColumnWidth:function(e,t){return[100-e]},minCellWidth:function(){return bo.minWidth()/r*100},setElementWidth:gr.setPercentageWidth,setTableWidth:function(e,t,r){var i=n+r;gr.setPercentageWidth(e,i)}}}(gr.percentageBasedSizeRegex().exec(t)[1],e);if(gr.pixelBasedSizeRegex().test(t)){var n=gr.pixelBasedSizeRegex().exec(t);return Ro(n[1])}var r=or(e);return Ro(r)}(e,t)})},Do=function(e){return At(e)},Po=function(e){var t=kt(e);return Do(t)},Io={adjustWidth:function(e,t,n,r){var i=Oo(e),o=i.getCellDelta(t),a=Po(e),s=i.getWidths(a,r,i),u=go(s,n,o,i),l=k(u,function(e,t){return e+s[t]}),c=Eo(a,l);E(c,function(e){i.setElementWidth(e.element(),e.width())}),n===a.grid().columns()-1&&i.setTableWidth(e,l,o)},adjustHeight:function(e,t,n,r){var i=Po(e),o=To.getPixelHeights(i,r),a=k(o,function(e,r){return n===r?Math.max(t+e,bo.minHeight()):e}),s=No(i,a),u=Ao(i,a);E(u,function(e){gr.setHeight(e.element(),e.height())}),E(s,function(e){gr.setHeight(e.element(),e.height())});var l=A(a,function(e,t){return e+t},0);gr.setHeight(e,l)},adjustWidthTo:function(e,t,n){var r=Oo(e),i=Do(t),o=r.getWidths(i,n,r),a=Eo(i,o);E(a,function(e){r.setElementWidth(e.element(),e.width())});var s=A(o,function(e,t){return t+e},0);a.length>0&&r.setElementWidth(e,s)}},Bo=function(e){0===_t(e).length&&Vt.remove(e)},Mo=$("grid","cursor"),Lo=function(e,t,n){return Fo(e,t,n).orThunk(function(){return Fo(e,0,0)})},Fo=function(e,t,n){return g.from(e[t]).bind(function(e){return g.from(e.cells()[n]).bind(function(e){return g.from(e.element())})})},Ho=function(e,t,n){return Mo(e,Fo(e,t,n))},zo=function(e){return R(e,function(e,t){return T(e,function(e){return e.row()===t.row()})?e:e.concat([t])},[]).sort(function(e,t){return e.row()-t.row()})},jo=function(e){return R(e,function(e,t){return T(e,function(e){return e.column()===t.column()})?e:e.concat([t])},[]).sort(function(e,t){return e.column()-t.column()})},Wo=function(e,t,n){var r=function(e,t){return k(e,function(e){var n=k(_t(e),function(e){var t=at.has(e,"rowspan")?parseInt(at.get(e,"rowspan"),10):1,n=at.has(e,"colspan")?parseInt(at.get(e,"colspan"),10):1;return re.detail(e,t,n)});return re.rowdata(e,n,t.section())})}(e,n),i=At(r);return pi(i,t,!0)},Uo=Io.adjustWidthTo,$o={insertRowBefore:$i(function(e,t,n,r){var i=t.row(),o=t.row(),a=ao(e,o,i,n,r.getOrInit);return Ho(a,o,t.column())},Vi,n,n,Ur),insertRowsBefore:$i(function(e,t,n,r){var i=t[0].row(),o=t[0].row(),a=zo(t),s=R(a,function(e,t){return ao(e,o,i,n,r.getOrInit)},e);return Ho(s,o,t[0].column())},Xi,n,n,Ur),insertRowAfter:$i(function(e,t,n,r){var i=t.row(),o=t.row()+t.rowspan(),a=ao(e,o,i,n,r.getOrInit);return Ho(a,o,t.column())},Vi,n,n,Ur),insertRowsAfter:$i(function(e,t,n,r){var i=zo(t),o=i[i.length-1].row(),a=i[i.length-1].row()+i[i.length-1].rowspan(),s=R(i,function(e,t){return ao(e,a,o,n,r.getOrInit)},e);return Ho(s,a,t[0].column())},Xi,n,n,Ur),insertColumnBefore:$i(function(e,t,n,r){var i=t.column(),o=t.column(),a=so(e,o,i,n,r.getOrInit);return Ho(a,t.row(),o)},Vi,Uo,n,Ur),insertColumnsBefore:$i(function(e,t,n,r){var i=jo(t),o=i[0].column(),a=i[0].column(),s=R(i,function(e,t){return so(e,a,o,n,r.getOrInit)},e);return Ho(s,t[0].row(),a)},Xi,Uo,n,Ur),insertColumnAfter:$i(function(e,t,n,r){var i=t.column(),o=t.column()+t.colspan(),a=so(e,o,i,n,r.getOrInit);return Ho(a,t.row(),o)},Vi,Uo,n,Ur),insertColumnsAfter:$i(function(e,t,n,r){var i=t[t.length-1].column(),o=t[t.length-1].column()+t[t.length-1].colspan(),a=jo(t),s=R(a,function(e,t){return so(e,o,i,n,r.getOrInit)},e);return Ho(s,t[0].row(),o)},Xi,Uo,n,Ur),splitCellIntoColumns:$i(function(e,t,n,r){var i=function(e,t,n,r,i){var o=n+1;return k(e,function(e,a){var s=a===t?re.elementnew(i(li(e,n),r),!0):ui(e,n);return oi(e,o,s)})}(e,t.row(),t.column(),n,r.getOrInit);return Ho(i,t.row(),t.column())},Vi,Uo,n,Ur),splitCellIntoRows:$i(function(e,t,n,r){var i=function(e,t,n,r,i){var o=t+1,a=e.slice(0,o),s=e.slice(o),u=ci(e[t],function(e,t){return t===n?re.elementnew(i(e.element(),r),!0):e});return a.concat([u]).concat(s)}(e,t.row(),t.column(),n,r.getOrInit);return Ho(i,t.row(),t.column())},Vi,n,n,Ur),eraseColumns:$i(function(e,t,n,r){var i=jo(t),o=function(e,t,n){var r=k(e,function(e){var r=e.cells().slice(0,t).concat(e.cells().slice(n+1));return re.rowcells(r,e.section())});return N(r,function(e){return e.cells().length>0})}(e,i[0].column(),i[i.length-1].column()),a=Lo(o,t[0].row(),t[0].column());return Mo(o,a)},Xi,Uo,Bo,Ur),eraseRows:$i(function(e,t,n,r){var i=zo(t),o=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))}(e,i[0].row(),i[i.length-1].row()),a=Lo(o,t[0].row(),t[0].column());return Mo(o,a)},Xi,n,Bo,Ur),makeColumnHeader:$i(function(e,t,n,r){var i=fo(e,t.column(),n,r.replaceOrInit);return Ho(i,t.row(),t.column())},Vi,n,n,$r("row","th")),unmakeColumnHeader:$i(function(e,t,n,r){var i=fo(e,t.column(),n,r.replaceOrInit);return Ho(i,t.row(),t.column())},Vi,n,n,$r(null,"td")),makeRowHeader:$i(function(e,t,n,r){var i=ho(e,t.row(),n,r.replaceOrInit);return Ho(i,t.row(),t.column())},Vi,n,n,$r("col","th")),unmakeRowHeader:$i(function(e,t,n,r){var i=ho(e,t.row(),n,r.replaceOrInit);return Ho(i,t.row(),t.column())},Vi,n,n,$r(null,"td")),mergeCells:$i(function(e,t,n,r){var o=t.cells();Qr(o);var a=function(e,t,n,r){if(0===e.length)return e;for(var i=t.startRow();i<=t.finishRow();i++)for(var o=t.startCol();o<=t.finishCol();o++)si(e[i],o,re.elementnew(r(),!1));return e}(e,t.bounds(),0,i(o[0]));return Mo(a,g.from(o[0]))},function(e,t){return t.mergable()},n,n,qr),unmergeCells:$i(function(e,t,n,r){var i=A(t,function(e,t){return ro(e,t,n,r.combine(t))},e);return Mo(i,g.from(t[0]))},function(e,t){return t.unmergable()},Uo,n,qr),pasteCells:$i(function(e,t,n,r){var i,o,a,s,u=(i=t.clipboard(),o=t.generators(),a=kt(i),s=At(a),pi(s,o,!0));return function(e,t,n,r,i){return eo(e,t,n).map(function(o){var a=no(t,o,r);return function(e,t,n,r,i){for(var o=e.row(),a=e.column(),s=o+n.length,u=a+fi(n[0]),l=o;l<s;l++)for(var c=a;c<u;c++){io(t,l,c,i)&&ro(t,li(t[l],c),i,r.cell);var f=li(n[l-o],c-a),d=r.replace(f);si(t[l],c,re.elementnew(d,!0))}return t}(e,a,n,r,i)})}(re.address(t.row(),t.column()),e,u,t.generators(),n).fold(function(){return Mo(e,g.some(t.element()))},function(e){var n=Lo(e,t.row(),t.column());return Mo(e,n)})},function(e,t){return Ct(t.element()).bind(function(n){return Ui(e,n).map(function(e){return ei(e,{generators:t.generators,clipboard:t.clipboard})})})},Uo,n,Ur),pasteRowsBefore:$i(function(e,t,n,r){var i=e[t.cells[0].row()],o=t.cells[0].row(),a=Wo(t.clipboard(),t.generators(),i),s=oo(o,e,a,t.generators(),n),u=Lo(s,t.cells[0].row(),t.cells[0].column());return Mo(s,u)},Yi,n,n,Ur),pasteRowsAfter:$i(function(e,t,n,r){var i=e[t.cells[0].row()],o=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),a=Wo(t.clipboard(),t.generators(),i),s=oo(o,e,a,t.generators(),n),u=Lo(s,t.cells[0].row(),t.cells[0].column());return Mo(s,u)},Yi,n,n,Ur)},qo=function(e){return oe.fromDom(e.getBody())},Vo=function(e){return e.getBoundingClientRect().width},Xo=function(e){return e.getBoundingClientRect().height},Yo=function(e){return function(t){return He.eq(t,qo(e))}},Ko=function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},Jo=function(e){var t=dt.descendants(e,"td[data-mce-style],th[data-mce-style]");at.remove(e,"data-mce-style"),E(t,function(e){at.remove(e,"data-mce-style")})},Go=function(e){return"rtl"===zt.get(e,"direction")?"rtl":"ltr"},Qo=Go,Zo={isRtl:i(!1)},ea={isRtl:i(!0)},ta=function(e){return"rtl"===Qo(e)?ea:Zo},na=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],ra={"border-collapse":"collapse",width:"100%"},ia={border:"1"},oa=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},aa=function(e){return e.getParam("table_row_advtab",!0,"boolean")},sa=function(e){return e.getParam("table_advtab",!0,"boolean")},ua=function(e){return e.getParam("table_style_by_css",!1,"boolean")},la=function(e){return e.getParam("table_cell_class_list",[],"array")},ca=function(e){return e.getParam("table_row_class_list",[],"array")},fa=function(e){return e.getParam("table_class_list",[],"array")},da=function(e){return!1===e.getParam("table_responsive_width")},ha=function(e,t){return e.fire("newrow",{node:t})},pa=function(e,t){return e.fire("newcell",{node:t})},ma=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},ga=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},va=function(e,t,n){var r=kt(e),i=At(r);return Xi(i,t).map(function(e){var t=pi(i,n,!1).slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan());return function(e){return k(e,function(e){var t=Qt(e.element());return E(e.cells(),function(e){var n=Zt(e.element());mi(n,"colspan",e.colspan(),1),mi(n,"rowspan",e.rowspan(),1),Ut.append(t,n)}),t})}(qi(t,n))})},ba=tinymce.util.Tools.resolve("tinymce.util.Tools"),ya={applyAlign:function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},applyVAlign:function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},unApplyAlign:function(e,t){ba.each("left center right".split(" "),function(n){e.formatter.remove("align"+n,{},t)})},unApplyVAlign:function(e,t){ba.each("top middle bottom".split(" "),function(n){e.formatter.remove("valign"+n,{},t)})},getTDTHOverallStyle:function(e,t,n){var r;return function(t,r){for(var i=0;i<r.length;i++){var o=e.getStyle(r[i],n);if(void 0===t&&(t=o),t!==o)return""}return t}(r,e.select("td,th",t))}},wa=function(e,t){var n=e.dom,r=t.control.rootControl,i=r.toJSON(),o=n.parseStyle(i.style);o["border-style"]=i.borderStyle,o["border-color"]=i.borderColor,o["background-color"]=i.backgroundColor,o.width=i.width?Ko(i.width):"",o.height=i.height?Ko(i.height):"",r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(o))))},xa=function(e,t){var n=e.dom,r=t.control.rootControl,i=r.toJSON(),o=n.parseStyle(i.style);r.find("#borderStyle").value(o["border-style"]||""),r.find("#borderColor").value(o["border-color"]||""),r.find("#backgroundColor").value(o["background-color"]||""),r.find("#width").value(o.width||""),r.find("#height").value(o.height||"")},Ca={createStyleForm:function(e){var t=function(){var t=function(e){return e.getParam("color_picker_callback")}(e);if(t)return function(n){return t.call(e,function(e){n.control.value(e).fire("change")},n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:a(wa,e)},items:[{label:"Style",name:"style",type:"textbox",onchange:a(xa,e)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:a(wa,e),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:t()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:t()}]}]}},buildListItems:function(e,t,n){var r=function(e,n){return n=n||[],ba.each(e,function(e){var i={text:e.text||e.title};e.menu?i.menu=r(e.menu):(i.value=e.value,t&&t(i)),n.push(i)}),n};return r(e,n||[])},updateStyleField:wa,extractAdvancedStyles:function(e,t){var n=e.parseStyle(e.getAttrib(t,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=e.serializeStyle(n),r},updateAdvancedFields:xa,syncAdvancedStyleFields:function(e,t){t.control.rootControl.find("#style")[0].getEl().isEqualNode(document.activeElement)?xa(e,t):wa(e,t)}},_a=function(e,t,n){var r,i=e.dom;function o(e,n,r){(1===t.length||r)&&i.setAttrib(e,n,r)}function a(e,n,r){(1===t.length||r)&&i.setStyle(e,n,r)}oa(e)&&Ca.syncAdvancedStyleFields(e,n),r=n.control.rootControl.toJSON(),e.undoManager.transact(function(){ba.each(t,function(n){var s,u;o(n,"scope",r.scope),1===t.length?o(n,"style",r.style):(s=n,u=r.style,delete s.dataset.mceStyle,s.style.cssText+=";"+u),o(n,"class",r.class),a(n,"width",Ko(r.width)),a(n,"height",Ko(r.height)),r.type&&n.nodeName.toLowerCase()!==r.type&&(n=i.rename(n,r.type)),1===t.length&&(ya.unApplyAlign(e,n),ya.unApplyVAlign(e,n)),r.align&&ya.applyAlign(e,n,r.align),r.valign&&ya.applyVAlign(e,n,r.valign)}),e.focus()})},Sa=function(e){var t,n,r,i=[];if(i=e.dom.select("td[data-mce-selected],th[data-mce-selected]"),t=e.dom.getParent(e.selection.getStart(),"td,th"),!i.length&&t&&i.push(t),t=t||i[0]){n=i.length>1?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:t.nodeName.toLowerCase()}:function(e,t){var n=e.dom,r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),type:t.nodeName.toLowerCase(),style:"",align:"",valign:""};return ba.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),ba.each("top middle bottom".split(" "),function(n){e.formatter.matchNode(t,"valign"+n)&&(r.valign=n)}),oa(e)&&ba.extend(r,Ca.extractAdvancedStyles(n,t)),r}(e,t),la(e).length>0&&(r={name:"class",type:"listbox",label:"Class",values:Ca.buildListItems(la(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"td",classes:[t.value]})})})});var o={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:a(Ca.updateStyleField,e)},{label:"Height",name:"height",onchange:a(Ca.updateStyleField,e)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};oa(e)?e.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:o},Ca.createStyleForm(e)],onsubmit:a(_a,e,i)}):e.windowManager.open({title:"Cell properties",data:n,body:o,onsubmit:a(_a,e,i)})}},Ta=function(e,t,n){var r=e.getParent(t,"table"),i=t.parentNode,o=e.select(n,r)[0];o||(o=e.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?e.insertAfter(o,r.firstChild):r.insertBefore(o,r.firstChild):r.appendChild(o)),o.appendChild(t),i.hasChildNodes()||e.remove(i)};function ka(e,t,n,r){var i=e.dom;function o(e,n,r){(1===t.length||r)&&i.setAttrib(e,n,r)}aa(e)&&Ca.syncAdvancedStyleFields(e,r);var a=r.control.rootControl.toJSON();e.undoManager.transact(function(){ba.each(t,function(r){var s,u,l;o(r,"scope",a.scope),o(r,"style",a.style),o(r,"class",a.class),s=r,u="height",l=Ko(a.height),(1===t.length||l)&&i.setStyle(s,u,l),a.type!==r.parentNode.nodeName.toLowerCase()&&Ta(e.dom,r,a.type),a.align!==n.align&&(ya.unApplyAlign(e,r),ya.applyAlign(e,r,a.align))}),e.focus()})}var Ea=function(e){var t,n,r,i,o,s,u=e.dom,l=[];t=u.getParent(e.selection.getStart(),"table"),n=u.getParent(e.selection.getStart(),"td,th"),ba.each(t.rows,function(e){ba.each(e.cells,function(t){if(u.getAttrib(t,"data-mce-selected")||t===n)return l.push(e),!1})}),(r=l[0])&&(o=l.length>1?{height:"",scope:"",style:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:function(e,t){var n=e.dom,r={height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),align:"",style:"",type:t.parentNode.nodeName.toLowerCase()};return ba.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),aa(e)&&ba.extend(r,Ca.extractAdvancedStyles(n,t)),r}(e,r),ca(e).length>0&&(i={name:"class",type:"listbox",label:"Class",values:Ca.buildListItems(ca(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})})})}),s={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},i]},aa(e)?e.windowManager.open({title:"Row properties",data:o,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},Ca.createStyleForm(e)],onsubmit:a(ka,e,l,o)}):e.windowManager.open({title:"Row properties",data:o,body:s,onsubmit:a(ka,e,l,o)}))},Na=tinymce.util.Tools.resolve("tinymce.Env"),Aa={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Ra=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)},Oa=function(e,t,n){var r,i=function(e){return e.getParam("table_default_styles",ra,"object")}(e),o=function(e,t,n,r,i){void 0===i&&(i=Aa);var o=oe.fromTag("table");zt.setAll(o,i.styles),at.setAll(o,i.attributes);var a=oe.fromTag("tbody");Ut.append(o,a);for(var s=[],u=0;u<e;u++){for(var l=oe.fromTag("tr"),c=0;c<t;c++){var f=u<n||c<r?oe.fromTag("th"):oe.fromTag("td");c<r&&at.set(f,"scope","row"),u<n&&at.set(f,"scope","col"),Ut.append(f,oe.fromTag("br")),i.percentages&&zt.set(f,"width",100/t+"%"),Ut.append(l,f)}s.push(l)}return $t.append(a,s),o}(n,t,0,0,{styles:i,attributes:function(e){return e.getParam("table_default_attributes",ia,"object")}(e),percentages:(r=i.width,b(r)&&-1!==r.indexOf("%")&&!da(e))});at.set(o,"data-mce-id","__mce");var s=function(e){var t=oe.fromTag("div"),n=oe.fromDom(e.dom().cloneNode(!0));return Ut.append(t,n),function(e){return e.dom().innerHTML}(t)}(o);return e.insertContent(s),yt.descendant(qo(e),'table[data-mce-id="__mce"]').map(function(t){return da(e)&&zt.set(t,"width",zt.get(t,"width")),at.remove(t,"data-mce-id"),function(e,t){E(dt.descendants(t,"tr"),function(t){ha(e,t.dom()),E(dt.descendants(t,"th,td"),function(t){pa(e,t.dom())})})}(e,t),function(e,t){yt.descendant(t,"td,th").each(a(Ra,e))}(e,t),t.dom()}).getOr(null)};function Da(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)e.setStyle(t,n,r);else if(t.children)for(var i=0;i<t.children.length;i++)Da(e,t.children[i],n,r)}var Pa=function(e,t,n){var r,i,o=e.dom;sa(e)&&Ca.syncAdvancedStyleFields(e,n),!1===(i=n.control.rootControl.toJSON()).class&&delete i.class,e.undoManager.transact(function(){t||(t=Oa(e,i.cols||1,i.rows||1)),function(e,t,n){var r,i=e.dom,o={},a={};if(o.class=n.class,a.height=Ko(n.height),i.getAttrib(t,"width")&&!ua(e)?o.width=(r=n.width)?r.replace(/px$/,""):"":a.width=Ko(n.width),ua(e)?(a["border-width"]=Ko(n.border),a["border-spacing"]=Ko(n.cellspacing),ba.extend(o,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):ba.extend(o,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),ua(e)&&t.children)for(var s=0;s<t.children.length;s++)Da(i,t.children[s],{"border-width":Ko(n.border),"border-color":n.borderColor,padding:Ko(n.cellpadding)});n.style?ba.extend(a,i.parseStyle(n.style)):a=ba.extend({},i.parseStyle(i.getAttrib(t,"style")),a),o.style=i.serializeStyle(a),i.setAttribs(t,o)}(e,t,i),(r=o.select("caption",t)[0])&&!i.caption&&o.remove(r),!r&&i.caption&&((r=o.create("caption")).innerHTML=Na.ie?"Â ":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),ya.unApplyAlign(e,t),i.align&&ya.applyAlign(e,t,i.align),e.focus(),e.addVisual()})},Ia=function(e,t){var n,r,i,o,s,u=e.dom,l={};!0===t?(n=u.getParent(e.selection.getStart(),"table"))&&(l=function(e,t){var n=e.dom,r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),cellspacing:n.getStyle(t,"border-spacing")||n.getAttrib(t,"cellspacing"),cellpadding:n.getAttrib(t,"data-mce-cell-padding")||n.getAttrib(t,"cellpadding")||ya.getTDTHOverallStyle(e.dom,t,"padding"),border:n.getAttrib(t,"data-mce-border")||n.getAttrib(t,"border")||ya.getTDTHOverallStyle(e.dom,t,"border"),borderColor:n.getAttrib(t,"data-mce-border-color"),caption:!!n.select("caption",t)[0],class:n.getAttrib(t,"class")};return ba.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),sa(e)&&ba.extend(r,Ca.extractAdvancedStyles(n,t)),r}(e,n)):(r={label:"Cols",name:"cols"},i={label:"Rows",name:"rows"}),fa(e).length>0&&(l.class&&(l.class=l.class.replace(/\s*mce\-item\-table\s*/g,"")),o={name:"class",type:"listbox",label:"Class",values:Ca.buildListItems(fa(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[t.value]})})})}),s={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:function(e){return e.getParam("table_appearance_options",!0,"boolean")}(e)?[r,i,{label:"Width",name:"width",onchange:a(Ca.updateStyleField,e)},{label:"Height",name:"height",onchange:a(Ca.updateStyleField,e)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,i,{label:"Width",name:"width",onchange:a(Ca.updateStyleField,e)},{label:"Height",name:"height",onchange:a(Ca.updateStyleField,e)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},o]},sa(e)?e.windowManager.open({title:"Table properties",data:l,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},Ca.createStyleForm(e)],onsubmit:a(Pa,e,n)}):e.windowManager.open({title:"Table properties",data:l,body:s,onsubmit:a(Pa,e,n)})},Ba=ba.each,Ma=function(e,t,r,i,o){var u=Yo(e),l=function(){return oe.fromDom(e.dom.getParent(e.selection.getStart(),"th,td"))},c=function(e){return St(e,u)},f=function(e){return{width:Vo(e.dom()),height:Vo(e.dom())}},d=function(t){var n=l();c(n).each(function(o){var a=Qn.forMenu(i,o,n),s=f(o);t(o,a).each(function(t){!function(e,t,n){var r=f(n);t.width===r.width&&t.height===r.height||(ma(e,n.dom(),t.width,t.height),ga(e,n.dom(),r.width,r.height))}(e,s,o),e.selection.setRng(t),e.focus(),r.clear(o),Jo(o)})})},h=function(t){var r=l();return c(r).bind(function(t){var o=oe.fromDom(e.getDoc()),a=Qn.forMenu(i,t,r),s=hn(n,o,g.none());return va(t,a,s)})},p=function(t){o.get().each(function(n){var o=k(n,function(e){return Zt(e)}),a=l();c(a).bind(function(n){var s=oe.fromDom(e.getDoc()),u=pn(s),l=Qn.pasteRows(i,n,a,o,u);t(n,l).each(function(t){e.selection.setRng(t),e.focus(),r.clear(n)})})})};Ba({mceTableSplitCells:function(){d(t.unmergeCells)},mceTableMergeCells:function(){d(t.mergeCells)},mceTableInsertRowBefore:function(){d(t.insertRowsBefore)},mceTableInsertRowAfter:function(){d(t.insertRowsAfter)},mceTableInsertColBefore:function(){d(t.insertColumnsBefore)},mceTableInsertColAfter:function(){d(t.insertColumnsAfter)},mceTableDeleteCol:function(){d(t.deleteColumn)},mceTableDeleteRow:function(){d(t.deleteRow)},mceTableCutRow:function(e){o.set(h()),d(t.deleteRow)},mceTableCopyRow:function(e){o.set(h())},mceTablePasteRowBefore:function(e){p(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){p(t.pasteRowsAfter)},mceTableDelete:function(){var t=oe.fromDom(e.dom.getParent(e.selection.getStart(),"th,td"));St(t,u).filter(s(u)).each(function(t){var n=oe.fromText("");Ut.after(t,n),Vt.remove(t);var r=e.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),e.selection.setRng(r)})}},function(t,n){e.addCommand(n,t)}),Ba({mceInsertTable:a(Ia,e),mceTableProps:a(Ia,e,!0),mceTableRowProps:a(Ea,e),mceTableCellProps:a(Sa,e)},function(t,n){e.addCommand(n,function(e,n){t(n)})})},La=function(e){var t=g.from(e.dom().documentElement).map(oe.fromDom).getOr(e);return{parent:i(t),view:i(e),origin:i(yr(0,0))}};function Fa(e){var t=$.apply(null,e),n=[];return{bind:function(e){if(void 0===e)throw"Event bind error: undefined handler";n.push(e)},unbind:function(e){n=N(n,function(t){return t!==e})},trigger:function(){var e=t.apply(null,arguments);E(n,function(t){t(e)})}}}var Ha={create:function(e){return{registry:W(e,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:W(e,function(e){return e.trigger})}}},za={mode:zr(["compare","extract","mutate","sink"]),sink:zr(["element","start","stop","destroy"]),api:zr(["forceDrop","drop","move","delayDrop"])},ja={resolve:xi("ephox-dragster").resolve},Wa=function(e,t){return function(n){if(e(n)){var o=oe.fromDom(n.target),a=function(){n.stopPropagation()},s=function(){n.preventDefault()},u=r(s,a),l=function(e,t,n,r,o,a,s){return{target:i(e),x:i(t),y:i(n),stop:r,prevent:o,kill:a,raw:i(s)}}(o,n.clientX,n.clientY,a,s,u,n);t(l)}}},Ua=function(e,t,n,r,i){var o=Wa(n,r);return e.dom().addEventListener(t,o,i),{unbind:a($a,e,t,o,i)}},$a=function(e,t,n,r){e.dom().removeEventListener(t,n,r)},qa=i(!0),Va={bind:function(e,t,n){return function(e,t,n,r){return Ua(e,t,n,r,!1)}(e,t,qa,n)},capture:function(e,t,n){return function(e,t,n,r){return Ua(e,t,n,r,!0)}(e,t,qa,n)}},Xa=za.mode({compare:function(e,t){return yr(t.left()-e.left(),t.top()-e.top())},extract:function(e){return g.some(yr(e.x(),e.y()))},sink:function(e,t){var n=function(e){var t=ei({layerClass:ja.resolve("blocker")},e),n=oe.fromTag("div");return at.set(n,"role","presentation"),zt.setAll(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Pi.add(n,ja.resolve("blocker")),Pi.add(n,t.layerClass),{element:function(){return n},destroy:function(){Vt.remove(n)}}}(t),r=Va.bind(n.element(),"mousedown",e.forceDrop),i=Va.bind(n.element(),"mouseup",e.drop),o=Va.bind(n.element(),"mousemove",e.move),a=Va.bind(n.element(),"mouseout",e.delayDrop);return za.sink({element:n.element,start:function(e){Ut.append(e,n.element())},stop:function(){Vt.remove(n.element())},destroy:function(){n.destroy(),i.unbind(),o.unbind(),a.unbind(),r.unbind()}})},mutate:function(e,t){e.mutate(t.left(),t.top())}});function Ya(){var e={onEvent:function(e,t){},reset:n},t=function(){var e=g.none(),t=Ha.create({move:Fa(["info"])});return{onEvent:function(n,r){r.extract(n).each(function(n){(function(t,n){var r=e.map(function(e){return t.compare(e,n)});return e=g.some(n),r})(r,n).each(function(e){t.trigger.move(e)})})},reset:function(){e=g.none()},events:t.registry}}(),r=e;return{on:function(){r.reset(),r=t},off:function(){r.reset(),r=e},isOn:function(){return r===t},onEvent:function(e,t){r.onEvent(e,t)},events:t.events}}var Ka={transform:function(e,t){var n=void 0!==t?t:{};return function(e,t,n){var r,i,o=!1,a=Ha.create({start:Fa([]),stop:Fa([])}),s=Ya(),u=function(){f.stop(),s.isOn()&&(s.off(),a.trigger.stop())},l=(r=u,i=null,{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!==i&&clearTimeout(i),i=setTimeout(function(){r.apply(null,e),i=null},200)}});s.events.move.bind(function(n){t.mutate(e,n.info())});var c=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);if(o)return e.apply(null,t)}},f=t.sink(za.api({forceDrop:u,drop:c(u),move:c(function(e,n){l.cancel(),s.onEvent(e,t)}),delayDrop:c(l.throttle)}),n);return{element:f.element,go:function(e){f.start(e),s.on(),a.trigger.start()},on:function(){o=!0},off:function(){o=!1},destroy:function(){f.destroy()},events:a.registry}}(e,void 0!==n.mode?n.mode:Xa,t)}};var Ja={any:function(e){return yt.first(e).isSome()},ancestor:function(e,t,n){return yt.ancestor(e,t,n).isSome()},sibling:function(e,t){return yt.sibling(e,t).isSome()},child:function(e,t){return yt.child(e,t).isSome()},descendant:function(e,t){return yt.descendant(e,t).isSome()},closest:function(e,t,n){return yt.closest(e,t,n).isSome()}},Ga=Ci.resolve("resizer-bar-dragging");function Qa(e,t){var n=Pr.height,r=function(e,t,n){var r=function(){var e=Ha.create({drag:Fa(["xDelta","yDelta","target"])}),t=g.none(),n=function(){var e=Ha.create({drag:Fa(["xDelta","yDelta"])});return{mutate:function(t,n){e.trigger.drag(t,n)},events:e.registry}}();return n.events.drag.bind(function(n){t.each(function(t){e.trigger.drag(n.xDelta(),n.yDelta(),t)})}),{assign:function(e){t=g.some(e)},get:function(){return t},mutate:n.mutate,events:e.registry}}(),i=Ka.transform(r,{}),o=g.none(),s=function(e,t){return g.from(at.get(e,t))};r.events.drag.bind(function(e){s(e.target(),"data-row").each(function(t){var n=bo.getInt(e.target(),"top");zt.set(e.target(),"top",n+e.yDelta()+"px")}),s(e.target(),"data-column").each(function(t){var n=bo.getInt(e.target(),"left");zt.set(e.target(),"left",n+e.xDelta()+"px")})});var u=function(e,t){return bo.getInt(e,t)-parseInt(at.get(e,"data-initial-"+t),10)};i.events.stop.bind(function(){r.get().each(function(r){o.each(function(i){s(r,"data-row").each(function(e){var t=u(r,"top");at.remove(r,"data-initial-top"),h.trigger.adjustHeight(i,t,parseInt(e,10))}),s(r,"data-column").each(function(e){var t=u(r,"left");at.remove(r,"data-initial-left"),h.trigger.adjustWidth(i,t,parseInt(e,10))}),ji.refresh(e,i,n,t)})})});var l=function(t,n){h.trigger.startAdjust(),r.assign(t),at.set(t,"data-initial-"+n,parseInt(zt.get(t,n),10)),Pi.add(t,Ga),zt.set(t,"opacity","0.2"),i.go(e.parent())},c=Va.bind(e.parent(),"mousedown",function(e){ji.isRowBar(e.target())&&l(e.target(),"top"),ji.isColBar(e.target())&&l(e.target(),"left")}),f=function(t){return He.eq(t,e.view())},d=Va.bind(e.view(),"mouseover",function(r){"table"===tt.name(r.target())||Ja.closest(r.target(),"table",f)?(o="table"===tt.name(r.target())?g.some(r.target()):yt.ancestor(r.target(),"table",f)).each(function(r){ji.refresh(e,r,n,t)}):lt.inBody(r.target())&&ji.destroy(e)}),h=Ha.create({adjustHeight:Fa(["table","delta","row"]),adjustWidth:Fa(["table","delta","column"]),startAdjust:Fa([])});return{destroy:function(){c.unbind(),d.unbind(),i.destroy(),ji.destroy(e)},refresh:function(r){ji.refresh(e,r,n,t)},on:i.on,off:i.off,hideBars:a(ji.hide,e),showBars:a(ji.show,e),events:h.registry}}(e,t,n),i=Ha.create({beforeResize:Fa(["table"]),afterResize:Fa(["table"]),startDrag:Fa([])});return r.events.adjustHeight.bind(function(e){i.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());Io.adjustHeight(e.table(),t,e.row(),n),i.trigger.afterResize(e.table())}),r.events.startAdjust.bind(function(e){i.trigger.startDrag()}),r.events.adjustWidth.bind(function(e){i.trigger.beforeResize(e.table());var n=t.delta(e.delta(),e.table());Io.adjustWidth(e.table(),n,e.column(),t),i.trigger.afterResize(e.table())}),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:i.registry}}var Za=function(e,t){return e.inline?function(e,t){return{parent:i(t),view:i(e),origin:i(yr(0,0))}}(qo(e),function(){var e=oe.fromTag("div");return zt.setAll(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ut.append(lt.body(),e),e}()):La(oe.fromDom(e.getDoc()))},es=function(e){var t,n,r=g.none(),i=g.none(),o=g.none(),a=/(\d+(\.\d+)?)%/,s=function(e){return"TABLE"===e.nodeName};return e.on("init",function(){var t=Br(ta),n=Za(e);if(o=g.some(n),function(e){var t=e.getParam("object_resizing",!0);return"table"===t||t}(e)&&function(e){return e.getParam("table_resize_bars",!0,"boolean")}(e)){var a=Qa(n,t);a.on(),a.events.startDrag.bind(function(t){r=g.some(e.selection.getRng())}),a.events.beforeResize.bind(function(t){var n=t.table().dom();ma(e,n,Vo(n),Xo(n))}),a.events.afterResize.bind(function(t){var n=t.table(),i=n.dom();Jo(n),r.each(function(t){e.selection.setRng(t),e.focus()}),ga(e,i,Vo(i),Xo(i)),e.undoManager.add()}),i=g.some(a)}}),e.on("ObjectResizeStart",function(r){var i,o=r.target;s(o)&&(t=r.width,i=o,n=e.dom.getStyle(i,"width")||e.dom.getAttrib(i,"width"))}),e.on("ObjectResized",function(r){var i=r.target;if(s(i)){var o=i;if(a.test(n)){var u=parseFloat(a.exec(n)[1]),l=r.width*u/t;e.dom.setStyle(o,"width",l+"%")}else{var c=[];ba.each(o.rows,function(t){ba.each(t.cells,function(t){var n=e.dom.getStyle(t,"width",!0);c.push({cell:t,width:n})})}),ba.each(c,function(t){e.dom.setStyle(t.cell,"width",t.width),e.dom.setAttrib(t.cell,"width",null)})}}}),{lazyResize:function(){return i},lazyWire:function(){return o.getOr(La(oe.fromDom(e.getBody())))},destroy:function(){i.each(function(e){e.destroy()}),o.each(function(t){!function(e,t){e.inline&&Vt.remove(t.parent())}(e,t)})}}},ts=function(e){return{fold:e}},ns=function(e){return ts(function(t,n,r,i){return t(e)})},rs=function(e,t){return ts(function(n,r,i,o){return i(e,t)})},is=function(e,t){return St(e,t).bind(function(t){var n=_t(t);return D(n,function(t){return He.eq(e,t)}).map(function(e){return{index:i(e),all:i(n)}})})},os=function(e,t){return is(e,t).fold(function(){return ns(e)},function(t){return t.index()+1<t.all().length?rs(e,t.all()[t.index()+1]):function(e){return ts(function(t,n,r,i){return i(e)})}(e)})},as=function(e,t){return is(e,t).fold(function(){return ns()},function(t){return t.index()-1>=0?rs(e,t.all()[t.index()-1]):function(e){return ts(function(t,n,r,i){return n(e)})}(e)})},ss=qn([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),us={before:ss.before,on:ss.on,after:ss.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(o,o,o)}},ls=qn([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),cs=$("start","soffset","finish","foffset"),fs={domRange:ls.domRange,relative:ls.relative,exact:ls.exact,exactFromRange:function(e){return ls.exact(e.start(),e.soffset(),e.finish(),e.foffset())},range:cs,getWin:function(e){var t=function(e){return e.match({domRange:function(e){return oe.fromDom(e.startContainer)},relative:function(e,t){return us.getStart(e)},exact:function(e,t,n,r){return e}})}(e);return Ve.defaultView(t)}},ds=function(e,t,n,r){var i=function(e,t,n,r){var i=Ve.owner(e).dom().createRange();return i.setStart(e.dom(),t),i.setEnd(n.dom(),r),i}(e,t,n,r),o=He.eq(e,n)&&t===r;return i.collapsed&&!o},hs=function(e,t){e.selectNodeContents(t.dom())},ps=function(e){e.deleteContents()},ms=function(e){return{left:i(e.left),top:i(e.top),right:i(e.right),bottom:i(e.bottom),width:i(e.width),height:i(e.height)}},gs=function(e){return e.document.createRange()},vs=function(e,t){ps(e),e.insertNode(t.dom())},bs=function(e,t){var n=e.document.createRange();return hs(n,t),n},ys=hs,ws=function(e,t,n){var r,i=e.document.createRange();return r=i,t.fold(function(e){r.setStartBefore(e.dom())},function(e,t){r.setStart(e.dom(),t)},function(e){r.setStartAfter(e.dom())}),function(e,t){n.fold(function(t){e.setEndBefore(t.dom())},function(t,n){e.setEnd(t.dom(),n)},function(t){e.setEndAfter(t.dom())})}(i),i},xs=function(e,t,n,r,i){var o=e.document.createRange();return o.setStart(t.dom(),n),o.setEnd(r.dom(),i),o},Cs=ps,_s=function(e){var t=e.cloneContents();return oe.fromDom(t)},Ss=function(e){var t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?g.some(n).map(ms):g.none()},Ts=function(e){var t=e.getBoundingClientRect();return t.width>0||t.height>0?g.some(t).map(ms):g.none()},ks=function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&t.compareBoundaryPoints(e.START_TO_END,e)>-1},Es=function(e){return e.toString()},Ns=qn([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),As=function(e,t,n){return t(oe.fromDom(n.startContainer),n.startOffset,oe.fromDom(n.endContainer),n.endOffset)},Rs=function(e,t){return function(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return Ns.rtl(oe.fromDom(e.endContainer),e.endOffset,oe.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return As(0,Ns.ltr,n)}):As(0,Ns.ltr,n)}(0,function(e,t){return t.match({domRange:function(e){return{ltr:i(e),rtl:g.none}},relative:function(t,n){return{ltr:me(function(){return ws(e,t,n)}),rtl:me(function(){return g.some(ws(e,n,t))})}},exact:function(t,n,r,i){return{ltr:me(function(){return xs(e,t,n,r,i)}),rtl:me(function(){return g.some(xs(e,r,i,t,n))})}}})}(e,t))},Os=(Ns.ltr,Ns.rtl,Rs),Ds=function(e,t){return Rs(e,t).match({ltr:function(t,n,r,i){var o=e.document.createRange();return o.setStart(t.dom(),n),o.setEnd(r.dom(),i),o},rtl:function(t,n,r,i){var o=e.document.createRange();return o.setStart(r.dom(),i),o.setEnd(t.dom(),n),o}})},Ps=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Is=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var o=i.getClientRects();return ni(o,function(e){return Ps(e,n,r)?g.some(e):g.none()}).map(function(i){return function(e,t,n,r,i){var o=function(n){var r=e.dom().createRange();return r.setStart(t.dom(),n),r.collapse(!0),r},a=nn.get(t).length,s=function(e,t,n,r,i){if(0===i)return 0;if(t===r)return i-1;for(var o=r,a=1;a<i;a++){var s=e(a),u=Math.abs(t-s.left);if(n<=s.bottom){if(n<s.top||u>o)return a-1;o=u}}return 0}(function(e){return o(e).getBoundingClientRect()},n,r,i.right,a);return o(s)}(e,t,n,r,i)})},Bs=function(e,t,n,r){return(tt.isText(t)?Is:function(e,t,n,r){var i=e.dom().createRange(),o=Ve.children(t);return ni(o,function(t){return i.selectNode(t.dom()),Ps(i.getBoundingClientRect(),n,r)?Bs(e,t,n,r):g.none()})})(e,t,n,r)},Ms=function(e,t){return t-e.left<e.right-t},Ls=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},Fs=function(e,t,n){return(0===Ve.children(t).length?function(e,t,n){var r=t.dom().getBoundingClientRect(),i=Ms(r,n);return g.some(Ls(e,t,i))}:function(e,t,n){var r=e.dom().createRange();r.selectNode(t.dom());var i=r.getBoundingClientRect(),o=Ms(i,n);return(!0===o?sn:un)(t).map(function(t){return Ls(e,t,o)})})(e,t,n)},Hs=document.caretPositionFromPoint?function(e,t,n){return g.from(e.dom().caretPositionFromPoint(t,n)).bind(function(t){if(null===t.offsetNode)return g.none();var n=e.dom().createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),g.some(n)})}:document.caretRangeFromPoint?function(e,t,n){return g.from(e.dom().caretRangeFromPoint(t,n))}:function(e,t,n){return oe.fromPoint(e,t,n).bind(function(r){var i=function(){return Fs(e,r,t)};return 0===Ve.children(r).length?i():function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var o=i.getBoundingClientRect();return function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var o=i.getBoundingClientRect(),a=Math.max(o.left,Math.min(o.right,n)),s=Math.max(o.top,Math.min(o.bottom,r));return Bs(e,t,a,s)}(e,t,Math.max(o.left,Math.min(o.right,n)),Math.max(o.top,Math.min(o.bottom,r)))}(e,r,t,n).orThunk(i)})},zs=function(e,t){var n=tt.name(e);return"input"===n?us.after(e):S(["br","img"],n)?0===t?us.before(e):us.after(e):us.on(e,t)},js=function(e,t){var n=e.fold(us.before,zs,us.after),r=t.fold(us.before,zs,us.after);return fs.relative(n,r)},Ws=function(e,t,n,r){var i=zs(e,t),o=zs(n,r);return fs.relative(i,o)},Us=js,$s=Ws,qs=function(e,t){g.from(e.getSelection()).each(function(e){e.removeAllRanges(),e.addRange(t)})},Vs=function(e,t,n,r,i){var o=xs(e,t,n,r,i);qs(e,o)},Xs=function(e,t){return Os(e,t).match({ltr:function(t,n,r,i){Vs(e,t,n,r,i)},rtl:function(t,n,r,i){var o=e.getSelection();if(o.setBaseAndExtent)o.setBaseAndExtent(t.dom(),n,r.dom(),i);else if(o.extend)try{!function(e,t,n,r,i,o){t.collapse(n.dom(),r),t.extend(i.dom(),o)}(0,o,t,n,r,i)}catch(o){Vs(e,r,i,t,n)}else Vs(e,r,i,t,n)}})},Ys=function(e){var t=oe.fromDom(e.anchorNode),n=oe.fromDom(e.focusNode);return ds(t,e.anchorOffset,n,e.focusOffset)?g.some(fs.range(oe.fromDom(e.anchorNode),e.anchorOffset,oe.fromDom(e.focusNode),e.focusOffset)):function(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return g.some(fs.range(oe.fromDom(t.startContainer),t.startOffset,oe.fromDom(n.endContainer),n.endOffset))}return g.none()}(e)},Ks=function(e){return g.from(e.getSelection()).filter(function(e){return e.rangeCount>0}).bind(Ys)},Js={setExact:function(e,t,n,r,i){var o=$s(t,n,r,i);Xs(e,o)},getExact:Ks,get:function(e){return Ks(e).map(function(e){return fs.exact(e.start(),e.soffset(),e.finish(),e.foffset())})},setRelative:function(e,t,n){var r=Us(t,n);Xs(e,r)},toNative:function(e){var t=fs.getWin(e).dom(),n=function(e,n,r,i){return xs(t,e,n,r,i)},r=function(e){return e.match({domRange:function(e){var t=oe.fromDom(e.startContainer),n=oe.fromDom(e.endContainer);return Ws(t,e.startOffset,n,e.endOffset)},relative:js,exact:Ws})}(e);return Os(t,r).match({ltr:n,rtl:n})},setToElement:function(e,t){var n=bs(e,t);qs(e,n)},clear:function(e){e.getSelection().removeAllRanges()},clone:function(e,t){var n=Ds(e,t);return _s(n)},replace:function(e,t,n){var r=Ds(e,t),i=function(e,t){var n=(t||document).createDocumentFragment();return E(e,function(e){n.appendChild(e.dom())}),oe.fromDom(n)}(n,e.document);vs(r,i)},deleteAt:function(e,t){var n=Ds(e,t);Cs(n)},forElement:function(e,t){var n=bs(e,t);return fs.range(oe.fromDom(n.startContainer),n.startOffset,oe.fromDom(n.endContainer),n.endOffset)},getFirstRect:function(e,t){var n=Ds(e,t);return Ss(n)},getBounds:function(e,t){var n=Ds(e,t);return Ts(n)},getAtPoint:function(e,t,n){return function(e,t,n){var r=oe.fromDom(e.document);return Hs(r,t,n).map(function(e){return fs.range(oe.fromDom(e.startContainer),e.startOffset,oe.fromDom(e.endContainer),e.endOffset)})}(e,t,n)},findWithin:function(e,t,n){return function(e,t,n){var r=Ds(e,t),i=oe.fromDom(r.commonAncestorContainer);return tt.isElement(i)?function(e,t,n,r){var i=gs(e),o=(ce.is(t,r)?[t]:[]).concat(dt.descendants(t,r));return N(o,function(e){return ys(i,e),ks(n,i)})}(e,i,r,n):[]}(e,t,n)},getAsString:function(e,t){var n=Ds(e,t);return Es(n)},isCollapsed:function(e,t,n,r){return He.eq(e,n)&&t===r}},Gs=tinymce.util.Tools.resolve("tinymce.util.VK"),Qs=function(e,t){var n=fs.exact(t,0,t,0);return Js.toNative(n)},Zs=function(e,t,n,r,i){return n.fold(g.none,g.none,function(e,t){return sn(t).map(function(e){return Qs(0,e)})},function(n){return St(n,t).bind(function(t){var i=Qn.noMenu(n);return e.undoManager.transact(function(){r.insertRowsAfter(t,i)}),function(e,t){var n;return(n=dt.descendants(t,"tr"),0===n.length?g.none():g.some(n[n.length-1])).bind(function(e){return yt.descendant(e,"td,th").map(function(e){return Qs(0,e)})})}(0,t)})})},eu=["table","li","dl"],tu=function(e,t,n,r){if(e.keyCode===Gs.TAB){var i=qo(t),o=function(e){var t=tt.name(e);return He.eq(e,i)||S(eu,t)},a=t.selection.getRng();if(a.collapsed){var s=oe.fromDom(a.startContainer);Ct(s,o).each(function(i){e.preventDefault(),(e.shiftKey?function(e,t,n,r){return Zs(e,t,as(n),r)}:function(e,t,n,r){return Zs(e,t,os(n),r)})(t,o,i,n,r).each(function(e){t.selection.setRng(e)})})}}},nu={response:$("selection","kill")},ru=function(e){return function(t){return t===e}},iu=ru(38),ou=ru(40),au={ltr:{isBackward:ru(37),isForward:ru(39)},rtl:{isBackward:ru(39),isForward:ru(37)},isUp:iu,isDown:ou,isNavigation:function(e){return e>=37&&e<=40}},su={convertToRange:function(e,t){var n=Ds(e,t);return{start:i(oe.fromDom(n.startContainer)),soffset:i(n.startOffset),finish:i(oe.fromDom(n.endContainer)),foffset:i(n.endOffset)}},makeSitus:function(e,t,n,r){return{start:i(us.on(e,t)),finish:i(us.on(n,r))}}},uu=Me.detect().browser.isSafari(),lu=function(e){var t=void 0!==e?e.dom():document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return yr(n,r)},cu=function(e,t,n){(void 0!==n?n.dom():document).defaultView.scrollTo(e,t)},fu=function(e,t){uu&&x(e.dom().scrollIntoViewIfNeeded)?e.dom().scrollIntoViewIfNeeded(!1):e.dom().scrollIntoView(t)},du={get:lu,to:cu,by:function(e,t,n){(void 0!==n?n.dom():document).defaultView.scrollBy(e,t)},preserve:function(e,t){var n=lu(e);t();var r=lu(e);n.top()===r.top()&&n.left()===r.left()||cu(n.left(),n.top(),e)},capture:function(e){var t=g.none(),n=function(){t=g.some(lu(e))};return n(),{save:n,restore:function(){t.each(function(t){cu(t.left(),t.top(),e)})}}},intoView:fu,intoViewIfNeeded:function(e,t){var n=t.dom().getBoundingClientRect(),r=e.dom().getBoundingClientRect();r.top<n.top?fu(e,!0):r.bottom>n.bottom&&fu(e,!1)},setToElement:function(e,t){var n=Cr(t),r=oe.fromDom(e.document);cu(n.left(),n.top(),r)},scrollBarWidth:function(){var e=oe.fromHtml('<div style="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;"></div>');Ut.after(lt.body(),e);var t=e.dom().offsetWidth-e.dom().clientWidth;return Vt.remove(e),t}};function hu(e){return{elementFromPoint:function(t,n){return oe.fromPoint(oe.fromDom(e.document),t,n)},getRect:function(e){return e.dom().getBoundingClientRect()},getRangedRect:function(t,n,r,i){var o=fs.exact(t,n,r,i);return Js.getFirstRect(e,o).map(function(e){return W(e,u)})},getSelection:function(){return Js.get(e).map(function(t){return su.convertToRange(e,t)})},fromSitus:function(t){var n=fs.relative(t.start(),t.finish());return su.convertToRange(e,n)},situsFromPoint:function(t,n){return Js.getAtPoint(e,t,n).map(function(e){return{start:i(us.on(e.start(),e.soffset())),finish:i(us.on(e.finish(),e.foffset()))}})},clearSelection:function(){Js.clear(e)},setSelection:function(t){Js.setExact(e,t.start(),t.soffset(),t.finish(),t.foffset())},setRelativeSelection:function(t,n){Js.setRelative(e,t,n)},selectContents:function(t){Js.setToElement(e,t)},getInnerHeight:function(){return e.innerHeight},getScrollY:function(){return du.get(oe.fromDom(e.document)).top()},scrollBy:function(t,n){du.by(t,n,oe.fromDom(e.document))}}}var pu=function(e,t,n,r,i){return He.eq(n,r)?g.none():Hn(n,r,t).bind(function(t){var r=t.boxes().getOr([]);return r.length>0?(i(e,r,t.start(),t.finish()),g.some(nu.response(g.some(su.makeSitus(n,0,n,on(n))),!0))):g.none()})},mu=function(e,t,n,r,i,o,a){return He.eq(n,i)&&r===o?g.none():yt.closest(n,"td,th",t).bind(function(n){return yt.closest(i,"td,th",t).bind(function(r){return pu(e,t,n,r,a)})})},gu=pu,vu=function(e,t,n,r,i){return jn(r,e,t,i.firstSelectedSelector(),i.lastSelectedSelector()).map(function(e){return i.clear(n),i.selectRange(n,e.boxes(),e.start(),e.finish()),e.boxes()})},bu=J(["left","top","right","bottom"],[]),yu={nu:bu,moveUp:function(e,t){return bu({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})},moveDown:function(e,t){return bu({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})},moveBottomTo:function(e,t){var n=e.bottom()-e.top();return bu({left:e.left(),top:t-n,right:e.right(),bottom:t})},moveTopTo:function(e,t){var n=e.bottom()-e.top();return bu({left:e.left(),top:t,right:e.right(),bottom:t+n})},getTop:function(e){return e.top()},getBottom:function(e){return e.bottom()},translate:function(e,t,n){return bu({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})},toString:function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"}},wu=function(e){return yu.nu({left:e.left,top:e.top,right:e.right,bottom:e.bottom})},xu=function(e,t){return g.some(e.getRect(t))},Cu=function(e,t,n){return tt.isElement(t)?xu(e,t).map(wu):tt.isText(t)?function(e,t,n){return n>=0&&n<on(t)?e.getRangedRect(t,n,t,n+1):n>0?e.getRangedRect(t,n-1,t,n):g.none()}(e,t,n).map(wu):g.none()},_u=function(e,t){return tt.isElement(t)?xu(e,t).map(wu):tt.isText(t)?e.getRangedRect(t,0,t,on(t)).map(wu):g.none()},Su=$("item","mode"),Tu=function(e,t,n,r){var i=void 0!==r?r:ku;return e.property().parent(t).map(function(e){return Su(e,i)})},ku=function(e,t,n,r){var i=void 0!==r?r:Eu;return n.sibling(e,t).map(function(e){return Su(e,i)})},Eu=function(e,t,n,r){var i=void 0!==r?r:Eu,o=e.property().children(t);return n.first(o).map(function(e){return Su(e,i)})},Nu=[{current:Tu,next:ku,fallback:g.none()},{current:ku,next:Eu,fallback:g.some(Tu)},{current:Eu,next:Eu,fallback:g.some(ku)}],Au=function(e,t,n,r,i){return O(i=void 0!==i?i:Nu,function(e){return e.current===n}).bind(function(n){return n.current(e,t,r,n.next).orThunk(function(){return n.fallback.bind(function(n){return Au(e,t,n,r)})})})},Ru={backtrack:Tu,sidestep:ku,advance:Eu,go:Au},Ou={left:function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return e.length>0?g.some(e[e.length-1]):g.none()}}},right:function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return e.length>0?g.some(e[0]):g.none()}}}},Du=function(e,t,n,r,i,o){return Ru.go(e,t,r,i).bind(function(t){return o(t.item())?g.none():n(t.item())?g.some(t.item()):Du(e,t.item(),n,t.mode(),i,o)})},Pu=function(e,t){return 0===e.property().children(t).length},Iu=function(e,t,n,r){return function(e,t,n,r){return Du(e,t,n,Ru.sidestep,Ou.left(),r)}(e,t,n,r)},Bu=function(e,t,n,r){return function(e,t,n,r){return Du(e,t,n,Ru.sidestep,Ou.right(),r)}(e,t,n,r)},Mu={before:function(e,t,n){return Iu(e,t,a(Pu,e),n)},after:function(e,t,n){return Bu(e,t,a(Pu,e),n)},seekLeft:Iu,seekRight:Bu,walkers:function(){return{left:Ou.left,right:Ou.right}},walk:function(e,t,n,r,i){return Ru.go(e,t,n,r,i)},backtrack:Ru.backtrack,sidestep:Ru.sidestep,advance:Ru.advance},Lu=gn(),Fu={gather:function(e,t,n){return Mu.gather(Lu,e,t,n)},before:function(e,t){return Mu.before(Lu,e,t)},after:function(e,t){return Mu.after(Lu,e,t)},seekLeft:function(e,t,n){return Mu.seekLeft(Lu,e,t,n)},seekRight:function(e,t,n){return Mu.seekRight(Lu,e,t,n)},walkers:function(){return Mu.walkers()},walk:function(e,t,n,r){return Mu.walk(Lu,e,t,n,r)}},Hu=qn([{none:[]},{retry:["caret"]}]),zu=function(e,t,n){return vt.closest(t,Jr).fold(i(!1),function(t){return _u(e,t).exists(function(e){return function(e,t){return e.left()<t.left()||Math.abs(t.right()-e.left())<1||e.left()>t.right()}(n,e)})})},ju={point:yu.getTop,adjuster:function(e,t,n,r,i){var o=yu.moveUp(i,5);return Math.abs(n.top()-r.top())<1?Hu.retry(o):n.bottom()<i.top()?Hu.retry(o):n.bottom()===i.top()?Hu.retry(yu.moveUp(i,1)):zu(e,t,i)?Hu.retry(yu.translate(o,5,0)):Hu.none()},move:yu.moveUp,gather:Fu.before},Wu={point:yu.getBottom,adjuster:function(e,t,n,r,i){var o=yu.moveDown(i,5);return Math.abs(n.bottom()-r.bottom())<1?Hu.retry(o):n.top()>i.bottom()?Hu.retry(o):n.top()===i.bottom()?Hu.retry(yu.moveDown(i,1)):zu(e,t,i)?Hu.retry(yu.translate(o,5,0)):Hu.none()},move:yu.moveDown,gather:Fu.after},Uu=function(e,t,n,r,i){return 0===i?g.some(r):function(e,t,n){return e.elementFromPoint(t,n).filter(function(e){return"table"===tt.name(e)}).isSome()}(e,r.left(),t.point(r))?function(e,t,n,r,i){return Uu(e,t,n,t.move(r,5),i)}(e,t,n,r,i-1):e.situsFromPoint(r.left(),t.point(r)).bind(function(o){return o.start().fold(g.none,function(o,a){return _u(e,o).bind(function(a){return t.adjuster(e,o,a,n,r).fold(g.none,function(r){return Uu(e,t,n,r,i-1)})}).orThunk(function(){return g.some(r)})},g.none)})},$u=function(e,t,n){var r=e.move(n,5),i=Uu(t,e,n,r,100).getOr(r);return function(e,t,n){return e.point(t)>n.getInnerHeight()?g.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?g.some(-e.point(t)):g.none()}(e,i,t).fold(function(){return t.situsFromPoint(i.left(),e.point(i))},function(n){return t.scrollBy(0,n),t.situsFromPoint(i.left(),e.point(i)-n)})},qu={tryUp:a($u,ju),tryDown:a($u,Wu),ieTryUp:function(e,t){return e.situsFromPoint(t.left(),t.top()-5)},ieTryDown:function(e,t){return e.situsFromPoint(t.left(),t.bottom()+5)},getJumpSize:i(5)},Vu=qn([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Xu=function(e){return yt.closest(e,"tr")},Yu={verify:function(e,t,n,r,i,o,a){return yt.closest(r,"td,th",a).bind(function(n){return yt.closest(t,"td,th",a).map(function(t){return He.eq(n,t)?He.eq(r,n)&&on(n)===i?o(t):Vu.none("in same cell"):Sn(Xu,[n,t]).fold(function(){return function(e,t,n){var r=e.getRect(t),i=e.getRect(n);return i.right>r.left&&i.left<r.right}(e,t,n)?Vu.success():o(t)},function(e){return o(t)})})}).getOr(Vu.none("default"))},cata:function(e,t,n,r,i){return e.fold(t,n,r,i)},adt:Vu},Ku={point:$("element","offset"),delta:$("element","deltaOffset"),range:$("element","start","finish"),points:$("begin","end"),text:$("element","text")},Ju=($("ancestor","descendants","element","index"),$("parent","children","element","index")),Gu=function(e){return Ve.parent(e).bind(function(t){var n=Ve.children(t);return function(e,t){return D(e,a(He.eq,t))}(n,e).map(function(r){return Ju(t,n,e,r)})})},Qu=function(e){return"br"===tt.name(e)},Zu=function(e,t,n){return t(e,n).bind(function(e){return tt.isText(e)&&0===nn.get(e).trim().length?Zu(e,t,n):g.some(e)})},el=function(e,t,n,r){return(Qu(t)?function(e,t,n){return n.traverse(t).orThunk(function(){return Zu(t,n.gather,e)}).map(n.relative)}(e,t,r):function(e,t,n,r){return function(e,t){return Ve.child(e,t).filter(Qu).orThunk(function(){return Ve.child(e,t-1).filter(Qu)})}(t,n).bind(function(t){return r.traverse(t).fold(function(){return Zu(t,r.gather,e).map(r.relative)},function(e){return Gu(e).map(function(e){return us.on(e.parent(),e.index())})})})}(e,t,n,r)).map(function(e){return{start:i(e),finish:i(e)}})},tl=Me.detect(),nl=function(e,t,n,r,i,o){return 0===o?g.none():ol(e,t,n,r,i).bind(function(a){var s=e.fromSitus(a),u=Yu.verify(e,n,r,s.finish(),s.foffset(),i.failure,t);return Yu.cata(u,function(){return g.none()},function(){return g.some(a)},function(a){return He.eq(n,a)&&0===r?rl(e,n,r,yu.moveUp,i):nl(e,t,a,0,i,o-1)},function(a){return He.eq(n,a)&&r===on(a)?rl(e,n,r,yu.moveDown,i):nl(e,t,a,on(a),i,o-1)})})},rl=function(e,t,n,r,i){return Cu(e,t,n).bind(function(t){return il(e,i,r(t,qu.getJumpSize()))})},il=function(e,t,n){return tl.browser.isChrome()||tl.browser.isSafari()||tl.browser.isFirefox()||tl.browser.isEdge()?t.otherRetry(e,n):tl.browser.isIE()?t.ieRetry(e,n):g.none()},ol=function(e,t,n,r,i){return Cu(e,n,r).bind(function(t){return il(e,i,t)})},al=function(e,t,n){return function(e,t,n){return e.getSelection().bind(function(r){return el(t,r.finish(),r.foffset(),n).fold(function(){return g.some(Ku.point(r.finish(),r.foffset()))},function(i){var o=e.fromSitus(i);return function(e){return Yu.cata(e,function(e){return g.none()},function(){return g.none()},function(e){return g.some(Ku.point(e,0))},function(e){return g.some(Ku.point(e,on(e)))})}(Yu.verify(e,r.finish(),r.foffset(),o.finish(),o.foffset(),n.failure,t))})})}(e,t,n).bind(function(r){return nl(e,t,r.element(),r.offset(),n,20).map(e.fromSitus)})},sl=Me.detect(),ul=function(e,t,n,r,o){return yt.closest(r,"td,th",t).bind(function(r){return yt.closest(r,"table",t).bind(function(a){return function(e,t){return function(e,t,n){return vt.ancestor(e,t,n).isSome()}(o,function(e){return Ve.parent(e).exists(function(e){return He.eq(e,t)})})}(0,a)?al(e,t,n).bind(function(e){return yt.closest(e.finish(),"td,th",t).map(function(t){return{start:i(r),finish:i(t),range:i(e)}})}):g.none()})})},ll=function(e,t,n,r,i,o){return sl.browser.isIE()?g.none():o(r,t).orThunk(function(){return ul(e,t,n,r,i).map(function(e){var t=e.range();return nu.response(g.some(su.makeSitus(t.start(),t.soffset(),t.finish(),t.foffset())),!0)})})},cl=function(e,t,n,r,i,o,a){return ul(e,n,r,i,o).bind(function(e){return gu(t,n,e.start(),e.finish(),a)})},fl=function(e,t){return yt.closest(e,"tr",t).bind(function(e){return yt.closest(e,"table",t).bind(function(n){var r=dt.descendants(n,"tr");return He.eq(e,r[0])?Fu.seekLeft(n,function(e){return un(e).isSome()},t).map(function(e){var t=on(e);return nu.response(g.some(su.makeSitus(e,t,e,t)),!0)}):g.none()})})},dl=function(e,t){return yt.closest(e,"tr",t).bind(function(e){return yt.closest(e,"table",t).bind(function(n){var r=dt.descendants(n,"tr");return He.eq(e,r[r.length-1])?Fu.seekRight(n,function(e){return sn(e).isSome()},t).map(function(e){return nu.response(g.some(su.makeSitus(e,0,e,0)),!0)}):g.none()})})},hl=function(e,t){return yt.closest(e,"td,th",t)},pl={down:{traverse:Ve.nextSibling,gather:Fu.after,relative:us.before,otherRetry:qu.tryDown,ieRetry:qu.ieTryDown,failure:Yu.adt.failedDown},up:{traverse:Ve.prevSibling,gather:Fu.before,relative:us.before,otherRetry:qu.tryUp,ieRetry:qu.ieTryUp,failure:Yu.adt.failedUp}},ml=$("rows","cols"),gl=function(e,t,n,r){var i=function(e,t,n,r){var i=g.none(),o=function(){i=g.none()};return{mousedown:function(e){r.clear(t),i=hl(e.target(),n)},mouseover:function(o){i.each(function(i){r.clear(t),hl(o.target(),n).each(function(o){Hn(i,o,n).each(function(n){var a=n.boxes().getOr([]);(a.length>1||1===a.length&&!He.eq(i,o))&&(r.selectRange(t,a,n.start(),n.finish()),e.selectContents(o))})})})},mouseup:function(){i.each(o)}}}(hu(e),t,n,r);return{mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},vl=function(e,t,n,r){var i=hu(e),o=function(){return r.clear(t),g.none()};return{keydown:function(e,s,u,l,c,f){var d=e.raw().which,h=!0===e.raw().shiftKey;return zn(t,r.selectedSelector()).fold(function(){return au.isDown(d)&&h?a(cl,i,t,n,pl.down,l,s,r.selectRange):au.isUp(d)&&h?a(cl,i,t,n,pl.up,l,s,r.selectRange):au.isDown(d)?a(ll,i,n,pl.down,l,s,dl):au.isUp(d)?a(ll,i,n,pl.up,l,s,fl):g.none},function(e){var n=function(n){return function(){return ni(n,function(n){return vu(n.rows(),n.cols(),t,e,r)}).fold(function(){return Wn(t,r.firstSelectedSelector(),r.lastSelectedSelector()).map(function(e){var n=au.isDown(d)||f.isForward(d)?us.after:us.before;return i.setRelativeSelection(us.on(e.first(),0),n(e.table())),r.clear(t),nu.response(g.none(),!0)})},function(e){return g.some(nu.response(g.none(),!0))})}};return au.isDown(d)&&h?n([ml(1,0)]):au.isUp(d)&&h?n([ml(-1,0)]):f.isBackward(d)&&h?n([ml(0,-1),ml(-1,0)]):f.isForward(d)&&h?n([ml(0,1),ml(1,0)]):au.isNavigation(d)&&!1===h?o:g.none})()},keyup:function(e,i,o,a,s){return zn(t,r.selectedSelector()).fold(function(){var u=e.raw().which;return 0==(!0===e.raw().shiftKey)?g.none():au.isNavigation(u)?mu(t,n,i,o,a,s,r.selectRange):g.none()},g.none)}}},bl=function(e){var t=function(t){at.remove(t,e.selected()),at.remove(t,e.firstSelected()),at.remove(t,e.lastSelected())},n=function(t){at.set(t,e.selected(),"1")},r=function(n){var r=dt.descendants(n,e.selectedSelector());E(r,t)};return{clear:r,selectRange:function(t,i,o,a){r(t),E(i,n),at.set(o,e.firstSelected(),"1"),at.set(a,e.lastSelected(),"1")},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},yl=function(e){return!1===Pi.has(oe.fromDom(e.target),"ephox-snooker-resizer-bar")},wl=function(e){return{get:function(){return function(e,t){return zn(e,t)}(qo(e),$n.selectedSelector()).fold(function(){return void 0===e.selection.getStart()?Xn.none():Xn.single(e.selection)},function(e){return Xn.multiple(e)})}}},xl=ba.each,Cl=function(e){var t=[];function n(t){return function(){e.execCommand(t)}}xl("inserttable tableprops deletetable | cell row column".split(" "),function(n){"|"===n?t.push({text:"-"}):t.push(e.menuItems[n])}),e.addButton("table",{type:"menubutton",title:"Table",menu:t}),e.addButton("tableprops",{title:"Table properties",onclick:n("mceTableProps"),icon:"table"}),e.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")}),e.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")}),e.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")}),e.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")}),e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")}),e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")}),e.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")}),e.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")}),e.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")}),e.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")}),e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")}),e.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")}),e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")}),e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")}),e.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")})},_l=function(e){var t=function(e){var t=e.getParam("table_toolbar",na);return""===t||!1===t?[]:b(t)?t.split(/[ ,]/):y(t)?t:[]}(e);t.length>0&&e.addContextToolbar(function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)},t.join(" "))},Sl=function(e,t){var n=g.none(),r=[],i=[],o=[],a=[],s=function(e){e.disabled(!0)},u=function(e){e.disabled(!1)},l=function(){var e=this;r.push(e),n.fold(function(){s(e)},function(t){u(e)})},c=function(){var e=this;i.push(e),n.fold(function(){s(e)},function(t){u(e)})};e.on("init",function(){e.on("nodechange",function(l){var c=g.from(e.dom.getParent(e.selection.getStart(),"th,td"));(n=c.bind(function(e){var n=oe.fromDom(e);return St(n).map(function(e){return Qn.forMenu(t,e,n)})})).fold(function(){E(r,s),E(i,s),E(o,s),E(a,s)},function(e){E(r,u),E(i,u),E(o,function(t){t.disabled(e.mergable().isNone())}),E(a,function(t){t.disabled(e.unmergable().isNone())})})})});var f=function(e,t,n,r){var i,o,a,s,u,l=r.getEl().getElementsByTagName("table")[0],c=r.isRtl()||"tl-tr"===r.parent().rel;for(l.nextSibling.innerHTML=t+1+" x "+(n+1),c&&(t=9-t),o=0;o<10;o++)for(i=0;i<10;i++)s=l.rows[o].childNodes[i].firstChild,u=(c?i>=t:i<=t)&&o<=n,e.dom.toggleClass(s,"mce-active",u),u&&(a=s);return a.parentNode},d=!1===function(e){return e.getParam("table_grid",!0,"boolean")}(e)?{text:"Table",icon:"table",context:"table",onclick:h("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(t){t.aria&&(this.parent().hideAll(),t.stopImmediatePropagation(),e.execCommand("mceInsertTable"))},onshow:function(){f(e,0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");e.dom.removeClass(t,"mce-active"),e.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return(e+="</table>")+'<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(t){var n,r,i=t.target;"A"===i.tagName.toUpperCase()&&(n=parseInt(i.getAttribute("data-mce-x"),10),r=parseInt(i.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(f(e,n,r,t.control),this.lastX=n,this.lastY=r))},onclick:function(t){var n=this;"A"===t.target.tagName.toUpperCase()&&(t.preventDefault(),t.stopPropagation(),n.parent().cancel(),e.undoManager.transact(function(){Oa(e,n.lastX+1,n.lastY+1)}),e.addVisual())}}]};function h(t){return function(){e.execCommand(t)}}var p={text:"Table properties",context:"table",onPostRender:l,onclick:h("mceTableProps")},m={text:"Delete table",context:"table",onPostRender:l,cmd:"mceTableDelete"},v={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:h("mceTableInsertRowBefore"),onPostRender:c},{text:"Insert row after",onclick:h("mceTableInsertRowAfter"),onPostRender:c},{text:"Delete row",onclick:h("mceTableDeleteRow"),onPostRender:c},{text:"Row properties",onclick:h("mceTableRowProps"),onPostRender:c},{text:"-"},{text:"Cut row",onclick:h("mceTableCutRow"),onPostRender:c},{text:"Copy row",onclick:h("mceTableCopyRow"),onPostRender:c},{text:"Paste row before",onclick:h("mceTablePasteRowBefore"),onPostRender:c},{text:"Paste row after",onclick:h("mceTablePasteRowAfter"),onPostRender:c}]},b={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:h("mceTableInsertColBefore"),onPostRender:c},{text:"Insert column after",onclick:h("mceTableInsertColAfter"),onPostRender:c},{text:"Delete column",onclick:h("mceTableDeleteCol"),onPostRender:c}]},y={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:h("mceTableCellProps"),onPostRender:c},{text:"Merge cells",onclick:h("mceTableMergeCells"),onPostRender:function(){var e=this;o.push(e),n.fold(function(){s(e)},function(t){e.disabled(t.mergable().isNone())})}},{text:"Split cell",onclick:h("mceTableSplitCells"),onPostRender:function(){var e=this;a.push(e),n.fold(function(){s(e)},function(t){e.disabled(t.unmergable().isNone())})}}]};e.addMenuItem("inserttable",d),e.addMenuItem("tableprops",p),e.addMenuItem("deletetable",m),e.addMenuItem("row",v),e.addMenuItem("column",b),e.addMenuItem("cell",y)};t.add("table",function(e){var t=es(e),o=function(e,t){var o=J(["mousedown","mouseover","mouseup","keyup","keydown"],[]),a=g.none(),s=bl($n);return e.on("init",function(u){var l=e.getWin(),c=qo(e),f=Yo(e),d=gl(l,c,f,s),h=vl(l,c,f,s),p=function(t,n){!0===t.raw().shiftKey&&(n.kill()&&t.kill(),n.selection().each(function(t){var n=fs.relative(t.start(),t.finish()),r=Ds(l,n);e.selection.setRng(r)}))},m=function(t){var n=y(t);if(n.raw().shiftKey&&au.isNavigation(n.raw().which)){var r=e.selection.getRng(),i=oe.fromDom(r.startContainer),o=oe.fromDom(r.endContainer);h.keyup(n,i,r.startOffset,o,r.endOffset).each(function(e){p(n,e)})}},v=function(n){var r=y(n);t().each(function(e){e.hideBars()});var i=e.selection.getRng(),o=oe.fromDom(e.selection.getStart()),a=oe.fromDom(i.startContainer),s=oe.fromDom(i.endContainer),u=ta(o).isRtl()?au.rtl:au.ltr;h.keydown(r,a,i.startOffset,s,i.endOffset,u).each(function(e){p(r,e)}),t().each(function(e){e.showBars()})},b=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},y=function(e){var t=oe.fromDom(e.target),n=function(){e.stopPropagation()},o=function(){e.preventDefault()},a=r(o,n);return{target:i(t),x:i(b(e)?e.x:null),y:i(b(e)?e.y:null),stop:n,prevent:o,kill:a,raw:i(e)}},w=function(e){return 0===e.button},x=function(e){w(e)&&yl(e)&&d.mousedown(y(e))},C=function(e){var t;void 0!==(t=e).buttons&&0==(1&t.buttons)||!yl(e)||d.mouseover(y(e))},_=function(e){w(e)&&yl(e)&&d.mouseup(y(e))};e.on("mousedown",x),e.on("mouseover",C),e.on("mouseup",_),e.on("keyup",m),e.on("keydown",v),e.on("nodechange",function(){var t=e.selection,r=oe.fromDom(t.getStart()),i=oe.fromDom(t.getEnd());Sn(St,[r,i]).fold(function(){s.clear(c)},n)}),a=g.some(o({mousedown:x,mouseover:C,mouseup:_,keyup:m,keydown:v}))}),{clear:s.clear,destroy:function(){a.each(function(e){})}}}(e,t.lazyResize),a=function(e,t){var r=function(e){return"table"===tt.name(qo(e))},i=function(e){var t=e.getParam("table_clone_elements");return b(t)?g.some(t.split(/[ ,]/)):Array.isArray(t)?g.some(t):g.none()}(e),o=function(t,n,r,o){return function(a,s){Jo(a);var u=o(),l=oe.fromDom(e.getDoc()),c=Br(ta),f=hn(r,l,i);return n(a)?t(u,a,s,f,c).bind(function(t){return E(t.newRows(),function(t){ha(e,t.dom())}),E(t.newCells(),function(t){pa(e,t.dom())}),t.cursor().map(function(t){var n=e.dom.createRng();return n.setStart(t.dom(),0),n.setEnd(t.dom(),0),n})}):g.none()}};return{deleteRow:o($o.eraseRows,function(t){var n=Lr(t);return!1===r(e)||n.rows()>1},n,t),deleteColumn:o($o.eraseColumns,function(t){var n=Lr(t);return!1===r(e)||n.columns()>1},n,t),insertRowsBefore:o($o.insertRowsBefore,c,n,t),insertRowsAfter:o($o.insertRowsAfter,c,n,t),insertColumnsBefore:o($o.insertColumnsBefore,c,vr,t),insertColumnsAfter:o($o.insertColumnsAfter,c,vr,t),mergeCells:o($o.mergeCells,c,n,t),unmergeCells:o($o.unmergeCells,c,n,t),pasteRowsBefore:o($o.pasteRowsBefore,c,n,t),pasteRowsAfter:o($o.pasteRowsAfter,c,n,t),pasteCells:o($o.pasteCells,c,n,t)}}(e,t.lazyWire),s=wl(e),u=Fr(g.none());return Ma(e,a,o,s,u),Zn(e,s,a,o),Sl(e,s),Cl(e),_l(e),e.on("PreInit",function(){e.serializer.addTempAttr($n.firstSelected()),e.serializer.addTempAttr($n.lastSelected())}),function(e){return e.getParam("table_tab_navigation",!0,"boolean")}(e)&&e.on("keydown",function(n){tu(n,e,a,t.lazyWire)}),e.on("remove",function(){t.destroy(),o.destroy()}),function(e,t){return{insertTable:function(t,n){return Oa(e,t,n)},setClipboardRows:function(e){return function(e,t){var n=k(e,oe.fromDom);t.set(g.from(n))}(e,t)},getClipboardRows:function(){return t.get().fold(function(){},function(e){return k(e,function(e){return e.dom()})})}}}(e,u)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]],r=function(e){var r;return r='<table role="list" class="mce-grid">',t.each(n,function(n){r+="<tr>",t.each(n,function(t){var n=e+"/img/smiley-"+t+".gif";r+='<td><a href="#" data-mce-url="'+n+'" data-mce-alt="'+t+'" tabindex="-1" role="option" aria-label="'+t+'"><img src="'+n+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'}),r+="</tr>"}),r+="</table>"};e.add("emoticons",function(e,t){!function(e,t){var n=r(t);e.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:n,onclick:function(t){var n=e.dom.getParent(t.target,"a");n&&(function(e,t,n){e.insertContent(e.dom.createHTML("img",{src:t,alt:n}))}(e,n.getAttribute("data-mce-url"),n.getAttribute("data-mce-alt")),this.hide())}},tooltip:"Emoticons"})}(e,t)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],i=function(e){return e.getParam("textcolor_map",r)},o=function(e){return e.getParam("textcolor_rows",5)},a=function(e){return e.getParam("textcolor_cols",8)},s=function(e){return e.getParam("color_picker_callback",null)},u=function(e){return e.getParam("forecolor_cols",a(e))},l=function(e){return e.getParam("backcolor_cols",a(e))},c=s,f=tinymce.util.Tools.resolve("tinymce.util.I18n"),d=function(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)},h=function(e){return function(t){var n=t.control;n._color?e.execCommand("mceApplyTextcolor",n.settings.format,n._color):e.execCommand("mceRemoveTextcolor",n.settings.format)}},p=function(e,r){return function(i){var o,a=this.parent(),s=function(e,t){var n;return e.dom.getParents(e.selection.getStart(),function(e){var r;(r=e.style["forecolor"===t?"color":"background-color"])&&(n=n||r)}),n}(e,a.settings.format),u=function(t){e.execCommand("mceApplyTextcolor",a.settings.format,t),a.hidePanel(),a.color(t)};t.DOM.getParent(i.target,".mce-custom-color-btn")&&(a.hidePanel(),c(e).call(e,function(e){var t,i,o,s=a.panel.getEl().getElementsByTagName("table")[0];for(t=n.map(s.rows[s.rows.length-1].childNodes,function(e){return e.firstChild}),o=0;o<t.length&&(i=t[o]).getAttribute("data-mce-color");o++);if(o===r)for(o=0;o<r-1;o++)d(t[o],t[o+1].getAttribute("data-mce-color"));d(i,e),u(e)},s)),(o=i.target.getAttribute("data-mce-color"))?(this.lastId&&t.DOM.get(this.lastId).setAttribute("aria-selected","false"),i.target.setAttribute("aria-selected",!0),this.lastId=i.target.id,"transparent"===o?(e.execCommand("mceRemoveTextcolor",a.settings.format),a.hidePanel(),a.resetColor()):u(o)):null!==o&&a.hidePanel()}},m=function(e,n){return function(){return function(e,n,r,i){var o,a,s,u,l,c,d,h=0,p=t.DOM.uniqueId("mcearia"),m=function(e,t){var n="transparent"===e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+p+"-"+h+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+f.translate(t)+'">'+(n?"&#215;":"")+"</div></td>"};for((o=function(e){var t,n=[];for(t=0;t<e.length;t+=2)n.push({text:e[t+1],color:"#"+e[t]});return n}(r)).push({text:f.translate("No color"),color:"transparent"}),s='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',u=o.length-1,c=0;c<n;c++){for(s+="<tr>",l=0;l<e;l++)s+=(d=c*e+l)>u?"<td></td>":m((a=o[d]).color,a.text);s+="</tr>"}if(i){for(s+='<tr><td colspan="'+e+'" class="mce-custom-color-btn"><div id="'+p+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+p+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+f.translate("Custom...")+"</button></div></td></tr>",s+="<tr>",l=0;l<e;l++)s+=m("","Custom color");s+="</tr>"}return s+"</tbody></table>"}(n?u(e):l(e),n?function(e){return e.getParam("forecolor_rows",o(e))}(e):function(e){return e.getParam("backcolor_rows",o(e))}(e),n?function(e){return e.getParam("forecolor_map",i(e))}(e):function(e){return e.getParam("backcolor_map",i(e))}(e),function(e){return"function"==typeof s(e)}(e))}};e.add("textcolor",function(e){(function(e){e.addCommand("mceApplyTextcolor",function(t,n){!function(e,t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})}(e,t,n)}),e.addCommand("mceRemoveTextcolor",function(t){!function(e,t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})}(e,t)})})(e),function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:m(e,!0),onclick:p(e,u(e))},onclick:h(e)}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:m(e,!1),onclick:p(e,l(e))},onclick:h(e)})}(e)})}()},function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"***",end:"***",format:["bold","italic"]},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],r=function(e){return void 0!==e.textpattern_patterns?e.textpattern_patterns:n},i=tinymce.util.Tools.resolve("tinymce.util.Delay"),o=tinymce.util.Tools.resolve("tinymce.util.VK"),a=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),s=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=function(e,t,n,r){return t.substr(n-e.end.length-r,e.end.length)===e.end},l=function(e,t,n){return e-t-n.end.length-n.start.length>0},c=function(e,t){for(var n=0;n<e.length;n++)if(0===t.indexOf(e[n].start)&&(!e[n].end||t.lastIndexOf(e[n].end)===t.length-e[n].end.length))return e[n]},f=function(e,t,n,r){var i,o,a=function(e){return e.sort(function(e,t){return e.start.length>t.start.length?-1:e.start.length<t.start.length?1:0})}(e);for(o=0;o<a.length;o++)if(void 0!==(i=a[o]).end&&u(i,t,n,r)&&l(n,r,i))return i},d=function(e,t,n){if(!1!==t.collapsed){var r=t.startContainer,i=r.data,o=!0===n?1:0;if(3===r.nodeType){var a=f(e,i,t.startOffset,o);if(void 0!==a){var s=i.lastIndexOf(a.end,t.startOffset-o),u=i.lastIndexOf(a.start,s-a.end.length);if(s=i.indexOf(a.end,u+a.start.length),-1!==u){var l=document.createRange();l.setStart(r,u),l.setEnd(r,s+a.end.length);var d=c(e,l.toString());if(!(void 0===a||d!==a||r.data.length<=a.start.length+a.end.length))return{pattern:a,startOffset:u,endOffset:s}}}}}},h=function(e,t,n){var r=e.selection.getRng(!0),i=d(t,r,n);if(i)return function(e,t,n,r){var i=s.isArray(n.pattern.format)?n.pattern.format:[n.pattern.format];if(0!==s.grep(i,function(t){var n=e.formatter.get(t);return n&&n[0].inline}).length)return e.undoManager.transact(function(){t=function(e,t,n,r,i){return(e=r>0?e.splitText(r):e).splitText(n-r+t.end.length),e.deleteData(0,t.start.length),e.deleteData(e.data.length-t.end.length,t.end.length),e}(t,n.pattern,n.endOffset,n.startOffset),i.forEach(function(n){e.formatter.apply(n,{},t)})}),t}(e,r.startContainer,i)},p=function(e,t){return h(e,t,!0)},m=function(e,t){return h(e,t,!1)},g=function(e,t){var n,r,i,o,u,l,f,d,h,p,m;if(n=e.selection,r=e.dom,n.isCollapsed()&&(f=r.getParent(n.getStart(),"p"))){for(h=new a(f,f);u=h.next();)if(3===u.nodeType){o=u;break}if(o){if(!(d=c(t,o.data)))return;if(i=(p=n.getRng(!0)).startContainer,m=p.startOffset,o===i&&(m=Math.max(0,m-d.start.length)),s.trim(o.data).length===d.start.length)return;d.format&&(l=e.formatter.get(d.format))&&l[0].block&&(o.deleteData(0,d.start.length),e.formatter.apply(d.format,{},o),p.setStart(i,m),p.collapse(!0),n.setRng(p)),d.cmd&&e.undoManager.transact(function(){o.deleteData(0,d.start.length),e.execCommand(d.cmd)})}}},v=function(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return!0},b=function(e,t){var n,r;(n=m(e,t))&&((r=e.dom.createRng()).setStart(n,n.data.length),r.setEnd(n,n.data.length),e.selection.setRng(r)),g(e,t)},y=function(e,t){var n,r,i,o,a;(n=p(e,t))&&(a=e.dom,r=n.data.slice(-1),/[\u00a0 ]/.test(r)&&(n.deleteData(n.data.length-1,1),i=a.doc.createTextNode(r),a.insertAfter(i,n.parentNode),(o=a.createRng()).setStart(i,1),o.setEnd(i,1),e.selection.setRng(o)))},w=function(e,t){return v(e,t,function(e,t){return e.charCodeAt(0)===t.charCode})},x=function(e,t){return v(e,t,function(e,t){return e===t.keyCode&&!1===o.modifierPressed(t)})};t.add("textpattern",function(t){var n=e(r(t.settings));return function(e,t){var n=[",",".",";",":","!","?"],r=[32];e.on("keydown",function(n){13!==n.keyCode||o.modifierPressed(n)||b(e,t.get())},!0),e.on("keyup",function(n){x(r,n)&&y(e,t.get())}),e.on("keypress",function(r){w(n,r)&&i.setEditorTimeout(e,function(){y(e,t.get())})})}(t,n),function(e){return{setPatterns:function(t){e.set(t)},getPatterns:function(){return e.get()}}}(n)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Color"),n=function(e,t){e.find("#preview")[0].getEl().style.background=t},r=function(e,r){var i=t(r),o=i.toRgb();e.fromJSON({r:o.r,g:o.g,b:o.b,hex:i.toHex().substr(1)}),n(e,i.toHex())},i=function(e,t,i){var o=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:i,onchange:function(){var e=this.rgb();o&&(o.find("#r").value(e.r),o.find("#g").value(e.g),o.find("#b").value(e.b),o.find("#hex").value(this.value().substr(1)),n(o,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e,t,n=o.find("colorpicker")[0];if(e=this.name(),t=this.value(),"hex"===e)return r(o,t="#"+t),void n.value(t);t={r:o.find("#r").value(),g:o.find("#g").value(),b:o.find("#b").value()},n.value(t),r(o,t)}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+o.toJSON().hex)}});r(o,i)};e.add("colorpicker",function(e){e.settings.color_picker_callback||(e.settings.color_picker_callback=function(t,n){i(e,t,n)})})}()},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(2)),o=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(t){function n(){return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default.View),r(n,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.column=e,this.listenTo(this.column,"destroy",this.remove),this.listenTo(this.column,"change:adding",this.fn_toggle_show),this.render()}},{key:"events",value:function(){return{"click .element-item":"fn_add_element"}}},{key:"render",value:function(){var t=this;if(console.log(drupalSettings.gavias_content_builder.params),this.column.get("adding")){var n="";n+='<div class="gpb-elements-list"><ul class="clearfix">',n+="<% _.each( drupalSettings.gavias_content_builder.element_fields, function( el, key ){ %>",n+='<% if (el.key != "gva_column"){ %>',n+='<li><span class="content-inner">',n+='<a href="#" class="element element-item element-item-<%= key %>" data-element_name="<%= key %>">',n+='<i class="<%= el.icon %>"></i><span><%= el.title %></span>',n+="</a>",n+="</span></li>",n+="<% } %>",n+="<% }) %>",n+="</ul></div>",this.template='<div class="modal"><div class="modal-dialog gpb-modal">'+n+"</div></div>",this.template=o.default.template(this.template,{variable:"data"})(this.column.toJSON()),this.setElement(this.template),e("body").append(this.el),e("body").find(this.$el).modal("show"),e("body").find(this.$el).on("hidden.bs.modal",function(e){t.column.set("adding",!1)})}return this}},{key:"fn_toggle_show",value:function(e){e.get("adding")||this.remove()}},{key:"_close",value:function(){e("body").find(this.$el).modal("hide"),this.column.set("adding",!1)}},{key:"fn_add_element",value:function(t){t.preventDefault();var n=e(t.target);"A"!==t.target.nodeName&&(n=e(t.target).parents("a:first"));var r=n.data();void 0!==r.elements&&delete r.elements,"gva_row"===r.element_name&&(r.row={settings:{element:"gva_row"},columns:{settings:{element:"gva_column"},elements:[],column:12}});var i=this.column.get("elements").add(r,{at:this.column.get("elements").length});return i&&i.set("create_edit_form",!0),this._close(),"gva_row"==r.element_name?e("body").removeClass("modal-open"):e("body").addClass("modal-open"),!1}}]),n}();t.default=s}).call(this,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(2)),a=l(n(1)),s=l(n(9)),u=(l(n(0)),l(n(7)));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.element=t,this.listenTo(this.element,"destroy",this.remove),this.listenTo(this.element,"change:reRender",this.fn_re_render),this.listenTo(this.element.get("row"),"destroy",function(){e.element.destroy()}),this.listenTo(this.element,"change:create_edit_form",function(t,n){!0===n&&"gva_row"!=e.element.get("element_name")&&(e.editForm=new u.default(e.element,"Edit form"),t.set("editing",!0),t.unset("create_edit_form"))})}},{key:"events",value:function(){return{"click .gpb-action_delete:not(.gpb_action_delete_row)":"fn_remove","click .gpb-action_edit :not(.gpb_action_edit_row)":"fn_edit","click .gpb_drap-order":function(){return!1}}}},{key:"render",value:function(){var e=this.element.toJSON();if(e.cid=this.element.cid,void 0!==this.element.get("row"))this.template='<div class="gpb_el-content-inner gpb_row-el" data-cid="'+e.cid+'"></div>',this.setElement(this.template),this.$el.html(new s.default(this.element.get("row")).render().el),this.$(".gpb_row-content").addClass("disable-sortable");else{var t=this.element.get("element_name");t&&void 0!==drupalSettings.gavias_content_builder.element_fields[t]&&(e=r({},e,drupalSettings.gavias_content_builder.element_fields[t]));var n="";n+='<div class="gpb_el-content-inner <%= data.key %>" data-cid="<%= data.cid %>">',n+='<div class="gpb_action-button element-controls">',n+='<div class="left">',n+='<a href="#" class="gpb_drap-order"><i class="fa fa-arrows"></i></a>',n+='<a href="#" class="gpb-action_edit btn-border-none btn-action" title="Edit"><i class="fa fa-pencil" ></i></a>',n+='<a href="#" class="gpb-action_clone btn-border-none btn-action gpb-action_clone_element" title="Clone"><i class="fa fa-clone" ></i></a>',n+="</div>",n+='<div class="right">',n+='<a href="#" class="gpb-action_delete btn-border-none btn-action" title="Delete"><i class="fa fa-times" ></i></a>',n+="</div>",n+="</div>",n+='<div class="gpb_element-inner">',n+='<div class="element element-item">',n+='<span class="title"><%= data.title %></span>',n+='<span class="desc">',n+="<% _.each( data.fields, function( field ){ %>",n+="<% if (field.admin == true && data.settings[field.id]){ %>",n+='<span class="item-desc"><%= data.settings[field.id] %><span class="space">&nbsp;/&nbsp;</span></span>',n+="<% } %>",n+="<% }) %>",n+=" </span>",n+="</div>",n+="</div>",n+="</div>",this.template=a.default.template(n,{variable:"data"})(e),this.setElement(this.template)}return this}},{key:"fn_remove",value:function(e){return e.preventDefault(),confirm("You are sure delete this element ! Continue?")&&this.element.destroy(),!1}},{key:"fn_edit",value:function(e){return e.preventDefault(),!0!==this.element.get("editing")&&(this.editForm=new u.default(this.element,"Edit form"),this.element.set("editing",!0)),!1}},{key:"fn_re_render",value:function(e,t){!0===e.get("reRender")&&(this.$el.replaceWith(this.render().el),this.element.set("reRender",!1))}}]),t}();t.default=c},function(e,t,n){var r,i,o;i=[n(0),n(10),n(47),n(48),n(3),n(6)],void 0===(o="function"==typeof(r=function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r,i=n&&"left"===n?"scrollLeft":"scrollTop";return t[i]>0||(t[i]=1,r=t[i]>0,t[i]=0,r)},_create:function(){var t,n=this.options,r=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",function(){n.disabled||(r._removeClass("ui-resizable-autohide"),r._handles.show())}).on("mouseleave",function(){n.disabled||r.resizing||(r._addClass("ui-resizable-autohide"),r._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,n,r,i,o,a=this.options,s=this;if(this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),r=this.handles.split(","),this.handles={},n=0;n<r.length;n++)i="ui-resizable-"+(t=e.trim(r[n])),o=e("<div>"),this._addClass(o,"ui-resizable-handle "+i),o.css({zIndex:a.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(o);this._renderAxis=function(t){var n,r,i,o;for(n in t=t||this.element,this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=e(this.handles[n],this.element),o=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles)((r=e(this.handles[n])[0])===t.target||e.contains(r,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var n,r,i,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),r=this._num(this.helper.css("top")),o.containment&&(n+=e(o.containment).scrollLeft()||0,r+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:n,top:r},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===i?this.axis+"-resize":i),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r,i=this.originalMousePosition,o=this.axis,a=t.pageX-i.left||0,s=t.pageY-i.top||0,u=this._change[o];return this._updatePrevProperties(),!!u&&(n=u.apply(this,[t,a,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var n,r,i,o,a,s,u,l=this.options;return this._helper&&(i=(r=(n=this._proportionallyResizeElements).length&&/textarea/i.test(n[0].nodeName))&&this._hasScroll(n[0],"left")?0:this.sizeDiff.height,o=r?0:this.sizeDiff.width,a={width:this.helper.width()-o,height:this.helper.height()-i},s=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null,u=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,l.animate||this.element.css(e.extend(a,{top:u,left:s})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,r,i,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,r=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,i=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),r>o.minHeight&&(o.minHeight=r),n<o.maxWidth&&(o.maxWidth=n),i<o.maxHeight&&(o.maxHeight=i)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,a=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,u=this.originalPosition.top+this.originalSize.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),a&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),o&&l&&(e.left=s-t.minWidth),r&&l&&(e.left=s-t.maxWidth),a&&c&&(e.top=u-t.minHeight),i&&c&&(e.top=u-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],r=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)n[t]=parseFloat(r[t])||0,n[t]+=parseFloat(i[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize;return{top:this.originalPosition.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),r=n.options,i=n._proportionallyResizeElements,o=i.length&&/textarea/i.test(i[0].nodeName),a=o&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,s=o?0:n.sizeDiff.width,u={width:n.size.width-s,height:n.size.height-a},l=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,c=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(u,c&&l?{top:c,left:l}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,i,o,a,s,u=e(this).resizable("instance"),l=u.options,c=u.element,f=l.containment,d=f instanceof e?f.get(0):/parent/.test(f)?c.parent().get(0):f;d&&(u.containerElement=e(d),/document/.test(f)||f===document?(u.containerOffset={left:0,top:0},u.containerPosition={left:0,top:0},u.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(d),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=u._num(t.css("padding"+r))}),u.containerOffset=t.offset(),u.containerPosition=t.position(),u.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=u.containerOffset,i=u.containerSize.height,o=u.containerSize.width,a=u._hasScroll(d,"left")?d.scrollWidth:o,s=u._hasScroll(d)?d.scrollHeight:i,u.parentData={element:d,left:r.left,top:r.top,width:a,height:s}))},resize:function(t){var n,r,i,o,a=e(this).resizable("instance"),s=a.options,u=a.containerOffset,l=a.position,c=a._aspectRatio||t.shiftKey,f={top:0,left:0},d=a.containerElement,h=!0;d[0]!==document&&/static/.test(d.css("position"))&&(f=u),l.left<(a._helper?u.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-u.left:a.position.left-f.left),c&&(a.size.height=a.size.width/a.aspectRatio,h=!1),a.position.left=s.helper?u.left:0),l.top<(a._helper?u.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-u.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,h=!1),a.position.top=a._helper?u.top:0),i=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),i&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),n=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-f.left:a.offset.left-u.left)),r=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-f.top:a.offset.top-u.top)),n+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-n,c&&(a.size.height=a.size.width/a.aspectRatio,h=!1)),r+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-r,c&&(a.size.width=a.size.height*a.aspectRatio,h=!1)),h||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,r=t.containerOffset,i=t.containerPosition,o=t.containerElement,a=e(t.helper),s=a.offset(),u=a.outerWidth()-t.sizeDiff.width,l=a.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(o.css("position"))&&e(this).css({left:s.left-i.left-r.left,width:u,height:l}),t._helper&&!n.animate&&/static/.test(o.css("position"))&&e(this).css({left:s.left-i.left-r.left,width:u,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance").options;e(t.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var r=e(this).resizable("instance"),i=r.options,o=r.originalSize,a=r.originalPosition,s={height:r.size.height-o.height||0,width:r.size.width-o.width||0,top:r.position.top-a.top||0,left:r.position.left-a.left||0};e(i.alsoResize).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),i={},o=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(r[t]||0)+(s[t]||0);n&&n>=0&&(i[t]=n||null)}),t.css(i)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),r=n.options,i=n.size,o=n.originalSize,a=n.originalPosition,s=n.axis,u="number"==typeof r.grid?[r.grid,r.grid]:r.grid,l=u[0]||1,c=u[1]||1,f=Math.round((i.width-o.width)/l)*l,d=Math.round((i.height-o.height)/c)*c,h=o.width+f,p=o.height+d,m=r.maxWidth&&r.maxWidth<h,g=r.maxHeight&&r.maxHeight<p,v=r.minWidth&&r.minWidth>h,b=r.minHeight&&r.minHeight>p;r.grid=u,v&&(h+=l),b&&(p+=c),m&&(h-=l),g&&(p-=c),/^(se|s|e)$/.test(s)?(n.size.width=h,n.size.height=p):/^(ne)$/.test(s)?(n.size.width=h,n.size.height=p,n.position.top=a.top-d):/^(sw)$/.test(s)?(n.size.width=h,n.size.height=p,n.position.left=a.left-f):((p-c<=0||h-l<=0)&&(t=n._getPaddingPlusBorderDimensions(this)),p-c>0?(n.size.height=p,n.position.top=a.top-d):(p=c-t.height,n.size.height=p,n.position.top=a.top+o.height-p),h-l>0?(n.size.width=h,n.position.left=a.left-f):(h=l-t.width,n.size.width=h,n.position.left=a.left+o.width-h))}}),e.ui.resizable})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(0),n(3)],void 0===(o="function"==typeof(r=function(e){return e.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});var t})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(0),n(3)],void 0===(o="function"==typeof(r=function(e){return e.ui.plugin={add:function(t,n,r){var i,o=e.ui[t].prototype;for(i in r)o.plugins[i]=o.plugins[i]||[],o.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,o=e.plugins[t];if(o&&(r||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;i<o.length;i++)e.options[o[i][0]]&&o[i][1].apply(e.element,n)}}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61)},function(e,t,n){(function(e){!function(e){"use strict";e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;return e(this).one("bsTransitionEnd",function(){n=!0}),setTimeout(function(){n||e(r).trigger(e.support.transition.end)},t),this},e(function(){e.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.close=function(t){var r=e(this),i=r.attr("data-target");i||(i=(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,""));var o=e(i);function a(){o.detach().trigger("closed.bs.alert").remove()}t&&t.preventDefault(),o.length||(o=r.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",a).emulateTransitionEnd(n.TRANSITION_DURATION):a())};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),"string"==typeof t&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.isLoading=!1};function n(n){return this.each(function(){var r=e(this),i=r.data("bs.button"),o="object"==typeof n&&n;i||r.data("bs.button",i=new t(this,o)),"toggle"==n?i.toggle():n&&i.setState(n)})}t.VERSION="3.3.5",t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();t+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=n,e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=e(t.target);r.hasClass("btn")||(r=r.closest(".btn")),n.call(r,"toggle"),e(t.target).is('input[type="radio"]')||e(t.target).is('input[type="checkbox"]')||t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};function n(n){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),o=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n),a="string"==typeof n?n:o.slide;i||r.data("bs.carousel",i=new t(this,o)),"number"==typeof n?i.to(n):a?i[a]():o.interval&&i.pause().cycle()})}t.VERSION="3.3.5",t.TRANSITION_DURATION=600,t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},t.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},t.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t);if(("prev"==e&&0===n||"next"==e&&n==this.$items.length-1)&&!this.options.wrap)return t;var r=(n+("prev"==e?-1:1))%this.$items.length;return this.$items.eq(r)},t.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){if(!this.sliding)return this.slide("next")},t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},t.prototype.slide=function(n,r){var i=this.$element.find(".item.active"),o=r||this.getItemForDirection(n,i),a=this.interval,s="next"==n?"left":"right",u=this;if(o.hasClass("active"))return this.sliding=!1;var l=o[0],c=e.Event("slide.bs.carousel",{relatedTarget:l,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var f=e(this.$indicators.children()[this.getItemIndex(o)]);f&&f.addClass("active")}var d=e.Event("slid.bs.carousel",{relatedTarget:l,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(n),o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one("bsTransitionEnd",function(){o.removeClass([n,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger(d)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(d)),a&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=n,e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(t){var r,i=e(this),o=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=e.extend({},o.data(),i.data()),s=i.attr("data-slide-to");s&&(a.interval=!1),n.call(o,a),s&&o.data("bs.carousel").to(s),t.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);n.call(t,t.data())})})}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.$trigger=e('[data-toggle="collapse"][href="#'+n.id+'"],[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function n(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function r(n){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),o=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n);!i&&o.toggle&&/show|hide/.test(n)&&(o.toggle=!1),i||r.data("bs.collapse",i=new t(this,o)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.5",t.TRANSITION_DURATION=350,t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(n=i.data("bs.collapse"))&&n.transitioning)){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(r.call(i,"hide"),n||i.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var u=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[a](this.$element[0][u])}}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var n=e.Event("hide.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var r=this.dimension();this.$element[r](this.$element[r]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return i.call(this);this.$element[r](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(t.TRANSITION_DURATION)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},t.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,r){var i=e(r);this.addAriaAndCollapsedClass(n(i),i)},this)).end()},t.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=r,e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var i=e(this);i.attr("data-target")||t.preventDefault();var o=n(i),a=o.data("bs.collapse")?"toggle":i.data();r.call(o,a)})}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=".dropdown-backdrop",n='[data-toggle="dropdown"]',r=function(t){e(t).on("click.bs.dropdown",this.toggle)};function i(t){var n=t.attr("data-target");n||(n=(n=t.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function o(r){r&&3===r.which||(e(t).remove(),e(n).each(function(){var t=e(this),n=i(t),o={relatedTarget:this};n.hasClass("open")&&(r&&"click"==r.type&&/input|textarea/i.test(r.target.tagName)&&e.contains(n[0],r.target)||(n.trigger(r=e.Event("hide.bs.dropdown",o)),r.isDefaultPrevented()||(t.attr("aria-expanded","false"),n.removeClass("open").trigger("hidden.bs.dropdown",o))))}))}r.VERSION="3.3.5",r.prototype.toggle=function(t){var n=e(this);if(!n.is(".disabled, :disabled")){var r=i(n),a=r.hasClass("open");if(o(),!a){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",o);var s={relatedTarget:this};if(r.trigger(t=e.Event("show.bs.dropdown",s)),t.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},r.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var o=i(r),a=o.hasClass("open");if(!a&&27!=t.which||a&&27==t.which)return 27==t.which&&o.find(n).trigger("focus"),r.trigger("click");var s=o.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var u=s.index(t.target);38==t.which&&u>0&&u--,40==t.which&&u<s.length-1&&u++,~u||(u=0),s.eq(u).trigger("focus")}}}};var a=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,r.prototype.toggle).on("keydown.bs.dropdown.data-api",n,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function n(n,r){return this.each(function(){var i=e(this),o=i.data("bs.modal"),a=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);o||i.data("bs.modal",o=new t(this,a)),"string"==typeof n?o[n](r):a.show&&o.show(r)})}t.VERSION="3.3.5",t.TRANSITION_DURATION=300,t.BACKDROP_TRANSITION_DURATION=150,t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},t.prototype.show=function(n){var r=this,i=e.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:n});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},t.prototype.hide=function(n){n&&n.preventDefault(),n=e.Event("hide.bs.modal"),this.$element.trigger(n),this.isShown&&!n.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(n){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&i;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!n)return;o?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){r.removeBackdrop(),n&&n()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):a()}else n&&n()},t.prototype.handleUpdate=function(){this.adjustDialog()},t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=n,e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=e(this),i=r.attr("href"),o=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&t.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),n.call(o,a,this)})}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};t.VERSION="3.3.5",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a=i[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",u="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return(t=e.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState)n.hoverState="in";else{if(clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)}},t.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),!n.isInStateTrue()){if(clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)}},t.prototype.show=function(){var n=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!r)return;var i=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,u=/\s?auto?\s?/i,l=u.test(s);l&&(s=s.replace(u,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),f=o[0].offsetWidth,d=o[0].offsetHeight;if(l){var h=s,p=this.getPosition(this.$viewport);s="bottom"==s&&c.bottom+d>p.bottom?"top":"top"==s&&c.top-d<p.top?"bottom":"right"==s&&c.right+f>p.width?"left":"left"==s&&c.left-f<p.left?"right":s,o.removeClass(h).addClass(s)}var m=this.getCalculatedOffset(s,c,f,d);this.applyPlacement(m,s);var g=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(t.TRANSITION_DURATION):g()}},t.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top+=a,t.left+=s,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var u=r[0].offsetWidth,l=r[0].offsetHeight;"top"==n&&l!=o&&(t.top=t.top+o-l);var c=this.getViewportAdjustedDelta(n,t,u,l);c.left?t.left+=c.left:t.top+=c.top;var f=/top|bottom/.test(n),d=f?2*c.left-i+u:2*c.top-o+l,h=f?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(d,r[0][h],f)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(n){var r=this,i=e(this.$tip),o=e.Event("hide.bs."+this.type);function a(){"in"!=r.hoverState&&i.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),n&&n()}if(this.$element.trigger(o),!o.isDefaultPrevented())return i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",a).emulateTransitionEnd(t.TRANSITION_DURATION):a(),this.hoverState=null,this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(t){var n=(t=t||this.$element)[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=r?{top:0,left:0}:t.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,a,s,o)},t.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,u=t.top+o-a.scroll+r;s<a.top?i.top=a.top-s:u>a.top+a.height&&(i.top=a.top+a.height-u)}else{var l=t.left-o,c=t.left+o+n;l<a.left?i.left=a.left-l:c>a.right&&(i.left=a.left+a.width-c)}return i},t.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},t.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},t.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=this;t&&((n=e(t.currentTarget).data("bs."+this.type))||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),o="object"==typeof n&&n;!i&&/destroy|hide/.test(n)||(i||r.data("bs.tooltip",i=new t(this,o)),"string"==typeof n&&i[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.5",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),(t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype)).constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),o="object"==typeof n&&n;!i&&/destroy|hide/.test(n)||(i||r.data("bs.popover",i=new t(this,o)),"string"==typeof n&&i[n]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(n).is(document.body)?e(window):e(n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),o="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,o)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.5",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),o=/^#./.test(i)&&e(i);return o&&o.length&&o.is(":visible")&&[[o[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)a!=o[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(t){this.element=e(t)};function n(n){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new t(this)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.5",t.TRANSITION_DURATION=150,t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=(r=t.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(r);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},t.prototype.activate=function(n,r,i){var o=r.find("> .active"),a=i&&e.support.transition&&(o.length&&o.hasClass("fade")||!!r.find("> .fade").length);function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu").length&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}o.length&&a?o.one("bsTransitionEnd",s).emulateTransitionEnd(t.TRANSITION_DURATION):s(),o.removeClass("in")};var r=e.fn.tab;e.fn.tab=n,e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(t){t.preventDefault(),n.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function n(n){return this.each(function(){var r=e(this),i=r.data("bs.affix"),o="object"==typeof n&&n;i||r.data("bs.affix",i=new t(this,o)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.5",t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0,target:window},t.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return i<n&&"top";if("bottom"==this.affixed)return null!=n?!(i+this.unpin<=o.top)&&"bottom":!(i+a<=e-r)&&"bottom";var s=null==this.affixed,u=s?i:o.top;return null!=n&&i<=n?"top":null!=r&&u+(s?a:t)>=e-r&&"bottom"},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=this.$element.height(),r=this.options.offset,i=r.top,o=r.bottom,a=Math.max(e(document).height(),e(document.body).height());"object"!=typeof r&&(o=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var s=this.getState(a,n,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var u="affix"+(s?"-"+s:""),l=e.Event(u+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(u).trigger(u.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-n-o})}};var r=e.fn.affix;e.fn.affix=n,e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),r=t.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),n.call(t,r)})})}(e)}).call(this,n(0))},function(e,t,n){var r,i,o;i=[n(0)],void 0===(o="function"==typeof(r=function(e){var t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},n="notifyjs",r={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"},i=["l","c","r"],o=["t","m","b"],a=["t","b","l","r"],s={t:"b",m:null,b:"t",l:"r",c:null,r:"l"},u={},l={name:"core",html:'<div class="'+n+'-wrapper">\n\t<div class="'+n+'-arrow"></div>\n\t<div class="'+n+'-container"></div>\n</div>',css:"."+n+"-corner {\n\tposition: fixed;\n\tmargin: 5px;\n\tz-index: 1050;\n}\n\n."+n+"-corner ."+n+"-wrapper,\n."+n+"-corner ."+n+"-container {\n\tposition: relative;\n\tdisplay: block;\n\theight: inherit;\n\twidth: inherit;\n\tmargin: 3px;\n}\n\n."+n+"-wrapper {\n\tz-index: 1;\n\tposition: absolute;\n\tdisplay: inline-block;\n\theight: 0;\n\twidth: 0;\n}\n\n."+n+"-container {\n\tdisplay: none;\n\tz-index: 1;\n\tposition: absolute;\n}\n\n."+n+"-hidable {\n\tcursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n\tposition: relative;\n}\n\n."+n+"-arrow {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 0;\n\theight: 0;\n}"},c={"border-radius":["-webkit-","-moz-"]},f=function(t,r){if(!t)throw"Missing Style name";if(!r)throw"Missing Style definition";if(!r.html)throw"Missing Style HTML";var i=u[t];i&&i.cssElem&&(window.console&&console.warn("notify: overwriting style '"+t+"'"),u[t].cssElem.remove()),r.name=t,u[t]=r;var o="";r.classes&&e.each(r.classes,function(t,i){return o+="."+n+"-"+r.name+"-"+t+" {\n",e.each(i,function(t,n){return c[t]&&e.each(c[t],function(e,r){return o+="\t"+r+t+": "+n+";\n"}),o+="\t"+t+": "+n+";\n"}),o+="}\n"}),r.css&&(o+="/* styles for "+r.name+" */\n"+r.css),o&&(r.cssElem=d(o),r.cssElem.attr("id","notify-"+r.name));var a={},s=e(r.html);h("html",s,a),h("text",s,a),r.fields=a},d=function(t){var n;(n=v("style")).attr("type","text/css"),e("head").append(n);try{n.html(t)}catch(e){n[0].styleSheet.cssText=t}return n},h=function(t,n,r){var i;return"html"!==t&&(t="text"),p(n,"["+(i="data-notify-"+t)+"]").each(function(){var n;(n=e(this).attr(i))||(n="notify!blank"),r[n]=t})},p=function(e,t){return e.is(t)?e:e.find(t)},m={clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,breakNewLines:!0,elementPosition:"bottom",globalPosition:"top right",style:"bootstrap",className:"error",showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:5},g=function(t,n){var r;return(r=function(){}).prototype=t,e.extend(!0,new r,n)},v=function(t){return e("<"+t+"></"+t+">")},b={},y=function(t){var n;return t.is("[type=radio]")&&(n=t.parents("form:first").find("[type=radio]").filter(function(n,r){return e(r).attr("name")===t.attr("name")}),t=n.first()),t},w=function(e,t,n){var i;if("string"==typeof n)n=parseInt(n,10);else if("number"!=typeof n)return;if(!isNaN(n))return void 0!==e[i=r[s[t.charAt(0)]]]&&(t=r[i.charAt(0)],n=-n),void 0===e[t]?e[t]=n:e[t]+=n,null},x=function(e,t,n){if("l"===e||"t"===e)return 0;if("c"===e||"m"===e)return n/2-t/2;if("r"===e||"b"===e)return n-t;throw"Invalid alignment"},C=function(e){return C.e=C.e||v("div"),C.e.text(e).html()};function _(t,r,i){"string"==typeof i&&(i={className:i}),this.options=g(m,e.isPlainObject(i)?i:{}),this.loadHTML(),this.wrapper=e(l.html),this.options.clickToHide&&this.wrapper.addClass(n+"-hidable"),this.wrapper.data(n,this),this.arrow=this.wrapper.find("."+n+"-arrow"),this.container=this.wrapper.find("."+n+"-container"),this.container.append(this.userContainer),t&&t.length&&(this.elementType=t.attr("type"),this.originalElement=t,this.elem=y(t),this.elem.data(n,this),this.elem.before(this.wrapper)),this.container.hide(),this.run(r)}_.prototype.loadHTML=function(){var t;t=this.getStyle(),this.userContainer=e(t.html),this.userFields=t.fields},_.prototype.show=function(e,t){var n,r,i,o,a,s;if(s=this,r=function(){if(e||s.elem||s.destroy(),t)return t()},a=this.container.parent().parents(":hidden").length>0,i=this.container.add(this.arrow),n=[],a&&e)o="show";else if(a&&!e)o="hide";else if(!a&&e)o=this.options.showAnimation,n.push(this.options.showDuration);else{if(a||e)return r();o=this.options.hideAnimation,n.push(this.options.hideDuration)}return n.push(r),i[o].apply(i,n)},_.prototype.setGlobalPosition=function(){var t=this.getPosition(),i=t[0],o=t[1],a=r[i],s=r[o],u=i+"|"+o,l=b[u];if(!l){l=b[u]=v("div");var c={};c[a]=0,"middle"===s?c.top="45%":"center"===s?c.left="45%":c[s]=0,l.css(c).addClass(n+"-corner"),e("body").append(l)}return l.prepend(this.wrapper)},_.prototype.setElementPosition=function(){var n,u,l,c,f,d,h,p,m,g,v,b,y,C,_,S,T,k,E,N,A,R,O,D,P,I,B,M;for(O=(I=this.getPosition())[0],R=I[1],I[2],v=this.elem.position(),p=this.elem.outerHeight(),b=this.elem.outerWidth(),m=this.elem.innerHeight(),g=this.elem.innerWidth(),M=this.wrapper.position(),f=this.container.height(),d=this.container.width(),k=r[O],(h={})[A=r[N=s[O]]]="b"===O?p:"r"===O?b:0,w(h,"top",v.top-M.top),w(h,"left",v.left-M.left),C=0,S=(B=["top","left"]).length;C<S;C++)D=B[C],(E=parseInt(this.elem.css("margin-"+D),10))&&w(h,D,E);if(y=Math.max(0,this.options.gap-(this.options.arrowShow?l:0)),w(h,A,y),this.options.arrowShow){for(l=this.options.arrowSize,u=e.extend({},h),n=this.userContainer.css("border-color")||this.userContainer.css("border-top-color")||this.userContainer.css("background-color")||"white",_=0,T=a.length;_<T;_++)P=r[D=a[_]],D!==N&&(c=P===k?n:"transparent",u["border-"+P]=l+"px solid "+c);w(h,r[N],l),t.call(a,R)>=0&&w(u,r[R],2*l)}else this.arrow.hide();if(t.call(o,O)>=0?(w(h,"left",x(R,d,b)),u&&w(u,"left",x(R,l,g))):t.call(i,O)>=0&&(w(h,"top",x(R,f,p)),u&&w(u,"top",x(R,l,m))),this.container.is(":visible")&&(h.display="block"),this.container.removeAttr("style").css(h),u)return this.arrow.removeAttr("style").css(u)},_.prototype.getPosition=function(){var n,s,u,l,c,f,d;if(0===(n=function(t){var n;return n=[],e.each(t.split(/\W+/),function(e,t){var i;if(i=t.toLowerCase().charAt(0),r[i])return n.push(i)}),n}(this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition))).length&&(n[0]="b"),s=n[0],t.call(a,s)<0)throw"Must be one of ["+a+"]";return(1===n.length||(u=n[0],t.call(o,u)>=0&&(l=n[1],t.call(i,l)<0))||(c=n[0],t.call(i,c)>=0&&(f=n[1],t.call(o,f)<0)))&&(n[1]=(d=n[0],t.call(i,d)>=0?"m":"l")),2===n.length&&(n[2]=n[1]),n},_.prototype.getStyle=function(e){var t;if(e||(e=this.options.style),e||(e="default"),!(t=u[e]))throw"Missing style: "+e;return t},_.prototype.updateClasses=function(){var t,r;return t=["base"],e.isArray(this.options.className)?t=t.concat(this.options.className):this.options.className&&t.push(this.options.className),r=this.getStyle(),t=e.map(t,function(e){return n+"-"+r.name+"-"+e}).join(" "),this.userContainer.attr("class",t)},_.prototype.run=function(t,n){var r,i,o,a,s;if(e.isPlainObject(n)?e.extend(this.options,n):"string"===e.type(n)&&(this.options.className=n),!this.container||t){if(this.container||t){for(o in i={},e.isPlainObject(t)?i=t:i["notify!blank"]=t,i)r=i[o],(a=this.userFields[o])&&("text"===a&&(r=C(r),this.options.breakNewLines&&(r=r.replace(/\n/g,"<br/>"))),s="notify!blank"===o?"":"="+o,p(this.userContainer,"[data-notify-"+a+s+"]").html(r));this.updateClasses(),this.elem?this.setElementPosition():this.setGlobalPosition(),this.show(!0),this.options.autoHide&&(clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(this.show.bind(this,!1),this.options.autoHideDelay))}}else this.show(!1)},_.prototype.destroy=function(){this.wrapper.data(n,null),this.wrapper.remove()},e.notify=function(t,n,r){return t&&t.nodeName||t.jquery?e(t).notify(n,r):(r=n,new _(null,n=t,r)),t},e.fn.notify=function(t,r){return e(this).each(function(){var i=y(e(this)).data(n);i&&i.destroy(),new _(e(this),t,r)}),this},e.extend(e.notify,{defaults:function(t){return e.extend(m,t)},addStyle:f,pluginOptions:m,getStyle:function(e){return u[e]},insertCSS:d}),f("bootstrap",{html:"<div>\n<span data-notify-text></span>\n</div>",classes:{base:{"font-weight":"bold",padding:"8px 15px 8px 14px","text-shadow":"0 1px 0 rgba(255, 255, 255, 0.5)","background-color":"#fcf8e3",border:"1px solid #fbeed5","border-radius":"4px","white-space":"nowrap","padding-left":"25px","background-repeat":"no-repeat","background-position":"3px 7px"},error:{color:"#B94A48","background-color":"#F2DEDE","border-color":"#EED3D7","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtRJREFUeNqkVc1u00AQHq+dOD+0poIQfkIjalW0SEGqRMuRnHos3DjwAH0ArlyQeANOOSMeAA5VjyBxKBQhgSpVUKKQNGloFdw4cWw2jtfMOna6JOUArDTazXi/b3dm55socPqQhFka++aHBsI8GsopRJERNFlY88FCEk9Yiwf8RhgRyaHFQpPHCDmZG5oX2ui2yilkcTT1AcDsbYC1NMAyOi7zTX2Agx7A9luAl88BauiiQ/cJaZQfIpAlngDcvZZMrl8vFPK5+XktrWlx3/ehZ5r9+t6e+WVnp1pxnNIjgBe4/6dAysQc8dsmHwPcW9C0h3fW1hans1ltwJhy0GxK7XZbUlMp5Ww2eyan6+ft/f2FAqXGK4CvQk5HueFz7D6GOZtIrK+srupdx1GRBBqNBtzc2AiMr7nPplRdKhb1q6q6zjFhrklEFOUutoQ50xcX86ZlqaZpQrfbBdu2R6/G19zX6XSgh6RX5ubyHCM8nqSID6ICrGiZjGYYxojEsiw4PDwMSL5VKsC8Yf4VRYFzMzMaxwjlJSlCyAQ9l0CW44PBADzXhe7xMdi9HtTrdYjFYkDQL0cn4Xdq2/EAE+InCnvADTf2eah4Sx9vExQjkqXT6aAERICMewd/UAp/IeYANM2joxt+q5VI+ieq2i0Wg3l6DNzHwTERPgo1ko7XBXj3vdlsT2F+UuhIhYkp7u7CarkcrFOCtR3H5JiwbAIeImjT/YQKKBtGjRFCU5IUgFRe7fF4cCNVIPMYo3VKqxwjyNAXNepuopyqnld602qVsfRpEkkz+GFL1wPj6ySXBpJtWVa5xlhpcyhBNwpZHmtX8AGgfIExo0ZpzkWVTBGiXCSEaHh62/PoR0p/vHaczxXGnj4bSo+G78lELU80h1uogBwWLf5YlsPmgDEd4M236xjm+8nm4IuE/9u+/PH2JXZfbwz4zw1WbO+SQPpXfwG/BBgAhCNZiSb/pOQAAAAASUVORK5CYII=)"},success:{color:"#468847","background-color":"#DFF0D8","border-color":"#D6E9C6","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNq0lctPE0Ecx38zu/RFS1EryqtgJFA08YCiMZIAQQ4eRG8eDGdPJiYeTIwHTfwPiAcvXIwXLwoXPaDxkWgQ6islKlJLSQWLUraPLTv7Gme32zoF9KSTfLO7v53vZ3d/M7/fIth+IO6INt2jjoA7bjHCJoAlzCRw59YwHYjBnfMPqAKWQYKjGkfCJqAF0xwZjipQtA3MxeSG87VhOOYegVrUCy7UZM9S6TLIdAamySTclZdYhFhRHloGYg7mgZv1Zzztvgud7V1tbQ2twYA34LJmF4p5dXF1KTufnE+SxeJtuCZNsLDCQU0+RyKTF27Unw101l8e6hns3u0PBalORVVVkcaEKBJDgV3+cGM4tKKmI+ohlIGnygKX00rSBfszz/n2uXv81wd6+rt1orsZCHRdr1Imk2F2Kob3hutSxW8thsd8AXNaln9D7CTfA6O+0UgkMuwVvEFFUbbAcrkcTA8+AtOk8E6KiQiDmMFSDqZItAzEVQviRkdDdaFgPp8HSZKAEAL5Qh7Sq2lIJBJwv2scUqkUnKoZgNhcDKhKg5aH+1IkcouCAdFGAQsuWZYhOjwFHQ96oagWgRoUov1T9kRBEODAwxM2QtEUl+Wp+Ln9VRo6BcMw4ErHRYjH4/B26AlQoQQTRdHWwcd9AH57+UAXddvDD37DmrBBV34WfqiXPl61g+vr6xA9zsGeM9gOdsNXkgpEtTwVvwOklXLKm6+/p5ezwk4B+j6droBs2CsGa/gNs6RIxazl4Tc25mpTgw/apPR1LYlNRFAzgsOxkyXYLIM1V8NMwyAkJSctD1eGVKiq5wWjSPdjmeTkiKvVW4f2YPHWl3GAVq6ymcyCTgovM3FzyRiDe2TaKcEKsLpJvNHjZgPNqEtyi6mZIm4SRFyLMUsONSSdkPeFtY1n0mczoY3BHTLhwPRy9/lzcziCw9ACI+yql0VLzcGAZbYSM5CCSZg1/9oc/nn7+i8N9p/8An4JMADxhH+xHfuiKwAAAABJRU5ErkJggg==)"},info:{color:"#3A87AD","background-color":"#D9EDF7","border-color":"#BCE8F1","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYFAhkSsdes/QAAA8dJREFUOMvVlGtMW2UYx//POaWHXg6lLaW0ypAtw1UCgbniNOLcVOLmAjHZolOYlxmTGXVZdAnRfXQm+7SoU4mXaOaiZsEpC9FkiQs6Z6bdCnNYruM6KNBw6YWewzl9z+sHImEWv+vz7XmT95f/+3/+7wP814v+efDOV3/SoX3lHAA+6ODeUFfMfjOWMADgdk+eEKz0pF7aQdMAcOKLLjrcVMVX3xdWN29/GhYP7SvnP0cWfS8caSkfHZsPE9Fgnt02JNutQ0QYHB2dDz9/pKX8QjjuO9xUxd/66HdxTeCHZ3rojQObGQBcuNjfplkD3b19Y/6MrimSaKgSMmpGU5WevmE/swa6Oy73tQHA0Rdr2Mmv/6A1n9w9suQ7097Z9lM4FlTgTDrzZTu4StXVfpiI48rVcUDM5cmEksrFnHxfpTtU/3BFQzCQF/2bYVoNbH7zmItbSoMj40JSzmMyX5qDvriA7QdrIIpA+3cdsMpu0nXI8cV0MtKXCPZev+gCEM1S2NHPvWfP/hL+7FSr3+0p5RBEyhEN5JCKYr8XnASMT0xBNyzQGQeI8fjsGD39RMPk7se2bd5ZtTyoFYXftF6y37gx7NeUtJJOTFlAHDZLDuILU3j3+H5oOrD3yWbIztugaAzgnBKJuBLpGfQrS8wO4FZgV+c1IxaLgWVU0tMLEETCos4xMzEIv9cJXQcyagIwigDGwJgOAtHAwAhisQUjy0ORGERiELgG4iakkzo4MYAxcM5hAMi1WWG1yYCJIcMUaBkVRLdGeSU2995TLWzcUAzONJ7J6FBVBYIggMzmFbvdBV44Corg8vjhzC+EJEl8U1kJtgYrhCzgc/vvTwXKSib1paRFVRVORDAJAsw5FuTaJEhWM2SHB3mOAlhkNxwuLzeJsGwqWzf5TFNdKgtY5qHp6ZFf67Y/sAVadCaVY5YACDDb3Oi4NIjLnWMw2QthCBIsVhsUTU9tvXsjeq9+X1d75/KEs4LNOfcdf/+HthMnvwxOD0wmHaXr7ZItn2wuH2SnBzbZAbPJwpPx+VQuzcm7dgRCB57a1uBzUDRL4bfnI0RE0eaXd9W89mpjqHZnUI5Hh2l2dkZZUhOqpi2qSmpOmZ64Tuu9qlz/SEXo6MEHa3wOip46F1n7633eekV8ds8Wxjn37Wl63VVa+ej5oeEZ/82ZBETJjpJ1Rbij2D3Z/1trXUvLsblCK0XfOx0SX2kMsn9dX+d+7Kf6h8o4AIykuffjT8L20LU+w4AZd5VvEPY+XpWqLV327HR7DzXuDnD8r+ovkBehJ8i+y8YAAAAASUVORK5CYII=)"},warn:{color:"#C09853","background-color":"#FCF8E3","border-color":"#FBEED5","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABJlBMVEXr6eb/2oD/wi7/xjr/0mP/ykf/tQD/vBj/3o7/uQ//vyL/twebhgD/4pzX1K3z8e349vK6tHCilCWbiQymn0jGworr6dXQza3HxcKkn1vWvV/5uRfk4dXZ1bD18+/52YebiAmyr5S9mhCzrWq5t6ufjRH54aLs0oS+qD751XqPhAybhwXsujG3sm+Zk0PTwG6Shg+PhhObhwOPgQL4zV2nlyrf27uLfgCPhRHu7OmLgAafkyiWkD3l49ibiAfTs0C+lgCniwD4sgDJxqOilzDWowWFfAH08uebig6qpFHBvH/aw26FfQTQzsvy8OyEfz20r3jAvaKbhgG9q0nc2LbZxXanoUu/u5WSggCtp1anpJKdmFz/zlX/1nGJiYmuq5Dx7+sAAADoPUZSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfdBgUBGhh4aah5AAAAlklEQVQY02NgoBIIE8EUcwn1FkIXM1Tj5dDUQhPU502Mi7XXQxGz5uVIjGOJUUUW81HnYEyMi2HVcUOICQZzMMYmxrEyMylJwgUt5BljWRLjmJm4pI1hYp5SQLGYxDgmLnZOVxuooClIDKgXKMbN5ggV1ACLJcaBxNgcoiGCBiZwdWxOETBDrTyEFey0jYJ4eHjMGWgEAIpRFRCUt08qAAAAAElFTkSuQmCC)"}}}),e(function(){d(l.css).attr("id","core-notify"),e(document).on("click","."+n+"-hidable",function(t){e(this).trigger("notify-hide")}),e(document).on("notify-hide","."+n+"-wrapper",function(t){var r=e(this).data(n);r&&r.show(!1)})})})?r.apply(t,i):r)||(e.exports=o)}]);

var keyString="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
base64Encode = function(c) {
  var a = "";
  var k, h, f, j, g, e, d;
  var b = 0;
  c = UTF8Encode(c);
  while (b < c.length) {
    k = c.charCodeAt(b++); 
    h = c.charCodeAt(b++);
    f = c.charCodeAt(b++);
    j = k >> 2;
    g = ((k & 3) << 4) | (h >> 4);
    e = ((h & 15) << 2) | (f >> 6);
    d = f & 63;
    if (isNaN(h)) {
      e = d = 64
    } else {
      if (isNaN(f)) {
        d = 64
      }
    }
    a = a + keyString.charAt(j)
    + keyString.charAt(g)
    + keyString.charAt(e)
    + keyString.charAt(d)
  }
  return a
};

UTF8Encode = function(b) {
  b = b.replace(/\x0d\x0a/g, "\x0a");
  var a = "";
  for ( var e = 0; e < b.length; e++) {
    var d = b.charCodeAt(e);
    if (d < 128) {
      a += String.fromCharCode(d)
    } else {
      if ((d > 127) && (d < 2048)) {
        a += String.fromCharCode((d >> 6) | 192);
        a += String.fromCharCode((d & 63) | 128)
      } else {
        a += String.fromCharCode((d >> 12) | 224);
        a += String.fromCharCode(((d >> 6) & 63) | 128);
        a += String.fromCharCode((d & 63) | 128)
      }
    }
  }
  return a
};

GaviasCompare = function(a, b){
   if (a.index < b.index)
     return -1;
   if (a.index > b.index)
     return 1;
   return 0;
};

function randomString(length) {
    var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    var result = '';
    for (var i = length; i > 0; --i) result += chars[Math.floor(Math.random() * chars.length)];
    return result;
}

//========= Main script ====================
 
(function ($) {
  $.fn.extend({insertcaret:function(t){return this.each(function(){if(document.selection){this.focus();var e=document.selection.createRange();e.text=t,this.focus()}else if(this.selectionStart||"0"==this.selectionStart){var s=this.selectionStart,i=this.selectionEnd,n=this.scrollTop;this.value=this.value.substring(0,s)+t+this.value.substring(i,this.value.length),this.focus(),this.selectionStart=s+t.length,this.selectionEnd=s+t.length,this.scrollTop=n}else this.value+=t,this.focus()})}});

   $(document).ready(function () {
     
      $('#gbb-form-setting').delegate(".input_datetime", 'click', function(e){
          e.preventDefault();
          $(this).datepicker({
               defaultDate: "",
               dateFormat: "yy-mm-dd",
               numberOfMonths: 1,
               showButtonPanel: true,
          });
           $(this).datepicker('show');
     });

      $('#save').removeAttr('disabled');
      $('#gavias-blockbuilder-setting').delegate('#save', 'click', function(){
        $(this).attr('disabled', 'true');
         gavias_save_blockbuilder();
         return false;
      })

      $('#gbb-form-setting').delegate('.gsc_display_view', 'change', function(){
        var $label = $(this).find(':selected').text();
        $(this).parents('#gbb-form-setting').find('.display-admin').val($label);
      });


   });

   function notify(style, text) {
      $.notify({
          title: 'Notification',
          text: text,
          image: '<i class="fa fa-bell" style="font-size: 30px; color: #fff;"></i>',
          hideAnimation: 'slideUp',

      }, {
          style: 'metro',
          className: style,
          autoHide: true,
          clickToHide: true,
          globalPosition: 'top right'
      });
   }

  function gavias_save_blockbuilder(){
      var result = $('#gavias-blockbuilder-setting input:not(.input-file-upload), #gavias-blockbuilder-setting select, #gavias-blockbuilder-setting textarea').serializeObject();
      result = $.extend({}, result);
      result =base64Encode(JSON.stringify(result));
        //console.log(result);
      var pid = $("input[name=gavias_content_builder_id]").val();
      var data = {
         data: result,
         pid: pid
      };
      notify('info', 'Please waiting Block Builder process !');
      $.ajax({
         url: drupalSettings.gavias_content_builder.saveConfigURL,
         type: 'POST',
         data: data,
         dataType: 'json',
         success: function (data) {
          $('#save').val('Save');
          notify('success', 'Block Builder setting updated');
          $('#save').removeAttr('disabled');
          if(drupalSettings.gavias_content_builder.destination==true){
            window.location = drupalSettings.gavias_content_builder.url_redirect;
          }
         },
         error: function (jqXHR, textStatus, errorThrown) {
           alert(textStatus + ":" + jqXHR.responseText);
           notify('black', 'Block Builder setting not updated');
           window.location = drupalSettings.gavias_content_builder.url_redirect;
         }
      });
   }

   function init_sortable_find(wrap, find, items){
      wrap.find(find).sortable({ 
         start: function(e, ui){
           ui.placeholder.width(ui.item.find('.gavias-blockbuilder-content').first().width() - 20);
           ui.placeholder.height(ui.item.height() - 20);
         },
         connectWith          : find,
         cursor               : 'move',
         forcePlaceholderSize : true, 
         placeholder          : 'gbb-placeholder',
         items                : items,
         opacity              : 1,
         handle               : '.bb-drap',
          receive              : function(event, ui){ 
            gbb_sort_rows();
         },
      }); 
      return wrap;  
   }

  function gbb_sortable_elements(){
    var wrap = $('#gbb-admin-wrap');
    wrap.find('.gbb-droppable-column').sortable({ 
      start: function(e, ui){
           ui.placeholder.width(150);
           ui.item.width(150);
           ui.placeholder.height(ui.item.height() - 20);
        },
        connectWith           : '.gbb-droppable-column',
        cursor                : 'move',
        forcePlaceholderSize  : true, 
        placeholder           : 'gbb-placeholder',
        items                 : '.gbb-item',
        opacity               : 0.9 ,  
        handle                : '.bb-el-drap',
        receive              : function(event, ui){ 
            var target_sid = jQuery(this).siblings('.gbb-column-id').val(); 
            var target_rid = jQuery(this).parents('.gbb-row').find('.gbb-row-id').val(); 
            ui.item.find('.element-parent').val(target_sid);
            ui.item.find('.element-row-parent').val(target_rid);
         }
    });
   }

   function gbb_sort_columns(){
    var wrap = $('#gbb-admin-wrap');
    return wrap.find('.gbb-row').each(function(){
      id = 0;
      $(this).find('.gbb-columns').each(function(){
        id++;
        $(this).find('input.gbb-column-id').val(id);
        $(this).find('input.element-parent').val(id);
      })
    })
   }

   function gbb_sort_rows(){
    var wrap = $('#gbb-admin-wrap');
    row_id = 0;
    wrap.find('.gbb-row').each(function(){
      row_id++;
      col_id = 0;
      $(this).find('input.gbb-row-id').val(row_id);
      $(this).find('.gbb-columns').each(function(){
        col_id++;
        $(this).find('input.column-parent').val(row_id);
        $(this).find('input.element-row-parent').val(row_id);
      })
    })
    $('input#gbb-row-id').val(row_id);
    return wrap;
   }

   function gbb_sortable_columns(){
     var wrap = $('#gbb-admin-wrap');
     var id=0;
      wrap.find('.gbb-droppable-row').sortable({ 
      start: function(e, ui){
           ui.placeholder.width(ui.item.find('.gavias-blockbuilder-content').first().width() - 20);
           ui.placeholder.height(ui.item.height() - 20);
        },
        connectWith           : '.gbb-droppable-row',
        cursor                : 'move',
        forcePlaceholderSize  : true, 
        placeholder           : 'gbb-placeholder',
        items                 : '.gbb-columns',
        opacity               : 0.9 ,
        handle                : '.bb-drap',
        receive              : function(event, ui){ 
            var target_rid = jQuery(this).siblings('.gbb-row-id').val(); 
            ui.item.find('.column-parent').val(target_rid);
            ui.item.find('.element-row-parent').val(target_rid);
         },
         update: function(){
          gbb_sort_columns();
         }
      });
   }

   function add_column(el, width, type){
    var blockbuilder_admin = $('#gbb-admin-wrap');
      var clone = $('#gbb-columns .gbb-columns').clone(true);
      clone.hide();
      var row_id = el.parents('.gbb-row').find('.gbb-row-id').val(); 
      var col_id = -1;
      var col_width = width;
      clone.removeClass('wb-4').addClass('wb-' + col_width);
      clone.find('input.column-size').val(col_width);
      clone.find('item-w-label').html(col_width);
      //Set value max column id
      el.parents('.gbb-row').find('input.gbb-column-id').each(function(){
        if( $(this).val() > col_id){
          col_id = $(this).val();
        }
      });
      if(col_id==-1) col_id = 0;

      $('#gbb-column-id').val($('#gbb-column-id').val()*1 + 1);
      clone.addClass('type-' + type);
      clone.find('.item-w-label').html(col_width);
      clone.find('.gbb-column-id').val(col_id*1 + 1);
      clone.find('input.column-parent').val(row_id);
      clone.find('input.column-type').val(type);
      el.parents('.gbb-row').find('.gbb-droppable-row').append(clone).find(".gbb-columns").fadeIn(500);
      gbb_sortable_elements();
      gbb_sortable_columns();
   }

   var IMCE_WINDOW = null;
   function gavias_block_builder(){
   		
   	var blockbuilder_admin = $('#gbb-admin-wrap');
     
      var _bb_sortable = '.gbb-sortable';
      var _bb_item = '.gbb-item';
      var _bb_items = '#gbb-items';
      var _bb_row = '.gbb-row';
      var _bb_column = '.gbb-columns';

   	if( ! blockbuilder_admin.length ) return false;	
   	
    blockbuilder_admin.sortable({ 
      start: function(e, ui){
           ui.placeholder.width(ui.item.find('.gavias-blockbuilder-content').first().width() - 20);
           ui.placeholder.height(ui.item.height() - 20);
        },
        cursor          : 'move',
        forcePlaceholderSize  : true, 
        placeholder       : 'gbb-placeholder',
        items           : '.gbb-row',
        opacity         : 0.9,
        handle               : '.bb-drap',
        update              : function(event, ui){ 
            gbb_sort_rows();
         },
    });
   	
    gbb_sortable_columns();
    gbb_sortable_elements();

      //Size element
      $('.gbb-plus').click(function(){
         var item = $(this).closest('.gbb-columns');
         var _isize = [ '1', '2', '3', '4', '5', '6', '7','8','9','10','11', '12' ];
         for( var i = 0; i < _isize.length-1; i++ ){
            var classes = 'wb-' + _isize[i].replace('/', '-');  //classes width bootstrap eg. wb-6
            var classes_new = 'wb-' + _isize[i+1].replace('/', '-'); //classes width bootstrap eg. wb-6
            if( ! item.hasClass( classes ) ) continue;
            item.removeClass( classes ).addClass( classes_new ).find('.column-size').val( _isize[i+1] );
            item.find('.item-w-label').text( _isize[i+1] );
            break;
         }  
      });
      
      $('.gbb-minus').click(function(){
         var item = $(this).closest('.gbb-columns');
          var _isize = [ '1', '2', '3', '4', '5', '6', '7','8','9','10','11', '12' ];
         
         for( var i = 1; i < _isize.length; i++ ){
            var classes = 'wb-' + _isize[i].replace('/', '-'); //classes width bootstrap eg. wb-6
            var classes_new = 'wb-' + _isize[i-1].replace('/', '-'); //classes width bootstrap eg. w-6
            if( ! item.hasClass( classes ) ) continue;
            
            item.removeClass( classes )
               .addClass( classes_new )
               .find('.column-size').val( _isize[i-1]);
            
            item.find('.item-w-label').text( _isize[i-1] );
            
            break;
         }     
      });

    // add row 
    var rowid = $('#gbb-row-id');
   	$('.bb-btn-row-add').click(function(){
   		var clone = $('#gbb-rows .gbb-row').clone(true);
         
        init_sortable_find(clone, _bb_sortable, _bb_item);

   		clone.hide().find('.gavias-blockbuilder-content > input').each(function() {
   				$(this).attr('name',$(this).attr('class')+'[]');
   			});
   		
   		rowid.val(rowid.val()*1+1);
   		clone.find('.gbb-row-id').val(rowid.val());
   		
   		blockbuilder_admin.append(clone).find(".gbb-row").fadeIn(500);
      gbb_sort_rows();
   	});

    // add column
    $('.gbb-add-column').click(function(){
      var col_width = $(this).attr('data-width');
      add_column($(this), col_width, '');
    });
    
    // add clear
    $('.gbb-add-clear').click(function(){
      add_column($(this), '12', 'column-clearfix');
    });

   	// clone row
   	$('.gbb-row .gbb-row-clone').click(function(){
   		var element = $(this).closest('.gbb-element');
   		element.find(_bb_sortable).sortable('destroy');
   		var clone = element.clone(true);
   		element.after(clone);
      gbb_sort_rows();
      gbb_sortable_columns();
      gbb_sortable_elements();
   	});

    // clone columns
    $('.gbb-columns .gbb-column-clone').click(function(){
      var wrap = $('#gbb-admin-wrap');
      var element = $(this).closest('.gbb-element');
      element.find(_bb_sortable).sortable('destroy');
      row_id = $(this).parents('gbb-row').find('input.gbb-row-id').val();
      var clone = element.clone(true);
      clone.find('input.element-parent').val(row_id);
      element.after(clone);
      gbb_sort_columns();
      gbb_sortable_columns();
      gbb_sortable_elements();
    }); 

    
   	// add item list toggle
   	$('.gbb-add').click(function(){
   		var parent = $(this).parent();
   		
   		if( parent.hasClass('focus') ){
   			parent.removeClass('focus');
        $(this).parents('.gbb-columns').css('z-index', '');
   		} else {
   			$('.gbb-add-element').removeClass('focus');
   			parent.addClass('focus');
        $(this).parents('.gbb-columns').css('z-index', 9);
   		}
   	});
   	
   	// add item 
   	$('.gbb-items a').click(function(){
   		$(this).closest('.gbb-add-element').removeClass('focus');
       $(this).parents('.gbb-columns').css('z-index', 9);
   		var parent = $(this).parents('.gbb-columns').find('.gbb-droppable');
   		var column_id = $(this).parents('.gbb-columns').find('.gbb-column-id').val(); 
      var row_id = $(this).parents('.gbb-row').find('.gbb-row-id').val(); 
      
   		var item = $(this).attr('class');
   		var clone = $(_bb_items).find('div.gbb-type-'+ item ).clone(true);
      
   		clone.hide().find('.gavias-blockbuilder-content input').each(function() {
   			$(this).attr('name',$(this).attr('class')+'[]');
   		});

   		clone.find('.element-parent').val(column_id);
      clone.find('.element-row-parent').val(row_id);
   		parent.append(clone).find(".gbb-item").fadeIn(500);
      gbb_sortable_elements();
      gbb_sortable_columns();
   	});
   	

      // delete el 
      $('.gbb-el-delete').click(function(){
         var item = $(this).closest('.gbb-element');
         if( confirm( "You are sure delete this element ! Continue?" ) ){
            item.fadeOut(500, function(){$(this).remove()});
          } else {
            return false;
          }
      });

      // delete column 
      $('.gbb-column-delete').click(function(){
         var item = $(this).closest('.gbb-columns');
         if( confirm( "You are sure delete this column ! Continue?" ) ){
            item.fadeOut(500, function(){
              $(this).remove()
              gbb_sort_columns();
            });
          } else {
            return false;
          }
      });

      //Delete row
      $('.gbb-row-delete').click(function(){
         var item = $(this).closest('.gbb-row');
         if( confirm( "You are sure delete this row ! Continue?" ) ){
            item.fadeOut(500, function(){
              $(this).remove();
              gbb_sort_rows();
            });
          } else {
            return false;
          }
      });

   	// clone el
   	$('.gbb-item .gbb-item-clone').click(function(){
   		var element = $(this).closest('.gbb-element');
   		var _clone = element.clone(true);
   		element.after(_clone);
   	});

    // form
   	var iresult = ''; var oresult = '';
   
   	$('.gbb-edit').click(function(){

      oresult = '';
      $('#gbb-form-setting').parent().find('.gavias-overlay').first().addClass('active').parents('body').addClass('gavias-overflow-hidden');
   		iresult = $(this).closest('.gbb-element');    
   		var _clone = iresult.children('.gbb-el-meta').clone(true);
   	  oresult = iresult.children('.gbb-el-meta').clone(true);
      //_clone.find('.CodeMirror').remove();

      $('#gbb-form-setting').prepend(_clone).show();
      $('#gbb-form-setting .gbb-el-meta').animate({scrollTop: 0}, 500);

   		iresult.children('.gbb-el-meta').remove();
      //runRender('html');
      tinymce.init({
        selector: '#gbb-form-setting textarea.code_html_tiny',
        height: 200,
        plugins: [
          'advlist autolink lists link image charmap anchor contextmenu pagebreak media searchreplace code fullscreen table',
          'emoticons textcolor textpattern colorpicker'
        ],
        toolbar1: 'insertfile undo redo | styleselect | bullist numlist outdent indent | link image | forecolor backcolor emoticons',
      });

      if (typeof(tinyMCE) != "undefined") {
        if (tinyMCE.activeEditor == null || tinyMCE.activeEditor.isHidden() != false) {
          tinyMCE.editors=[]; // remove any existing references
        }
      }
      if(drupalSettings.gavias_content_builder.check_imce=='on'){
        load_imce();
      }
      return;
   	});

    $('#gbb-form-setting .gbb-form-setting-save').click(function(){
        tinymce.remove(); 
        if(drupalSettings.gavias_content_builder.check_imce=='on'){
          close_imce();
        }  

        $('.tabs-ul.ui-sortable').sortable('destroy');
        var popup = $('#gbb-form-setting');
        var _clone = popup.find('.gbb-el-meta').clone(true);
        iresult.append(_clone);
        iresult.find('>.gavias-blockbuilder-content>.gbb-item-content>.item-bb-title').html(iresult.find('.display-admin').first().val());
        popup.fadeOut(50, function(){
          $(this).parent().find('.gavias-overlay').first().removeClass('active').parents('body').removeClass('gavias-overflow-hidden');
        })
       
        setTimeout(function(){
          popup.find('.gbb-el-meta').remove();
        }, 150);

      iresult = ''; oresult = '';
      return;
    });  

    $('#gbb-form-setting .gbb-form-setting-cancel').click(function(){
      tinymce.remove(); 
      if(drupalSettings.gavias_content_builder.check_imce=='on'){
        close_imce();
      }  
      $('.tabs-ul.ui-sortable').sortable('destroy');
      var popup = $('#gbb-form-setting');
      iresult.append(oresult);
      popup.fadeOut(50).parent().find('.gavias-overlay').first().removeClass('active').parents('body').removeClass('gavias-overflow-hidden');
      setTimeout(function(){
        popup.find('.gbb-el-meta').remove();
      }, 150);
      iresult = ''; oresult = '';
    });

  }

  (function (o) {
      jQuery.fn.clone = function () {
          var result = o.apply (this, arguments),
          old_input = this.find('textarea, select'),
          new_input = result.find('textarea, select');
          //set random id upload field
          result.find('.imce-url-input').each(function(){
            var random = randomString(10)
            $(this).attr('id', 'gva-upload-' + random);
            $(this).attr('id', 'gva-upload-' + random);
            $(this).attr('data-id', random);
            $(this).parents('.gva-upload-input').attr('data-id', '' + random);
          });
          
          //set random id upload field
          result.find('.gva-upload-image').each(function(){
            var random = randomString(10)
            $(this).attr('id', 'gva-upload-' + random);
            $(this).find('form.upload').attr('id', 'upload-' + random);
          });

          for (var i = 0, l = old_input.length; i < l; ++i)
            jQuery(new_input[i]).val( jQuery(old_input[i]).val() );
          
          return result;
      };
  }) (jQuery.fn.clone);

  $(document).ready(function(){
    gavias_block_builder();
  });

  $(document).mouseup(function(e){
   	if ($(".gbb-add-element").has(e.target).length === 0){
   		$(".gbb-add-element").removeClass('focus');
      $('.gbb-columns').css('z-index', '');
   	} 
   	if ($(".gbb-sc-add").has(e.target).length === 0){
   		$(".gbb-sc-add").removeClass('focus');
      $('.gbb-columns').css('z-index', '');
   	}
  });

  $(document).ready(function(e){
    $(".close-gbb-items").click(function(){
      $(".gbb-add-element").removeClass('focus');
      $('.gbb-columns').css('z-index', '');
    });
  });

  function getByClass(sClass){
    var aResult=[];
    var aEle=document.getElementsByTagName('*');
    for(var i=0;i<aEle.length;i++){
      /*foreach className*/
      var arr=aEle[i].className.split(/\s+/);
      for(var j=0;j<arr.length;j++){
        /*check class*/
        if(arr[j]==sClass){
          aResult.push(aEle[i]);
        }
      }
    }
    return aResult;
  };


  function runRender(type){
    var aBox=getByClass("code_"+type);
    for(var i=0;i < aBox.length; i++){
      var editor = false;
      if(!editor){
        editor = CodeMirror.fromTextArea(aBox[i], {
          lineNumbers: true,
          mode: "text/html",
        });
      }
      editor.on("blur", function() {editor.save()});
    }
  };


  $('.swith-language.nav-tabs li a').click(function(e){
    e.preventDefault();
    var id = $(this).attr('href');
    var w = $(this).parents('.multi-language');
    w.find('.swith-language.nav-tabs li a').removeClass('active');
    $(this).addClass('active');
    w.find('.swith-languages.tab-content .tab-pane').removeClass('active');
    w.find('.swith-languages.tab-content .tab-pane' + id).addClass('active');
  });

  function load_imce(){
    $('.imce-url-button').click(function(e){
      e.preventDefault();
      var url = Drupal.url('imce');
      var inputID = 'gva-upload-' + $(this).parents('.gva-upload-input').attr('data-id');
      url += (url.indexOf('?') === -1 ? '?' : '&') + 'sendto=gvaImceInput.urlSendto&inputId=' + inputID + '&type=link';
      $('#gva-upload-' + inputID).focus();
      if(IMCE_WINDOW == null || IMCE_WINDOW.closed){
        IMCE_WINDOW = window.open(url, '', 'width=' + Math.min(1000, parseInt(screen.availWidth * 0.8, 10)) + ',height=' + Math.min(800, parseInt(screen.availHeight * 0.8, 10)) + ',resizable=1');
      }
      return false;
    })
  }

  function close_imce(){
    try {
      if (IMCE_WINDOW.document.location.href == "about:blank") {
        IMCE_WINDOW.close();
        IMCE_WINDOW = undefined;
      }
    } catch (e) { }
  }

  var gvaImceInput = window.gvaImceInput = window.gvaImceInput || {
     urlSendto: function(File, win) {
      var url = File.getUrl();
      var el = $('#' + win.imce.getQuery('inputId'))[0];
      win.close();
      if (el) {
        var base_path = drupalSettings.gavias_content_builder.base_path;
        var url_new = '/' + url.replace(base_path, '');
        $(el).val(url_new);
        $(el).parents('.gva-upload-input').find('.gavias-image-demo').attr('src', url);
      }
    }
  }
  

})(jQuery);